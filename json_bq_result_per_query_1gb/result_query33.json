{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anonfbd8aebc_a3ea_4a21_aa0a_d1d2d76434d0" }, "priority": "INTERACTIVE", "query": "with ss as (\n select\n i_manufact_id,sum(ss_ext_sales_price) total_sales\n from\n \tstore_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_manufact_id in (select\n i_manufact_id\nfrom\n item\nwhere i_category in ('Electronics'))\n and ss_item_sk = i_item_sk\n and ss_sold_date_sk = d_date_sk\n and d_year = 1998\n and d_moy = 5\n and ss_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_manufact_id),\n cs as (\n select\n i_manufact_id,sum(cs_ext_sales_price) total_sales\n from\n \tcatalog_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_manufact_id in (select\n i_manufact_id\nfrom\n item\nwhere i_category in ('Electronics'))\n and cs_item_sk = i_item_sk\n and cs_sold_date_sk = d_date_sk\n and d_year = 1998\n and d_moy = 5\n and cs_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_manufact_id),\n ws as (\n select\n i_manufact_id,sum(ws_ext_sales_price) total_sales\n from\n \tweb_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_manufact_id in (select\n i_manufact_id\nfrom\n item\nwhere i_category in ('Electronics'))\n and ws_item_sk = i_item_sk\n and ws_sold_date_sk = d_date_sk\n and d_year = 1998\n and d_moy = 5\n and ws_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5\n group by i_manufact_id)\n select i_manufact_id ,sum(total_sales) total_sales\n from (select benchmark.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ss \n union all\n select benchmark.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from cs \n union all\n select benchmark.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ws) tmp1\n group by i_manufact_id\n order by total_sales\n limit 100\n;", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "QK/uz86on+qj8nrFnDA+Nw==", "id": "test-project-364309:europe-west1.query33_1665768320", "jobReference": { "jobId": "query33_1665768320", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query33_1665768320?location=europe-west1", "statistics": { "creationTime": "1665768321250", "endTime": "1665768322039", "finalExecutionDurationMs": "568", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "200610043", "performanceInsights": { "avgPreviousExecutionMs": "593" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.03313253012048193, "computeRatioMax": 0.03313253012048193, "endMs": "1665768321463", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.018072289156626505, "readRatioMax": 0.018072289156626505, "recordsRead": "18000", "recordsWritten": "1811", "shuffleOutputBytes": "16299", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665768321431", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$51:i_manufact_id, $50:i_category", "FROM item", "WHERE in($50, 'Electronics')" ] }, { "kind": "WRITE", "substeps": [ "$51", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0030120481927710845, "waitRatioMax": 0.0030120481927710845, "writeMsAvg": "18", "writeMsMax": "18", "writeRatioAvg": 0.05421686746987952, "writeRatioMax": 0.05421686746987952 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.045180722891566265, "computeRatioMax": 0.045180722891566265, "endMs": "1665768321487", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.012048192771084338, "readRatioMax": 0.012048192771084338, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "323696", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665768321444", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_manufact_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$40, $41", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0030120481927710845, "waitRatioMax": 0.0030120481927710845, "writeMsAvg": "29", "writeMsMax": "29", "writeRatioAvg": 0.08734939759036145, "writeRatioMax": 0.08734939759036145 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.045180722891566265, "computeRatioMax": 0.045180722891566265, "endMs": "1665768321498", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.018072289156626505, "readRatioMax": 0.018072289156626505, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "43", "startMs": "1665768321457", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110:ca_address_sk, $111:ca_gmt_offset", "FROM customer_address", "WHERE equal($111, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0030120481927710845, "waitRatioMax": 0.0030120481927710845, "writeMsAvg": "27", "writeMsMax": "27", "writeRatioAvg": 0.08132530120481928, "writeRatioMax": 0.08132530120481928 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.02710843373493976, "computeRatioMax": 0.02710843373493976, "endMs": "1665768321520", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.02108433734939759, "readRatioMax": 0.02108433734939759, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665768321487", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140:d_date_sk, $141:d_year, $142:d_moy", "FROM date_dim", "WHERE and(equal($141, 1998), equal($142, 5))" ] }, { "kind": "WRITE", "substeps": [ "$140", "TO __stage03_output" ] } ], "waitMsAvg": "18", "waitMsMax": "18", "waitRatioAvg": 0.05421686746987952, "waitRatioMax": 0.05421686746987952, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.04819277108433735, "writeRatioMax": 0.04819277108433735 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.02710843373493976, "computeRatioMax": 0.02710843373493976, "endMs": "1665768321538", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.015060240963855422, "readRatioMax": 0.015060240963855422, "recordsRead": "18000", "recordsWritten": "1811", "shuffleOutputBytes": "16299", "shuffleOutputBytesSpilled": "0", "slotMs": "40", "startMs": "1665768321499", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$31:i_manufact_id, $30:i_category", "FROM item", "WHERE in($30, 'Electronics')" ] }, { "kind": "WRITE", "substeps": [ "$31", "TO __stage05_output" ] } ], "waitMsAvg": "3", "waitMsMax": "3", "waitRatioAvg": 0.009036144578313253, "waitRatioMax": 0.009036144578313253, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.0391566265060241, "writeRatioMax": 0.0391566265060241 }, { "completedParallelInputs": "1", "computeMsAvg": "21", "computeMsMax": "21", "computeRatioAvg": 0.06325301204819277, "computeRatioMax": 0.06325301204819277, "endMs": "1665768321554", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.02710843373493976, "readRatioMax": 0.02710843373493976, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "323696", "shuffleOutputBytesSpilled": "0", "slotMs": "55", "startMs": "1665768321509", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:i_item_sk, $21:i_manufact_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0030120481927710845, "waitRatioMax": 0.0030120481927710845, "writeMsAvg": "23", "writeMsMax": "23", "writeRatioAvg": 0.06927710843373494, "writeRatioMax": 0.06927710843373494 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.03614457831325301, "computeRatioMax": 0.03614457831325301, "endMs": "1665768321548", "id": "7", "name": "S07: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.015060240963855422, "readRatioMax": 0.015060240963855422, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "26", "startMs": "1665768321521", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90:ca_address_sk, $91:ca_gmt_offset", "FROM customer_address", "WHERE equal($91, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage07_output" ] } ], "waitMsAvg": "0", "waitMsMax": "0", "waitRatioAvg": 0, "waitRatioMax": 0, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.04216867469879518, "writeRatioMax": 0.04216867469879518 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.02710843373493976, "computeRatioMax": 0.02710843373493976, "endMs": "1665768321562", "id": "8", "name": "S08: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.015060240963855422, "readRatioMax": 0.015060240963855422, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "24", "startMs": "1665768321534", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$130:d_date_sk, $131:d_year, $132:d_moy", "FROM date_dim", "WHERE and(equal($131, 1998), equal($132, 5))" ] }, { "kind": "WRITE", "substeps": [ "$130", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0030120481927710845, "waitRatioMax": 0.0030120481927710845, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.04819277108433735, "writeRatioMax": 0.04819277108433735 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.030120481927710843, "computeRatioMax": 0.030120481927710843, "endMs": "1665768321602", "id": "10", "name": "S0A: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.018072289156626505, "readRatioMax": 0.018072289156626505, "recordsRead": "18000", "recordsWritten": "1811", "shuffleOutputBytes": "16299", "shuffleOutputBytesSpilled": "0", "slotMs": "45", "startMs": "1665768321559", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$11:i_manufact_id, $10:i_category", "FROM item", "WHERE in($10, 'Electronics')" ] }, { "kind": "WRITE", "substeps": [ "$11", "TO __stage0A_output" ] } ], "waitMsAvg": "0", "waitMsMax": "0", "waitRatioAvg": 0, "waitRatioMax": 0, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.045180722891566265, "writeRatioMax": 0.045180722891566265 }, { "completedParallelInputs": "1", "computeMsAvg": "21", "computeMsMax": "21", "computeRatioAvg": 0.06325301204819277, "computeRatioMax": 0.06325301204819277, "endMs": "1665768321626", "id": "11", "name": "S0B: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.015060240963855422, "readRatioMax": 0.015060240963855422, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "323696", "shuffleOutputBytesSpilled": "0", "slotMs": "46", "startMs": "1665768321571", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_manufact_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage0B_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0030120481927710845, "waitRatioMax": 0.0030120481927710845, "writeMsAvg": "25", "writeMsMax": "25", "writeRatioAvg": 0.07530120481927711, "writeRatioMax": 0.07530120481927711 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.04216867469879518, "computeRatioMax": 0.04216867469879518, "endMs": "1665768321623", "id": "12", "name": "S0C: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.018072289156626505, "readRatioMax": 0.018072289156626505, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "45", "startMs": "1665768321583", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:ca_address_sk, $71:ca_gmt_offset", "FROM customer_address", "WHERE equal($71, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage0C_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0030120481927710845, "waitRatioMax": 0.0030120481927710845, "writeMsAvg": "11", "writeMsMax": "11", "writeRatioAvg": 0.03313253012048193, "writeRatioMax": 0.03313253012048193 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.04216867469879518, "computeRatioMax": 0.04216867469879518, "endMs": "1665768321667", "id": "13", "name": "S0D: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.024096385542168676, "readRatioMax": 0.024096385542168676, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "83", "startMs": "1665768321597", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120:d_date_sk, $121:d_year, $122:d_moy", "FROM date_dim", "WHERE and(equal($121, 1998), equal($122, 5))" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage0D_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0030120481927710845, "waitRatioMax": 0.0030120481927710845, "writeMsAvg": "53", "writeMsMax": "53", "writeRatioAvg": 0.15963855421686746, "writeRatioMax": 0.15963855421686746 }, { "completedParallelInputs": "1", "computeMsAvg": "332", "computeMsMax": "332", "computeRatioAvg": 1, "computeRatioMax": 1, "endMs": "1665768321836", "id": "15", "inputStages": [ "2", "1", "3", "0" ], "name": "S0F: Join+", "parallelInputs": "1", "readMsAvg": "16", "readMsMax": "16", "readRatioAvg": 0.04819277108433735, "readRatioMax": 0.04819277108433735, "recordsRead": "757472", "recordsWritten": "630", "shuffleOutputBytes": "16380", "shuffleOutputBytesSpilled": "0", "slotMs": "349", "startMs": "1665768321622", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$100:ws_sold_date_sk, $101:ws_item_sk, $102:ws_bill_addr_sk, $103:ws_ext_sales_price", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$140", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$110", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$40, $41", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$51", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $400 := $390", "$230 := SUM($391)" ] }, { "kind": "JOIN", "substeps": [ "$390 := $381, $391 := $380", "SEMI HASH JOIN EACH WITH ALL ON $381 = $51" ] }, { "kind": "JOIN", "substeps": [ "$380 := $371, $381 := $41", "INNER HASH JOIN EACH WITH ALL ON $370 = $40" ] }, { "kind": "JOIN", "substeps": [ "$370 := $360, $371 := $362", "INNER HASH JOIN EACH WITH ALL ON $361 = $110" ] }, { "kind": "JOIN", "substeps": [ "$360 := $101, $361 := $102, $362 := $103", "INNER HASH JOIN EACH WITH ALL ON $100 = $140" ] }, { "kind": "WRITE", "substeps": [ "$400, $230", "TO __stage0F_output", "BY HASH($400)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0030120481927710845, "waitRatioMax": 0.0030120481927710845, "writeMsAvg": "10", "writeMsMax": "10", "writeRatioAvg": 0.030120481927710843, "writeRatioMax": 0.030120481927710843 }, { "completedParallelInputs": "5", "computeMsAvg": "144", "computeMsMax": "199", "computeRatioAvg": 0.43373493975903615, "computeRatioMax": 0.5993975903614458, "endMs": "1665768321802", "id": "16", "inputStages": [ "5", "8", "6", "7" ], "name": "S10: Join+", "parallelInputs": "5", "readMsAvg": "21", "readMsMax": "30", "readRatioAvg": 0.06325301204819277, "readRatioMax": 0.09036144578313253, "recordsRead": "1631988", "recordsWritten": "2316", "shuffleOutputBytes": "60216", "shuffleOutputBytesSpilled": "0", "slotMs": "1178", "startMs": "1665768321625", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80:cs_sold_date_sk, $81:cs_bill_addr_sk, $82:cs_item_sk, $83:cs_ext_sales_price", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$130", "FROM __stage08_output" ] }, { "kind": "READ", "substeps": [ "$90", "FROM __stage07_output" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$31", "FROM __stage05_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $340 := $330", "$220 := SUM($331)" ] }, { "kind": "JOIN", "substeps": [ "$330 := $321, $331 := $320", "SEMI HASH JOIN EACH WITH ALL ON $321 = $31" ] }, { "kind": "JOIN", "substeps": [ "$320 := $311, $321 := $21", "INNER HASH JOIN EACH WITH ALL ON $310 = $20" ] }, { "kind": "JOIN", "substeps": [ "$310 := $301, $311 := $302", "INNER HASH JOIN EACH WITH ALL ON $300 = $90" ] }, { "kind": "JOIN", "substeps": [ "$300 := $81, $301 := $82, $302 := $83", "INNER HASH JOIN EACH WITH ALL ON $80 = $130" ] }, { "kind": "WRITE", "substeps": [ "$340, $220", "TO __stage10_output", "BY HASH($340)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0030120481927710845, "waitRatioMax": 0.0030120481927710845, "writeMsAvg": "9", "writeMsMax": "20", "writeRatioAvg": 0.02710843373493976, "writeRatioMax": 0.060240963855421686 }, { "completedParallelInputs": "6", "computeMsAvg": "180", "computeMsMax": "258", "computeRatioAvg": 0.5421686746987951, "computeRatioMax": 0.7771084337349398, "endMs": "1665768321841", "id": "17", "inputStages": [ "10", "11", "12", "13" ], "name": "S11: Join+", "parallelInputs": "6", "readMsAvg": "17", "readMsMax": "24", "readRatioAvg": 0.05120481927710843, "readRatioMax": 0.07228915662650602, "recordsRead": "3108932", "recordsWritten": "3391", "shuffleOutputBytes": "87974", "shuffleOutputBytesSpilled": "0", "slotMs": "1064", "startMs": "1665768321677", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:ss_sold_date_sk, $61:ss_item_sk, $62:ss_addr_sk, $63:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$120", "FROM __stage0D_output" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage0C_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$11", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $280 := $270", "$210 := SUM($271)" ] }, { "kind": "JOIN", "substeps": [ "$270 := $261, $271 := $260", "SEMI HASH JOIN EACH WITH ALL ON $261 = $11" ] }, { "kind": "JOIN", "substeps": [ "$260 := $251, $261 := $2", "INNER HASH JOIN EACH WITH ALL ON $250 = $1" ] }, { "kind": "JOIN", "substeps": [ "$250 := $240, $251 := $242", "INNER HASH JOIN EACH WITH ALL ON $241 = $70" ] }, { "kind": "JOIN", "substeps": [ "$240 := $61, $241 := $62, $242 := $63", "INNER HASH JOIN EACH WITH ALL ON $60 = $120" ] }, { "kind": "WRITE", "substeps": [ "$280, $210", "TO __stage11_output", "BY HASH($280)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0030120481927710845, "waitRatioMax": 0.0030120481927710845, "writeMsAvg": "4", "writeMsMax": "5", "writeRatioAvg": 0.012048192771084338, "writeRatioMax": 0.015060240963855422 }, { "completedParallelInputs": "3", "computeMsAvg": "12", "computeMsMax": "18", "computeRatioAvg": 0.03614457831325301, "computeRatioMax": 0.05421686746987952, "endMs": "1665768321901", "id": "18", "inputStages": [ "17", "16", "15" ], "name": "S12: Aggregate", "parallelInputs": "3", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "6337", "recordsWritten": "2017", "shuffleOutputBytes": "52442", "shuffleOutputBytesSpilled": "0", "slotMs": "116", "startMs": "1665768321860", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$280, $210", "FROM __stage11_output" ] }, { "kind": "READ", "substeps": [ "$340, $220", "FROM __stage10_output" ] }, { "kind": "READ", "substeps": [ "$400, $230", "FROM __stage0F_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $420 := $170", "$160 := SUM($171)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $290 := $280", "$180 := SUM($210)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $350 := $340", "$190 := SUM($220)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $410 := $400", "$200 := SUM($230)" ] }, { "kind": "WRITE", "substeps": [ "$160, $420", "TO __stage12_output", "BY HASH($420)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0030120481927710845, "waitRatioMax": 0.0030120481927710845, "writeMsAvg": "21", "writeMsMax": "27", "writeRatioAvg": 0.06325301204819277, "writeRatioMax": 0.08132530120481928 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.02108433734939759, "computeRatioMax": 0.02108433734939759, "endMs": "1665768321944", "id": "19", "inputStages": [ "18" ], "name": "S13: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "2017", "recordsWritten": "100", "shuffleOutputBytes": "2600", "shuffleOutputBytesSpilled": "0", "slotMs": "29", "startMs": "1665768321911", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $420", "FROM __stage12_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $430 := $420", "$150 := SUM($160)" ] }, { "kind": "WRITE", "substeps": [ "$440, $441", "TO __stage13_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0030120481927710845, "waitRatioMax": 0.0030120481927710845, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.0391566265060241, "writeRatioMax": 0.0391566265060241 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.02710843373493976, "computeRatioMax": 0.02710843373493976, "endMs": "1665768321963", "id": "20", "inputStages": [ "19" ], "name": "S14: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "2600", "shuffleOutputBytesSpilled": "0", "slotMs": "41", "startMs": "1665768321926", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$440, $441", "FROM __stage13_output" ] }, { "kind": "SORT", "substeps": [ "$440 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$450, $451", "TO __stage14_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0030120481927710845, "waitRatioMax": 0.0030120481927710845, "writeMsAvg": "12", "writeMsMax": "12", "writeRatioAvg": 0.03614457831325301, "writeRatioMax": 0.03614457831325301 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_address" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" } ], "statementType": "SELECT", "timeline": [ { "activeUnits": "2", "completedUnits": "27", "elapsedMs": "643", "estimatedRunnableUnits": "0", "pendingUnits": "2", "totalSlotMs": "3356" }, { "activeUnits": "2", "completedUnits": "29", "elapsedMs": "710", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "3427" } ], "totalBytesBilled": "201326592", "totalBytesProcessed": "200610043", "totalPartitionsProcessed": "0", "totalSlotMs": "3427", "transferredBytes": "0" }, "startTime": "1665768321290", "totalBytesProcessed": "200610043", "totalSlotMs": "3427" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anoncd5623d2_08d9_4cb3_a58e_a3a110a3c196" }, "priority": "INTERACTIVE", "query": "with ss as (\n select\n i_manufact_id,sum(ss_ext_sales_price) total_sales\n from\n \tstore_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_manufact_id in (select\n i_manufact_id\nfrom\n item\nwhere i_category in ('Electronics'))\n and ss_item_sk = i_item_sk\n and ss_sold_date_sk = d_date_sk\n and d_year = 1998\n and d_moy = 5\n and ss_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_manufact_id),\n cs as (\n select\n i_manufact_id,sum(cs_ext_sales_price) total_sales\n from\n \tcatalog_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_manufact_id in (select\n i_manufact_id\nfrom\n item\nwhere i_category in ('Electronics'))\n and cs_item_sk = i_item_sk\n and cs_sold_date_sk = d_date_sk\n and d_year = 1998\n and d_moy = 5\n and cs_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_manufact_id),\n ws as (\n select\n i_manufact_id,sum(ws_ext_sales_price) total_sales\n from\n \tweb_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_manufact_id in (select\n i_manufact_id\nfrom\n item\nwhere i_category in ('Electronics'))\n and ws_item_sk = i_item_sk\n and ws_sold_date_sk = d_date_sk\n and d_year = 1998\n and d_moy = 5\n and ws_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5\n group by i_manufact_id)\n select i_manufact_id ,sum(total_sales) total_sales\n from (select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ss \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from cs \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ws) tmp1\n group by i_manufact_id\n order by total_sales\n limit 100\n;", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "vn8Hqul6sSkbzkXXvIlIZA==", "id": "test-project-364309:europe-west1.query33_1665777287", "jobReference": { "jobId": "query33_1665777287", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query33_1665777287?location=europe-west1", "statistics": { "creationTime": "1665777288156", "endTime": "1665777289024", "finalExecutionDurationMs": "631", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "200610043", "performanceInsights": { "avgPreviousExecutionMs": "585" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.03488372093023256, "computeRatioMax": 0.03488372093023256, "endMs": "1665777288390", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.01744186046511628, "readRatioMax": 0.01744186046511628, "recordsRead": "18000", "recordsWritten": "1811", "shuffleOutputBytes": "16299", "shuffleOutputBytesSpilled": "0", "slotMs": "40", "startMs": "1665777288345", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$51:i_manufact_id, $50:i_category", "FROM item", "WHERE in($50, 'Electronics')" ] }, { "kind": "WRITE", "substeps": [ "$51", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0029069767441860465, "waitRatioMax": 0.0029069767441860465, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.046511627906976744, "writeRatioMax": 0.046511627906976744 }, { "completedParallelInputs": "1", "computeMsAvg": "24", "computeMsMax": "24", "computeRatioAvg": 0.06976744186046512, "computeRatioMax": 0.06976744186046512, "endMs": "1665777288411", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.023255813953488372, "readRatioMax": 0.023255813953488372, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "323696", "shuffleOutputBytesSpilled": "0", "slotMs": "60", "startMs": "1665777288358", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_manufact_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$40, $41", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0029069767441860465, "waitRatioMax": 0.0029069767441860465, "writeMsAvg": "20", "writeMsMax": "20", "writeRatioAvg": 0.05813953488372093, "writeRatioMax": 0.05813953488372093 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.03488372093023256, "computeRatioMax": 0.03488372093023256, "endMs": "1665777288403", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.01744186046511628, "readRatioMax": 0.01744186046511628, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "30", "startMs": "1665777288373", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110:ca_address_sk, $111:ca_gmt_offset", "FROM customer_address", "WHERE equal($111, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0029069767441860465, "waitRatioMax": 0.0029069767441860465, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.040697674418604654, "writeRatioMax": 0.040697674418604654 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.040697674418604654, "computeRatioMax": 0.040697674418604654, "endMs": "1665777288424", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "15", "readMsMax": "15", "readRatioAvg": 0.0436046511627907, "readRatioMax": 0.0436046511627907, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "31", "startMs": "1665777288386", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140:d_date_sk, $141:d_year, $142:d_moy", "FROM date_dim", "WHERE and(equal($141, 1998), equal($142, 5))" ] }, { "kind": "WRITE", "substeps": [ "$140", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0029069767441860465, "waitRatioMax": 0.0029069767441860465, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.020348837209302327, "writeRatioMax": 0.020348837209302327 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.029069767441860465, "computeRatioMax": 0.029069767441860465, "endMs": "1665777288452", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.020348837209302327, "readRatioMax": 0.020348837209302327, "recordsRead": "18000", "recordsWritten": "1811", "shuffleOutputBytes": "16299", "shuffleOutputBytesSpilled": "0", "slotMs": "31", "startMs": "1665777288418", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$31:i_manufact_id, $30:i_category", "FROM item", "WHERE in($30, 'Electronics')" ] }, { "kind": "WRITE", "substeps": [ "$31", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0029069767441860465, "waitRatioMax": 0.0029069767441860465, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.023255813953488372, "writeRatioMax": 0.023255813953488372 }, { "completedParallelInputs": "1", "computeMsAvg": "17", "computeMsMax": "17", "computeRatioAvg": 0.04941860465116279, "computeRatioMax": 0.04941860465116279, "endMs": "1665777288486", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "12", "readMsMax": "12", "readRatioAvg": 0.03488372093023256, "readRatioMax": 0.03488372093023256, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "323696", "shuffleOutputBytesSpilled": "0", "slotMs": "49", "startMs": "1665777288432", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:i_item_sk, $21:i_manufact_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0029069767441860465, "waitRatioMax": 0.0029069767441860465, "writeMsAvg": "20", "writeMsMax": "20", "writeRatioAvg": 0.05813953488372093, "writeRatioMax": 0.05813953488372093 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.0436046511627907, "computeRatioMax": 0.0436046511627907, "endMs": "1665777288491", "id": "7", "name": "S07: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.014534883720930232, "readRatioMax": 0.014534883720930232, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "42", "startMs": "1665777288449", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90:ca_address_sk, $91:ca_gmt_offset", "FROM customer_address", "WHERE equal($91, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0029069767441860465, "waitRatioMax": 0.0029069767441860465, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.040697674418604654, "writeRatioMax": 0.040697674418604654 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.0377906976744186, "computeRatioMax": 0.0377906976744186, "endMs": "1665777288497", "id": "8", "name": "S08: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.023255813953488372, "readRatioMax": 0.023255813953488372, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665777288464", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$130:d_date_sk, $131:d_year, $132:d_moy", "FROM date_dim", "WHERE and(equal($131, 1998), equal($132, 5))" ] }, { "kind": "WRITE", "substeps": [ "$130", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0029069767441860465, "waitRatioMax": 0.0029069767441860465, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.040697674418604654, "writeRatioMax": 0.040697674418604654 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.02616279069767442, "computeRatioMax": 0.02616279069767442, "endMs": "1665777288529", "id": "10", "name": "S0A: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.011627906976744186, "readRatioMax": 0.011627906976744186, "recordsRead": "18000", "recordsWritten": "1811", "shuffleOutputBytes": "16299", "shuffleOutputBytesSpilled": "0", "slotMs": "39", "startMs": "1665777288492", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$11:i_manufact_id, $10:i_category", "FROM item", "WHERE in($10, 'Electronics')" ] }, { "kind": "WRITE", "substeps": [ "$11", "TO __stage0A_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0029069767441860465, "waitRatioMax": 0.0029069767441860465, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.046511627906976744, "writeRatioMax": 0.046511627906976744 }, { "completedParallelInputs": "1", "computeMsAvg": "18", "computeMsMax": "18", "computeRatioAvg": 0.05232558139534884, "computeRatioMax": 0.05232558139534884, "endMs": "1665777288558", "id": "11", "name": "S0B: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.011627906976744186, "readRatioMax": 0.011627906976744186, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "323696", "shuffleOutputBytesSpilled": "0", "slotMs": "44", "startMs": "1665777288506", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_manufact_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage0B_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0029069767441860465, "waitRatioMax": 0.0029069767441860465, "writeMsAvg": "27", "writeMsMax": "27", "writeRatioAvg": 0.07848837209302326, "writeRatioMax": 0.07848837209302326 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.029069767441860465, "computeRatioMax": 0.029069767441860465, "endMs": "1665777288562", "id": "12", "name": "S0C: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.011627906976744186, "readRatioMax": 0.011627906976744186, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "33", "startMs": "1665777288524", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:ca_address_sk, $71:ca_gmt_offset", "FROM customer_address", "WHERE equal($71, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage0C_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0029069767441860465, "waitRatioMax": 0.0029069767441860465, "writeMsAvg": "12", "writeMsMax": "12", "writeRatioAvg": 0.03488372093023256, "writeRatioMax": 0.03488372093023256 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.029069767441860465, "computeRatioMax": 0.029069767441860465, "endMs": "1665777288580", "id": "13", "name": "S0D: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.020348837209302327, "readRatioMax": 0.020348837209302327, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "39", "startMs": "1665777288538", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120:d_date_sk, $121:d_year, $122:d_moy", "FROM date_dim", "WHERE and(equal($121, 1998), equal($122, 5))" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage0D_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0029069767441860465, "waitRatioMax": 0.0029069767441860465, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.0377906976744186, "writeRatioMax": 0.0377906976744186 }, { "completedParallelInputs": "1", "computeMsAvg": "218", "computeMsMax": "218", "computeRatioAvg": 0.6337209302325582, "computeRatioMax": 0.6337209302325582, "endMs": "1665777288745", "id": "15", "inputStages": [ "3", "0", "2", "1" ], "name": "S0F: Join+", "parallelInputs": "1", "readMsAvg": "18", "readMsMax": "18", "readRatioAvg": 0.05232558139534884, "readRatioMax": 0.05232558139534884, "recordsRead": "757472", "recordsWritten": "630", "shuffleOutputBytes": "16380", "shuffleOutputBytesSpilled": "0", "slotMs": "227", "startMs": "1665777288570", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$100:ws_sold_date_sk, $101:ws_item_sk, $102:ws_bill_addr_sk, $103:ws_ext_sales_price", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$140", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$110", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$40, $41", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$51", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $400 := $390", "$230 := SUM($391)" ] }, { "kind": "JOIN", "substeps": [ "$390 := $381, $391 := $380", "SEMI HASH JOIN EACH WITH ALL ON $381 = $51" ] }, { "kind": "JOIN", "substeps": [ "$380 := $371, $381 := $41", "INNER HASH JOIN EACH WITH ALL ON $370 = $40" ] }, { "kind": "JOIN", "substeps": [ "$370 := $360, $371 := $362", "INNER HASH JOIN EACH WITH ALL ON $361 = $110" ] }, { "kind": "JOIN", "substeps": [ "$360 := $101, $361 := $102, $362 := $103", "INNER HASH JOIN EACH WITH ALL ON $100 = $140" ] }, { "kind": "WRITE", "substeps": [ "$400, $230", "TO __stage0F_output", "BY HASH($400)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0029069767441860465, "waitRatioMax": 0.0029069767441860465, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.023255813953488372, "writeRatioMax": 0.023255813953488372 }, { "completedParallelInputs": "5", "computeMsAvg": "117", "computeMsMax": "144", "computeRatioAvg": 0.34011627906976744, "computeRatioMax": 0.4186046511627907, "endMs": "1665777288678", "id": "16", "inputStages": [ "6", "8", "5", "7" ], "name": "S10: Join+", "parallelInputs": "5", "readMsAvg": "16", "readMsMax": "23", "readRatioAvg": 0.046511627906976744, "readRatioMax": 0.06686046511627906, "recordsRead": "1631988", "recordsWritten": "2316", "shuffleOutputBytes": "60216", "shuffleOutputBytesSpilled": "0", "slotMs": "600", "startMs": "1665777288574", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80:cs_sold_date_sk, $81:cs_bill_addr_sk, $82:cs_item_sk, $83:cs_ext_sales_price", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$130", "FROM __stage08_output" ] }, { "kind": "READ", "substeps": [ "$90", "FROM __stage07_output" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$31", "FROM __stage05_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $340 := $330", "$220 := SUM($331)" ] }, { "kind": "JOIN", "substeps": [ "$330 := $321, $331 := $320", "SEMI HASH JOIN EACH WITH ALL ON $321 = $31" ] }, { "kind": "JOIN", "substeps": [ "$320 := $311, $321 := $21", "INNER HASH JOIN EACH WITH ALL ON $310 = $20" ] }, { "kind": "JOIN", "substeps": [ "$310 := $301, $311 := $302", "INNER HASH JOIN EACH WITH ALL ON $300 = $90" ] }, { "kind": "JOIN", "substeps": [ "$300 := $81, $301 := $82, $302 := $83", "INNER HASH JOIN EACH WITH ALL ON $80 = $130" ] }, { "kind": "WRITE", "substeps": [ "$340, $220", "TO __stage10_output", "BY HASH($340)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0029069767441860465, "waitRatioMax": 0.0029069767441860465, "writeMsAvg": "4", "writeMsMax": "6", "writeRatioAvg": 0.011627906976744186, "writeRatioMax": 0.01744186046511628 }, { "completedParallelInputs": "6", "computeMsAvg": "193", "computeMsMax": "344", "computeRatioAvg": 0.561046511627907, "computeRatioMax": 1, "endMs": "1665777288808", "id": "17", "inputStages": [ "13", "12", "11", "10" ], "name": "S11: Join+", "parallelInputs": "6", "readMsAvg": "18", "readMsMax": "21", "readRatioAvg": 0.05232558139534884, "readRatioMax": 0.061046511627906974, "recordsRead": "3108932", "recordsWritten": "3391", "shuffleOutputBytes": "87974", "shuffleOutputBytesSpilled": "0", "slotMs": "1159", "startMs": "1665777288596", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:ss_sold_date_sk, $61:ss_item_sk, $62:ss_addr_sk, $63:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$120", "FROM __stage0D_output" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage0C_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$11", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $280 := $270", "$210 := SUM($271)" ] }, { "kind": "JOIN", "substeps": [ "$270 := $261, $271 := $260", "SEMI HASH JOIN EACH WITH ALL ON $261 = $11" ] }, { "kind": "JOIN", "substeps": [ "$260 := $251, $261 := $2", "INNER HASH JOIN EACH WITH ALL ON $250 = $1" ] }, { "kind": "JOIN", "substeps": [ "$250 := $240, $251 := $242", "INNER HASH JOIN EACH WITH ALL ON $241 = $70" ] }, { "kind": "JOIN", "substeps": [ "$240 := $61, $241 := $62, $242 := $63", "INNER HASH JOIN EACH WITH ALL ON $60 = $120" ] }, { "kind": "WRITE", "substeps": [ "$280, $210", "TO __stage11_output", "BY HASH($280)" ] } ], "waitMsAvg": "2", "waitMsMax": "3", "waitRatioAvg": 0.005813953488372093, "waitRatioMax": 0.00872093023255814, "writeMsAvg": "6", "writeMsMax": "8", "writeRatioAvg": 0.01744186046511628, "writeRatioMax": 0.023255813953488372 }, { "completedParallelInputs": "3", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.03488372093023256, "computeRatioMax": 0.03488372093023256, "endMs": "1665777288872", "id": "18", "inputStages": [ "15", "17", "16" ], "name": "S12: Aggregate", "parallelInputs": "3", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "6337", "recordsWritten": "2017", "shuffleOutputBytes": "52442", "shuffleOutputBytesSpilled": "0", "slotMs": "126", "startMs": "1665777288830", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$280, $210", "FROM __stage11_output" ] }, { "kind": "READ", "substeps": [ "$340, $220", "FROM __stage10_output" ] }, { "kind": "READ", "substeps": [ "$400, $230", "FROM __stage0F_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $420 := $170", "$160 := SUM($171)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $290 := $280", "$180 := SUM($210)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $350 := $340", "$190 := SUM($220)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $410 := $400", "$200 := SUM($230)" ] }, { "kind": "WRITE", "substeps": [ "$160, $420", "TO __stage12_output", "BY HASH($420)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0029069767441860465, "waitRatioMax": 0.0029069767441860465, "writeMsAvg": "19", "writeMsMax": "20", "writeRatioAvg": 0.055232558139534885, "writeRatioMax": 0.05813953488372093 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.029069767441860465, "computeRatioMax": 0.029069767441860465, "endMs": "1665777288924", "id": "19", "inputStages": [ "18" ], "name": "S13: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "2017", "recordsWritten": "100", "shuffleOutputBytes": "2600", "shuffleOutputBytesSpilled": "0", "slotMs": "56", "startMs": "1665777288880", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $420", "FROM __stage12_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $430 := $420", "$150 := SUM($160)" ] }, { "kind": "WRITE", "substeps": [ "$440, $441", "TO __stage13_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0029069767441860465, "waitRatioMax": 0.0029069767441860465, "writeMsAvg": "25", "writeMsMax": "25", "writeRatioAvg": 0.07267441860465117, "writeRatioMax": 0.07267441860465117 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.020348837209302327, "computeRatioMax": 0.020348837209302327, "endMs": "1665777288934", "id": "20", "inputStages": [ "19" ], "name": "S14: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "2600", "shuffleOutputBytesSpilled": "0", "slotMs": "29", "startMs": "1665777288895", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$440, $441", "FROM __stage13_output" ] }, { "kind": "SORT", "substeps": [ "$440 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$450, $451", "TO __stage14_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0029069767441860465, "waitRatioMax": 0.0029069767441860465, "writeMsAvg": "5", "writeMsMax": "5", "writeRatioAvg": 0.014534883720930232, "writeRatioMax": 0.014534883720930232 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_address" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" } ], "statementType": "SELECT", "timeline": [ { "activeUnits": "3", "completedUnits": "24", "elapsedMs": "644", "estimatedRunnableUnits": "0", "pendingUnits": "3", "totalSlotMs": "2533" }, { "activeUnits": "3", "completedUnits": "29", "elapsedMs": "780", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2746" } ], "totalBytesBilled": "201326592", "totalBytesProcessed": "200610043", "totalPartitionsProcessed": "0", "totalSlotMs": "2746", "transferredBytes": "0" }, "startTime": "1665777288203", "totalBytesProcessed": "200610043", "totalSlotMs": "2746" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anond611c415_b103_4435_a425_a0587e8ac1bf" }, "priority": "INTERACTIVE", "query": "with ss as (\n select\n i_manufact_id,sum(ss_ext_sales_price) total_sales\n from\n \tstore_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_manufact_id in (select\n i_manufact_id\nfrom\n item\nwhere i_category in ('Electronics'))\n and ss_item_sk = i_item_sk\n and ss_sold_date_sk = d_date_sk\n and d_year = 1998\n and d_moy = 5\n and ss_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_manufact_id),\n cs as (\n select\n i_manufact_id,sum(cs_ext_sales_price) total_sales\n from\n \tcatalog_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_manufact_id in (select\n i_manufact_id\nfrom\n item\nwhere i_category in ('Electronics'))\n and cs_item_sk = i_item_sk\n and cs_sold_date_sk = d_date_sk\n and d_year = 1998\n and d_moy = 5\n and cs_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_manufact_id),\n ws as (\n select\n i_manufact_id,sum(ws_ext_sales_price) total_sales\n from\n \tweb_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_manufact_id in (select\n i_manufact_id\nfrom\n item\nwhere i_category in ('Electronics'))\n and ws_item_sk = i_item_sk\n and ws_sold_date_sk = d_date_sk\n and d_year = 1998\n and d_moy = 5\n and ws_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5\n group by i_manufact_id)\n select i_manufact_id ,sum(total_sales) total_sales\n from (select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ss \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from cs \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ws) tmp1\n group by i_manufact_id\n order by total_sales\n limit 100\n;", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "bF+lvxa//dNPEGw6AyNRWg==", "id": "test-project-364309:europe-west1.query33_1665777289", "jobReference": { "jobId": "query33_1665777289", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query33_1665777289?location=europe-west1", "statistics": { "creationTime": "1665777290546", "endTime": "1665777291334", "finalExecutionDurationMs": "538", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "200610043", "performanceInsights": { "avgPreviousExecutionMs": "596" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.05309734513274336, "computeRatioMax": 0.05309734513274336, "endMs": "1665777290765", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "12", "readMsMax": "12", "readRatioAvg": 0.05309734513274336, "readRatioMax": 0.05309734513274336, "recordsRead": "18000", "recordsWritten": "1811", "shuffleOutputBytes": "16299", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665777290734", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$51:i_manufact_id, $50:i_category", "FROM item", "WHERE in($50, 'Electronics')" ] }, { "kind": "WRITE", "substeps": [ "$51", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004424778761061947, "waitRatioMax": 0.004424778761061947, "writeMsAvg": "10", "writeMsMax": "10", "writeRatioAvg": 0.04424778761061947, "writeRatioMax": 0.04424778761061947 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.06637168141592921, "computeRatioMax": 0.06637168141592921, "endMs": "1665777290794", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.02654867256637168, "readRatioMax": 0.02654867256637168, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "323696", "shuffleOutputBytesSpilled": "0", "slotMs": "42", "startMs": "1665777290751", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_manufact_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$40, $41", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004424778761061947, "waitRatioMax": 0.004424778761061947, "writeMsAvg": "27", "writeMsMax": "27", "writeRatioAvg": 0.11946902654867257, "writeRatioMax": 0.11946902654867257 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.05309734513274336, "computeRatioMax": 0.05309734513274336, "endMs": "1665777290792", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.030973451327433628, "readRatioMax": 0.030973451327433628, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "27", "startMs": "1665777290765", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110:ca_address_sk, $111:ca_gmt_offset", "FROM customer_address", "WHERE equal($111, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004424778761061947, "waitRatioMax": 0.004424778761061947, "writeMsAvg": "12", "writeMsMax": "12", "writeRatioAvg": 0.05309734513274336, "writeRatioMax": 0.05309734513274336 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.03982300884955752, "computeRatioMax": 0.03982300884955752, "endMs": "1665777290829", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.02654867256637168, "readRatioMax": 0.02654867256637168, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "36", "startMs": "1665777290793", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140:d_date_sk, $141:d_year, $142:d_moy", "FROM date_dim", "WHERE and(equal($141, 1998), equal($142, 5))" ] }, { "kind": "WRITE", "substeps": [ "$140", "TO __stage03_output" ] } ], "waitMsAvg": "15", "waitMsMax": "15", "waitRatioAvg": 0.06637168141592921, "waitRatioMax": 0.06637168141592921, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.05752212389380531, "writeRatioMax": 0.05752212389380531 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.03982300884955752, "computeRatioMax": 0.03982300884955752, "endMs": "1665777290844", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.017699115044247787, "readRatioMax": 0.017699115044247787, "recordsRead": "18000", "recordsWritten": "1811", "shuffleOutputBytes": "16299", "shuffleOutputBytesSpilled": "0", "slotMs": "35", "startMs": "1665777290808", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$31:i_manufact_id, $30:i_category", "FROM item", "WHERE in($30, 'Electronics')" ] }, { "kind": "WRITE", "substeps": [ "$31", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004424778761061947, "waitRatioMax": 0.004424778761061947, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.061946902654867256, "writeRatioMax": 0.061946902654867256 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.06637168141592921, "computeRatioMax": 0.06637168141592921, "endMs": "1665777290876", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.02654867256637168, "readRatioMax": 0.02654867256637168, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "323696", "shuffleOutputBytesSpilled": "0", "slotMs": "56", "startMs": "1665777290820", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:i_item_sk, $21:i_manufact_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004424778761061947, "waitRatioMax": 0.004424778761061947, "writeMsAvg": "28", "writeMsMax": "28", "writeRatioAvg": 0.12389380530973451, "writeRatioMax": 0.12389380530973451 }, { "completedParallelInputs": "1", "computeMsAvg": "18", "computeMsMax": "18", "computeRatioAvg": 0.07964601769911504, "computeRatioMax": 0.07964601769911504, "endMs": "1665777290867", "id": "7", "name": "S07: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.017699115044247787, "readRatioMax": 0.017699115044247787, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "44", "startMs": "1665777290831", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90:ca_address_sk, $91:ca_gmt_offset", "FROM customer_address", "WHERE equal($91, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004424778761061947, "waitRatioMax": 0.004424778761061947, "writeMsAvg": "12", "writeMsMax": "12", "writeRatioAvg": 0.05309734513274336, "writeRatioMax": 0.05309734513274336 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.05309734513274336, "computeRatioMax": 0.05309734513274336, "endMs": "1665777290884", "id": "8", "name": "S08: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.02654867256637168, "readRatioMax": 0.02654867256637168, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "40", "startMs": "1665777290845", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$130:d_date_sk, $131:d_year, $132:d_moy", "FROM date_dim", "WHERE and(equal($131, 1998), equal($132, 5))" ] }, { "kind": "WRITE", "substeps": [ "$130", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004424778761061947, "waitRatioMax": 0.004424778761061947, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.05752212389380531, "writeRatioMax": 0.05752212389380531 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.05752212389380531, "computeRatioMax": 0.05752212389380531, "endMs": "1665777290913", "id": "10", "name": "S0A: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.030973451327433628, "readRatioMax": 0.030973451327433628, "recordsRead": "18000", "recordsWritten": "1811", "shuffleOutputBytes": "16299", "shuffleOutputBytesSpilled": "0", "slotMs": "42", "startMs": "1665777290871", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$11:i_manufact_id, $10:i_category", "FROM item", "WHERE in($10, 'Electronics')" ] }, { "kind": "WRITE", "substeps": [ "$11", "TO __stage0A_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004424778761061947, "waitRatioMax": 0.004424778761061947, "writeMsAvg": "12", "writeMsMax": "12", "writeRatioAvg": 0.05309734513274336, "writeRatioMax": 0.05309734513274336 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.06637168141592921, "computeRatioMax": 0.06637168141592921, "endMs": "1665777290930", "id": "11", "name": "S0B: Input", "parallelInputs": "1", "readMsAvg": "18", "readMsMax": "18", "readRatioAvg": 0.07964601769911504, "readRatioMax": 0.07964601769911504, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "323696", "shuffleOutputBytesSpilled": "0", "slotMs": "46", "startMs": "1665777290884", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_manufact_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage0B_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004424778761061947, "waitRatioMax": 0.004424778761061947, "writeMsAvg": "17", "writeMsMax": "17", "writeRatioAvg": 0.0752212389380531, "writeRatioMax": 0.0752212389380531 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.05309734513274336, "computeRatioMax": 0.05309734513274336, "endMs": "1665777290923", "id": "12", "name": "S0C: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.017699115044247787, "readRatioMax": 0.017699115044247787, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "24", "startMs": "1665777290898", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:ca_address_sk, $71:ca_gmt_offset", "FROM customer_address", "WHERE equal($71, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage0C_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004424778761061947, "waitRatioMax": 0.004424778761061947, "writeMsAvg": "11", "writeMsMax": "11", "writeRatioAvg": 0.048672566371681415, "writeRatioMax": 0.048672566371681415 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.030973451327433628, "computeRatioMax": 0.030973451327433628, "endMs": "1665777290950", "id": "13", "name": "S0D: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.022123893805309734, "readRatioMax": 0.022123893805309734, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "33", "startMs": "1665777290912", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120:d_date_sk, $121:d_year, $122:d_moy", "FROM date_dim", "WHERE and(equal($121, 1998), equal($122, 5))" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage0D_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004424778761061947, "waitRatioMax": 0.004424778761061947, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.05752212389380531, "writeRatioMax": 0.05752212389380531 }, { "completedParallelInputs": "1", "computeMsAvg": "161", "computeMsMax": "161", "computeRatioAvg": 0.7123893805309734, "computeRatioMax": 0.7123893805309734, "endMs": "1665777291064", "id": "15", "inputStages": [ "3", "0", "2", "1" ], "name": "S0F: Join+", "parallelInputs": "1", "readMsAvg": "13", "readMsMax": "13", "readRatioAvg": 0.05752212389380531, "readRatioMax": 0.05752212389380531, "recordsRead": "757472", "recordsWritten": "630", "shuffleOutputBytes": "16380", "shuffleOutputBytesSpilled": "0", "slotMs": "193", "startMs": "1665777290936", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$100:ws_sold_date_sk, $101:ws_item_sk, $102:ws_bill_addr_sk, $103:ws_ext_sales_price", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$140", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$110", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$40, $41", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$51", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $400 := $390", "$230 := SUM($391)" ] }, { "kind": "JOIN", "substeps": [ "$390 := $381, $391 := $380", "SEMI HASH JOIN EACH WITH ALL ON $381 = $51" ] }, { "kind": "JOIN", "substeps": [ "$380 := $371, $381 := $41", "INNER HASH JOIN EACH WITH ALL ON $370 = $40" ] }, { "kind": "JOIN", "substeps": [ "$370 := $360, $371 := $362", "INNER HASH JOIN EACH WITH ALL ON $361 = $110" ] }, { "kind": "JOIN", "substeps": [ "$360 := $101, $361 := $102, $362 := $103", "INNER HASH JOIN EACH WITH ALL ON $100 = $140" ] }, { "kind": "WRITE", "substeps": [ "$400, $230", "TO __stage0F_output", "BY HASH($400)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004424778761061947, "waitRatioMax": 0.004424778761061947, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.035398230088495575, "writeRatioMax": 0.035398230088495575 }, { "completedParallelInputs": "5", "computeMsAvg": "126", "computeMsMax": "165", "computeRatioAvg": 0.5575221238938053, "computeRatioMax": 0.7300884955752213, "endMs": "1665777291056", "id": "16", "inputStages": [ "7", "5", "8", "6" ], "name": "S10: Join+", "parallelInputs": "5", "readMsAvg": "15", "readMsMax": "16", "readRatioAvg": 0.06637168141592921, "readRatioMax": 0.07079646017699115, "recordsRead": "1631988", "recordsWritten": "2316", "shuffleOutputBytes": "60216", "shuffleOutputBytesSpilled": "0", "slotMs": "686", "startMs": "1665777290941", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80:cs_sold_date_sk, $81:cs_bill_addr_sk, $82:cs_item_sk, $83:cs_ext_sales_price", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$130", "FROM __stage08_output" ] }, { "kind": "READ", "substeps": [ "$90", "FROM __stage07_output" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$31", "FROM __stage05_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $340 := $330", "$220 := SUM($331)" ] }, { "kind": "JOIN", "substeps": [ "$330 := $321, $331 := $320", "SEMI HASH JOIN EACH WITH ALL ON $321 = $31" ] }, { "kind": "JOIN", "substeps": [ "$320 := $311, $321 := $21", "INNER HASH JOIN EACH WITH ALL ON $310 = $20" ] }, { "kind": "JOIN", "substeps": [ "$310 := $301, $311 := $302", "INNER HASH JOIN EACH WITH ALL ON $300 = $90" ] }, { "kind": "JOIN", "substeps": [ "$300 := $81, $301 := $82, $302 := $83", "INNER HASH JOIN EACH WITH ALL ON $80 = $130" ] }, { "kind": "WRITE", "substeps": [ "$340, $220", "TO __stage10_output", "BY HASH($340)" ] } ], "waitMsAvg": "1", "waitMsMax": "2", "waitRatioAvg": 0.004424778761061947, "waitRatioMax": 0.008849557522123894, "writeMsAvg": "4", "writeMsMax": "5", "writeRatioAvg": 0.017699115044247787, "writeRatioMax": 0.022123893805309734 }, { "completedParallelInputs": "6", "computeMsAvg": "164", "computeMsMax": "226", "computeRatioAvg": 0.7256637168141593, "computeRatioMax": 1, "endMs": "1665777291116", "id": "17", "inputStages": [ "10", "12", "13", "11" ], "name": "S11: Join+", "parallelInputs": "6", "readMsAvg": "20", "readMsMax": "33", "readRatioAvg": 0.08849557522123894, "readRatioMax": 0.14601769911504425, "recordsRead": "3108932", "recordsWritten": "3391", "shuffleOutputBytes": "87974", "shuffleOutputBytesSpilled": "0", "slotMs": "1271", "startMs": "1665777290964", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:ss_sold_date_sk, $61:ss_item_sk, $62:ss_addr_sk, $63:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$120", "FROM __stage0D_output" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage0C_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$11", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $280 := $270", "$210 := SUM($271)" ] }, { "kind": "JOIN", "substeps": [ "$270 := $261, $271 := $260", "SEMI HASH JOIN EACH WITH ALL ON $261 = $11" ] }, { "kind": "JOIN", "substeps": [ "$260 := $251, $261 := $2", "INNER HASH JOIN EACH WITH ALL ON $250 = $1" ] }, { "kind": "JOIN", "substeps": [ "$250 := $240, $251 := $242", "INNER HASH JOIN EACH WITH ALL ON $241 = $70" ] }, { "kind": "JOIN", "substeps": [ "$240 := $61, $241 := $62, $242 := $63", "INNER HASH JOIN EACH WITH ALL ON $60 = $120" ] }, { "kind": "WRITE", "substeps": [ "$280, $210", "TO __stage11_output", "BY HASH($280)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004424778761061947, "waitRatioMax": 0.004424778761061947, "writeMsAvg": "4", "writeMsMax": "6", "writeRatioAvg": 0.017699115044247787, "writeRatioMax": 0.02654867256637168 }, { "completedParallelInputs": "3", "computeMsAvg": "11", "computeMsMax": "14", "computeRatioAvg": 0.048672566371681415, "computeRatioMax": 0.061946902654867256, "endMs": "1665777291189", "id": "18", "inputStages": [ "16", "15", "17" ], "name": "S12: Aggregate", "parallelInputs": "3", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "6337", "recordsWritten": "2017", "shuffleOutputBytes": "52442", "shuffleOutputBytesSpilled": "0", "slotMs": "117", "startMs": "1665777291147", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$280, $210", "FROM __stage11_output" ] }, { "kind": "READ", "substeps": [ "$340, $220", "FROM __stage10_output" ] }, { "kind": "READ", "substeps": [ "$400, $230", "FROM __stage0F_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $420 := $170", "$160 := SUM($171)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $290 := $280", "$180 := SUM($210)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $350 := $340", "$190 := SUM($220)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $410 := $400", "$200 := SUM($230)" ] }, { "kind": "WRITE", "substeps": [ "$160, $420", "TO __stage12_output", "BY HASH($420)" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.008849557522123894, "waitRatioMax": 0.008849557522123894, "writeMsAvg": "16", "writeMsMax": "19", "writeRatioAvg": 0.07079646017699115, "writeRatioMax": 0.084070796460177 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.04424778761061947, "computeRatioMax": 0.04424778761061947, "endMs": "1665777291232", "id": "19", "inputStages": [ "18" ], "name": "S13: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "2017", "recordsWritten": "100", "shuffleOutputBytes": "2600", "shuffleOutputBytesSpilled": "0", "slotMs": "29", "startMs": "1665777291197", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $420", "FROM __stage12_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $430 := $420", "$150 := SUM($160)" ] }, { "kind": "WRITE", "substeps": [ "$440, $441", "TO __stage13_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004424778761061947, "waitRatioMax": 0.004424778761061947, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.05752212389380531, "writeRatioMax": 0.05752212389380531 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.04424778761061947, "computeRatioMax": 0.04424778761061947, "endMs": "1665777291239", "id": "20", "inputStages": [ "19" ], "name": "S14: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "2600", "shuffleOutputBytesSpilled": "0", "slotMs": "27", "startMs": "1665777291212", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$440, $441", "FROM __stage13_output" ] }, { "kind": "SORT", "substeps": [ "$440 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$450, $451", "TO __stage14_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004424778761061947, "waitRatioMax": 0.004424778761061947, "writeMsAvg": "6", "writeMsMax": "6", "writeRatioAvg": 0.02654867256637168, "writeRatioMax": 0.02654867256637168 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_address" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" } ], "statementType": "SELECT", "timeline": [ { "activeUnits": "1", "completedUnits": "28", "elapsedMs": "635", "estimatedRunnableUnits": "0", "pendingUnits": "1", "totalSlotMs": "2880" }, { "activeUnits": "1", "completedUnits": "29", "elapsedMs": "682", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2907" } ], "totalBytesBilled": "201326592", "totalBytesProcessed": "200610043", "totalPartitionsProcessed": "0", "totalSlotMs": "2907", "transferredBytes": "0" }, "startTime": "1665777290601", "totalBytesProcessed": "200610043", "totalSlotMs": "2907" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon3243bdd7_d2ba_4ae5_b3e9_26920ef3b052" }, "priority": "INTERACTIVE", "query": "with ss as (\n select\n i_manufact_id,sum(ss_ext_sales_price) total_sales\n from\n \tstore_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_manufact_id in (select\n i_manufact_id\nfrom\n item\nwhere i_category in ('Electronics'))\n and ss_item_sk = i_item_sk\n and ss_sold_date_sk = d_date_sk\n and d_year = 1998\n and d_moy = 5\n and ss_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_manufact_id),\n cs as (\n select\n i_manufact_id,sum(cs_ext_sales_price) total_sales\n from\n \tcatalog_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_manufact_id in (select\n i_manufact_id\nfrom\n item\nwhere i_category in ('Electronics'))\n and cs_item_sk = i_item_sk\n and cs_sold_date_sk = d_date_sk\n and d_year = 1998\n and d_moy = 5\n and cs_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_manufact_id),\n ws as (\n select\n i_manufact_id,sum(ws_ext_sales_price) total_sales\n from\n \tweb_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_manufact_id in (select\n i_manufact_id\nfrom\n item\nwhere i_category in ('Electronics'))\n and ws_item_sk = i_item_sk\n and ws_sold_date_sk = d_date_sk\n and d_year = 1998\n and d_moy = 5\n and ws_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5\n group by i_manufact_id)\n select i_manufact_id ,sum(total_sales) total_sales\n from (select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ss \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from cs \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ws) tmp1\n group by i_manufact_id\n order by total_sales\n limit 100\n;", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "fwMci/3vyECaJimbJLWmuw==", "id": "test-project-364309:europe-west1.query33_1665777292", "jobReference": { "jobId": "query33_1665777292", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query33_1665777292?location=europe-west1", "statistics": { "creationTime": "1665777292900", "endTime": "1665777293692", "finalExecutionDurationMs": "520", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "200610043", "performanceInsights": { "avgPreviousExecutionMs": "585" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.04296875, "computeRatioMax": 0.04296875, "endMs": "1665777293130", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.0234375, "readRatioMax": 0.0234375, "recordsRead": "18000", "recordsWritten": "1811", "shuffleOutputBytes": "16299", "shuffleOutputBytesSpilled": "0", "slotMs": "39", "startMs": "1665777293095", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$51:i_manufact_id, $50:i_category", "FROM item", "WHERE in($50, 'Electronics')" ] }, { "kind": "WRITE", "substeps": [ "$51", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00390625, "waitRatioMax": 0.00390625, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.03125, "writeRatioMax": 0.03125 }, { "completedParallelInputs": "1", "computeMsAvg": "16", "computeMsMax": "16", "computeRatioAvg": 0.0625, "computeRatioMax": 0.0625, "endMs": "1665777293152", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.015625, "readRatioMax": 0.015625, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "323696", "shuffleOutputBytesSpilled": "0", "slotMs": "37", "startMs": "1665777293107", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_manufact_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$40, $41", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00390625, "waitRatioMax": 0.00390625, "writeMsAvg": "21", "writeMsMax": "21", "writeRatioAvg": 0.08203125, "writeRatioMax": 0.08203125 }, { "completedParallelInputs": "1", "computeMsAvg": "18", "computeMsMax": "18", "computeRatioAvg": 0.0703125, "computeRatioMax": 0.0703125, "endMs": "1665777293148", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.02734375, "readRatioMax": 0.02734375, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "26", "startMs": "1665777293121", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110:ca_address_sk, $111:ca_gmt_offset", "FROM customer_address", "WHERE equal($111, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00390625, "waitRatioMax": 0.00390625, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.02734375, "writeRatioMax": 0.02734375 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.03125, "computeRatioMax": 0.03125, "endMs": "1665777293163", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.0234375, "readRatioMax": 0.0234375, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "21", "startMs": "1665777293132", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140:d_date_sk, $141:d_year, $142:d_moy", "FROM date_dim", "WHERE and(equal($141, 1998), equal($142, 5))" ] }, { "kind": "WRITE", "substeps": [ "$140", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00390625, "waitRatioMax": 0.00390625, "writeMsAvg": "6", "writeMsMax": "6", "writeRatioAvg": 0.0234375, "writeRatioMax": 0.0234375 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.05078125, "computeRatioMax": 0.05078125, "endMs": "1665777293191", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.0234375, "readRatioMax": 0.0234375, "recordsRead": "18000", "recordsWritten": "1811", "shuffleOutputBytes": "16299", "shuffleOutputBytesSpilled": "0", "slotMs": "29", "startMs": "1665777293157", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$31:i_manufact_id, $30:i_category", "FROM item", "WHERE in($30, 'Electronics')" ] }, { "kind": "WRITE", "substeps": [ "$31", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00390625, "waitRatioMax": 0.00390625, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.03125, "writeRatioMax": 0.03125 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.05078125, "computeRatioMax": 0.05078125, "endMs": "1665777293208", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.01953125, "readRatioMax": 0.01953125, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "323696", "shuffleOutputBytesSpilled": "0", "slotMs": "32", "startMs": "1665777293169", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:i_item_sk, $21:i_manufact_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00390625, "waitRatioMax": 0.00390625, "writeMsAvg": "25", "writeMsMax": "25", "writeRatioAvg": 0.09765625, "writeRatioMax": 0.09765625 }, { "completedParallelInputs": "1", "computeMsAvg": "17", "computeMsMax": "17", "computeRatioAvg": 0.06640625, "computeRatioMax": 0.06640625, "endMs": "1665777293238", "id": "7", "name": "S07: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.03125, "readRatioMax": 0.03125, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "53", "startMs": "1665777293185", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90:ca_address_sk, $91:ca_gmt_offset", "FROM customer_address", "WHERE equal($91, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage07_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.0078125, "waitRatioMax": 0.0078125, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.02734375, "writeRatioMax": 0.02734375 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.0390625, "computeRatioMax": 0.0390625, "endMs": "1665777293238", "id": "8", "name": "S08: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.0234375, "readRatioMax": 0.0234375, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "31", "startMs": "1665777293198", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$130:d_date_sk, $131:d_year, $132:d_moy", "FROM date_dim", "WHERE and(equal($131, 1998), equal($132, 5))" ] }, { "kind": "WRITE", "substeps": [ "$130", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00390625, "waitRatioMax": 0.00390625, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.05859375, "writeRatioMax": 0.05859375 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.04296875, "computeRatioMax": 0.04296875, "endMs": "1665777293262", "id": "10", "name": "S0A: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.0234375, "readRatioMax": 0.0234375, "recordsRead": "18000", "recordsWritten": "1811", "shuffleOutputBytes": "16299", "shuffleOutputBytesSpilled": "0", "slotMs": "29", "startMs": "1665777293225", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$11:i_manufact_id, $10:i_category", "FROM item", "WHERE in($10, 'Electronics')" ] }, { "kind": "WRITE", "substeps": [ "$11", "TO __stage0A_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00390625, "waitRatioMax": 0.00390625, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.03125, "writeRatioMax": 0.03125 }, { "completedParallelInputs": "1", "computeMsAvg": "20", "computeMsMax": "20", "computeRatioAvg": 0.078125, "computeRatioMax": 0.078125, "endMs": "1665777293294", "id": "11", "name": "S0B: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.03125, "readRatioMax": 0.03125, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "323696", "shuffleOutputBytesSpilled": "0", "slotMs": "65", "startMs": "1665777293235", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_manufact_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage0B_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00390625, "waitRatioMax": 0.00390625, "writeMsAvg": "27", "writeMsMax": "27", "writeRatioAvg": 0.10546875, "writeRatioMax": 0.10546875 }, { "completedParallelInputs": "1", "computeMsAvg": "16", "computeMsMax": "16", "computeRatioAvg": 0.0625, "computeRatioMax": 0.0625, "endMs": "1665777293279", "id": "12", "name": "S0C: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.03125, "readRatioMax": 0.03125, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "35", "startMs": "1665777293249", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:ca_address_sk, $71:ca_gmt_offset", "FROM customer_address", "WHERE equal($71, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage0C_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00390625, "waitRatioMax": 0.00390625, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.03125, "writeRatioMax": 0.03125 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.0390625, "computeRatioMax": 0.0390625, "endMs": "1665777293306", "id": "13", "name": "S0D: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.01953125, "readRatioMax": 0.01953125, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "43", "startMs": "1665777293263", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120:d_date_sk, $121:d_year, $122:d_moy", "FROM date_dim", "WHERE and(equal($121, 1998), equal($122, 5))" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage0D_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.0078125, "waitRatioMax": 0.0078125, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.0625, "writeRatioMax": 0.0625 }, { "completedParallelInputs": "1", "computeMsAvg": "213", "computeMsMax": "213", "computeRatioAvg": 0.83203125, "computeRatioMax": 0.83203125, "endMs": "1665777293425", "id": "15", "inputStages": [ "2", "0", "1", "3" ], "name": "S0F: Join+", "parallelInputs": "1", "readMsAvg": "12", "readMsMax": "12", "readRatioAvg": 0.046875, "readRatioMax": 0.046875, "recordsRead": "757472", "recordsWritten": "630", "shuffleOutputBytes": "16380", "shuffleOutputBytesSpilled": "0", "slotMs": "181", "startMs": "1665777293286", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$100:ws_sold_date_sk, $101:ws_item_sk, $102:ws_bill_addr_sk, $103:ws_ext_sales_price", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$140", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$110", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$40, $41", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$51", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $400 := $390", "$230 := SUM($391)" ] }, { "kind": "JOIN", "substeps": [ "$390 := $381, $391 := $380", "SEMI HASH JOIN EACH WITH ALL ON $381 = $51" ] }, { "kind": "JOIN", "substeps": [ "$380 := $371, $381 := $41", "INNER HASH JOIN EACH WITH ALL ON $370 = $40" ] }, { "kind": "JOIN", "substeps": [ "$370 := $360, $371 := $362", "INNER HASH JOIN EACH WITH ALL ON $361 = $110" ] }, { "kind": "JOIN", "substeps": [ "$360 := $101, $361 := $102, $362 := $103", "INNER HASH JOIN EACH WITH ALL ON $100 = $140" ] }, { "kind": "WRITE", "substeps": [ "$400, $230", "TO __stage0F_output", "BY HASH($400)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00390625, "waitRatioMax": 0.00390625, "writeMsAvg": "5", "writeMsMax": "5", "writeRatioAvg": 0.01953125, "writeRatioMax": 0.01953125 }, { "completedParallelInputs": "5", "computeMsAvg": "131", "computeMsMax": "158", "computeRatioAvg": 0.51171875, "computeRatioMax": 0.6171875, "endMs": "1665777293394", "id": "16", "inputStages": [ "7", "5", "8", "6" ], "name": "S10: Join+", "parallelInputs": "5", "readMsAvg": "14", "readMsMax": "17", "readRatioAvg": 0.0546875, "readRatioMax": 0.06640625, "recordsRead": "1631988", "recordsWritten": "2316", "shuffleOutputBytes": "60216", "shuffleOutputBytesSpilled": "0", "slotMs": "644", "startMs": "1665777293291", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80:cs_sold_date_sk, $81:cs_bill_addr_sk, $82:cs_item_sk, $83:cs_ext_sales_price", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$130", "FROM __stage08_output" ] }, { "kind": "READ", "substeps": [ "$90", "FROM __stage07_output" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$31", "FROM __stage05_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $340 := $330", "$220 := SUM($331)" ] }, { "kind": "JOIN", "substeps": [ "$330 := $321, $331 := $320", "SEMI HASH JOIN EACH WITH ALL ON $321 = $31" ] }, { "kind": "JOIN", "substeps": [ "$320 := $311, $321 := $21", "INNER HASH JOIN EACH WITH ALL ON $310 = $20" ] }, { "kind": "JOIN", "substeps": [ "$310 := $301, $311 := $302", "INNER HASH JOIN EACH WITH ALL ON $300 = $90" ] }, { "kind": "JOIN", "substeps": [ "$300 := $81, $301 := $82, $302 := $83", "INNER HASH JOIN EACH WITH ALL ON $80 = $130" ] }, { "kind": "WRITE", "substeps": [ "$340, $220", "TO __stage10_output", "BY HASH($340)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00390625, "waitRatioMax": 0.00390625, "writeMsAvg": "4", "writeMsMax": "6", "writeRatioAvg": 0.015625, "writeRatioMax": 0.0234375 }, { "completedParallelInputs": "6", "computeMsAvg": "191", "computeMsMax": "256", "computeRatioAvg": 0.74609375, "computeRatioMax": 1, "endMs": "1665777293477", "id": "17", "inputStages": [ "12", "10", "11", "13" ], "name": "S11: Join+", "parallelInputs": "6", "readMsAvg": "16", "readMsMax": "18", "readRatioAvg": 0.0625, "readRatioMax": 0.0703125, "recordsRead": "3108932", "recordsWritten": "3391", "shuffleOutputBytes": "87974", "shuffleOutputBytesSpilled": "0", "slotMs": "1060", "startMs": "1665777293318", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:ss_sold_date_sk, $61:ss_item_sk, $62:ss_addr_sk, $63:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$120", "FROM __stage0D_output" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage0C_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$11", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $280 := $270", "$210 := SUM($271)" ] }, { "kind": "JOIN", "substeps": [ "$270 := $261, $271 := $260", "SEMI HASH JOIN EACH WITH ALL ON $261 = $11" ] }, { "kind": "JOIN", "substeps": [ "$260 := $251, $261 := $2", "INNER HASH JOIN EACH WITH ALL ON $250 = $1" ] }, { "kind": "JOIN", "substeps": [ "$250 := $240, $251 := $242", "INNER HASH JOIN EACH WITH ALL ON $241 = $70" ] }, { "kind": "JOIN", "substeps": [ "$240 := $61, $241 := $62, $242 := $63", "INNER HASH JOIN EACH WITH ALL ON $60 = $120" ] }, { "kind": "WRITE", "substeps": [ "$280, $210", "TO __stage11_output", "BY HASH($280)" ] } ], "waitMsAvg": "1", "waitMsMax": "2", "waitRatioAvg": 0.00390625, "waitRatioMax": 0.0078125, "writeMsAvg": "4", "writeMsMax": "5", "writeRatioAvg": 0.015625, "writeRatioMax": 0.01953125 }, { "completedParallelInputs": "3", "computeMsAvg": "11", "computeMsMax": "12", "computeRatioAvg": 0.04296875, "computeRatioMax": 0.046875, "endMs": "1665777293532", "id": "18", "inputStages": [ "16", "15", "17" ], "name": "S12: Aggregate", "parallelInputs": "3", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "6337", "recordsWritten": "2017", "shuffleOutputBytes": "52442", "shuffleOutputBytesSpilled": "0", "slotMs": "86", "startMs": "1665777293497", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$280, $210", "FROM __stage11_output" ] }, { "kind": "READ", "substeps": [ "$340, $220", "FROM __stage10_output" ] }, { "kind": "READ", "substeps": [ "$400, $230", "FROM __stage0F_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $420 := $170", "$160 := SUM($171)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $290 := $280", "$180 := SUM($210)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $350 := $340", "$190 := SUM($220)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $410 := $400", "$200 := SUM($230)" ] }, { "kind": "WRITE", "substeps": [ "$160, $420", "TO __stage12_output", "BY HASH($420)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00390625, "waitRatioMax": 0.00390625, "writeMsAvg": "15", "writeMsMax": "17", "writeRatioAvg": 0.05859375, "writeRatioMax": 0.06640625 }, { "completedParallelInputs": "1", "computeMsAvg": "5", "computeMsMax": "5", "computeRatioAvg": 0.01953125, "computeRatioMax": 0.01953125, "endMs": "1665777293574", "id": "19", "inputStages": [ "18" ], "name": "S13: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "2017", "recordsWritten": "100", "shuffleOutputBytes": "2600", "shuffleOutputBytesSpilled": "0", "slotMs": "27", "startMs": "1665777293541", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $420", "FROM __stage12_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $430 := $420", "$150 := SUM($160)" ] }, { "kind": "WRITE", "substeps": [ "$440, $441", "TO __stage13_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00390625, "waitRatioMax": 0.00390625, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.0546875, "writeRatioMax": 0.0546875 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.02734375, "computeRatioMax": 0.02734375, "endMs": "1665777293583", "id": "20", "inputStages": [ "19" ], "name": "S14: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "2600", "shuffleOutputBytesSpilled": "0", "slotMs": "26", "startMs": "1665777293555", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$440, $441", "FROM __stage13_output" ] }, { "kind": "SORT", "substeps": [ "$440 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$450, $451", "TO __stage14_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00390625, "waitRatioMax": 0.00390625, "writeMsAvg": "6", "writeMsMax": "6", "writeRatioAvg": 0.0234375, "writeRatioMax": 0.0234375 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_address" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" } ], "statementType": "SELECT", "timeline": [ { "activeUnits": "0", "completedUnits": "29", "elapsedMs": "640", "pendingUnits": "0", "totalSlotMs": "2566" }, { "activeUnits": "0", "completedUnits": "29", "elapsedMs": "663", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2566" } ], "totalBytesBilled": "201326592", "totalBytesProcessed": "200610043", "totalPartitionsProcessed": "0", "totalSlotMs": "2566", "transferredBytes": "0" }, "startTime": "1665777292957", "totalBytesProcessed": "200610043", "totalSlotMs": "2566" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon6e9b68f4_9301_4a01_8e53_99104739b518" }, "priority": "INTERACTIVE", "query": "with ss as (\n select\n i_manufact_id,sum(ss_ext_sales_price) total_sales\n from\n \tstore_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_manufact_id in (select\n i_manufact_id\nfrom\n item\nwhere i_category in ('Electronics'))\n and ss_item_sk = i_item_sk\n and ss_sold_date_sk = d_date_sk\n and d_year = 1998\n and d_moy = 5\n and ss_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_manufact_id),\n cs as (\n select\n i_manufact_id,sum(cs_ext_sales_price) total_sales\n from\n \tcatalog_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_manufact_id in (select\n i_manufact_id\nfrom\n item\nwhere i_category in ('Electronics'))\n and cs_item_sk = i_item_sk\n and cs_sold_date_sk = d_date_sk\n and d_year = 1998\n and d_moy = 5\n and cs_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_manufact_id),\n ws as (\n select\n i_manufact_id,sum(ws_ext_sales_price) total_sales\n from\n \tweb_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_manufact_id in (select\n i_manufact_id\nfrom\n item\nwhere i_category in ('Electronics'))\n and ws_item_sk = i_item_sk\n and ws_sold_date_sk = d_date_sk\n and d_year = 1998\n and d_moy = 5\n and ws_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5\n group by i_manufact_id)\n select i_manufact_id ,sum(total_sales) total_sales\n from (select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ss \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from cs \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ws) tmp1\n group by i_manufact_id\n order by total_sales\n limit 100\n;", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "JTtD6NxGrGkfyhPzelBdcg==", "id": "test-project-364309:europe-west1.query33_1665777294", "jobReference": { "jobId": "query33_1665777294", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query33_1665777294?location=europe-west1", "statistics": { "creationTime": "1665777295292", "endTime": "1665777296062", "finalExecutionDurationMs": "527", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "200610043", "performanceInsights": { "avgPreviousExecutionMs": "574" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.05220883534136546, "computeRatioMax": 0.05220883534136546, "endMs": "1665777295516", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.028112449799196786, "readRatioMax": 0.028112449799196786, "recordsRead": "18000", "recordsWritten": "1811", "shuffleOutputBytes": "16299", "shuffleOutputBytesSpilled": "0", "slotMs": "38", "startMs": "1665777295476", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$51:i_manufact_id, $50:i_category", "FROM item", "WHERE in($50, 'Electronics')" ] }, { "kind": "WRITE", "substeps": [ "$51", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.05622489959839357, "writeRatioMax": 0.05622489959839357 }, { "completedParallelInputs": "1", "computeMsAvg": "16", "computeMsMax": "16", "computeRatioAvg": 0.0642570281124498, "computeRatioMax": 0.0642570281124498, "endMs": "1665777295532", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.028112449799196786, "readRatioMax": 0.028112449799196786, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "323696", "shuffleOutputBytesSpilled": "0", "slotMs": "44", "startMs": "1665777295486", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_manufact_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$40, $41", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "27", "writeMsMax": "27", "writeRatioAvg": 0.10843373493975904, "writeRatioMax": 0.10843373493975904 }, { "completedParallelInputs": "1", "computeMsAvg": "17", "computeMsMax": "17", "computeRatioAvg": 0.06827309236947791, "computeRatioMax": 0.06827309236947791, "endMs": "1665777295536", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.028112449799196786, "readRatioMax": 0.028112449799196786, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "37", "startMs": "1665777295499", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110:ca_address_sk, $111:ca_gmt_offset", "FROM customer_address", "WHERE equal($111, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.0321285140562249, "writeRatioMax": 0.0321285140562249 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.040160642570281124, "computeRatioMax": 0.040160642570281124, "endMs": "1665777295553", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.024096385542168676, "readRatioMax": 0.024096385542168676, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "41", "startMs": "1665777295511", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140:d_date_sk, $141:d_year, $142:d_moy", "FROM date_dim", "WHERE and(equal($141, 1998), equal($142, 5))" ] }, { "kind": "WRITE", "substeps": [ "$140", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.060240963855421686, "writeRatioMax": 0.060240963855421686 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.028112449799196786, "computeRatioMax": 0.028112449799196786, "endMs": "1665777295564", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.020080321285140562, "readRatioMax": 0.020080321285140562, "recordsRead": "18000", "recordsWritten": "1811", "shuffleOutputBytes": "16299", "shuffleOutputBytesSpilled": "0", "slotMs": "28", "startMs": "1665777295536", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$31:i_manufact_id, $30:i_category", "FROM item", "WHERE in($30, 'Electronics')" ] }, { "kind": "WRITE", "substeps": [ "$31", "TO __stage05_output" ] } ], "waitMsAvg": "0", "waitMsMax": "0", "waitRatioAvg": 0, "waitRatioMax": 0, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.0642570281124498, "writeRatioMax": 0.0642570281124498 }, { "completedParallelInputs": "1", "computeMsAvg": "18", "computeMsMax": "18", "computeRatioAvg": 0.07228915662650602, "computeRatioMax": 0.07228915662650602, "endMs": "1665777295592", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.024096385542168676, "readRatioMax": 0.024096385542168676, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "323696", "shuffleOutputBytesSpilled": "0", "slotMs": "41", "startMs": "1665777295553", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:i_item_sk, $21:i_manufact_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "23", "writeMsMax": "23", "writeRatioAvg": 0.09236947791164658, "writeRatioMax": 0.09236947791164658 }, { "completedParallelInputs": "1", "computeMsAvg": "17", "computeMsMax": "17", "computeRatioAvg": 0.06827309236947791, "computeRatioMax": 0.06827309236947791, "endMs": "1665777295668", "id": "7", "name": "S07: Input", "parallelInputs": "1", "readMsAvg": "30", "readMsMax": "30", "readRatioAvg": 0.12048192771084337, "readRatioMax": 0.12048192771084337, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "185", "startMs": "1665777295567", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90:ca_address_sk, $91:ca_gmt_offset", "FROM customer_address", "WHERE equal($91, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "50", "writeMsMax": "50", "writeRatioAvg": 0.20080321285140562, "writeRatioMax": 0.20080321285140562 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.03614457831325301, "computeRatioMax": 0.03614457831325301, "endMs": "1665777295620", "id": "8", "name": "S08: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.0321285140562249, "readRatioMax": 0.0321285140562249, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "36", "startMs": "1665777295582", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$130:d_date_sk, $131:d_year, $132:d_moy", "FROM date_dim", "WHERE and(equal($131, 1998), equal($132, 5))" ] }, { "kind": "WRITE", "substeps": [ "$130", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.028112449799196786, "writeRatioMax": 0.028112449799196786 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.03614457831325301, "computeRatioMax": 0.03614457831325301, "endMs": "1665777295648", "id": "10", "name": "S0A: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.020080321285140562, "readRatioMax": 0.020080321285140562, "recordsRead": "18000", "recordsWritten": "1811", "shuffleOutputBytes": "16299", "shuffleOutputBytesSpilled": "0", "slotMs": "35", "startMs": "1665777295611", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$11:i_manufact_id, $10:i_category", "FROM item", "WHERE in($10, 'Electronics')" ] }, { "kind": "WRITE", "substeps": [ "$11", "TO __stage0A_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.05622489959839357, "writeRatioMax": 0.05622489959839357 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.060240963855421686, "computeRatioMax": 0.060240963855421686, "endMs": "1665777295665", "id": "11", "name": "S0B: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.024096385542168676, "readRatioMax": 0.024096385542168676, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "323696", "shuffleOutputBytesSpilled": "0", "slotMs": "45", "startMs": "1665777295621", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_manufact_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage0B_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "25", "writeMsMax": "25", "writeRatioAvg": 0.10040160642570281, "writeRatioMax": 0.10040160642570281 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.060240963855421686, "computeRatioMax": 0.060240963855421686, "endMs": "1665777295670", "id": "12", "name": "S0C: Input", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.03614457831325301, "readRatioMax": 0.03614457831325301, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "39", "startMs": "1665777295635", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:ca_address_sk, $71:ca_gmt_offset", "FROM customer_address", "WHERE equal($71, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage0C_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "10", "writeMsMax": "10", "writeRatioAvg": 0.040160642570281124, "writeRatioMax": 0.040160642570281124 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.028112449799196786, "computeRatioMax": 0.028112449799196786, "endMs": "1665777295687", "id": "13", "name": "S0D: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.020080321285140562, "readRatioMax": 0.020080321285140562, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "37", "startMs": "1665777295649", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120:d_date_sk, $121:d_year, $122:d_moy", "FROM date_dim", "WHERE and(equal($121, 1998), equal($122, 5))" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage0D_output" ] } ], "waitMsAvg": "0", "waitMsMax": "0", "waitRatioAvg": 0, "waitRatioMax": 0, "writeMsAvg": "27", "writeMsMax": "27", "writeRatioAvg": 0.10843373493975904, "writeRatioMax": 0.10843373493975904 }, { "completedParallelInputs": "1", "computeMsAvg": "197", "computeMsMax": "197", "computeRatioAvg": 0.7911646586345381, "computeRatioMax": 0.7911646586345381, "endMs": "1665777295826", "id": "15", "inputStages": [ "2", "3", "1", "0" ], "name": "S0F: Join+", "parallelInputs": "1", "readMsAvg": "15", "readMsMax": "15", "readRatioAvg": 0.060240963855421686, "readRatioMax": 0.060240963855421686, "recordsRead": "757472", "recordsWritten": "630", "shuffleOutputBytes": "16380", "shuffleOutputBytesSpilled": "0", "slotMs": "236", "startMs": "1665777295676", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$100:ws_sold_date_sk, $101:ws_item_sk, $102:ws_bill_addr_sk, $103:ws_ext_sales_price", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$140", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$110", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$40, $41", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$51", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $400 := $390", "$230 := SUM($391)" ] }, { "kind": "JOIN", "substeps": [ "$390 := $381, $391 := $380", "SEMI HASH JOIN EACH WITH ALL ON $381 = $51" ] }, { "kind": "JOIN", "substeps": [ "$380 := $371, $381 := $41", "INNER HASH JOIN EACH WITH ALL ON $370 = $40" ] }, { "kind": "JOIN", "substeps": [ "$370 := $360, $371 := $362", "INNER HASH JOIN EACH WITH ALL ON $361 = $110" ] }, { "kind": "JOIN", "substeps": [ "$360 := $101, $361 := $102, $362 := $103", "INNER HASH JOIN EACH WITH ALL ON $100 = $140" ] }, { "kind": "WRITE", "substeps": [ "$400, $230", "TO __stage0F_output", "BY HASH($400)" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.008032128514056224, "waitRatioMax": 0.008032128514056224, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.028112449799196786, "writeRatioMax": 0.028112449799196786 }, { "completedParallelInputs": "5", "computeMsAvg": "137", "computeMsMax": "167", "computeRatioAvg": 0.5502008032128514, "computeRatioMax": 0.6706827309236948, "endMs": "1665777295814", "id": "17", "inputStages": [ "7", "5", "6", "8" ], "name": "S11: Join+", "parallelInputs": "5", "readMsAvg": "16", "readMsMax": "18", "readRatioAvg": 0.0642570281124498, "readRatioMax": 0.07228915662650602, "recordsRead": "1631988", "recordsWritten": "2316", "shuffleOutputBytes": "60216", "shuffleOutputBytesSpilled": "0", "slotMs": "805", "startMs": "1665777295695", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80:cs_sold_date_sk, $81:cs_bill_addr_sk, $82:cs_item_sk, $83:cs_ext_sales_price", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$130", "FROM __stage08_output" ] }, { "kind": "READ", "substeps": [ "$90", "FROM __stage07_output" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$31", "FROM __stage05_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $340 := $330", "$220 := SUM($331)" ] }, { "kind": "JOIN", "substeps": [ "$330 := $321, $331 := $320", "SEMI HASH JOIN EACH WITH ALL ON $321 = $31" ] }, { "kind": "JOIN", "substeps": [ "$320 := $311, $321 := $21", "INNER HASH JOIN EACH WITH ALL ON $310 = $20" ] }, { "kind": "JOIN", "substeps": [ "$310 := $301, $311 := $302", "INNER HASH JOIN EACH WITH ALL ON $300 = $90" ] }, { "kind": "JOIN", "substeps": [ "$300 := $81, $301 := $82, $302 := $83", "INNER HASH JOIN EACH WITH ALL ON $80 = $130" ] }, { "kind": "WRITE", "substeps": [ "$340, $220", "TO __stage11_output", "BY HASH($340)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "5", "writeMsMax": "6", "writeRatioAvg": 0.020080321285140562, "writeRatioMax": 0.024096385542168676 }, { "completedParallelInputs": "6", "computeMsAvg": "185", "computeMsMax": "249", "computeRatioAvg": 0.7429718875502008, "computeRatioMax": 1, "endMs": "1665777295855", "id": "18", "inputStages": [ "12", "10", "13", "11" ], "name": "S12: Join+", "parallelInputs": "6", "readMsAvg": "17", "readMsMax": "20", "readRatioAvg": 0.06827309236947791, "readRatioMax": 0.08032128514056225, "recordsRead": "3108932", "recordsWritten": "3391", "shuffleOutputBytes": "87974", "shuffleOutputBytesSpilled": "0", "slotMs": "1302", "startMs": "1665777295700", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:ss_sold_date_sk, $61:ss_item_sk, $62:ss_addr_sk, $63:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$120", "FROM __stage0D_output" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage0C_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$11", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $280 := $270", "$210 := SUM($271)" ] }, { "kind": "JOIN", "substeps": [ "$270 := $261, $271 := $260", "SEMI HASH JOIN EACH WITH ALL ON $261 = $11" ] }, { "kind": "JOIN", "substeps": [ "$260 := $251, $261 := $2", "INNER HASH JOIN EACH WITH ALL ON $250 = $1" ] }, { "kind": "JOIN", "substeps": [ "$250 := $240, $251 := $242", "INNER HASH JOIN EACH WITH ALL ON $241 = $70" ] }, { "kind": "JOIN", "substeps": [ "$240 := $61, $241 := $62, $242 := $63", "INNER HASH JOIN EACH WITH ALL ON $60 = $120" ] }, { "kind": "WRITE", "substeps": [ "$280, $210", "TO __stage12_output", "BY HASH($280)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "5", "writeMsMax": "6", "writeRatioAvg": 0.020080321285140562, "writeRatioMax": 0.024096385542168676 }, { "completedParallelInputs": "3", "computeMsAvg": "13", "computeMsMax": "14", "computeRatioAvg": 0.05220883534136546, "computeRatioMax": 0.05622489959839357, "endMs": "1665777295918", "id": "19", "inputStages": [ "18", "15", "17" ], "name": "S13: Aggregate", "parallelInputs": "3", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "6337", "recordsWritten": "2017", "shuffleOutputBytes": "52442", "shuffleOutputBytesSpilled": "0", "slotMs": "112", "startMs": "1665777295877", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$280, $210", "FROM __stage12_output" ] }, { "kind": "READ", "substeps": [ "$340, $220", "FROM __stage11_output" ] }, { "kind": "READ", "substeps": [ "$400, $230", "FROM __stage0F_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $420 := $170", "$160 := SUM($171)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $290 := $280", "$180 := SUM($210)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $350 := $340", "$190 := SUM($220)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $410 := $400", "$200 := SUM($230)" ] }, { "kind": "WRITE", "substeps": [ "$160, $420", "TO __stage13_output", "BY HASH($420)" ] } ], "waitMsAvg": "1", "waitMsMax": "2", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.008032128514056224, "writeMsAvg": "16", "writeMsMax": "17", "writeRatioAvg": 0.0642570281124498, "writeRatioMax": 0.06827309236947791 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.028112449799196786, "computeRatioMax": 0.028112449799196786, "endMs": "1665777295958", "id": "20", "inputStages": [ "19" ], "name": "S14: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "2017", "recordsWritten": "100", "shuffleOutputBytes": "2600", "shuffleOutputBytesSpilled": "0", "slotMs": "31", "startMs": "1665777295924", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $420", "FROM __stage13_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $430 := $420", "$150 := SUM($160)" ] }, { "kind": "WRITE", "substeps": [ "$440, $441", "TO __stage14_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.060240963855421686, "writeRatioMax": 0.060240963855421686 }, { "completedParallelInputs": "1", "computeMsAvg": "17", "computeMsMax": "17", "computeRatioAvg": 0.06827309236947791, "computeRatioMax": 0.06827309236947791, "endMs": "1665777295972", "id": "21", "inputStages": [ "20" ], "name": "S15: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "2600", "shuffleOutputBytesSpilled": "0", "slotMs": "33", "startMs": "1665777295939", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$440, $441", "FROM __stage14_output" ] }, { "kind": "SORT", "substeps": [ "$440 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$450, $451", "TO __stage15_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.0321285140562249, "writeRatioMax": 0.0321285140562249 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_address" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" } ], "statementType": "SELECT", "timeline": [ { "activeUnits": "0", "completedUnits": "29", "elapsedMs": "628", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "3203" }, { "activeUnits": "0", "completedUnits": "29", "elapsedMs": "652", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "3203" } ], "totalBytesBilled": "201326592", "totalBytesProcessed": "200610043", "totalPartitionsProcessed": "0", "totalSlotMs": "3203", "transferredBytes": "0" }, "startTime": "1665777295350", "totalBytesProcessed": "200610043", "totalSlotMs": "3203" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon8d6fe078_4caf_4b34_bef5_3ef0f5e766f0" }, "priority": "INTERACTIVE", "query": "with ss as (\n select\n i_manufact_id,sum(ss_ext_sales_price) total_sales\n from\n \tstore_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_manufact_id in (select\n i_manufact_id\nfrom\n item\nwhere i_category in ('Electronics'))\n and ss_item_sk = i_item_sk\n and ss_sold_date_sk = d_date_sk\n and d_year = 1998\n and d_moy = 5\n and ss_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_manufact_id),\n cs as (\n select\n i_manufact_id,sum(cs_ext_sales_price) total_sales\n from\n \tcatalog_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_manufact_id in (select\n i_manufact_id\nfrom\n item\nwhere i_category in ('Electronics'))\n and cs_item_sk = i_item_sk\n and cs_sold_date_sk = d_date_sk\n and d_year = 1998\n and d_moy = 5\n and cs_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_manufact_id),\n ws as (\n select\n i_manufact_id,sum(ws_ext_sales_price) total_sales\n from\n \tweb_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_manufact_id in (select\n i_manufact_id\nfrom\n item\nwhere i_category in ('Electronics'))\n and ws_item_sk = i_item_sk\n and ws_sold_date_sk = d_date_sk\n and d_year = 1998\n and d_moy = 5\n and ws_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5\n group by i_manufact_id)\n select i_manufact_id ,sum(total_sales) total_sales\n from (select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ss \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from cs \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ws) tmp1\n group by i_manufact_id\n order by total_sales\n limit 100\n;", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "YLY36HerNpOOaNIRzJ9x9g==", "id": "test-project-364309:europe-west1.query33_1665777297", "jobReference": { "jobId": "query33_1665777297", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query33_1665777297?location=europe-west1", "statistics": { "creationTime": "1665777297665", "endTime": "1665777298507", "finalExecutionDurationMs": "588", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "200610043", "performanceInsights": { "avgPreviousExecutionMs": "567" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "17", "computeMsMax": "17", "computeRatioAvg": 0.0779816513761468, "computeRatioMax": 0.0779816513761468, "endMs": "1665777297897", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.03211009174311927, "readRatioMax": 0.03211009174311927, "recordsRead": "18000", "recordsWritten": "1811", "shuffleOutputBytes": "16299", "shuffleOutputBytesSpilled": "0", "slotMs": "42", "startMs": "1665777297857", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$51:i_manufact_id, $50:i_category", "FROM item", "WHERE in($50, 'Electronics')" ] }, { "kind": "WRITE", "substeps": [ "$51", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0045871559633027525, "waitRatioMax": 0.0045871559633027525, "writeMsAvg": "10", "writeMsMax": "10", "writeRatioAvg": 0.045871559633027525, "writeRatioMax": 0.045871559633027525 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.06880733944954129, "computeRatioMax": 0.06880733944954129, "endMs": "1665777297909", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.03669724770642202, "readRatioMax": 0.03669724770642202, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "323696", "shuffleOutputBytesSpilled": "0", "slotMs": "49", "startMs": "1665777297869", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_manufact_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$40, $41", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0045871559633027525, "waitRatioMax": 0.0045871559633027525, "writeMsAvg": "21", "writeMsMax": "21", "writeRatioAvg": 0.0963302752293578, "writeRatioMax": 0.0963302752293578 }, { "completedParallelInputs": "1", "computeMsAvg": "20", "computeMsMax": "20", "computeRatioAvg": 0.09174311926605505, "computeRatioMax": 0.09174311926605505, "endMs": "1665777297919", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.04128440366972477, "readRatioMax": 0.04128440366972477, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "40", "startMs": "1665777297882", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110:ca_address_sk, $111:ca_gmt_offset", "FROM customer_address", "WHERE equal($111, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0045871559633027525, "waitRatioMax": 0.0045871559633027525, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.06880733944954129, "writeRatioMax": 0.06880733944954129 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.06422018348623854, "computeRatioMax": 0.06422018348623854, "endMs": "1665777297944", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "11", "readMsMax": "11", "readRatioAvg": 0.05045871559633028, "readRatioMax": 0.05045871559633028, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "53", "startMs": "1665777297897", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140:d_date_sk, $141:d_year, $142:d_moy", "FROM date_dim", "WHERE and(equal($141, 1998), equal($142, 5))" ] }, { "kind": "WRITE", "substeps": [ "$140", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0045871559633027525, "waitRatioMax": 0.0045871559633027525, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.06422018348623854, "writeRatioMax": 0.06422018348623854 }, { "completedParallelInputs": "1", "computeMsAvg": "18", "computeMsMax": "18", "computeRatioAvg": 0.08256880733944955, "computeRatioMax": 0.08256880733944955, "endMs": "1665777298002", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "13", "readMsMax": "13", "readRatioAvg": 0.05963302752293578, "readRatioMax": 0.05963302752293578, "recordsRead": "18000", "recordsWritten": "1811", "shuffleOutputBytes": "16299", "shuffleOutputBytesSpilled": "0", "slotMs": "60", "startMs": "1665777297928", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$31:i_manufact_id, $30:i_category", "FROM item", "WHERE in($30, 'Electronics')" ] }, { "kind": "WRITE", "substeps": [ "$31", "TO __stage05_output" ] } ], "waitMsAvg": "7", "waitMsMax": "7", "waitRatioAvg": 0.03211009174311927, "waitRatioMax": 0.03211009174311927, "writeMsAvg": "38", "writeMsMax": "38", "writeRatioAvg": 0.1743119266055046, "writeRatioMax": 0.1743119266055046 }, { "completedParallelInputs": "1", "computeMsAvg": "18", "computeMsMax": "18", "computeRatioAvg": 0.08256880733944955, "computeRatioMax": 0.08256880733944955, "endMs": "1665777297992", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.027522935779816515, "readRatioMax": 0.027522935779816515, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "323696", "shuffleOutputBytesSpilled": "0", "slotMs": "55", "startMs": "1665777297939", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:i_item_sk, $21:i_manufact_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0045871559633027525, "waitRatioMax": 0.0045871559633027525, "writeMsAvg": "36", "writeMsMax": "36", "writeRatioAvg": 0.1651376146788991, "writeRatioMax": 0.1651376146788991 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.05504587155963303, "computeRatioMax": 0.05504587155963303, "endMs": "1665777297993", "id": "7", "name": "S07: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.027522935779816515, "readRatioMax": 0.027522935779816515, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "38", "startMs": "1665777297954", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90:ca_address_sk, $91:ca_gmt_offset", "FROM customer_address", "WHERE equal($91, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage07_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.009174311926605505, "waitRatioMax": 0.009174311926605505, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.06422018348623854, "writeRatioMax": 0.06422018348623854 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.03669724770642202, "computeRatioMax": 0.03669724770642202, "endMs": "1665777298006", "id": "8", "name": "S08: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.03211009174311927, "readRatioMax": 0.03211009174311927, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665777297968", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$130:d_date_sk, $131:d_year, $132:d_moy", "FROM date_dim", "WHERE and(equal($131, 1998), equal($132, 5))" ] }, { "kind": "WRITE", "substeps": [ "$130", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0045871559633027525, "waitRatioMax": 0.0045871559633027525, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.05963302752293578, "writeRatioMax": 0.05963302752293578 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.045871559633027525, "computeRatioMax": 0.045871559633027525, "endMs": "1665777298030", "id": "10", "name": "S0A: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.022935779816513763, "readRatioMax": 0.022935779816513763, "recordsRead": "18000", "recordsWritten": "1811", "shuffleOutputBytes": "16299", "shuffleOutputBytesSpilled": "0", "slotMs": "35", "startMs": "1665777298000", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$11:i_manufact_id, $10:i_category", "FROM item", "WHERE in($10, 'Electronics')" ] }, { "kind": "WRITE", "substeps": [ "$11", "TO __stage0A_output" ] } ], "waitMsAvg": "5", "waitMsMax": "5", "waitRatioAvg": 0.022935779816513763, "waitRatioMax": 0.022935779816513763, "writeMsAvg": "17", "writeMsMax": "17", "writeRatioAvg": 0.0779816513761468, "writeRatioMax": 0.0779816513761468 }, { "completedParallelInputs": "1", "computeMsAvg": "20", "computeMsMax": "20", "computeRatioAvg": 0.09174311926605505, "computeRatioMax": 0.09174311926605505, "endMs": "1665777298057", "id": "11", "name": "S0B: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.022935779816513763, "readRatioMax": 0.022935779816513763, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "323696", "shuffleOutputBytesSpilled": "0", "slotMs": "58", "startMs": "1665777298011", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_manufact_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage0B_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0045871559633027525, "waitRatioMax": 0.0045871559633027525, "writeMsAvg": "30", "writeMsMax": "30", "writeRatioAvg": 0.13761467889908258, "writeRatioMax": 0.13761467889908258 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.045871559633027525, "computeRatioMax": 0.045871559633027525, "endMs": "1665777298057", "id": "12", "name": "S0C: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.027522935779816515, "readRatioMax": 0.027522935779816515, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "27", "startMs": "1665777298028", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:ca_address_sk, $71:ca_gmt_offset", "FROM customer_address", "WHERE equal($71, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage0C_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0045871559633027525, "waitRatioMax": 0.0045871559633027525, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.06880733944954129, "writeRatioMax": 0.06880733944954129 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.06422018348623854, "computeRatioMax": 0.06422018348623854, "endMs": "1665777298086", "id": "13", "name": "S0D: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.03669724770642202, "readRatioMax": 0.03669724770642202, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "35", "startMs": "1665777298043", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120:d_date_sk, $121:d_year, $122:d_moy", "FROM date_dim", "WHERE and(equal($121, 1998), equal($122, 5))" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage0D_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0045871559633027525, "waitRatioMax": 0.0045871559633027525, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.06880733944954129, "writeRatioMax": 0.06880733944954129 }, { "completedParallelInputs": "1", "computeMsAvg": "218", "computeMsMax": "218", "computeRatioAvg": 1, "computeRatioMax": 1, "endMs": "1665777298257", "id": "15", "inputStages": [ "3", "2", "0", "1" ], "name": "S0F: Join+", "parallelInputs": "1", "readMsAvg": "31", "readMsMax": "31", "readRatioAvg": 0.14220183486238533, "readRatioMax": 0.14220183486238533, "recordsRead": "757472", "recordsWritten": "630", "shuffleOutputBytes": "16380", "shuffleOutputBytesSpilled": "0", "slotMs": "217", "startMs": "1665777298078", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$100:ws_sold_date_sk, $101:ws_item_sk, $102:ws_bill_addr_sk, $103:ws_ext_sales_price", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$140", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$110", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$40, $41", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$51", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $400 := $390", "$230 := SUM($391)" ] }, { "kind": "JOIN", "substeps": [ "$390 := $381, $391 := $380", "SEMI HASH JOIN EACH WITH ALL ON $381 = $51" ] }, { "kind": "JOIN", "substeps": [ "$380 := $371, $381 := $41", "INNER HASH JOIN EACH WITH ALL ON $370 = $40" ] }, { "kind": "JOIN", "substeps": [ "$370 := $360, $371 := $362", "INNER HASH JOIN EACH WITH ALL ON $361 = $110" ] }, { "kind": "JOIN", "substeps": [ "$360 := $101, $361 := $102, $362 := $103", "INNER HASH JOIN EACH WITH ALL ON $100 = $140" ] }, { "kind": "WRITE", "substeps": [ "$400, $230", "TO __stage0F_output", "BY HASH($400)" ] } ], "waitMsAvg": "4", "waitMsMax": "4", "waitRatioAvg": 0.01834862385321101, "waitRatioMax": 0.01834862385321101, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.03669724770642202, "writeRatioMax": 0.03669724770642202 }, { "completedParallelInputs": "5", "computeMsAvg": "122", "computeMsMax": "138", "computeRatioAvg": 0.5596330275229358, "computeRatioMax": 0.6330275229357798, "endMs": "1665777298211", "id": "16", "inputStages": [ "6", "5", "7", "8" ], "name": "S10: Join+", "parallelInputs": "5", "readMsAvg": "20", "readMsMax": "31", "readRatioAvg": 0.09174311926605505, "readRatioMax": 0.14220183486238533, "recordsRead": "1631988", "recordsWritten": "2316", "shuffleOutputBytes": "60216", "shuffleOutputBytesSpilled": "0", "slotMs": "722", "startMs": "1665777298080", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80:cs_sold_date_sk, $81:cs_bill_addr_sk, $82:cs_item_sk, $83:cs_ext_sales_price", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$130", "FROM __stage08_output" ] }, { "kind": "READ", "substeps": [ "$90", "FROM __stage07_output" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$31", "FROM __stage05_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $340 := $330", "$220 := SUM($331)" ] }, { "kind": "JOIN", "substeps": [ "$330 := $321, $331 := $320", "SEMI HASH JOIN EACH WITH ALL ON $321 = $31" ] }, { "kind": "JOIN", "substeps": [ "$320 := $311, $321 := $21", "INNER HASH JOIN EACH WITH ALL ON $310 = $20" ] }, { "kind": "JOIN", "substeps": [ "$310 := $301, $311 := $302", "INNER HASH JOIN EACH WITH ALL ON $300 = $90" ] }, { "kind": "JOIN", "substeps": [ "$300 := $81, $301 := $82, $302 := $83", "INNER HASH JOIN EACH WITH ALL ON $80 = $130" ] }, { "kind": "WRITE", "substeps": [ "$340, $220", "TO __stage10_output", "BY HASH($340)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0045871559633027525, "waitRatioMax": 0.0045871559633027525, "writeMsAvg": "6", "writeMsMax": "9", "writeRatioAvg": 0.027522935779816515, "writeRatioMax": 0.04128440366972477 }, { "completedParallelInputs": "6", "computeMsAvg": "165", "computeMsMax": "213", "computeRatioAvg": 0.7568807339449541, "computeRatioMax": 0.9770642201834863, "endMs": "1665777298251", "id": "17", "inputStages": [ "13", "11", "12", "10" ], "name": "S11: Join+", "parallelInputs": "6", "readMsAvg": "19", "readMsMax": "26", "readRatioAvg": 0.0871559633027523, "readRatioMax": 0.11926605504587157, "recordsRead": "3108932", "recordsWritten": "3391", "shuffleOutputBytes": "87974", "shuffleOutputBytesSpilled": "0", "slotMs": "1217", "startMs": "1665777298093", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:ss_sold_date_sk, $61:ss_item_sk, $62:ss_addr_sk, $63:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$120", "FROM __stage0D_output" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage0C_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$11", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $280 := $270", "$210 := SUM($271)" ] }, { "kind": "JOIN", "substeps": [ "$270 := $261, $271 := $260", "SEMI HASH JOIN EACH WITH ALL ON $261 = $11" ] }, { "kind": "JOIN", "substeps": [ "$260 := $251, $261 := $2", "INNER HASH JOIN EACH WITH ALL ON $250 = $1" ] }, { "kind": "JOIN", "substeps": [ "$250 := $240, $251 := $242", "INNER HASH JOIN EACH WITH ALL ON $241 = $70" ] }, { "kind": "JOIN", "substeps": [ "$240 := $61, $241 := $62, $242 := $63", "INNER HASH JOIN EACH WITH ALL ON $60 = $120" ] }, { "kind": "WRITE", "substeps": [ "$280, $210", "TO __stage11_output", "BY HASH($280)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0045871559633027525, "waitRatioMax": 0.0045871559633027525, "writeMsAvg": "6", "writeMsMax": "10", "writeRatioAvg": 0.027522935779816515, "writeRatioMax": 0.045871559633027525 }, { "completedParallelInputs": "3", "computeMsAvg": "14", "computeMsMax": "22", "computeRatioAvg": 0.06422018348623854, "computeRatioMax": 0.10091743119266056, "endMs": "1665777298343", "id": "18", "inputStages": [ "15", "16", "17" ], "name": "S12: Aggregate", "parallelInputs": "3", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "6337", "recordsWritten": "2017", "shuffleOutputBytes": "52442", "shuffleOutputBytesSpilled": "0", "slotMs": "126", "startMs": "1665777298305", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$280, $210", "FROM __stage11_output" ] }, { "kind": "READ", "substeps": [ "$340, $220", "FROM __stage10_output" ] }, { "kind": "READ", "substeps": [ "$400, $230", "FROM __stage0F_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $420 := $170", "$160 := SUM($171)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $290 := $280", "$180 := SUM($210)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $350 := $340", "$190 := SUM($220)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $410 := $400", "$200 := SUM($230)" ] }, { "kind": "WRITE", "substeps": [ "$160, $420", "TO __stage12_output", "BY HASH($420)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0045871559633027525, "waitRatioMax": 0.0045871559633027525, "writeMsAvg": "14", "writeMsMax": "18", "writeRatioAvg": 0.06422018348623854, "writeRatioMax": 0.08256880733944955 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.045871559633027525, "computeRatioMax": 0.045871559633027525, "endMs": "1665777298388", "id": "19", "inputStages": [ "18" ], "name": "S13: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "2017", "recordsWritten": "100", "shuffleOutputBytes": "2600", "shuffleOutputBytesSpilled": "0", "slotMs": "39", "startMs": "1665777298352", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $420", "FROM __stage12_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $430 := $420", "$150 := SUM($160)" ] }, { "kind": "WRITE", "substeps": [ "$440, $441", "TO __stage13_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0045871559633027525, "waitRatioMax": 0.0045871559633027525, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.06880733944954129, "writeRatioMax": 0.06880733944954129 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.045871559633027525, "computeRatioMax": 0.045871559633027525, "endMs": "1665777298408", "id": "20", "inputStages": [ "19" ], "name": "S14: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "2600", "shuffleOutputBytesSpilled": "0", "slotMs": "29", "startMs": "1665777298367", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$440, $441", "FROM __stage13_output" ] }, { "kind": "SORT", "substeps": [ "$440 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$450, $451", "TO __stage14_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.009174311926605505, "waitRatioMax": 0.009174311926605505, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.03211009174311927, "writeRatioMax": 0.03211009174311927 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_address" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" } ], "statementType": "SELECT", "timeline": [ { "activeUnits": "1", "completedUnits": "27", "elapsedMs": "633", "estimatedRunnableUnits": "0", "pendingUnits": "2", "totalSlotMs": "2877" }, { "activeUnits": "1", "completedUnits": "29", "elapsedMs": "724", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2946" } ], "totalBytesBilled": "201326592", "totalBytesProcessed": "200610043", "totalPartitionsProcessed": "0", "totalSlotMs": "2946", "transferredBytes": "0" }, "startTime": "1665777297726", "totalBytesProcessed": "200610043", "totalSlotMs": "2946" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
