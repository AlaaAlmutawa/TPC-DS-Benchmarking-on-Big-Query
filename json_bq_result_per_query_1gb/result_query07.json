{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon1c8f7d6b_075a_445e_aa67_d9aa1947baa6" }, "priority": "INTERACTIVE", "query": "-- start query 7 in stream 0 using template query7.tpl\nselect i_item_id, \n avg(ss_quantity) agg1,\n avg(ss_list_price) agg2,\n avg(ss_coupon_amt) agg3,\n avg(ss_sales_price) agg4 \n from store_sales, customer_demographics, date_dim, item, promotion\n where ss_sold_date_sk = d_date_sk and\n ss_item_sk = i_item_sk and\n ss_cdemo_sk = cd_demo_sk and\n ss_promo_sk = p_promo_sk and\n cd_gender = 'M' and \n cd_marital_status = 'S' and\n cd_education_status = 'College' and\n (p_channel_email = 'N' or p_channel_event = 'N') and\n d_year = 2000\n group by i_item_id\n order by i_item_id\n limit 100\n ;\n\n-- end query 7 in stream 0 using template query7.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "5qnY1YVjpowH58QttZ0aCw==", "id": "test-project-364309:europe-west1.query07_1665768216", "jobReference": { "jobId": "query07_1665768216", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query07_1665768216?location=europe-west1", "statistics": { "creationTime": "1665768217742", "endTime": "1665768218423", "finalExecutionDurationMs": "504", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "293847813", "performanceInsights": { "avgPreviousExecutionMs": "498" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.02643171806167401, "computeRatioMax": 0.02643171806167401, "endMs": "1665768217929", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.015418502202643172, "readRatioMax": 0.015418502202643172, "recordsRead": "300", "recordsWritten": "299", "shuffleOutputBytes": "2691", "shuffleOutputBytesSpilled": "0", "slotMs": "49", "startMs": "1665768217882", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:p_promo_sk, $11:p_channel_email, $12:p_channel_event", "FROM promotion", "WHERE or(equal($11, 'N'), equal($12, 'N'))" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0022026431718061676, "waitRatioMax": 0.0022026431718061676, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.03524229074889868, "writeRatioMax": 0.03524229074889868 }, { "completedParallelInputs": "1", "computeMsAvg": "20", "computeMsMax": "20", "computeRatioAvg": 0.04405286343612335, "computeRatioMax": 0.04405286343612335, "endMs": "1665768217944", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.015418502202643172, "readRatioMax": 0.015418502202643172, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "61", "startMs": "1665768217895", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0022026431718061676, "waitRatioMax": 0.0022026431718061676, "writeMsAvg": "28", "writeMsMax": "28", "writeRatioAvg": 0.06167400881057269, "writeRatioMax": 0.06167400881057269 }, { "completedParallelInputs": "1", "computeMsAvg": "20", "computeMsMax": "20", "computeRatioAvg": 0.04405286343612335, "computeRatioMax": 0.04405286343612335, "endMs": "1665768217957", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.022026431718061675, "readRatioMax": 0.022026431718061675, "recordsRead": "73049", "recordsWritten": "366", "shuffleOutputBytes": "3294", "shuffleOutputBytesSpilled": "0", "slotMs": "54", "startMs": "1665768217910", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_year", "FROM date_dim", "WHERE equal($31, 2000)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0022026431718061676, "waitRatioMax": 0.0022026431718061676, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.030837004405286344, "writeRatioMax": 0.030837004405286344 }, { "completedParallelInputs": "1", "computeMsAvg": "35", "computeMsMax": "35", "computeRatioAvg": 0.07709251101321586, "computeRatioMax": 0.07709251101321586, "endMs": "1665768217988", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "24", "readMsMax": "24", "readRatioAvg": 0.05286343612334802, "readRatioMax": 0.05286343612334802, "recordsRead": "1920800", "recordsWritten": "27440", "shuffleOutputBytes": "246960", "shuffleOutputBytesSpilled": "0", "slotMs": "79", "startMs": "1665768217926", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:cd_demo_sk, $41:cd_gender, $42:cd_marital_status, $43:cd_education_status", "FROM customer_demographics", "WHERE and(equal($41, 'M'), equal($42, 'S'), equal($43, 'College'))" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0022026431718061676, "waitRatioMax": 0.0022026431718061676, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.030837004405286344, "writeRatioMax": 0.030837004405286344 }, { "completedParallelInputs": "6", "computeMsAvg": "393", "computeMsMax": "454", "computeRatioAvg": 0.8656387665198237, "computeRatioMax": 1, "endMs": "1665768218294", "id": "5", "inputStages": [ "1", "0", "3", "2" ], "name": "S05: Join+", "parallelInputs": "6", "readMsAvg": "22", "readMsMax": "29", "readRatioAvg": 0.048458149779735685, "readRatioMax": 0.06387665198237885, "recordsRead": "3157034", "recordsWritten": "7199", "shuffleOutputBytes": "543087", "shuffleOutputBytesSpilled": "0", "slotMs": "2409", "startMs": "1665768217996", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:ss_sold_date_sk, $21:ss_item_sk, $22:ss_cdemo_sk, $23:ss_promo_sk, $24:ss_quantity, $25:ss_list_price, $26:ss_sales_price, $27:ss_coupon_amt", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $130", "$60 := SHARD_AVG($131)", "$61 := SHARD_AVG($132)", "$62 := SHARD_AVG($134)", "$63 := SHARD_AVG($133)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $115, $131 := $111, $132 := $112, $133 := $113, $134 := $114", "INNER HASH JOIN EACH WITH ALL ON $110 = $10" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102, $112 := $103, $113 := $104, $114 := $105, $115 := $2", "INNER HASH JOIN EACH WITH ALL ON $100 = $1" ] }, { "kind": "JOIN", "substeps": [ "$100 := $81, $101 := $82, $102 := $83, $103 := $84, $104 := $85, $105 := $86", "INNER HASH JOIN EACH WITH ALL ON $80 = $30" ] }, { "kind": "JOIN", "substeps": [ "$80 := $20, $81 := $21, $82 := $23, $83 := $24, $84 := $25, $85 := $26, $86 := $27", "INNER HASH JOIN EACH WITH ALL ON $22 = $40" ] }, { "kind": "WRITE", "substeps": [ "$140, $60, $61, $62, $63", "TO __stage05_output", "BY HASH($140)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0022026431718061676, "waitRatioMax": 0.0022026431718061676, "writeMsAvg": "6", "writeMsMax": "8", "writeRatioAvg": 0.013215859030837005, "writeRatioMax": 0.01762114537444934 }, { "completedParallelInputs": "1", "computeMsAvg": "16", "computeMsMax": "16", "computeRatioAvg": 0.03524229074889868, "computeRatioMax": 0.03524229074889868, "endMs": "1665768218316", "id": "6", "inputStages": [ "5" ], "name": "S06: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "7199", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "21", "startMs": "1665768218298", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140, $60, $61, $62, $63", "FROM __stage05_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$50 := ROOT_AVG($60)", "$51 := ROOT_AVG($61)", "$52 := ROOT_AVG($62)", "$53 := ROOT_AVG($63)" ] }, { "kind": "WRITE", "substeps": [ "$160, $161, $162, $163, $164", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0022026431718061676, "waitRatioMax": 0.0022026431718061676, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.0022026431718061676, "writeRatioMax": 0.0022026431718061676 }, { "completedParallelInputs": "1", "computeMsAvg": "18", "computeMsMax": "18", "computeRatioAvg": 0.039647577092511016, "computeRatioMax": 0.039647577092511016, "endMs": "1665768218358", "id": "7", "inputStages": [ "6" ], "name": "S07: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "51", "startMs": "1665768218316", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $161, $162, $163, $164", "FROM __stage06_output" ] }, { "kind": "SORT", "substeps": [ "$160 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$170, $171, $172, $173, $174", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0022026431718061676, "waitRatioMax": 0.0022026431718061676, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.030837004405286344, "writeRatioMax": 0.030837004405286344 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_demographics" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "promotion" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "12", "elapsedMs": "587", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2726" } ], "totalBytesBilled": "294649856", "totalBytesProcessed": "293847813", "totalPartitionsProcessed": "0", "totalSlotMs": "2726", "transferredBytes": "0" }, "startTime": "1665768217795", "totalBytesProcessed": "293847813", "totalSlotMs": "2726" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon4b67fdbe_60eb_4172_b36e_67495c60f149" }, "priority": "INTERACTIVE", "query": "-- start query 7 in stream 0 using template query7.tpl\nselect i_item_id, \n avg(ss_quantity) agg1,\n avg(ss_list_price) agg2,\n avg(ss_coupon_amt) agg3,\n avg(ss_sales_price) agg4 \n from store_sales, customer_demographics, date_dim, item, promotion\n where ss_sold_date_sk = d_date_sk and\n ss_item_sk = i_item_sk and\n ss_cdemo_sk = cd_demo_sk and\n ss_promo_sk = p_promo_sk and\n cd_gender = 'M' and \n cd_marital_status = 'S' and\n cd_education_status = 'College' and\n (p_channel_email = 'N' or p_channel_event = 'N') and\n d_year = 2000\n group by i_item_id\n order by i_item_id\n limit 100\n ;\n\n-- end query 7 in stream 0 using template query7.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "GgXKoY166hwFCzWYs/pvIw==", "id": "test-project-364309:europe-west1.query07_1665776498", "jobReference": { "jobId": "query07_1665776498", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query07_1665776498?location=europe-west1", "statistics": { "creationTime": "1665776498985", "endTime": "1665776499659", "finalExecutionDurationMs": "491", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "293847813", "performanceInsights": { "avgPreviousExecutionMs": "498" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.016203703703703703, "computeRatioMax": 0.016203703703703703, "endMs": "1665776499158", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.013888888888888888, "readRatioMax": 0.013888888888888888, "recordsRead": "300", "recordsWritten": "299", "shuffleOutputBytes": "2691", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665776499127", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:p_promo_sk, $11:p_channel_email, $12:p_channel_event", "FROM promotion", "WHERE or(equal($11, 'N'), equal($12, 'N'))" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0023148148148148147, "waitRatioMax": 0.0023148148148148147, "writeMsAvg": "18", "writeMsMax": "18", "writeRatioAvg": 0.041666666666666664, "writeRatioMax": 0.041666666666666664 }, { "completedParallelInputs": "1", "computeMsAvg": "17", "computeMsMax": "17", "computeRatioAvg": 0.03935185185185185, "computeRatioMax": 0.03935185185185185, "endMs": "1665776499189", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.020833333333333332, "readRatioMax": 0.020833333333333332, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "56", "startMs": "1665776499142", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage01_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.004629629629629629, "waitRatioMax": 0.004629629629629629, "writeMsAvg": "23", "writeMsMax": "23", "writeRatioAvg": 0.05324074074074074, "writeRatioMax": 0.05324074074074074 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.016203703703703703, "computeRatioMax": 0.016203703703703703, "endMs": "1665776499188", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.016203703703703703, "readRatioMax": 0.016203703703703703, "recordsRead": "73049", "recordsWritten": "366", "shuffleOutputBytes": "3294", "shuffleOutputBytesSpilled": "0", "slotMs": "33", "startMs": "1665776499159", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_year", "FROM date_dim", "WHERE equal($31, 2000)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0023148148148148147, "waitRatioMax": 0.0023148148148148147, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.032407407407407406, "writeRatioMax": 0.032407407407407406 }, { "completedParallelInputs": "1", "computeMsAvg": "39", "computeMsMax": "39", "computeRatioAvg": 0.09027777777777778, "computeRatioMax": 0.09027777777777778, "endMs": "1665776499222", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "16", "readMsMax": "16", "readRatioAvg": 0.037037037037037035, "readRatioMax": 0.037037037037037035, "recordsRead": "1920800", "recordsWritten": "27440", "shuffleOutputBytes": "246960", "shuffleOutputBytesSpilled": "0", "slotMs": "81", "startMs": "1665776499177", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:cd_demo_sk, $41:cd_gender, $42:cd_marital_status, $43:cd_education_status", "FROM customer_demographics", "WHERE and(equal($41, 'M'), equal($42, 'S'), equal($43, 'College'))" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0023148148148148147, "waitRatioMax": 0.0023148148148148147, "writeMsAvg": "10", "writeMsMax": "10", "writeRatioAvg": 0.023148148148148147, "writeRatioMax": 0.023148148148148147 }, { "completedParallelInputs": "6", "computeMsAvg": "390", "computeMsMax": "432", "computeRatioAvg": 0.9027777777777778, "computeRatioMax": 1, "endMs": "1665776499513", "id": "5", "inputStages": [ "3", "2", "0", "1" ], "name": "S05: Join+", "parallelInputs": "6", "readMsAvg": "21", "readMsMax": "30", "readRatioAvg": 0.04861111111111111, "readRatioMax": 0.06944444444444445, "recordsRead": "3157034", "recordsWritten": "7199", "shuffleOutputBytes": "543087", "shuffleOutputBytesSpilled": "0", "slotMs": "1935", "startMs": "1665776499229", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:ss_sold_date_sk, $21:ss_item_sk, $22:ss_cdemo_sk, $23:ss_promo_sk, $24:ss_quantity, $25:ss_list_price, $26:ss_sales_price, $27:ss_coupon_amt", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $130", "$60 := SHARD_AVG($131)", "$61 := SHARD_AVG($132)", "$62 := SHARD_AVG($134)", "$63 := SHARD_AVG($133)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $115, $131 := $111, $132 := $112, $133 := $113, $134 := $114", "INNER HASH JOIN EACH WITH ALL ON $110 = $10" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102, $112 := $103, $113 := $104, $114 := $105, $115 := $2", "INNER HASH JOIN EACH WITH ALL ON $100 = $1" ] }, { "kind": "JOIN", "substeps": [ "$100 := $81, $101 := $82, $102 := $83, $103 := $84, $104 := $85, $105 := $86", "INNER HASH JOIN EACH WITH ALL ON $80 = $30" ] }, { "kind": "JOIN", "substeps": [ "$80 := $20, $81 := $21, $82 := $23, $83 := $24, $84 := $25, $85 := $26, $86 := $27", "INNER HASH JOIN EACH WITH ALL ON $22 = $40" ] }, { "kind": "WRITE", "substeps": [ "$140, $60, $61, $62, $63", "TO __stage05_output", "BY HASH($140)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0023148148148148147, "waitRatioMax": 0.0023148148148148147, "writeMsAvg": "4", "writeMsMax": "7", "writeRatioAvg": 0.009259259259259259, "writeRatioMax": 0.016203703703703703 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.032407407407407406, "computeRatioMax": 0.032407407407407406, "endMs": "1665776499544", "id": "6", "inputStages": [ "5" ], "name": "S06: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "7199", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "12", "startMs": "1665776499527", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140, $60, $61, $62, $63", "FROM __stage05_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$50 := ROOT_AVG($60)", "$51 := ROOT_AVG($61)", "$52 := ROOT_AVG($62)", "$53 := ROOT_AVG($63)" ] }, { "kind": "WRITE", "substeps": [ "$160, $161, $162, $163, $164", "TO __stage06_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.004629629629629629, "waitRatioMax": 0.004629629629629629, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.0023148148148148147, "writeRatioMax": 0.0023148148148148147 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.020833333333333332, "computeRatioMax": 0.020833333333333332, "endMs": "1665776499584", "id": "7", "inputStages": [ "6" ], "name": "S07: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "33", "startMs": "1665776499546", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $161, $162, $163, $164", "FROM __stage06_output" ] }, { "kind": "SORT", "substeps": [ "$160 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$170, $171, $172, $173, $174", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0023148148148148147, "waitRatioMax": 0.0023148148148148147, "writeMsAvg": "28", "writeMsMax": "28", "writeRatioAvg": 0.06481481481481481, "writeRatioMax": 0.06481481481481481 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "promotion" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_demographics" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "12", "elapsedMs": "577", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2222" } ], "totalBytesBilled": "294649856", "totalBytesProcessed": "293847813", "totalPartitionsProcessed": "0", "totalSlotMs": "2222", "transferredBytes": "0" }, "startTime": "1665776499038", "totalBytesProcessed": "293847813", "totalSlotMs": "2222" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon141db06a_2c5d_46d2_b0cf_bf333d3ff477" }, "priority": "INTERACTIVE", "query": "-- start query 7 in stream 0 using template query7.tpl\nselect i_item_id, \n avg(ss_quantity) agg1,\n avg(ss_list_price) agg2,\n avg(ss_coupon_amt) agg3,\n avg(ss_sales_price) agg4 \n from store_sales, customer_demographics, date_dim, item, promotion\n where ss_sold_date_sk = d_date_sk and\n ss_item_sk = i_item_sk and\n ss_cdemo_sk = cd_demo_sk and\n ss_promo_sk = p_promo_sk and\n cd_gender = 'M' and \n cd_marital_status = 'S' and\n cd_education_status = 'College' and\n (p_channel_email = 'N' or p_channel_event = 'N') and\n d_year = 2000\n group by i_item_id\n order by i_item_id\n limit 100\n ;\n\n-- end query 7 in stream 0 using template query7.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "kooEmO2F8dslMSaDl1hxpw==", "id": "test-project-364309:europe-west1.query07_1665776500", "jobReference": { "jobId": "query07_1665776500", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query07_1665776500?location=europe-west1", "statistics": { "creationTime": "1665776501291", "endTime": "1665776501990", "finalExecutionDurationMs": "500", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "293847813", "performanceInsights": { "avgPreviousExecutionMs": "498" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.028397565922920892, "computeRatioMax": 0.028397565922920892, "endMs": "1665776501486", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.010141987829614604, "readRatioMax": 0.010141987829614604, "recordsRead": "300", "recordsWritten": "299", "shuffleOutputBytes": "2691", "shuffleOutputBytesSpilled": "0", "slotMs": "49", "startMs": "1665776501440", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:p_promo_sk, $11:p_channel_email, $12:p_channel_event", "FROM promotion", "WHERE or(equal($11, 'N'), equal($12, 'N'))" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.004056795131845842, "waitRatioMax": 0.004056795131845842, "writeMsAvg": "20", "writeMsMax": "20", "writeRatioAvg": 0.04056795131845842, "writeRatioMax": 0.04056795131845842 }, { "completedParallelInputs": "1", "computeMsAvg": "25", "computeMsMax": "25", "computeRatioAvg": 0.05070993914807302, "computeRatioMax": 0.05070993914807302, "endMs": "1665776501496", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.012170385395537525, "readRatioMax": 0.012170385395537525, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "56", "startMs": "1665776501456", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002028397565922921, "waitRatioMax": 0.002028397565922921, "writeMsAvg": "23", "writeMsMax": "23", "writeRatioAvg": 0.04665314401622718, "writeRatioMax": 0.04665314401622718 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.028397565922920892, "computeRatioMax": 0.028397565922920892, "endMs": "1665776501512", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.016227180527383367, "readRatioMax": 0.016227180527383367, "recordsRead": "73049", "recordsWritten": "366", "shuffleOutputBytes": "3294", "shuffleOutputBytesSpilled": "0", "slotMs": "48", "startMs": "1665776501471", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_year", "FROM date_dim", "WHERE equal($31, 2000)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002028397565922921, "waitRatioMax": 0.002028397565922921, "writeMsAvg": "12", "writeMsMax": "12", "writeRatioAvg": 0.02434077079107505, "writeRatioMax": 0.02434077079107505 }, { "completedParallelInputs": "1", "computeMsAvg": "21", "computeMsMax": "21", "computeRatioAvg": 0.04259634888438134, "computeRatioMax": 0.04259634888438134, "endMs": "1665776501517", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.018255578093306288, "readRatioMax": 0.018255578093306288, "recordsRead": "1920800", "recordsWritten": "27440", "shuffleOutputBytes": "246960", "shuffleOutputBytesSpilled": "0", "slotMs": "39", "startMs": "1665776501487", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:cd_demo_sk, $41:cd_gender, $42:cd_marital_status, $43:cd_education_status", "FROM customer_demographics", "WHERE and(equal($41, 'M'), equal($42, 'S'), equal($43, 'College'))" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.004056795131845842, "waitRatioMax": 0.004056795131845842, "writeMsAvg": "5", "writeMsMax": "5", "writeRatioAvg": 0.010141987829614604, "writeRatioMax": 0.010141987829614604 }, { "completedParallelInputs": "6", "computeMsAvg": "352", "computeMsMax": "493", "computeRatioAvg": 0.7139959432048681, "computeRatioMax": 1, "endMs": "1665776501833", "id": "5", "inputStages": [ "1", "3", "0", "2" ], "name": "S05: Join+", "parallelInputs": "6", "readMsAvg": "20", "readMsMax": "24", "readRatioAvg": 0.04056795131845842, "readRatioMax": 0.0486815415821501, "recordsRead": "3157034", "recordsWritten": "7199", "shuffleOutputBytes": "543087", "shuffleOutputBytesSpilled": "0", "slotMs": "2046", "startMs": "1665776501530", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:ss_sold_date_sk, $21:ss_item_sk, $22:ss_cdemo_sk, $23:ss_promo_sk, $24:ss_quantity, $25:ss_list_price, $26:ss_sales_price, $27:ss_coupon_amt", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $130", "$60 := SHARD_AVG($131)", "$61 := SHARD_AVG($132)", "$62 := SHARD_AVG($134)", "$63 := SHARD_AVG($133)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $115, $131 := $111, $132 := $112, $133 := $113, $134 := $114", "INNER HASH JOIN EACH WITH ALL ON $110 = $10" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102, $112 := $103, $113 := $104, $114 := $105, $115 := $2", "INNER HASH JOIN EACH WITH ALL ON $100 = $1" ] }, { "kind": "JOIN", "substeps": [ "$100 := $81, $101 := $82, $102 := $83, $103 := $84, $104 := $85, $105 := $86", "INNER HASH JOIN EACH WITH ALL ON $80 = $30" ] }, { "kind": "JOIN", "substeps": [ "$80 := $20, $81 := $21, $82 := $23, $83 := $24, $84 := $25, $85 := $26, $86 := $27", "INNER HASH JOIN EACH WITH ALL ON $22 = $40" ] }, { "kind": "WRITE", "substeps": [ "$140, $60, $61, $62, $63", "TO __stage05_output", "BY HASH($140)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002028397565922921, "waitRatioMax": 0.002028397565922921, "writeMsAvg": "5", "writeMsMax": "5", "writeRatioAvg": 0.010141987829614604, "writeRatioMax": 0.010141987829614604 }, { "completedParallelInputs": "1", "computeMsAvg": "18", "computeMsMax": "18", "computeRatioAvg": 0.036511156186612576, "computeRatioMax": 0.036511156186612576, "endMs": "1665776501863", "id": "6", "inputStages": [ "5" ], "name": "S06: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "7199", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "22", "startMs": "1665776501845", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140, $60, $61, $62, $63", "FROM __stage05_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$50 := ROOT_AVG($60)", "$51 := ROOT_AVG($61)", "$52 := ROOT_AVG($62)", "$53 := ROOT_AVG($63)" ] }, { "kind": "WRITE", "substeps": [ "$160, $161, $162, $163, $164", "TO __stage06_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.004056795131845842, "waitRatioMax": 0.004056795131845842, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.002028397565922921, "writeRatioMax": 0.002028397565922921 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.02028397565922921, "computeRatioMax": 0.02028397565922921, "endMs": "1665776501899", "id": "7", "inputStages": [ "6" ], "name": "S07: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "47", "startMs": "1665776501861", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $161, $162, $163, $164", "FROM __stage06_output" ] }, { "kind": "SORT", "substeps": [ "$160 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$170, $171, $172, $173, $174", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002028397565922921, "waitRatioMax": 0.002028397565922921, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.030425963488843813, "writeRatioMax": 0.030425963488843813 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_demographics" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "promotion" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "12", "elapsedMs": "599", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2309" } ], "totalBytesBilled": "294649856", "totalBytesProcessed": "293847813", "totalPartitionsProcessed": "0", "totalSlotMs": "2309", "transferredBytes": "0" }, "startTime": "1665776501336", "totalBytesProcessed": "293847813", "totalSlotMs": "2309" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon4baf9f3c_a057_41b4_8333_2d7132d5fbfb" }, "priority": "INTERACTIVE", "query": "-- start query 7 in stream 0 using template query7.tpl\nselect i_item_id, \n avg(ss_quantity) agg1,\n avg(ss_list_price) agg2,\n avg(ss_coupon_amt) agg3,\n avg(ss_sales_price) agg4 \n from store_sales, customer_demographics, date_dim, item, promotion\n where ss_sold_date_sk = d_date_sk and\n ss_item_sk = i_item_sk and\n ss_cdemo_sk = cd_demo_sk and\n ss_promo_sk = p_promo_sk and\n cd_gender = 'M' and \n cd_marital_status = 'S' and\n cd_education_status = 'College' and\n (p_channel_email = 'N' or p_channel_event = 'N') and\n d_year = 2000\n group by i_item_id\n order by i_item_id\n limit 100\n ;\n\n-- end query 7 in stream 0 using template query7.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "eF5QGgTjoqdrRyeeuJJhBw==", "id": "test-project-364309:europe-west1.query07_1665776503", "jobReference": { "jobId": "query07_1665776503", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query07_1665776503?location=europe-west1", "statistics": { "creationTime": "1665776503590", "endTime": "1665776504269", "finalExecutionDurationMs": "477", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "293847813", "performanceInsights": { "avgPreviousExecutionMs": "498" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.02022058823529412, "computeRatioMax": 0.02022058823529412, "endMs": "1665776503794", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.009191176470588236, "readRatioMax": 0.009191176470588236, "recordsRead": "300", "recordsWritten": "299", "shuffleOutputBytes": "2691", "shuffleOutputBytesSpilled": "0", "slotMs": "59", "startMs": "1665776503749", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:p_promo_sk, $11:p_channel_email, $12:p_channel_event", "FROM promotion", "WHERE or(equal($11, 'N'), equal($12, 'N'))" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.001838235294117647, "waitRatioMax": 0.001838235294117647, "writeMsAvg": "19", "writeMsMax": "19", "writeRatioAvg": 0.034926470588235295, "writeRatioMax": 0.034926470588235295 }, { "completedParallelInputs": "1", "computeMsAvg": "23", "computeMsMax": "23", "computeRatioAvg": 0.042279411764705885, "computeRatioMax": 0.042279411764705885, "endMs": "1665776503807", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.014705882352941176, "readRatioMax": 0.014705882352941176, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "42", "startMs": "1665776503763", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.001838235294117647, "waitRatioMax": 0.001838235294117647, "writeMsAvg": "21", "writeMsMax": "21", "writeRatioAvg": 0.03860294117647059, "writeRatioMax": 0.03860294117647059 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.02022058823529412, "computeRatioMax": 0.02022058823529412, "endMs": "1665776503812", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.016544117647058824, "readRatioMax": 0.016544117647058824, "recordsRead": "73049", "recordsWritten": "366", "shuffleOutputBytes": "3294", "shuffleOutputBytesSpilled": "0", "slotMs": "37", "startMs": "1665776503776", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_year", "FROM date_dim", "WHERE equal($31, 2000)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.001838235294117647, "waitRatioMax": 0.001838235294117647, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.014705882352941176, "writeRatioMax": 0.014705882352941176 }, { "completedParallelInputs": "1", "computeMsAvg": "33", "computeMsMax": "33", "computeRatioAvg": 0.06066176470588235, "computeRatioMax": 0.06066176470588235, "endMs": "1665776503831", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "12", "readMsMax": "12", "readRatioAvg": 0.022058823529411766, "readRatioMax": 0.022058823529411766, "recordsRead": "1920800", "recordsWritten": "27440", "shuffleOutputBytes": "246960", "shuffleOutputBytesSpilled": "0", "slotMs": "64", "startMs": "1665776503787", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:cd_demo_sk, $41:cd_gender, $42:cd_marital_status, $43:cd_education_status", "FROM customer_demographics", "WHERE and(equal($41, 'M'), equal($42, 'S'), equal($43, 'College'))" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.001838235294117647, "waitRatioMax": 0.001838235294117647, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.014705882352941176, "writeRatioMax": 0.014705882352941176 }, { "completedParallelInputs": "6", "computeMsAvg": "390", "computeMsMax": "544", "computeRatioAvg": 0.7169117647058824, "computeRatioMax": 1, "endMs": "1665776504137", "id": "5", "inputStages": [ "3", "1", "0", "2" ], "name": "S05: Join+", "parallelInputs": "6", "readMsAvg": "19", "readMsMax": "23", "readRatioAvg": 0.034926470588235295, "readRatioMax": 0.042279411764705885, "recordsRead": "3157034", "recordsWritten": "7199", "shuffleOutputBytes": "543087", "shuffleOutputBytesSpilled": "0", "slotMs": "2371", "startMs": "1665776503837", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:ss_sold_date_sk, $21:ss_item_sk, $22:ss_cdemo_sk, $23:ss_promo_sk, $24:ss_quantity, $25:ss_list_price, $26:ss_sales_price, $27:ss_coupon_amt", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $130", "$60 := SHARD_AVG($131)", "$61 := SHARD_AVG($132)", "$62 := SHARD_AVG($134)", "$63 := SHARD_AVG($133)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $115, $131 := $111, $132 := $112, $133 := $113, $134 := $114", "INNER HASH JOIN EACH WITH ALL ON $110 = $10" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102, $112 := $103, $113 := $104, $114 := $105, $115 := $2", "INNER HASH JOIN EACH WITH ALL ON $100 = $1" ] }, { "kind": "JOIN", "substeps": [ "$100 := $81, $101 := $82, $102 := $83, $103 := $84, $104 := $85, $105 := $86", "INNER HASH JOIN EACH WITH ALL ON $80 = $30" ] }, { "kind": "JOIN", "substeps": [ "$80 := $20, $81 := $21, $82 := $23, $83 := $24, $84 := $25, $85 := $26, $86 := $27", "INNER HASH JOIN EACH WITH ALL ON $22 = $40" ] }, { "kind": "WRITE", "substeps": [ "$140, $60, $61, $62, $63", "TO __stage05_output", "BY HASH($140)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.001838235294117647, "waitRatioMax": 0.001838235294117647, "writeMsAvg": "5", "writeMsMax": "6", "writeRatioAvg": 0.009191176470588236, "writeRatioMax": 0.011029411764705883 }, { "completedParallelInputs": "1", "computeMsAvg": "16", "computeMsMax": "16", "computeRatioAvg": 0.029411764705882353, "computeRatioMax": 0.029411764705882353, "endMs": "1665776504157", "id": "6", "inputStages": [ "5" ], "name": "S06: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "7199", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "20", "startMs": "1665776504142", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140, $60, $61, $62, $63", "FROM __stage05_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$50 := ROOT_AVG($60)", "$51 := ROOT_AVG($61)", "$52 := ROOT_AVG($62)", "$53 := ROOT_AVG($63)" ] }, { "kind": "WRITE", "substeps": [ "$160, $161, $162, $163, $164", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.001838235294117647, "waitRatioMax": 0.001838235294117647, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.001838235294117647, "writeRatioMax": 0.001838235294117647 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.02022058823529412, "computeRatioMax": 0.02022058823529412, "endMs": "1665776504191", "id": "7", "inputStages": [ "6" ], "name": "S07: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "41", "startMs": "1665776504154", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $161, $162, $163, $164", "FROM __stage06_output" ] }, { "kind": "SORT", "substeps": [ "$160 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$170, $171, $172, $173, $174", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.001838235294117647, "waitRatioMax": 0.001838235294117647, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.025735294117647058, "writeRatioMax": 0.025735294117647058 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "promotion" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_demographics" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "12", "elapsedMs": "565", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2669" } ], "totalBytesBilled": "294649856", "totalBytesProcessed": "293847813", "totalPartitionsProcessed": "0", "totalSlotMs": "2669", "transferredBytes": "0" }, "startTime": "1665776503655", "totalBytesProcessed": "293847813", "totalSlotMs": "2669" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon85518e8d_4879_41bc_b7de_2f28217ca26b" }, "priority": "INTERACTIVE", "query": "-- start query 7 in stream 0 using template query7.tpl\nselect i_item_id, \n avg(ss_quantity) agg1,\n avg(ss_list_price) agg2,\n avg(ss_coupon_amt) agg3,\n avg(ss_sales_price) agg4 \n from store_sales, customer_demographics, date_dim, item, promotion\n where ss_sold_date_sk = d_date_sk and\n ss_item_sk = i_item_sk and\n ss_cdemo_sk = cd_demo_sk and\n ss_promo_sk = p_promo_sk and\n cd_gender = 'M' and \n cd_marital_status = 'S' and\n cd_education_status = 'College' and\n (p_channel_email = 'N' or p_channel_event = 'N') and\n d_year = 2000\n group by i_item_id\n order by i_item_id\n limit 100\n ;\n\n-- end query 7 in stream 0 using template query7.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "aclpylvdD8Kw3h8K1G2/Gw==", "id": "test-project-364309:europe-west1.query07_1665776505", "jobReference": { "jobId": "query07_1665776505", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query07_1665776505?location=europe-west1", "statistics": { "creationTime": "1665776505999", "endTime": "1665776506703", "finalExecutionDurationMs": "512", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "293847813", "performanceInsights": { "avgPreviousExecutionMs": "498" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.025477707006369428, "computeRatioMax": 0.025477707006369428, "endMs": "1665776506198", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.012738853503184714, "readRatioMax": 0.012738853503184714, "recordsRead": "300", "recordsWritten": "299", "shuffleOutputBytes": "2691", "shuffleOutputBytesSpilled": "0", "slotMs": "55", "startMs": "1665776506155", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:p_promo_sk, $11:p_channel_email, $12:p_channel_event", "FROM promotion", "WHERE or(equal($11, 'N'), equal($12, 'N'))" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0021231422505307855, "waitRatioMax": 0.0021231422505307855, "writeMsAvg": "18", "writeMsMax": "18", "writeRatioAvg": 0.03821656050955414, "writeRatioMax": 0.03821656050955414 }, { "completedParallelInputs": "1", "computeMsAvg": "16", "computeMsMax": "16", "computeRatioAvg": 0.03397027600849257, "computeRatioMax": 0.03397027600849257, "endMs": "1665776506212", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.014861995753715499, "readRatioMax": 0.014861995753715499, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "48", "startMs": "1665776506167", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0021231422505307855, "waitRatioMax": 0.0021231422505307855, "writeMsAvg": "26", "writeMsMax": "26", "writeRatioAvg": 0.055201698513800426, "writeRatioMax": 0.055201698513800426 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.016985138004246284, "computeRatioMax": 0.016985138004246284, "endMs": "1665776506220", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "12", "readMsMax": "12", "readRatioAvg": 0.025477707006369428, "readRatioMax": 0.025477707006369428, "recordsRead": "73049", "recordsWritten": "366", "shuffleOutputBytes": "3294", "shuffleOutputBytesSpilled": "0", "slotMs": "37", "startMs": "1665776506184", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_year", "FROM date_dim", "WHERE equal($31, 2000)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0021231422505307855, "waitRatioMax": 0.0021231422505307855, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.014861995753715499, "writeRatioMax": 0.014861995753715499 }, { "completedParallelInputs": "1", "computeMsAvg": "35", "computeMsMax": "35", "computeRatioAvg": 0.07430997876857749, "computeRatioMax": 0.07430997876857749, "endMs": "1665776506239", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "12", "readMsMax": "12", "readRatioAvg": 0.025477707006369428, "readRatioMax": 0.025477707006369428, "recordsRead": "1920800", "recordsWritten": "27440", "shuffleOutputBytes": "246960", "shuffleOutputBytesSpilled": "0", "slotMs": "61", "startMs": "1665776506199", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:cd_demo_sk, $41:cd_gender, $42:cd_marital_status, $43:cd_education_status", "FROM customer_demographics", "WHERE and(equal($41, 'M'), equal($42, 'S'), equal($43, 'College'))" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "0", "waitMsMax": "0", "waitRatioAvg": 0, "waitRatioMax": 0, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.014861995753715499, "writeRatioMax": 0.014861995753715499 }, { "completedParallelInputs": "6", "computeMsAvg": "429", "computeMsMax": "471", "computeRatioAvg": 0.910828025477707, "computeRatioMax": 1, "endMs": "1665776506564", "id": "5", "inputStages": [ "2", "0", "1", "3" ], "name": "S05: Join+", "parallelInputs": "6", "readMsAvg": "21", "readMsMax": "24", "readRatioAvg": 0.044585987261146494, "readRatioMax": 0.050955414012738856, "recordsRead": "3157034", "recordsWritten": "7199", "shuffleOutputBytes": "543087", "shuffleOutputBytesSpilled": "0", "slotMs": "2605", "startMs": "1665776506253", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:ss_sold_date_sk, $21:ss_item_sk, $22:ss_cdemo_sk, $23:ss_promo_sk, $24:ss_quantity, $25:ss_list_price, $26:ss_sales_price, $27:ss_coupon_amt", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $130", "$60 := SHARD_AVG($131)", "$61 := SHARD_AVG($132)", "$62 := SHARD_AVG($134)", "$63 := SHARD_AVG($133)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $115, $131 := $111, $132 := $112, $133 := $113, $134 := $114", "INNER HASH JOIN EACH WITH ALL ON $110 = $10" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102, $112 := $103, $113 := $104, $114 := $105, $115 := $2", "INNER HASH JOIN EACH WITH ALL ON $100 = $1" ] }, { "kind": "JOIN", "substeps": [ "$100 := $81, $101 := $82, $102 := $83, $103 := $84, $104 := $85, $105 := $86", "INNER HASH JOIN EACH WITH ALL ON $80 = $30" ] }, { "kind": "JOIN", "substeps": [ "$80 := $20, $81 := $21, $82 := $23, $83 := $24, $84 := $25, $85 := $26, $86 := $27", "INNER HASH JOIN EACH WITH ALL ON $22 = $40" ] }, { "kind": "WRITE", "substeps": [ "$140, $60, $61, $62, $63", "TO __stage05_output", "BY HASH($140)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0021231422505307855, "waitRatioMax": 0.0021231422505307855, "writeMsAvg": "5", "writeMsMax": "5", "writeRatioAvg": 0.010615711252653927, "writeRatioMax": 0.010615711252653927 }, { "completedParallelInputs": "1", "computeMsAvg": "17", "computeMsMax": "17", "computeRatioAvg": 0.036093418259023353, "computeRatioMax": 0.036093418259023353, "endMs": "1665776506595", "id": "6", "inputStages": [ "5" ], "name": "S06: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "7199", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "25", "startMs": "1665776506577", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140, $60, $61, $62, $63", "FROM __stage05_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$50 := ROOT_AVG($60)", "$51 := ROOT_AVG($61)", "$52 := ROOT_AVG($62)", "$53 := ROOT_AVG($63)" ] }, { "kind": "WRITE", "substeps": [ "$160, $161, $162, $163, $164", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0021231422505307855, "waitRatioMax": 0.0021231422505307855, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.0021231422505307855, "writeRatioMax": 0.0021231422505307855 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.02335456475583864, "computeRatioMax": 0.02335456475583864, "endMs": "1665776506633", "id": "7", "inputStages": [ "6" ], "name": "S07: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "52", "startMs": "1665776506595", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $161, $162, $163, $164", "FROM __stage06_output" ] }, { "kind": "SORT", "substeps": [ "$160 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$170, $171, $172, $173, $174", "TO __stage07_output" ] } ], "waitMsAvg": "3", "waitMsMax": "3", "waitRatioAvg": 0.006369426751592357, "waitRatioMax": 0.006369426751592357, "writeMsAvg": "19", "writeMsMax": "19", "writeRatioAvg": 0.040339702760084924, "writeRatioMax": 0.040339702760084924 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "promotion" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_demographics" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "12", "elapsedMs": "618", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2885" } ], "totalBytesBilled": "294649856", "totalBytesProcessed": "293847813", "totalPartitionsProcessed": "0", "totalSlotMs": "2885", "transferredBytes": "0" }, "startTime": "1665776506045", "totalBytesProcessed": "293847813", "totalSlotMs": "2885" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anona0dfb840_60db_46eb_88d1_b744b053da6b" }, "priority": "INTERACTIVE", "query": "-- start query 7 in stream 0 using template query7.tpl\nselect i_item_id, \n avg(ss_quantity) agg1,\n avg(ss_list_price) agg2,\n avg(ss_coupon_amt) agg3,\n avg(ss_sales_price) agg4 \n from store_sales, customer_demographics, date_dim, item, promotion\n where ss_sold_date_sk = d_date_sk and\n ss_item_sk = i_item_sk and\n ss_cdemo_sk = cd_demo_sk and\n ss_promo_sk = p_promo_sk and\n cd_gender = 'M' and \n cd_marital_status = 'S' and\n cd_education_status = 'College' and\n (p_channel_email = 'N' or p_channel_event = 'N') and\n d_year = 2000\n group by i_item_id\n order by i_item_id\n limit 100\n ;\n\n-- end query 7 in stream 0 using template query7.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "wc+JPU8BdburEtJ0f8rd1A==", "id": "test-project-364309:europe-west1.query07_1665776507", "jobReference": { "jobId": "query07_1665776507", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query07_1665776507?location=europe-west1", "statistics": { "creationTime": "1665776508305", "endTime": "1665776509029", "finalExecutionDurationMs": "519", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "293847813", "performanceInsights": { "avgPreviousExecutionMs": "498" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.013232514177693762, "computeRatioMax": 0.013232514177693762, "endMs": "1665776508500", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.00945179584120983, "readRatioMax": 0.00945179584120983, "recordsRead": "300", "recordsWritten": "299", "shuffleOutputBytes": "2691", "shuffleOutputBytesSpilled": "0", "slotMs": "48", "startMs": "1665776508469", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:p_promo_sk, $11:p_channel_email, $12:p_channel_event", "FROM promotion", "WHERE or(equal($11, 'N'), equal($12, 'N'))" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.001890359168241966, "waitRatioMax": 0.001890359168241966, "writeMsAvg": "20", "writeMsMax": "20", "writeRatioAvg": 0.03780718336483932, "writeRatioMax": 0.03780718336483932 }, { "completedParallelInputs": "1", "computeMsAvg": "24", "computeMsMax": "24", "computeRatioAvg": 0.045368620037807186, "computeRatioMax": 0.045368620037807186, "endMs": "1665776508529", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.013232514177693762, "readRatioMax": 0.013232514177693762, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "78", "startMs": "1665776508483", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.001890359168241966, "waitRatioMax": 0.001890359168241966, "writeMsAvg": "24", "writeMsMax": "24", "writeRatioAvg": 0.045368620037807186, "writeRatioMax": 0.045368620037807186 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.024574669187145556, "computeRatioMax": 0.024574669187145556, "endMs": "1665776508539", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.013232514177693762, "readRatioMax": 0.013232514177693762, "recordsRead": "73049", "recordsWritten": "366", "shuffleOutputBytes": "3294", "shuffleOutputBytesSpilled": "0", "slotMs": "43", "startMs": "1665776508500", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_year", "FROM date_dim", "WHERE equal($31, 2000)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.001890359168241966, "waitRatioMax": 0.001890359168241966, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.015122873345935728, "writeRatioMax": 0.015122873345935728 }, { "completedParallelInputs": "1", "computeMsAvg": "30", "computeMsMax": "30", "computeRatioAvg": 0.05671077504725898, "computeRatioMax": 0.05671077504725898, "endMs": "1665776508564", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "12", "readMsMax": "12", "readRatioAvg": 0.022684310018903593, "readRatioMax": 0.022684310018903593, "recordsRead": "1920800", "recordsWritten": "27440", "shuffleOutputBytes": "246960", "shuffleOutputBytesSpilled": "0", "slotMs": "64", "startMs": "1665776508530", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:cd_demo_sk, $41:cd_gender, $42:cd_marital_status, $43:cd_education_status", "FROM customer_demographics", "WHERE and(equal($41, 'M'), equal($42, 'S'), equal($43, 'College'))" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "17", "waitMsMax": "17", "waitRatioAvg": 0.03213610586011342, "waitRatioMax": 0.03213610586011342, "writeMsAvg": "6", "writeMsMax": "6", "writeRatioAvg": 0.011342155009451797, "writeRatioMax": 0.011342155009451797 }, { "completedParallelInputs": "6", "computeMsAvg": "410", "computeMsMax": "529", "computeRatioAvg": 0.775047258979206, "computeRatioMax": 1, "endMs": "1665776508890", "id": "5", "inputStages": [ "1", "3", "2", "0" ], "name": "S05: Join+", "parallelInputs": "6", "readMsAvg": "22", "readMsMax": "27", "readRatioAvg": 0.04158790170132325, "readRatioMax": 0.05103969754253308, "recordsRead": "3157034", "recordsWritten": "7199", "shuffleOutputBytes": "543087", "shuffleOutputBytesSpilled": "0", "slotMs": "2752", "startMs": "1665776508579", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:ss_sold_date_sk, $21:ss_item_sk, $22:ss_cdemo_sk, $23:ss_promo_sk, $24:ss_quantity, $25:ss_list_price, $26:ss_sales_price, $27:ss_coupon_amt", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $130", "$60 := SHARD_AVG($131)", "$61 := SHARD_AVG($132)", "$62 := SHARD_AVG($134)", "$63 := SHARD_AVG($133)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $115, $131 := $111, $132 := $112, $133 := $113, $134 := $114", "INNER HASH JOIN EACH WITH ALL ON $110 = $10" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102, $112 := $103, $113 := $104, $114 := $105, $115 := $2", "INNER HASH JOIN EACH WITH ALL ON $100 = $1" ] }, { "kind": "JOIN", "substeps": [ "$100 := $81, $101 := $82, $102 := $83, $103 := $84, $104 := $85, $105 := $86", "INNER HASH JOIN EACH WITH ALL ON $80 = $30" ] }, { "kind": "JOIN", "substeps": [ "$80 := $20, $81 := $21, $82 := $23, $83 := $24, $84 := $25, $85 := $26, $86 := $27", "INNER HASH JOIN EACH WITH ALL ON $22 = $40" ] }, { "kind": "WRITE", "substeps": [ "$140, $60, $61, $62, $63", "TO __stage05_output", "BY HASH($140)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.001890359168241966, "waitRatioMax": 0.001890359168241966, "writeMsAvg": "5", "writeMsMax": "6", "writeRatioAvg": 0.00945179584120983, "writeRatioMax": 0.011342155009451797 }, { "completedParallelInputs": "1", "computeMsAvg": "19", "computeMsMax": "19", "computeRatioAvg": 0.035916824196597356, "computeRatioMax": 0.035916824196597356, "endMs": "1665776508915", "id": "6", "inputStages": [ "5" ], "name": "S06: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "7199", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "26", "startMs": "1665776508898", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140, $60, $61, $62, $63", "FROM __stage05_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$50 := ROOT_AVG($60)", "$51 := ROOT_AVG($61)", "$52 := ROOT_AVG($62)", "$53 := ROOT_AVG($63)" ] }, { "kind": "WRITE", "substeps": [ "$160, $161, $162, $163, $164", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.001890359168241966, "waitRatioMax": 0.001890359168241966, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.001890359168241966, "writeRatioMax": 0.001890359168241966 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.020793950850661626, "computeRatioMax": 0.020793950850661626, "endMs": "1665776508949", "id": "7", "inputStages": [ "6" ], "name": "S07: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "63", "startMs": "1665776508912", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $161, $162, $163, $164", "FROM __stage06_output" ] }, { "kind": "SORT", "substeps": [ "$160 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$170, $171, $172, $173, $174", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.001890359168241966, "waitRatioMax": 0.001890359168241966, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.030245746691871456, "writeRatioMax": 0.030245746691871456 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "promotion" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_demographics" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" } ], "statementType": "SELECT", "timeline": [ { "activeUnits": "0", "completedUnits": "12", "elapsedMs": "599", "pendingUnits": "0", "totalSlotMs": "3093" }, { "activeUnits": "0", "completedUnits": "12", "elapsedMs": "612", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "3093" } ], "totalBytesBilled": "294649856", "totalBytesProcessed": "293847813", "totalPartitionsProcessed": "0", "totalSlotMs": "3093", "transferredBytes": "0" }, "startTime": "1665776508370", "totalBytesProcessed": "293847813", "totalSlotMs": "3093" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anonb9ed14bd_5400_4a56_9c70_12cc4ade6731" }, "priority": "INTERACTIVE", "query": "-- start query 7 in stream 0 using template query7.tpl\nselect i_item_id, \n avg(ss_quantity) agg1,\n avg(ss_list_price) agg2,\n avg(ss_coupon_amt) agg3,\n avg(ss_sales_price) agg4 \n from store_sales, customer_demographics, date_dim, item, promotion\n where ss_sold_date_sk = d_date_sk and\n ss_item_sk = i_item_sk and\n ss_cdemo_sk = cd_demo_sk and\n ss_promo_sk = p_promo_sk and\n cd_gender = 'M' and \n cd_marital_status = 'S' and\n cd_education_status = 'College' and\n (p_channel_email = 'N' or p_channel_event = 'N') and\n d_year = 2000\n group by i_item_id\n order by i_item_id\n limit 100\n ;\n\n-- end query 7 in stream 0 using template query7.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "IJBCSuFuHqQbrN6sB1A7lQ==", "id": "test-project-364309:europe-west1.query07_1665776763", "jobReference": { "jobId": "query07_1665776763", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query07_1665776763?location=europe-west1", "statistics": { "creationTime": "1665776764192", "endTime": "1665776765038", "finalExecutionDurationMs": "643", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "293847813", "performanceInsights": { "avgPreviousExecutionMs": "498" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.016556291390728478, "computeRatioMax": 0.016556291390728478, "endMs": "1665776764379", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.009933774834437087, "readRatioMax": 0.009933774834437087, "recordsRead": "300", "recordsWritten": "299", "shuffleOutputBytes": "2691", "shuffleOutputBytesSpilled": "0", "slotMs": "33", "startMs": "1665776764342", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:p_promo_sk, $11:p_channel_email, $12:p_channel_event", "FROM promotion", "WHERE or(equal($11, 'N'), equal($12, 'N'))" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0016556291390728477, "waitRatioMax": 0.0016556291390728477, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.011589403973509934, "writeRatioMax": 0.011589403973509934 }, { "completedParallelInputs": "1", "computeMsAvg": "16", "computeMsMax": "16", "computeRatioAvg": 0.026490066225165563, "computeRatioMax": 0.026490066225165563, "endMs": "1665776764402", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.008278145695364239, "readRatioMax": 0.008278145695364239, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "45", "startMs": "1665776764355", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0016556291390728477, "waitRatioMax": 0.0016556291390728477, "writeMsAvg": "28", "writeMsMax": "28", "writeRatioAvg": 0.046357615894039736, "writeRatioMax": 0.046357615894039736 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.018211920529801324, "computeRatioMax": 0.018211920529801324, "endMs": "1665776764400", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.014900662251655629, "readRatioMax": 0.014900662251655629, "recordsRead": "73049", "recordsWritten": "366", "shuffleOutputBytes": "3294", "shuffleOutputBytesSpilled": "0", "slotMs": "28", "startMs": "1665776764372", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_year", "FROM date_dim", "WHERE equal($31, 2000)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0016556291390728477, "waitRatioMax": 0.0016556291390728477, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.011589403973509934, "writeRatioMax": 0.011589403973509934 }, { "completedParallelInputs": "1", "computeMsAvg": "26", "computeMsMax": "26", "computeRatioAvg": 0.04304635761589404, "computeRatioMax": 0.04304635761589404, "endMs": "1665776764490", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "80", "readMsMax": "80", "readRatioAvg": 0.13245033112582782, "readRatioMax": 0.13245033112582782, "recordsRead": "1920800", "recordsWritten": "27440", "shuffleOutputBytes": "246960", "shuffleOutputBytesSpilled": "0", "slotMs": "88", "startMs": "1665776764387", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:cd_demo_sk, $41:cd_gender, $42:cd_marital_status, $43:cd_education_status", "FROM customer_demographics", "WHERE and(equal($41, 'M'), equal($42, 'S'), equal($43, 'College'))" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0016556291390728477, "waitRatioMax": 0.0016556291390728477, "writeMsAvg": "5", "writeMsMax": "5", "writeRatioAvg": 0.008278145695364239, "writeRatioMax": 0.008278145695364239 }, { "completedParallelInputs": "6", "computeMsAvg": "410", "computeMsMax": "604", "computeRatioAvg": 0.6788079470198676, "computeRatioMax": 1, "endMs": "1665776764890", "id": "5", "inputStages": [ "0", "1", "2", "3" ], "name": "S05: Join+", "parallelInputs": "6", "readMsAvg": "21", "readMsMax": "31", "readRatioAvg": 0.0347682119205298, "readRatioMax": 0.05132450331125828, "recordsRead": "3157034", "recordsWritten": "7199", "shuffleOutputBytes": "543087", "shuffleOutputBytesSpilled": "0", "slotMs": "2308", "startMs": "1665776764511", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:ss_sold_date_sk, $21:ss_item_sk, $22:ss_cdemo_sk, $23:ss_promo_sk, $24:ss_quantity, $25:ss_list_price, $26:ss_sales_price, $27:ss_coupon_amt", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $130", "$60 := SHARD_AVG($131)", "$61 := SHARD_AVG($132)", "$62 := SHARD_AVG($134)", "$63 := SHARD_AVG($133)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $115, $131 := $111, $132 := $112, $133 := $113, $134 := $114", "INNER HASH JOIN EACH WITH ALL ON $110 = $10" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102, $112 := $103, $113 := $104, $114 := $105, $115 := $2", "INNER HASH JOIN EACH WITH ALL ON $100 = $1" ] }, { "kind": "JOIN", "substeps": [ "$100 := $81, $101 := $82, $102 := $83, $103 := $84, $104 := $85, $105 := $86", "INNER HASH JOIN EACH WITH ALL ON $80 = $30" ] }, { "kind": "JOIN", "substeps": [ "$80 := $20, $81 := $21, $82 := $23, $83 := $24, $84 := $25, $85 := $26, $86 := $27", "INNER HASH JOIN EACH WITH ALL ON $22 = $40" ] }, { "kind": "WRITE", "substeps": [ "$140, $60, $61, $62, $63", "TO __stage05_output", "BY HASH($140)" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.0033112582781456954, "waitRatioMax": 0.0033112582781456954, "writeMsAvg": "5", "writeMsMax": "6", "writeRatioAvg": 0.008278145695364239, "writeRatioMax": 0.009933774834437087 }, { "completedParallelInputs": "1", "computeMsAvg": "23", "computeMsMax": "23", "computeRatioAvg": 0.0380794701986755, "computeRatioMax": 0.0380794701986755, "endMs": "1665776764928", "id": "6", "inputStages": [ "5" ], "name": "S06: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "7199", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "30", "startMs": "1665776764904", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140, $60, $61, $62, $63", "FROM __stage05_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$50 := ROOT_AVG($60)", "$51 := ROOT_AVG($61)", "$52 := ROOT_AVG($62)", "$53 := ROOT_AVG($63)" ] }, { "kind": "WRITE", "substeps": [ "$160, $161, $162, $163, $164", "TO __stage06_output" ] } ], "waitMsAvg": "5", "waitMsMax": "5", "waitRatioAvg": 0.008278145695364239, "waitRatioMax": 0.008278145695364239, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.0016556291390728477, "writeRatioMax": 0.0016556291390728477 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.016556291390728478, "computeRatioMax": 0.016556291390728478, "endMs": "1665776764952", "id": "7", "inputStages": [ "6" ], "name": "S07: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "39", "startMs": "1665776764914", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $161, $162, $163, $164", "FROM __stage06_output" ] }, { "kind": "SORT", "substeps": [ "$160 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$170, $171, $172, $173, $174", "TO __stage07_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.0033112582781456954, "waitRatioMax": 0.0033112582781456954, "writeMsAvg": "6", "writeMsMax": "6", "writeRatioAvg": 0.009933774834437087, "writeRatioMax": 0.009933774834437087 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_demographics" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "promotion" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" } ], "statementType": "SELECT", "timeline": [ { "activeUnits": "2", "completedUnits": "9", "elapsedMs": "599", "estimatedRunnableUnits": "0", "pendingUnits": "1", "totalSlotMs": "2007" }, { "activeUnits": "2", "completedUnits": "12", "elapsedMs": "734", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2675" } ], "totalBytesBilled": "294649856", "totalBytesProcessed": "293847813", "totalPartitionsProcessed": "0", "totalSlotMs": "2675", "transferredBytes": "0" }, "startTime": "1665776764244", "totalBytesProcessed": "293847813", "totalSlotMs": "2675" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon50408dda_157d_4699_92c9_53e038dc2970" }, "priority": "INTERACTIVE", "query": "-- start query 7 in stream 0 using template query7.tpl\nselect i_item_id, \n avg(ss_quantity) agg1,\n avg(ss_list_price) agg2,\n avg(ss_coupon_amt) agg3,\n avg(ss_sales_price) agg4 \n from store_sales, customer_demographics, date_dim, item, promotion\n where ss_sold_date_sk = d_date_sk and\n ss_item_sk = i_item_sk and\n ss_cdemo_sk = cd_demo_sk and\n ss_promo_sk = p_promo_sk and\n cd_gender = 'M' and \n cd_marital_status = 'S' and\n cd_education_status = 'College' and\n (p_channel_email = 'N' or p_channel_event = 'N') and\n d_year = 2000\n group by i_item_id\n order by i_item_id\n limit 100\n ;\n\n-- end query 7 in stream 0 using template query7.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "I0VqN8DQsQnHp8vyIPySLQ==", "id": "test-project-364309:europe-west1.query07_1665776766", "jobReference": { "jobId": "query07_1665776766", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query07_1665776766?location=europe-west1", "statistics": { "creationTime": "1665776766658", "endTime": "1665776767394", "finalExecutionDurationMs": "532", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "293847813", "performanceInsights": { "avgPreviousExecutionMs": "500" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.015238095238095238, "computeRatioMax": 0.015238095238095238, "endMs": "1665776766850", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.007619047619047619, "readRatioMax": 0.007619047619047619, "recordsRead": "300", "recordsWritten": "299", "shuffleOutputBytes": "2691", "shuffleOutputBytesSpilled": "0", "slotMs": "28", "startMs": "1665776766811", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:p_promo_sk, $11:p_channel_email, $12:p_channel_event", "FROM promotion", "WHERE or(equal($11, 'N'), equal($12, 'N'))" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0019047619047619048, "waitRatioMax": 0.0019047619047619048, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.030476190476190476, "writeRatioMax": 0.030476190476190476 }, { "completedParallelInputs": "1", "computeMsAvg": "21", "computeMsMax": "21", "computeRatioAvg": 0.04, "computeRatioMax": 0.04, "endMs": "1665776766880", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.009523809523809525, "readRatioMax": 0.009523809523809525, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "37", "startMs": "1665776766826", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0019047619047619048, "waitRatioMax": 0.0019047619047619048, "writeMsAvg": "26", "writeMsMax": "26", "writeRatioAvg": 0.049523809523809526, "writeRatioMax": 0.049523809523809526 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.022857142857142857, "computeRatioMax": 0.022857142857142857, "endMs": "1665776766884", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.013333333333333334, "readRatioMax": 0.013333333333333334, "recordsRead": "73049", "recordsWritten": "366", "shuffleOutputBytes": "3294", "shuffleOutputBytesSpilled": "0", "slotMs": "28", "startMs": "1665776766841", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_year", "FROM date_dim", "WHERE equal($31, 2000)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0019047619047619048, "waitRatioMax": 0.0019047619047619048, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.030476190476190476, "writeRatioMax": 0.030476190476190476 }, { "completedParallelInputs": "1", "computeMsAvg": "34", "computeMsMax": "34", "computeRatioAvg": 0.06476190476190476, "computeRatioMax": 0.06476190476190476, "endMs": "1665776766931", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "12", "readMsMax": "12", "readRatioAvg": 0.022857142857142857, "readRatioMax": 0.022857142857142857, "recordsRead": "1920800", "recordsWritten": "27440", "shuffleOutputBytes": "246960", "shuffleOutputBytesSpilled": "0", "slotMs": "41", "startMs": "1665776766881", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:cd_demo_sk, $41:cd_gender, $42:cd_marital_status, $43:cd_education_status", "FROM customer_demographics", "WHERE and(equal($41, 'M'), equal($42, 'S'), equal($43, 'College'))" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "22", "waitMsMax": "22", "waitRatioAvg": 0.0419047619047619, "waitRatioMax": 0.0419047619047619, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.013333333333333334, "writeRatioMax": 0.013333333333333334 }, { "completedParallelInputs": "6", "computeMsAvg": "369", "computeMsMax": "525", "computeRatioAvg": 0.7028571428571428, "computeRatioMax": 1, "endMs": "1665776767253", "id": "5", "inputStages": [ "1", "3", "2", "0" ], "name": "S05: Join+", "parallelInputs": "6", "readMsAvg": "18", "readMsMax": "22", "readRatioAvg": 0.03428571428571429, "readRatioMax": 0.0419047619047619, "recordsRead": "3157034", "recordsWritten": "7199", "shuffleOutputBytes": "543087", "shuffleOutputBytesSpilled": "0", "slotMs": "2092", "startMs": "1665776766940", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:ss_sold_date_sk, $21:ss_item_sk, $22:ss_cdemo_sk, $23:ss_promo_sk, $24:ss_quantity, $25:ss_list_price, $26:ss_sales_price, $27:ss_coupon_amt", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $130", "$60 := SHARD_AVG($131)", "$61 := SHARD_AVG($132)", "$62 := SHARD_AVG($134)", "$63 := SHARD_AVG($133)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $115, $131 := $111, $132 := $112, $133 := $113, $134 := $114", "INNER HASH JOIN EACH WITH ALL ON $110 = $10" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102, $112 := $103, $113 := $104, $114 := $105, $115 := $2", "INNER HASH JOIN EACH WITH ALL ON $100 = $1" ] }, { "kind": "JOIN", "substeps": [ "$100 := $81, $101 := $82, $102 := $83, $103 := $84, $104 := $85, $105 := $86", "INNER HASH JOIN EACH WITH ALL ON $80 = $30" ] }, { "kind": "JOIN", "substeps": [ "$80 := $20, $81 := $21, $82 := $23, $83 := $24, $84 := $25, $85 := $26, $86 := $27", "INNER HASH JOIN EACH WITH ALL ON $22 = $40" ] }, { "kind": "WRITE", "substeps": [ "$140, $60, $61, $62, $63", "TO __stage05_output", "BY HASH($140)" ] } ], "waitMsAvg": "1", "waitMsMax": "2", "waitRatioAvg": 0.0019047619047619048, "waitRatioMax": 0.0038095238095238095, "writeMsAvg": "4", "writeMsMax": "5", "writeRatioAvg": 0.007619047619047619, "writeRatioMax": 0.009523809523809525 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.02857142857142857, "computeRatioMax": 0.02857142857142857, "endMs": "1665776767279", "id": "6", "inputStages": [ "5" ], "name": "S06: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "7199", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "19", "startMs": "1665776767260", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140, $60, $61, $62, $63", "FROM __stage05_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$50 := ROOT_AVG($60)", "$51 := ROOT_AVG($61)", "$52 := ROOT_AVG($62)", "$53 := ROOT_AVG($63)" ] }, { "kind": "WRITE", "substeps": [ "$160, $161, $162, $163, $164", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0019047619047619048, "waitRatioMax": 0.0019047619047619048, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.0019047619047619048, "writeRatioMax": 0.0019047619047619048 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.015238095238095238, "computeRatioMax": 0.015238095238095238, "endMs": "1665776767312", "id": "7", "inputStages": [ "6" ], "name": "S07: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "30", "startMs": "1665776767275", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $161, $162, $163, $164", "FROM __stage06_output" ] }, { "kind": "SORT", "substeps": [ "$160 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$170, $171, $172, $173, $174", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0019047619047619048, "waitRatioMax": 0.0019047619047619048, "writeMsAvg": "30", "writeMsMax": "30", "writeRatioAvg": 0.05714285714285714, "writeRatioMax": 0.05714285714285714 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "promotion" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_demographics" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" } ], "statementType": "SELECT", "timeline": [ { "activeUnits": "1", "completedUnits": "11", "elapsedMs": "602", "estimatedRunnableUnits": "0", "pendingUnits": "1", "totalSlotMs": "2247" }, { "activeUnits": "1", "completedUnits": "12", "elapsedMs": "629", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2277" } ], "totalBytesBilled": "294649856", "totalBytesProcessed": "293847813", "totalPartitionsProcessed": "0", "totalSlotMs": "2277", "transferredBytes": "0" }, "startTime": "1665776766710", "totalBytesProcessed": "293847813", "totalSlotMs": "2277" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon8af4df1b_b46e_4b66_b9d0_97ddd6de6166" }, "priority": "INTERACTIVE", "query": "-- start query 7 in stream 0 using template query7.tpl\nselect i_item_id, \n avg(ss_quantity) agg1,\n avg(ss_list_price) agg2,\n avg(ss_coupon_amt) agg3,\n avg(ss_sales_price) agg4 \n from store_sales, customer_demographics, date_dim, item, promotion\n where ss_sold_date_sk = d_date_sk and\n ss_item_sk = i_item_sk and\n ss_cdemo_sk = cd_demo_sk and\n ss_promo_sk = p_promo_sk and\n cd_gender = 'M' and \n cd_marital_status = 'S' and\n cd_education_status = 'College' and\n (p_channel_email = 'N' or p_channel_event = 'N') and\n d_year = 2000\n group by i_item_id\n order by i_item_id\n limit 100\n ;\n\n-- end query 7 in stream 0 using template query7.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "fvqLjUjCU3dmKXYgzzLFcQ==", "id": "test-project-364309:europe-west1.query07_1665776768", "jobReference": { "jobId": "query07_1665776768", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query07_1665776768?location=europe-west1", "statistics": { "creationTime": "1665776768973", "endTime": "1665776769674", "finalExecutionDurationMs": "503", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "293847813", "performanceInsights": { "avgPreviousExecutionMs": "500" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.01744186046511628, "computeRatioMax": 0.01744186046511628, "endMs": "1665776769171", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.009689922480620155, "readRatioMax": 0.009689922480620155, "recordsRead": "300", "recordsWritten": "299", "shuffleOutputBytes": "2691", "shuffleOutputBytesSpilled": "0", "slotMs": "37", "startMs": "1665776769132", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:p_promo_sk, $11:p_channel_email, $12:p_channel_event", "FROM promotion", "WHERE or(equal($11, 'N'), equal($12, 'N'))" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.001937984496124031, "waitRatioMax": 0.001937984496124031, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.029069767441860465, "writeRatioMax": 0.029069767441860465 }, { "completedParallelInputs": "1", "computeMsAvg": "23", "computeMsMax": "23", "computeRatioAvg": 0.044573643410852716, "computeRatioMax": 0.044573643410852716, "endMs": "1665776769201", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.011627906976744186, "readRatioMax": 0.011627906976744186, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "58", "startMs": "1665776769149", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.001937984496124031, "waitRatioMax": 0.001937984496124031, "writeMsAvg": "21", "writeMsMax": "21", "writeRatioAvg": 0.040697674418604654, "writeRatioMax": 0.040697674418604654 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.01744186046511628, "computeRatioMax": 0.01744186046511628, "endMs": "1665776769206", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.011627906976744186, "readRatioMax": 0.011627906976744186, "recordsRead": "73049", "recordsWritten": "366", "shuffleOutputBytes": "3294", "shuffleOutputBytesSpilled": "0", "slotMs": "38", "startMs": "1665776769166", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_year", "FROM date_dim", "WHERE equal($31, 2000)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.001937984496124031, "waitRatioMax": 0.001937984496124031, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.027131782945736434, "writeRatioMax": 0.027131782945736434 }, { "completedParallelInputs": "1", "computeMsAvg": "31", "computeMsMax": "31", "computeRatioAvg": 0.060077519379844964, "computeRatioMax": 0.060077519379844964, "endMs": "1665776769238", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "11", "readMsMax": "11", "readRatioAvg": 0.02131782945736434, "readRatioMax": 0.02131782945736434, "recordsRead": "1920800", "recordsWritten": "27440", "shuffleOutputBytes": "246960", "shuffleOutputBytesSpilled": "0", "slotMs": "48", "startMs": "1665776769202", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:cd_demo_sk, $41:cd_gender, $42:cd_marital_status, $43:cd_education_status", "FROM customer_demographics", "WHERE and(equal($41, 'M'), equal($42, 'S'), equal($43, 'College'))" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "19", "waitMsMax": "19", "waitRatioAvg": 0.03682170542635659, "waitRatioMax": 0.03682170542635659, "writeMsAvg": "6", "writeMsMax": "6", "writeRatioAvg": 0.011627906976744186, "writeRatioMax": 0.011627906976744186 }, { "completedParallelInputs": "6", "computeMsAvg": "445", "computeMsMax": "516", "computeRatioAvg": 0.8624031007751938, "computeRatioMax": 1, "endMs": "1665776769516", "id": "5", "inputStages": [ "3", "2", "1", "0" ], "name": "S05: Join+", "parallelInputs": "6", "readMsAvg": "16", "readMsMax": "21", "readRatioAvg": 0.031007751937984496, "readRatioMax": 0.040697674418604654, "recordsRead": "3157034", "recordsWritten": "7199", "shuffleOutputBytes": "543087", "shuffleOutputBytesSpilled": "0", "slotMs": "2335", "startMs": "1665776769249", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:ss_sold_date_sk, $21:ss_item_sk, $22:ss_cdemo_sk, $23:ss_promo_sk, $24:ss_quantity, $25:ss_list_price, $26:ss_sales_price, $27:ss_coupon_amt", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $130", "$60 := SHARD_AVG($131)", "$61 := SHARD_AVG($132)", "$62 := SHARD_AVG($134)", "$63 := SHARD_AVG($133)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $115, $131 := $111, $132 := $112, $133 := $113, $134 := $114", "INNER HASH JOIN EACH WITH ALL ON $110 = $10" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102, $112 := $103, $113 := $104, $114 := $105, $115 := $2", "INNER HASH JOIN EACH WITH ALL ON $100 = $1" ] }, { "kind": "JOIN", "substeps": [ "$100 := $81, $101 := $82, $102 := $83, $103 := $84, $104 := $85, $105 := $86", "INNER HASH JOIN EACH WITH ALL ON $80 = $30" ] }, { "kind": "JOIN", "substeps": [ "$80 := $20, $81 := $21, $82 := $23, $83 := $24, $84 := $25, $85 := $26, $86 := $27", "INNER HASH JOIN EACH WITH ALL ON $22 = $40" ] }, { "kind": "WRITE", "substeps": [ "$140, $60, $61, $62, $63", "TO __stage05_output", "BY HASH($140)" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.003875968992248062, "waitRatioMax": 0.003875968992248062, "writeMsAvg": "4", "writeMsMax": "5", "writeRatioAvg": 0.007751937984496124, "writeRatioMax": 0.009689922480620155 }, { "completedParallelInputs": "1", "computeMsAvg": "23", "computeMsMax": "23", "computeRatioAvg": 0.044573643410852716, "computeRatioMax": 0.044573643410852716, "endMs": "1665776769548", "id": "6", "inputStages": [ "5" ], "name": "S06: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "7199", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "20", "startMs": "1665776769530", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140, $60, $61, $62, $63", "FROM __stage05_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$50 := ROOT_AVG($60)", "$51 := ROOT_AVG($61)", "$52 := ROOT_AVG($62)", "$53 := ROOT_AVG($63)" ] }, { "kind": "WRITE", "substeps": [ "$160, $161, $162, $163, $164", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.001937984496124031, "waitRatioMax": 0.001937984496124031, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.001937984496124031, "writeRatioMax": 0.001937984496124031 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.01744186046511628, "computeRatioMax": 0.01744186046511628, "endMs": "1665776769597", "id": "7", "inputStages": [ "6" ], "name": "S07: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "50", "startMs": "1665776769548", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $161, $162, $163, $164", "FROM __stage06_output" ] }, { "kind": "SORT", "substeps": [ "$160 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$170, $171, $172, $173, $174", "TO __stage07_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.003875968992248062, "waitRatioMax": 0.003875968992248062, "writeMsAvg": "27", "writeMsMax": "27", "writeRatioAvg": 0.05232558139534884, "writeRatioMax": 0.05232558139534884 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_demographics" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "promotion" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "12", "elapsedMs": "599", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2619" } ], "totalBytesBilled": "294649856", "totalBytesProcessed": "293847813", "totalPartitionsProcessed": "0", "totalSlotMs": "2619", "transferredBytes": "0" }, "startTime": "1665776769027", "totalBytesProcessed": "293847813", "totalSlotMs": "2619" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anona55f8ee8_5ae5_444d_9120_49bab7071ea0" }, "priority": "INTERACTIVE", "query": "-- start query 7 in stream 0 using template query7.tpl\nselect i_item_id, \n avg(ss_quantity) agg1,\n avg(ss_list_price) agg2,\n avg(ss_coupon_amt) agg3,\n avg(ss_sales_price) agg4 \n from store_sales, customer_demographics, date_dim, item, promotion\n where ss_sold_date_sk = d_date_sk and\n ss_item_sk = i_item_sk and\n ss_cdemo_sk = cd_demo_sk and\n ss_promo_sk = p_promo_sk and\n cd_gender = 'M' and \n cd_marital_status = 'S' and\n cd_education_status = 'College' and\n (p_channel_email = 'N' or p_channel_event = 'N') and\n d_year = 2000\n group by i_item_id\n order by i_item_id\n limit 100\n ;\n\n-- end query 7 in stream 0 using template query7.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "2jO5iLXsIFRVRqnaTA9nag==", "id": "test-project-364309:europe-west1.query07_1665776770", "jobReference": { "jobId": "query07_1665776770", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query07_1665776770?location=europe-west1", "statistics": { "creationTime": "1665776771325", "endTime": "1665776772038", "finalExecutionDurationMs": "516", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "293847813", "performanceInsights": { "avgPreviousExecutionMs": "500" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.025423728813559324, "computeRatioMax": 0.025423728813559324, "endMs": "1665776771532", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.014830508474576272, "readRatioMax": 0.014830508474576272, "recordsRead": "300", "recordsWritten": "299", "shuffleOutputBytes": "2691", "shuffleOutputBytesSpilled": "0", "slotMs": "53", "startMs": "1665776771484", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:p_promo_sk, $11:p_channel_email, $12:p_channel_event", "FROM promotion", "WHERE or(equal($11, 'N'), equal($12, 'N'))" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00211864406779661, "waitRatioMax": 0.00211864406779661, "writeMsAvg": "20", "writeMsMax": "20", "writeRatioAvg": 0.0423728813559322, "writeRatioMax": 0.0423728813559322 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.03177966101694915, "computeRatioMax": 0.03177966101694915, "endMs": "1665776771564", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.01059322033898305, "readRatioMax": 0.01059322033898305, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "70", "startMs": "1665776771505", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00211864406779661, "waitRatioMax": 0.00211864406779661, "writeMsAvg": "42", "writeMsMax": "42", "writeRatioAvg": 0.08898305084745763, "writeRatioMax": 0.08898305084745763 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.0211864406779661, "computeRatioMax": 0.0211864406779661, "endMs": "1665776771568", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.012711864406779662, "readRatioMax": 0.012711864406779662, "recordsRead": "73049", "recordsWritten": "366", "shuffleOutputBytes": "3294", "shuffleOutputBytesSpilled": "0", "slotMs": "51", "startMs": "1665776771527", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_year", "FROM date_dim", "WHERE equal($31, 2000)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00211864406779661, "waitRatioMax": 0.00211864406779661, "writeMsAvg": "28", "writeMsMax": "28", "writeRatioAvg": 0.059322033898305086, "writeRatioMax": 0.059322033898305086 }, { "completedParallelInputs": "1", "computeMsAvg": "21", "computeMsMax": "21", "computeRatioAvg": 0.04449152542372881, "computeRatioMax": 0.04449152542372881, "endMs": "1665776771584", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.0211864406779661, "readRatioMax": 0.0211864406779661, "recordsRead": "1920800", "recordsWritten": "27440", "shuffleOutputBytes": "246960", "shuffleOutputBytesSpilled": "0", "slotMs": "44", "startMs": "1665776771553", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:cd_demo_sk, $41:cd_gender, $42:cd_marital_status, $43:cd_education_status", "FROM customer_demographics", "WHERE and(equal($41, 'M'), equal($42, 'S'), equal($43, 'College'))" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00211864406779661, "waitRatioMax": 0.00211864406779661, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.01694915254237288, "writeRatioMax": 0.01694915254237288 }, { "completedParallelInputs": "6", "computeMsAvg": "372", "computeMsMax": "472", "computeRatioAvg": 0.788135593220339, "computeRatioMax": 1, "endMs": "1665776771883", "id": "5", "inputStages": [ "3", "2", "1", "0" ], "name": "S05: Join+", "parallelInputs": "6", "readMsAvg": "19", "readMsMax": "24", "readRatioAvg": 0.04025423728813559, "readRatioMax": 0.05084745762711865, "recordsRead": "3157034", "recordsWritten": "7199", "shuffleOutputBytes": "543087", "shuffleOutputBytesSpilled": "0", "slotMs": "2070", "startMs": "1665776771595", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:ss_sold_date_sk, $21:ss_item_sk, $22:ss_cdemo_sk, $23:ss_promo_sk, $24:ss_quantity, $25:ss_list_price, $26:ss_sales_price, $27:ss_coupon_amt", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $130", "$60 := SHARD_AVG($131)", "$61 := SHARD_AVG($132)", "$62 := SHARD_AVG($134)", "$63 := SHARD_AVG($133)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $115, $131 := $111, $132 := $112, $133 := $113, $134 := $114", "INNER HASH JOIN EACH WITH ALL ON $110 = $10" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102, $112 := $103, $113 := $104, $114 := $105, $115 := $2", "INNER HASH JOIN EACH WITH ALL ON $100 = $1" ] }, { "kind": "JOIN", "substeps": [ "$100 := $81, $101 := $82, $102 := $83, $103 := $84, $104 := $85, $105 := $86", "INNER HASH JOIN EACH WITH ALL ON $80 = $30" ] }, { "kind": "JOIN", "substeps": [ "$80 := $20, $81 := $21, $82 := $23, $83 := $24, $84 := $25, $85 := $26, $86 := $27", "INNER HASH JOIN EACH WITH ALL ON $22 = $40" ] }, { "kind": "WRITE", "substeps": [ "$140, $60, $61, $62, $63", "TO __stage05_output", "BY HASH($140)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00211864406779661, "waitRatioMax": 0.00211864406779661, "writeMsAvg": "5", "writeMsMax": "5", "writeRatioAvg": 0.01059322033898305, "writeRatioMax": 0.01059322033898305 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.03177966101694915, "computeRatioMax": 0.03177966101694915, "endMs": "1665776771911", "id": "6", "inputStages": [ "5" ], "name": "S06: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "7199", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "18", "startMs": "1665776771895", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140, $60, $61, $62, $63", "FROM __stage05_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$50 := ROOT_AVG($60)", "$51 := ROOT_AVG($61)", "$52 := ROOT_AVG($62)", "$53 := ROOT_AVG($63)" ] }, { "kind": "WRITE", "substeps": [ "$160, $161, $162, $163, $164", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00211864406779661, "waitRatioMax": 0.00211864406779661, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.00211864406779661, "writeRatioMax": 0.00211864406779661 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.01694915254237288, "computeRatioMax": 0.01694915254237288, "endMs": "1665776771962", "id": "7", "inputStages": [ "6" ], "name": "S07: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "48", "startMs": "1665776771913", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $161, $162, $163, $164", "FROM __stage06_output" ] }, { "kind": "SORT", "substeps": [ "$160 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$170, $171, $172, $173, $174", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00211864406779661, "waitRatioMax": 0.00211864406779661, "writeMsAvg": "28", "writeMsMax": "28", "writeRatioAvg": 0.059322033898305086, "writeRatioMax": 0.059322033898305086 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "promotion" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_demographics" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "12", "elapsedMs": "598", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2359" } ], "totalBytesBilled": "294649856", "totalBytesProcessed": "293847813", "totalPartitionsProcessed": "0", "totalSlotMs": "2359", "transferredBytes": "0" }, "startTime": "1665776771391", "totalBytesProcessed": "293847813", "totalSlotMs": "2359" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anonb2847569_bb4f_4bc8_80be_74e87366b739" }, "priority": "INTERACTIVE", "query": "-- start query 7 in stream 0 using template query7.tpl\nselect i_item_id, \n avg(ss_quantity) agg1,\n avg(ss_list_price) agg2,\n avg(ss_coupon_amt) agg3,\n avg(ss_sales_price) agg4 \n from store_sales, customer_demographics, date_dim, item, promotion\n where ss_sold_date_sk = d_date_sk and\n ss_item_sk = i_item_sk and\n ss_cdemo_sk = cd_demo_sk and\n ss_promo_sk = p_promo_sk and\n cd_gender = 'M' and \n cd_marital_status = 'S' and\n cd_education_status = 'College' and\n (p_channel_email = 'N' or p_channel_event = 'N') and\n d_year = 2000\n group by i_item_id\n order by i_item_id\n limit 100\n ;\n\n-- end query 7 in stream 0 using template query7.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "eKOFAfWM9kUpOO0xqJVtaw==", "id": "test-project-364309:europe-west1.query07_1665776773", "jobReference": { "jobId": "query07_1665776773", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query07_1665776773?location=europe-west1", "statistics": { "creationTime": "1665776773566", "endTime": "1665776774209", "finalExecutionDurationMs": "447", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "293847813", "performanceInsights": { "avgPreviousExecutionMs": "500" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.023655913978494623, "computeRatioMax": 0.023655913978494623, "endMs": "1665776773756", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.010752688172043012, "readRatioMax": 0.010752688172043012, "recordsRead": "300", "recordsWritten": "299", "shuffleOutputBytes": "2691", "shuffleOutputBytesSpilled": "0", "slotMs": "39", "startMs": "1665776773710", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:p_promo_sk, $11:p_channel_email, $12:p_channel_event", "FROM promotion", "WHERE or(equal($11, 'N'), equal($12, 'N'))" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002150537634408602, "waitRatioMax": 0.002150537634408602, "writeMsAvg": "20", "writeMsMax": "20", "writeRatioAvg": 0.043010752688172046, "writeRatioMax": 0.043010752688172046 }, { "completedParallelInputs": "1", "computeMsAvg": "23", "computeMsMax": "23", "computeRatioAvg": 0.04946236559139785, "computeRatioMax": 0.04946236559139785, "endMs": "1665776773779", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.012903225806451613, "readRatioMax": 0.012903225806451613, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "59", "startMs": "1665776773724", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002150537634408602, "waitRatioMax": 0.002150537634408602, "writeMsAvg": "25", "writeMsMax": "25", "writeRatioAvg": 0.053763440860215055, "writeRatioMax": 0.053763440860215055 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.021505376344086023, "computeRatioMax": 0.021505376344086023, "endMs": "1665776773769", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.012903225806451613, "readRatioMax": 0.012903225806451613, "recordsRead": "73049", "recordsWritten": "366", "shuffleOutputBytes": "3294", "shuffleOutputBytesSpilled": "0", "slotMs": "30", "startMs": "1665776773740", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_year", "FROM date_dim", "WHERE equal($31, 2000)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002150537634408602, "waitRatioMax": 0.002150537634408602, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.030107526881720432, "writeRatioMax": 0.030107526881720432 }, { "completedParallelInputs": "1", "computeMsAvg": "22", "computeMsMax": "22", "computeRatioAvg": 0.047311827956989246, "computeRatioMax": 0.047311827956989246, "endMs": "1665776773782", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.021505376344086023, "readRatioMax": 0.021505376344086023, "recordsRead": "1920800", "recordsWritten": "27440", "shuffleOutputBytes": "246960", "shuffleOutputBytesSpilled": "0", "slotMs": "35", "startMs": "1665776773752", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:cd_demo_sk, $41:cd_gender, $42:cd_marital_status, $43:cd_education_status", "FROM customer_demographics", "WHERE and(equal($41, 'M'), equal($42, 'S'), equal($43, 'College'))" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002150537634408602, "waitRatioMax": 0.002150537634408602, "writeMsAvg": "6", "writeMsMax": "6", "writeRatioAvg": 0.012903225806451613, "writeRatioMax": 0.012903225806451613 }, { "completedParallelInputs": "6", "computeMsAvg": "379", "computeMsMax": "465", "computeRatioAvg": 0.8150537634408602, "computeRatioMax": 1, "endMs": "1665776774067", "id": "5", "inputStages": [ "1", "2", "3", "0" ], "name": "S05: Join+", "parallelInputs": "6", "readMsAvg": "17", "readMsMax": "21", "readRatioAvg": 0.03655913978494624, "readRatioMax": 0.04516129032258064, "recordsRead": "3157034", "recordsWritten": "7199", "shuffleOutputBytes": "543087", "shuffleOutputBytesSpilled": "0", "slotMs": "1926", "startMs": "1665776773798", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:ss_sold_date_sk, $21:ss_item_sk, $22:ss_cdemo_sk, $23:ss_promo_sk, $24:ss_quantity, $25:ss_list_price, $26:ss_sales_price, $27:ss_coupon_amt", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $130", "$60 := SHARD_AVG($131)", "$61 := SHARD_AVG($132)", "$62 := SHARD_AVG($134)", "$63 := SHARD_AVG($133)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $115, $131 := $111, $132 := $112, $133 := $113, $134 := $114", "INNER HASH JOIN EACH WITH ALL ON $110 = $10" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102, $112 := $103, $113 := $104, $114 := $105, $115 := $2", "INNER HASH JOIN EACH WITH ALL ON $100 = $1" ] }, { "kind": "JOIN", "substeps": [ "$100 := $81, $101 := $82, $102 := $83, $103 := $84, $104 := $85, $105 := $86", "INNER HASH JOIN EACH WITH ALL ON $80 = $30" ] }, { "kind": "JOIN", "substeps": [ "$80 := $20, $81 := $21, $82 := $23, $83 := $24, $84 := $25, $85 := $26, $86 := $27", "INNER HASH JOIN EACH WITH ALL ON $22 = $40" ] }, { "kind": "WRITE", "substeps": [ "$140, $60, $61, $62, $63", "TO __stage05_output", "BY HASH($140)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002150537634408602, "waitRatioMax": 0.002150537634408602, "writeMsAvg": "4", "writeMsMax": "5", "writeRatioAvg": 0.008602150537634409, "writeRatioMax": 0.010752688172043012 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.03225806451612903, "computeRatioMax": 0.03225806451612903, "endMs": "1665776774086", "id": "6", "inputStages": [ "5" ], "name": "S06: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "7199", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "16", "startMs": "1665776774072", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140, $60, $61, $62, $63", "FROM __stage05_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$50 := ROOT_AVG($60)", "$51 := ROOT_AVG($61)", "$52 := ROOT_AVG($62)", "$53 := ROOT_AVG($63)" ] }, { "kind": "WRITE", "substeps": [ "$160, $161, $162, $163, $164", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002150537634408602, "waitRatioMax": 0.002150537634408602, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.002150537634408602, "writeRatioMax": 0.002150537634408602 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.01935483870967742, "computeRatioMax": 0.01935483870967742, "endMs": "1665776774124", "id": "7", "inputStages": [ "6" ], "name": "S07: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "35", "startMs": "1665776774088", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $161, $162, $163, $164", "FROM __stage06_output" ] }, { "kind": "SORT", "substeps": [ "$160 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$170, $171, $172, $173, $174", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002150537634408602, "waitRatioMax": 0.002150537634408602, "writeMsAvg": "26", "writeMsMax": "26", "writeRatioAvg": 0.05591397849462366, "writeRatioMax": 0.05591397849462366 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_demographics" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "promotion" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "12", "elapsedMs": "535", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2143" } ], "totalBytesBilled": "294649856", "totalBytesProcessed": "293847813", "totalPartitionsProcessed": "0", "totalSlotMs": "2143", "transferredBytes": "0" }, "startTime": "1665776773620", "totalBytesProcessed": "293847813", "totalSlotMs": "2143" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
