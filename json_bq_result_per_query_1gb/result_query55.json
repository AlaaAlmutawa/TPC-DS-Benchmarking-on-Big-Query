{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon7fda25d3_6bac_4af6_8e69_aa631e308c14" }, "priority": "INTERACTIVE", "query": "-- start query 55 in stream 0 using template query55.tpl\n\n/*\nFor a given year, month and store manager calculate the total store sales of any combination all brands.\n*/\n\nselect i_brand_id brand_id, i_brand brand,\n \tsum(ss_ext_sales_price) ext_price\n from date_dim, store_sales, item\n where d_date_sk = ss_sold_date_sk\n \tand ss_item_sk = i_item_sk\n \tand i_manager_id=28\n \tand d_moy=11\n \tand d_year=1999\n group by i_brand, i_brand_id\n order by ext_price desc, i_brand_id\n limit 100\n ;\n\n-- end query 55 in stream 0 using template query55.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "yIDNVQRkosGHaqeTm0/EOw==", "id": "test-project-364309:europe-west1.query55_1665768389", "jobReference": { "jobId": "query55_1665768389", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query55_1665768389?location=europe-west1", "statistics": { "creationTime": "1665768390108", "endTime": "1665768390644", "finalExecutionDurationMs": "327", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "91558261", "performanceInsights": { "avgPreviousExecutionMs": "358" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.04433497536945813, "computeRatioMax": 0.04433497536945813, "endMs": "1665768390282", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.024630541871921183, "readRatioMax": 0.024630541871921183, "recordsRead": "18000", "recordsWritten": "339", "shuffleOutputBytes": "13314", "shuffleOutputBytesSpilled": "0", "slotMs": "27", "startMs": "1665768390253", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_sk, $11:i_brand_id, $12:i_brand, $13:i_manager_id", "FROM item", "WHERE equal($13, 28)" ] }, { "kind": "WRITE", "substeps": [ "$10, $11, $12", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0049261083743842365, "waitRatioMax": 0.0049261083743842365, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.07389162561576355, "writeRatioMax": 0.07389162561576355 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.06403940886699508, "computeRatioMax": 0.06403940886699508, "endMs": "1665768390323", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.03940886699507389, "readRatioMax": 0.03940886699507389, "recordsRead": "73049", "recordsWritten": "30", "shuffleOutputBytes": "270", "shuffleOutputBytesSpilled": "0", "slotMs": "37", "startMs": "1665768390284", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:d_date_sk, $21:d_year, $22:d_moy", "FROM date_dim", "WHERE and(equal($22, 11), equal($21, 1999))" ] }, { "kind": "WRITE", "substeps": [ "$20", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0049261083743842365, "waitRatioMax": 0.0049261083743842365, "writeMsAvg": "9", "writeMsMax": "9", "writeRatioAvg": 0.04433497536945813, "writeRatioMax": 0.04433497536945813 }, { "completedParallelInputs": "6", "computeMsAvg": "136", "computeMsMax": "203", "computeRatioAvg": 0.6699507389162561, "computeRatioMax": 1, "endMs": "1665768390476", "id": "3", "inputStages": [ "2", "0" ], "name": "S03: Join+", "parallelInputs": "6", "readMsAvg": "16", "readMsMax": "20", "readRatioAvg": 0.07881773399014778, "readRatioMax": 0.09852216748768473, "recordsRead": "2882618", "recordsWritten": "534", "shuffleOutputBytes": "25055", "shuffleOutputBytesSpilled": "0", "slotMs": "844", "startMs": "1665768390337", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:ss_sold_date_sk, $2:ss_item_sk, $3:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$20", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$10, $11, $12", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $70 := $62, $71 := $61", "$40 := SUM($60)" ] }, { "kind": "JOIN", "substeps": [ "$60 := $51, $61 := $11, $62 := $12", "INNER HASH JOIN EACH WITH ALL ON $50 = $10" ] }, { "kind": "JOIN", "substeps": [ "$50 := $2, $51 := $3", "INNER HASH JOIN EACH WITH ALL ON $1 = $20" ] }, { "kind": "WRITE", "substeps": [ "$71, $70, $40", "TO __stage03_output", "BY HASH($70, $71)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0049261083743842365, "waitRatioMax": 0.0049261083743842365, "writeMsAvg": "6", "writeMsMax": "11", "writeRatioAvg": 0.029556650246305417, "writeRatioMax": 0.054187192118226604 }, { "completedParallelInputs": "1", "computeMsAvg": "5", "computeMsMax": "5", "computeRatioAvg": 0.024630541871921183, "computeRatioMax": 0.024630541871921183, "endMs": "1665768390497", "id": "4", "inputStages": [ "3" ], "name": "S04: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "534", "recordsWritten": "100", "shuffleOutputBytes": "4684", "shuffleOutputBytesSpilled": "0", "slotMs": "9", "startMs": "1665768390486", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$71, $70, $40", "FROM __stage03_output" ] }, { "kind": "SORT", "substeps": [ "$30 DESC, $81 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $80 := $70, $81 := $71", "$30 := SUM($40)" ] }, { "kind": "WRITE", "substeps": [ "$90, $91, $92", "TO __stage04_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0049261083743842365, "waitRatioMax": 0.0049261083743842365, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.0049261083743842365, "writeRatioMax": 0.0049261083743842365 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.06403940886699508, "computeRatioMax": 0.06403940886699508, "endMs": "1665768390541", "id": "5", "inputStages": [ "4" ], "name": "S05: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "4684", "shuffleOutputBytesSpilled": "0", "slotMs": "32", "startMs": "1665768390502", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90, $91, $92", "FROM __stage04_output" ] }, { "kind": "SORT", "substeps": [ "$92 DESC, $90 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$100, $101, $102", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0049261083743842365, "waitRatioMax": 0.0049261083743842365, "writeMsAvg": "17", "writeMsMax": "17", "writeRatioAvg": 0.08374384236453201, "writeRatioMax": 0.08374384236453201 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "10", "elapsedMs": "433", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "952" } ], "totalBytesBilled": "92274688", "totalBytesProcessed": "91558261", "totalPartitionsProcessed": "0", "totalSlotMs": "952", "transferredBytes": "0" }, "startTime": "1665768390156", "totalBytesProcessed": "91558261", "totalSlotMs": "952" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anone4d695bd_18ce_4785_8dec_66fb887f97d3" }, "priority": "INTERACTIVE", "query": "-- start query 55 in stream 0 using template query55.tpl\n\n/*\nFor a given year, month and store manager calculate the total store sales of any combination all brands.\n*/\n\nselect i_brand_id brand_id, i_brand brand,\n \tsum(ss_ext_sales_price) ext_price\n from date_dim, store_sales, item\n where d_date_sk = ss_sold_date_sk\n \tand ss_item_sk = i_item_sk\n \tand i_manager_id=28\n \tand d_moy=11\n \tand d_year=1999\n group by i_brand, i_brand_id\n order by ext_price desc, i_brand_id\n limit 100\n ;\n\n-- end query 55 in stream 0 using template query55.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "XfU4kbOtZXIpF0wsPmyj6A==", "id": "test-project-364309:europe-west1.query55_1665777795", "jobReference": { "jobId": "query55_1665777795", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query55_1665777795?location=europe-west1", "statistics": { "creationTime": "1665777796307", "endTime": "1665777796763", "finalExecutionDurationMs": "285", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "91558261", "performanceInsights": { "avgPreviousExecutionMs": "350" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "5", "computeMsMax": "5", "computeRatioAvg": 0.03875968992248062, "computeRatioMax": 0.03875968992248062, "endMs": "1665777796461", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.031007751937984496, "readRatioMax": 0.031007751937984496, "recordsRead": "18000", "recordsWritten": "339", "shuffleOutputBytes": "13314", "shuffleOutputBytesSpilled": "0", "slotMs": "35", "startMs": "1665777796422", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_sk, $11:i_brand_id, $12:i_brand, $13:i_manager_id", "FROM item", "WHERE equal($13, 28)" ] }, { "kind": "WRITE", "substeps": [ "$10, $11, $12", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007751937984496124, "waitRatioMax": 0.007751937984496124, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.12403100775193798, "writeRatioMax": 0.12403100775193798 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.10077519379844961, "computeRatioMax": 0.10077519379844961, "endMs": "1665777796496", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.046511627906976744, "readRatioMax": 0.046511627906976744, "recordsRead": "73049", "recordsWritten": "30", "shuffleOutputBytes": "270", "shuffleOutputBytesSpilled": "0", "slotMs": "33", "startMs": "1665777796455", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:d_date_sk, $21:d_year, $22:d_moy", "FROM date_dim", "WHERE and(equal($22, 11), equal($21, 1999))" ] }, { "kind": "WRITE", "substeps": [ "$20", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007751937984496124, "waitRatioMax": 0.007751937984496124, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.11627906976744186, "writeRatioMax": 0.11627906976744186 }, { "completedParallelInputs": "6", "computeMsAvg": "114", "computeMsMax": "129", "computeRatioAvg": 0.8837209302325582, "computeRatioMax": 1, "endMs": "1665777796615", "id": "3", "inputStages": [ "0", "2" ], "name": "S03: Join+", "parallelInputs": "6", "readMsAvg": "14", "readMsMax": "17", "readRatioAvg": 0.10852713178294573, "readRatioMax": 0.13178294573643412, "recordsRead": "2882618", "recordsWritten": "534", "shuffleOutputBytes": "25055", "shuffleOutputBytesSpilled": "0", "slotMs": "722", "startMs": "1665777796518", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:ss_sold_date_sk, $2:ss_item_sk, $3:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$20", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$10, $11, $12", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $70 := $62, $71 := $61", "$40 := SUM($60)" ] }, { "kind": "JOIN", "substeps": [ "$60 := $51, $61 := $11, $62 := $12", "INNER HASH JOIN EACH WITH ALL ON $50 = $10" ] }, { "kind": "JOIN", "substeps": [ "$50 := $2, $51 := $3", "INNER HASH JOIN EACH WITH ALL ON $1 = $20" ] }, { "kind": "WRITE", "substeps": [ "$71, $70, $40", "TO __stage03_output", "BY HASH($70, $71)" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.015503875968992248, "waitRatioMax": 0.015503875968992248, "writeMsAvg": "5", "writeMsMax": "6", "writeRatioAvg": 0.03875968992248062, "writeRatioMax": 0.046511627906976744 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.06201550387596899, "computeRatioMax": 0.06201550387596899, "endMs": "1665777796630", "id": "4", "inputStages": [ "3" ], "name": "S04: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "534", "recordsWritten": "100", "shuffleOutputBytes": "4684", "shuffleOutputBytesSpilled": "0", "slotMs": "10", "startMs": "1665777796620", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$71, $70, $40", "FROM __stage03_output" ] }, { "kind": "SORT", "substeps": [ "$30 DESC, $81 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $80 := $70, $81 := $71", "$30 := SUM($40)" ] }, { "kind": "WRITE", "substeps": [ "$90, $91, $92", "TO __stage04_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007751937984496124, "waitRatioMax": 0.007751937984496124, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.007751937984496124, "writeRatioMax": 0.007751937984496124 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.08527131782945736, "computeRatioMax": 0.08527131782945736, "endMs": "1665777796673", "id": "5", "inputStages": [ "4" ], "name": "S05: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "4684", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665777796634", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90, $91, $92", "FROM __stage04_output" ] }, { "kind": "SORT", "substeps": [ "$92 DESC, $90 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$100, $101, $102", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007751937984496124, "waitRatioMax": 0.007751937984496124, "writeMsAvg": "30", "writeMsMax": "30", "writeRatioAvg": 0.23255813953488372, "writeRatioMax": 0.23255813953488372 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "10", "elapsedMs": "389", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "968" } ], "totalBytesBilled": "92274688", "totalBytesProcessed": "91558261", "totalPartitionsProcessed": "0", "totalSlotMs": "968", "transferredBytes": "0" }, "startTime": "1665777796339", "totalBytesProcessed": "91558261", "totalSlotMs": "968" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon84a73181_ed79_4bc2_8d2a_6e3ff40c43dd" }, "priority": "INTERACTIVE", "query": "-- start query 55 in stream 0 using template query55.tpl\n\n/*\nFor a given year, month and store manager calculate the total store sales of any combination all brands.\n*/\n\nselect i_brand_id brand_id, i_brand brand,\n \tsum(ss_ext_sales_price) ext_price\n from date_dim, store_sales, item\n where d_date_sk = ss_sold_date_sk\n \tand ss_item_sk = i_item_sk\n \tand i_manager_id=28\n \tand d_moy=11\n \tand d_year=1999\n group by i_brand, i_brand_id\n order by ext_price desc, i_brand_id\n limit 100\n ;\n\n-- end query 55 in stream 0 using template query55.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "k9DmuemlN/zbZAJxZYW7OA==", "id": "test-project-364309:europe-west1.query55_1665777797", "jobReference": { "jobId": "query55_1665777797", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query55_1665777797?location=europe-west1", "statistics": { "creationTime": "1665777798367", "endTime": "1665777798871", "finalExecutionDurationMs": "296", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "91558261", "performanceInsights": { "avgPreviousExecutionMs": "337" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.05583756345177665, "computeRatioMax": 0.05583756345177665, "endMs": "1665777798521", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.025380710659898477, "readRatioMax": 0.025380710659898477, "recordsRead": "18000", "recordsWritten": "339", "shuffleOutputBytes": "13314", "shuffleOutputBytesSpilled": "0", "slotMs": "25", "startMs": "1665777798492", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_sk, $11:i_brand_id, $12:i_brand, $13:i_manager_id", "FROM item", "WHERE equal($13, 28)" ] }, { "kind": "WRITE", "substeps": [ "$10, $11, $12", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005076142131979695, "waitRatioMax": 0.005076142131979695, "writeMsAvg": "17", "writeMsMax": "17", "writeRatioAvg": 0.08629441624365482, "writeRatioMax": 0.08629441624365482 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.06598984771573604, "computeRatioMax": 0.06598984771573604, "endMs": "1665777798551", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.04060913705583756, "readRatioMax": 0.04060913705583756, "recordsRead": "73049", "recordsWritten": "30", "shuffleOutputBytes": "270", "shuffleOutputBytesSpilled": "0", "slotMs": "28", "startMs": "1665777798520", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:d_date_sk, $21:d_year, $22:d_moy", "FROM date_dim", "WHERE and(equal($22, 11), equal($21, 1999))" ] }, { "kind": "WRITE", "substeps": [ "$20", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005076142131979695, "waitRatioMax": 0.005076142131979695, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.06598984771573604, "writeRatioMax": 0.06598984771573604 }, { "completedParallelInputs": "6", "computeMsAvg": "137", "computeMsMax": "197", "computeRatioAvg": 0.6954314720812182, "computeRatioMax": 1, "endMs": "1665777798689", "id": "3", "inputStages": [ "2", "0" ], "name": "S03: Join+", "parallelInputs": "6", "readMsAvg": "17", "readMsMax": "20", "readRatioAvg": 0.08629441624365482, "readRatioMax": 0.10152284263959391, "recordsRead": "2882618", "recordsWritten": "534", "shuffleOutputBytes": "25055", "shuffleOutputBytesSpilled": "0", "slotMs": "897", "startMs": "1665777798559", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:ss_sold_date_sk, $2:ss_item_sk, $3:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$20", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$10, $11, $12", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $70 := $62, $71 := $61", "$40 := SUM($60)" ] }, { "kind": "JOIN", "substeps": [ "$60 := $51, $61 := $11, $62 := $12", "INNER HASH JOIN EACH WITH ALL ON $50 = $10" ] }, { "kind": "JOIN", "substeps": [ "$50 := $2, $51 := $3", "INNER HASH JOIN EACH WITH ALL ON $1 = $20" ] }, { "kind": "WRITE", "substeps": [ "$71, $70, $40", "TO __stage03_output", "BY HASH($70, $71)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005076142131979695, "waitRatioMax": 0.005076142131979695, "writeMsAvg": "5", "writeMsMax": "6", "writeRatioAvg": 0.025380710659898477, "writeRatioMax": 0.030456852791878174 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.04060913705583756, "computeRatioMax": 0.04060913705583756, "endMs": "1665777798710", "id": "4", "inputStages": [ "3" ], "name": "S04: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "534", "recordsWritten": "100", "shuffleOutputBytes": "4684", "shuffleOutputBytesSpilled": "0", "slotMs": "11", "startMs": "1665777798699", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$71, $70, $40", "FROM __stage03_output" ] }, { "kind": "SORT", "substeps": [ "$30 DESC, $81 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $80 := $70, $81 := $71", "$30 := SUM($40)" ] }, { "kind": "WRITE", "substeps": [ "$90, $91, $92", "TO __stage04_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005076142131979695, "waitRatioMax": 0.005076142131979695, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.005076142131979695, "writeRatioMax": 0.005076142131979695 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.07106598984771574, "computeRatioMax": 0.07106598984771574, "endMs": "1665777798753", "id": "5", "inputStages": [ "4" ], "name": "S05: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "4684", "shuffleOutputBytesSpilled": "0", "slotMs": "42", "startMs": "1665777798710", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90, $91, $92", "FROM __stage04_output" ] }, { "kind": "SORT", "substeps": [ "$92 DESC, $90 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$100, $101, $102", "TO __stage05_output" ] } ], "waitMsAvg": "0", "waitMsMax": "0", "waitRatioAvg": 0, "waitRatioMax": 0, "writeMsAvg": "33", "writeMsMax": "33", "writeRatioAvg": 0.16751269035532995, "writeRatioMax": 0.16751269035532995 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "10", "elapsedMs": "411", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "1005" } ], "totalBytesBilled": "92274688", "totalBytesProcessed": "91558261", "totalPartitionsProcessed": "0", "totalSlotMs": "1005", "transferredBytes": "0" }, "startTime": "1665777798412", "totalBytesProcessed": "91558261", "totalSlotMs": "1005" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon45b0b915_dcec_4b01_9d55_4be6d986588e" }, "priority": "INTERACTIVE", "query": "-- start query 55 in stream 0 using template query55.tpl\n\n/*\nFor a given year, month and store manager calculate the total store sales of any combination all brands.\n*/\n\nselect i_brand_id brand_id, i_brand brand,\n \tsum(ss_ext_sales_price) ext_price\n from date_dim, store_sales, item\n where d_date_sk = ss_sold_date_sk\n \tand ss_item_sk = i_item_sk\n \tand i_manager_id=28\n \tand d_moy=11\n \tand d_year=1999\n group by i_brand, i_brand_id\n order by ext_price desc, i_brand_id\n limit 100\n ;\n\n-- end query 55 in stream 0 using template query55.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "p+xX78wgNikxnrCgPcnY3Q==", "id": "test-project-364309:europe-west1.query55_1665777799", "jobReference": { "jobId": "query55_1665777799", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query55_1665777799?location=europe-west1", "statistics": { "creationTime": "1665777800546", "endTime": "1665777801056", "finalExecutionDurationMs": "332", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "91558261", "performanceInsights": { "avgPreviousExecutionMs": "331" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.07368421052631578, "computeRatioMax": 0.07368421052631578, "endMs": "1665777800722", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.031578947368421054, "readRatioMax": 0.031578947368421054, "recordsRead": "18000", "recordsWritten": "339", "shuffleOutputBytes": "13314", "shuffleOutputBytesSpilled": "0", "slotMs": "31", "startMs": "1665777800682", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_sk, $11:i_brand_id, $12:i_brand, $13:i_manager_id", "FROM item", "WHERE equal($13, 28)" ] }, { "kind": "WRITE", "substeps": [ "$10, $11, $12", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005263157894736842, "waitRatioMax": 0.005263157894736842, "writeMsAvg": "24", "writeMsMax": "24", "writeRatioAvg": 0.12631578947368421, "writeRatioMax": 0.12631578947368421 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.05789473684210526, "computeRatioMax": 0.05789473684210526, "endMs": "1665777800752", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.031578947368421054, "readRatioMax": 0.031578947368421054, "recordsRead": "73049", "recordsWritten": "30", "shuffleOutputBytes": "270", "shuffleOutputBytesSpilled": "0", "slotMs": "50", "startMs": "1665777800708", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:d_date_sk, $21:d_year, $22:d_moy", "FROM date_dim", "WHERE and(equal($22, 11), equal($21, 1999))" ] }, { "kind": "WRITE", "substeps": [ "$20", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005263157894736842, "waitRatioMax": 0.005263157894736842, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.08421052631578947, "writeRatioMax": 0.08421052631578947 }, { "completedParallelInputs": "6", "computeMsAvg": "132", "computeMsMax": "190", "computeRatioAvg": 0.6947368421052632, "computeRatioMax": 1, "endMs": "1665777800916", "id": "3", "inputStages": [ "2", "0" ], "name": "S03: Join+", "parallelInputs": "6", "readMsAvg": "18", "readMsMax": "35", "readRatioAvg": 0.09473684210526316, "readRatioMax": 0.18421052631578946, "recordsRead": "2882618", "recordsWritten": "534", "shuffleOutputBytes": "25055", "shuffleOutputBytesSpilled": "0", "slotMs": "900", "startMs": "1665777800763", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:ss_sold_date_sk, $2:ss_item_sk, $3:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$20", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$10, $11, $12", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $70 := $62, $71 := $61", "$40 := SUM($60)" ] }, { "kind": "JOIN", "substeps": [ "$60 := $51, $61 := $11, $62 := $12", "INNER HASH JOIN EACH WITH ALL ON $50 = $10" ] }, { "kind": "JOIN", "substeps": [ "$50 := $2, $51 := $3", "INNER HASH JOIN EACH WITH ALL ON $1 = $20" ] }, { "kind": "WRITE", "substeps": [ "$71, $70, $40", "TO __stage03_output", "BY HASH($70, $71)" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.010526315789473684, "waitRatioMax": 0.010526315789473684, "writeMsAvg": "5", "writeMsMax": "6", "writeRatioAvg": 0.02631578947368421, "writeRatioMax": 0.031578947368421054 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.042105263157894736, "computeRatioMax": 0.042105263157894736, "endMs": "1665777800939", "id": "4", "inputStages": [ "3" ], "name": "S04: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "534", "recordsWritten": "100", "shuffleOutputBytes": "4684", "shuffleOutputBytesSpilled": "0", "slotMs": "12", "startMs": "1665777800924", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$71, $70, $40", "FROM __stage03_output" ] }, { "kind": "SORT", "substeps": [ "$30 DESC, $81 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $80 := $70, $81 := $71", "$30 := SUM($40)" ] }, { "kind": "WRITE", "substeps": [ "$90, $91, $92", "TO __stage04_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005263157894736842, "waitRatioMax": 0.005263157894736842, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.005263157894736842, "writeRatioMax": 0.005263157894736842 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.042105263157894736, "computeRatioMax": 0.042105263157894736, "endMs": "1665777800977", "id": "5", "inputStages": [ "4" ], "name": "S05: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "4684", "shuffleOutputBytesSpilled": "0", "slotMs": "33", "startMs": "1665777800937", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90, $91, $92", "FROM __stage04_output" ] }, { "kind": "SORT", "substeps": [ "$92 DESC, $90 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$100, $101, $102", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005263157894736842, "waitRatioMax": 0.005263157894736842, "writeMsAvg": "19", "writeMsMax": "19", "writeRatioAvg": 0.1, "writeRatioMax": 0.1 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "10", "elapsedMs": "418", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "1075" } ], "totalBytesBilled": "92274688", "totalBytesProcessed": "91558261", "totalPartitionsProcessed": "0", "totalSlotMs": "1075", "transferredBytes": "0" }, "startTime": "1665777800596", "totalBytesProcessed": "91558261", "totalSlotMs": "1075" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon9ca628b5_b18a_4a84_ae61_2feb41fcdcbf" }, "priority": "INTERACTIVE", "query": "-- start query 55 in stream 0 using template query55.tpl\n\n/*\nFor a given year, month and store manager calculate the total store sales of any combination all brands.\n*/\n\nselect i_brand_id brand_id, i_brand brand,\n \tsum(ss_ext_sales_price) ext_price\n from date_dim, store_sales, item\n where d_date_sk = ss_sold_date_sk\n \tand ss_item_sk = i_item_sk\n \tand i_manager_id=28\n \tand d_moy=11\n \tand d_year=1999\n group by i_brand, i_brand_id\n order by ext_price desc, i_brand_id\n limit 100\n ;\n\n-- end query 55 in stream 0 using template query55.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "5QyrTBR16PKdtyq/TJLYuw==", "id": "test-project-364309:europe-west1.query55_1665777802", "jobReference": { "jobId": "query55_1665777802", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query55_1665777802?location=europe-west1", "statistics": { "creationTime": "1665777802696", "endTime": "1665777803220", "finalExecutionDurationMs": "326", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "91558261", "performanceInsights": { "avgPreviousExecutionMs": "331" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.07432432432432433, "computeRatioMax": 0.07432432432432433, "endMs": "1665777802891", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.0472972972972973, "readRatioMax": 0.0472972972972973, "recordsRead": "18000", "recordsWritten": "339", "shuffleOutputBytes": "13314", "shuffleOutputBytesSpilled": "0", "slotMs": "31", "startMs": "1665777802850", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_sk, $11:i_brand_id, $12:i_brand, $13:i_manager_id", "FROM item", "WHERE equal($13, 28)" ] }, { "kind": "WRITE", "substeps": [ "$10, $11, $12", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.006756756756756757, "waitRatioMax": 0.006756756756756757, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.08783783783783784, "writeRatioMax": 0.08783783783783784 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.08108108108108109, "computeRatioMax": 0.08108108108108109, "endMs": "1665777802933", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.05405405405405406, "readRatioMax": 0.05405405405405406, "recordsRead": "73049", "recordsWritten": "30", "shuffleOutputBytes": "270", "shuffleOutputBytesSpilled": "0", "slotMs": "54", "startMs": "1665777802891", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:d_date_sk, $21:d_year, $22:d_moy", "FROM date_dim", "WHERE and(equal($22, 11), equal($21, 1999))" ] }, { "kind": "WRITE", "substeps": [ "$20", "TO __stage02_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.013513513513513514, "waitRatioMax": 0.013513513513513514, "writeMsAvg": "12", "writeMsMax": "12", "writeRatioAvg": 0.08108108108108109, "writeRatioMax": 0.08108108108108109 }, { "completedParallelInputs": "6", "computeMsAvg": "116", "computeMsMax": "148", "computeRatioAvg": 0.7837837837837838, "computeRatioMax": 1, "endMs": "1665777803067", "id": "3", "inputStages": [ "2", "0" ], "name": "S03: Join+", "parallelInputs": "6", "readMsAvg": "20", "readMsMax": "25", "readRatioAvg": 0.13513513513513514, "readRatioMax": 0.16891891891891891, "recordsRead": "2882618", "recordsWritten": "534", "shuffleOutputBytes": "25055", "shuffleOutputBytesSpilled": "0", "slotMs": "882", "startMs": "1665777802952", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:ss_sold_date_sk, $2:ss_item_sk, $3:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$20", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$10, $11, $12", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $70 := $62, $71 := $61", "$40 := SUM($60)" ] }, { "kind": "JOIN", "substeps": [ "$60 := $51, $61 := $11, $62 := $12", "INNER HASH JOIN EACH WITH ALL ON $50 = $10" ] }, { "kind": "JOIN", "substeps": [ "$50 := $2, $51 := $3", "INNER HASH JOIN EACH WITH ALL ON $1 = $20" ] }, { "kind": "WRITE", "substeps": [ "$71, $70, $40", "TO __stage03_output", "BY HASH($70, $71)" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.013513513513513514, "waitRatioMax": 0.013513513513513514, "writeMsAvg": "6", "writeMsMax": "6", "writeRatioAvg": 0.04054054054054054, "writeRatioMax": 0.04054054054054054 }, { "completedParallelInputs": "1", "computeMsAvg": "16", "computeMsMax": "16", "computeRatioAvg": 0.10810810810810811, "computeRatioMax": 0.10810810810810811, "endMs": "1665777803106", "id": "4", "inputStages": [ "3" ], "name": "S04: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "534", "recordsWritten": "100", "shuffleOutputBytes": "4684", "shuffleOutputBytesSpilled": "0", "slotMs": "36", "startMs": "1665777803073", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$71, $70, $40", "FROM __stage03_output" ] }, { "kind": "SORT", "substeps": [ "$30 DESC, $81 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $80 := $70, $81 := $71", "$30 := SUM($40)" ] }, { "kind": "WRITE", "substeps": [ "$90, $91, $92", "TO __stage04_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.013513513513513514, "waitRatioMax": 0.013513513513513514, "writeMsAvg": "5", "writeMsMax": "5", "writeRatioAvg": 0.033783783783783786, "writeRatioMax": 0.033783783783783786 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.08783783783783784, "computeRatioMax": 0.08783783783783784, "endMs": "1665777803139", "id": "5", "inputStages": [ "4" ], "name": "S05: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "4684", "shuffleOutputBytesSpilled": "0", "slotMs": "47", "startMs": "1665777803092", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90, $91, $92", "FROM __stage04_output" ] }, { "kind": "SORT", "substeps": [ "$92 DESC, $90 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$100, $101, $102", "TO __stage05_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.013513513513513514, "waitRatioMax": 0.013513513513513514, "writeMsAvg": "19", "writeMsMax": "19", "writeRatioAvg": 0.12837837837837837, "writeRatioMax": 0.12837837837837837 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "10", "elapsedMs": "422", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "1116" } ], "totalBytesBilled": "92274688", "totalBytesProcessed": "91558261", "totalPartitionsProcessed": "0", "totalSlotMs": "1116", "transferredBytes": "0" }, "startTime": "1665777802754", "totalBytesProcessed": "91558261", "totalSlotMs": "1116" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon99cb787e_e95e_4a7b_a226_52197a089e5e" }, "priority": "INTERACTIVE", "query": "-- start query 55 in stream 0 using template query55.tpl\n\n/*\nFor a given year, month and store manager calculate the total store sales of any combination all brands.\n*/\n\nselect i_brand_id brand_id, i_brand brand,\n \tsum(ss_ext_sales_price) ext_price\n from date_dim, store_sales, item\n where d_date_sk = ss_sold_date_sk\n \tand ss_item_sk = i_item_sk\n \tand i_manager_id=28\n \tand d_moy=11\n \tand d_year=1999\n group by i_brand, i_brand_id\n order by ext_price desc, i_brand_id\n limit 100\n ;\n\n-- end query 55 in stream 0 using template query55.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "Nb+9V/0Avag76Syx2e0r8w==", "id": "test-project-364309:europe-west1.query55_1665777804", "jobReference": { "jobId": "query55_1665777804", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query55_1665777804?location=europe-west1", "statistics": { "creationTime": "1665777804967", "endTime": "1665777805497", "finalExecutionDurationMs": "294", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "91558261", "performanceInsights": { "avgPreviousExecutionMs": "330" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.0547945205479452, "computeRatioMax": 0.0547945205479452, "endMs": "1665777805153", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.03424657534246575, "readRatioMax": 0.03424657534246575, "recordsRead": "18000", "recordsWritten": "339", "shuffleOutputBytes": "13314", "shuffleOutputBytesSpilled": "0", "slotMs": "54", "startMs": "1665777805108", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_sk, $11:i_brand_id, $12:i_brand, $13:i_manager_id", "FROM item", "WHERE equal($13, 28)" ] }, { "kind": "WRITE", "substeps": [ "$10, $11, $12", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00684931506849315, "waitRatioMax": 0.00684931506849315, "writeMsAvg": "30", "writeMsMax": "30", "writeRatioAvg": 0.2054794520547945, "writeRatioMax": 0.2054794520547945 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.08904109589041095, "computeRatioMax": 0.08904109589041095, "endMs": "1665777805178", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.0547945205479452, "readRatioMax": 0.0547945205479452, "recordsRead": "73049", "recordsWritten": "30", "shuffleOutputBytes": "270", "shuffleOutputBytesSpilled": "0", "slotMs": "41", "startMs": "1665777805137", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:d_date_sk, $21:d_year, $22:d_moy", "FROM date_dim", "WHERE and(equal($22, 11), equal($21, 1999))" ] }, { "kind": "WRITE", "substeps": [ "$20", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00684931506849315, "waitRatioMax": 0.00684931506849315, "writeMsAvg": "9", "writeMsMax": "9", "writeRatioAvg": 0.06164383561643835, "writeRatioMax": 0.06164383561643835 }, { "completedParallelInputs": "6", "computeMsAvg": "115", "computeMsMax": "146", "computeRatioAvg": 0.7876712328767124, "computeRatioMax": 1, "endMs": "1665777805312", "id": "3", "inputStages": [ "0", "2" ], "name": "S03: Join+", "parallelInputs": "6", "readMsAvg": "15", "readMsMax": "20", "readRatioAvg": 0.10273972602739725, "readRatioMax": 0.136986301369863, "recordsRead": "2882618", "recordsWritten": "534", "shuffleOutputBytes": "25055", "shuffleOutputBytesSpilled": "0", "slotMs": "858", "startMs": "1665777805188", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:ss_sold_date_sk, $2:ss_item_sk, $3:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$20", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$10, $11, $12", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $70 := $62, $71 := $61", "$40 := SUM($60)" ] }, { "kind": "JOIN", "substeps": [ "$60 := $51, $61 := $11, $62 := $12", "INNER HASH JOIN EACH WITH ALL ON $50 = $10" ] }, { "kind": "JOIN", "substeps": [ "$50 := $2, $51 := $3", "INNER HASH JOIN EACH WITH ALL ON $1 = $20" ] }, { "kind": "WRITE", "substeps": [ "$71, $70, $40", "TO __stage03_output", "BY HASH($70, $71)" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.0136986301369863, "waitRatioMax": 0.0136986301369863, "writeMsAvg": "4", "writeMsMax": "5", "writeRatioAvg": 0.0273972602739726, "writeRatioMax": 0.03424657534246575 }, { "completedParallelInputs": "1", "computeMsAvg": "6", "computeMsMax": "6", "computeRatioAvg": 0.0410958904109589, "computeRatioMax": 0.0410958904109589, "endMs": "1665777805332", "id": "4", "inputStages": [ "3" ], "name": "S04: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "534", "recordsWritten": "100", "shuffleOutputBytes": "4684", "shuffleOutputBytesSpilled": "0", "slotMs": "13", "startMs": "1665777805321", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$71, $70, $40", "FROM __stage03_output" ] }, { "kind": "SORT", "substeps": [ "$30 DESC, $81 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $80 := $70, $81 := $71", "$30 := SUM($40)" ] }, { "kind": "WRITE", "substeps": [ "$90, $91, $92", "TO __stage04_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00684931506849315, "waitRatioMax": 0.00684931506849315, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.00684931506849315, "writeRatioMax": 0.00684931506849315 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.04794520547945205, "computeRatioMax": 0.04794520547945205, "endMs": "1665777805371", "id": "5", "inputStages": [ "4" ], "name": "S05: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "4684", "shuffleOutputBytesSpilled": "0", "slotMs": "41", "startMs": "1665777805337", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90, $91, $92", "FROM __stage04_output" ] }, { "kind": "SORT", "substeps": [ "$92 DESC, $90 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$100, $101, $102", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00684931506849315, "waitRatioMax": 0.00684931506849315, "writeMsAvg": "26", "writeMsMax": "26", "writeRatioAvg": 0.1780821917808219, "writeRatioMax": 0.1780821917808219 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "10", "elapsedMs": "437", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "1009" } ], "totalBytesBilled": "92274688", "totalBytesProcessed": "91558261", "totalPartitionsProcessed": "0", "totalSlotMs": "1009", "transferredBytes": "0" }, "startTime": "1665777805015", "totalBytesProcessed": "91558261", "totalSlotMs": "1009" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
