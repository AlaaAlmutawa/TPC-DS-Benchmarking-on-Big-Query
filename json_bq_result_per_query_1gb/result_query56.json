{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anonfdd00463_5e30_4e70_9c17_fc7a9a64daf1" }, "priority": "INTERACTIVE", "query": "with ss as (\n select i_item_id,sum(ss_ext_sales_price) total_sales\n from\n \tstore_sales,\n \tdate_dim,\n customer_address,\n item\n where i_item_id in (select\n i_item_id\nfrom item\nwhere i_color in ('powder','orchid','pink'))\n and ss_item_sk = i_item_sk\n and ss_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 3\n and ss_addr_sk = ca_address_sk\n and ca_gmt_offset = -6 \n group by i_item_id),\n cs as (\n select i_item_id,sum(cs_ext_sales_price) total_sales\n from\n \tcatalog_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom item\nwhere i_color in ('powder','orchid','pink'))\n and cs_item_sk = i_item_sk\n and cs_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 3\n and cs_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -6 \n group by i_item_id),\n ws as (\n select i_item_id,sum(ws_ext_sales_price) total_sales\n from\n \tweb_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom item\nwhere i_color in ('powder','orchid','pink'))\n and ws_item_sk = i_item_sk\n and ws_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 3\n and ws_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -6\n group by i_item_id)\n select i_item_id ,sum(total_sales) total_sales\n from (select benchmark.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ss \n union all\n select benchmark.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from cs \n union all\n select benchmark.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ws) tmp1\n group by i_item_id\n order by total_sales,\n i_item_id\n limit 100;\n", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "9tI802qWphJxGHw6uPdksA==", "id": "test-project-364309:europe-west1.query56_1665768391", "jobReference": { "jobId": "query56_1665768391", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query56_1665768391?location=europe-west1", "statistics": { "creationTime": "1665768392247", "endTime": "1665768393252", "finalExecutionDurationMs": "717", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "200781230", "performanceInsights": { "avgPreviousExecutionMs": "591" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.03614457831325301, "computeRatioMax": 0.03614457831325301, "endMs": "1665768392533", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.028112449799196786, "readRatioMax": 0.028112449799196786, "recordsRead": "18000", "recordsWritten": "879", "shuffleOutputBytes": "18459", "shuffleOutputBytesSpilled": "0", "slotMs": "61", "startMs": "1665768392467", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$50:i_item_id, $51:i_color", "FROM item", "WHERE in($51, 'powder', 'orchid', 'pink')" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "51", "writeMsMax": "51", "writeRatioAvg": 0.20481927710843373, "writeRatioMax": 0.20481927710843373 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.060240963855421686, "computeRatioMax": 0.060240963855421686, "endMs": "1665768392541", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.01606425702811245, "readRatioMax": 0.01606425702811245, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "49", "startMs": "1665768392489", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$40, $41", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "25", "writeMsMax": "25", "writeRatioAvg": 0.10040160642570281, "writeRatioMax": 0.10040160642570281 }, { "completedParallelInputs": "1", "computeMsAvg": "22", "computeMsMax": "22", "computeRatioAvg": 0.08835341365461848, "computeRatioMax": 0.08835341365461848, "endMs": "1665768392556", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.028112449799196786, "readRatioMax": 0.028112449799196786, "recordsRead": "50000", "recordsWritten": "21901", "shuffleOutputBytes": "197109", "shuffleOutputBytesSpilled": "0", "slotMs": "50", "startMs": "1665768392511", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110:ca_address_sk, $111:ca_gmt_offset", "FROM customer_address", "WHERE equal($111, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.060240963855421686, "writeRatioMax": 0.060240963855421686 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.060240963855421686, "computeRatioMax": 0.060240963855421686, "endMs": "1665768392574", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.028112449799196786, "readRatioMax": 0.028112449799196786, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "33", "startMs": "1665768392533", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140:d_date_sk, $141:d_year, $142:d_moy", "FROM date_dim", "WHERE and(equal($141, 2000), equal($142, 3))" ] }, { "kind": "WRITE", "substeps": [ "$140", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "26", "writeMsMax": "26", "writeRatioAvg": 0.10441767068273092, "writeRatioMax": 0.10441767068273092 }, { "completedParallelInputs": "1", "computeMsAvg": "16", "computeMsMax": "16", "computeRatioAvg": 0.0642570281124498, "computeRatioMax": 0.0642570281124498, "endMs": "1665768392610", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.024096385542168676, "readRatioMax": 0.024096385542168676, "recordsRead": "18000", "recordsWritten": "879", "shuffleOutputBytes": "18459", "shuffleOutputBytesSpilled": "0", "slotMs": "44", "startMs": "1665768392570", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:i_item_id, $31:i_color", "FROM item", "WHERE in($31, 'powder', 'orchid', 'pink')" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.05220883534136546, "writeRatioMax": 0.05220883534136546 }, { "completedParallelInputs": "1", "computeMsAvg": "24", "computeMsMax": "24", "computeRatioAvg": 0.0963855421686747, "computeRatioMax": 0.0963855421686747, "endMs": "1665768392660", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.01606425702811245, "readRatioMax": 0.01606425702811245, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "75", "startMs": "1665768392587", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:i_item_sk, $21:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "60", "writeMsMax": "60", "writeRatioAvg": 0.24096385542168675, "writeRatioMax": 0.24096385542168675 }, { "completedParallelInputs": "1", "computeMsAvg": "22", "computeMsMax": "22", "computeRatioAvg": 0.08835341365461848, "computeRatioMax": 0.08835341365461848, "endMs": "1665768392653", "id": "7", "name": "S07: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.024096385542168676, "readRatioMax": 0.024096385542168676, "recordsRead": "50000", "recordsWritten": "21901", "shuffleOutputBytes": "197109", "shuffleOutputBytesSpilled": "0", "slotMs": "44", "startMs": "1665768392613", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90:ca_address_sk, $91:ca_gmt_offset", "FROM customer_address", "WHERE equal($91, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "12", "writeMsMax": "12", "writeRatioAvg": 0.04819277108433735, "writeRatioMax": 0.04819277108433735 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.03614457831325301, "computeRatioMax": 0.03614457831325301, "endMs": "1665768392700", "id": "8", "name": "S08: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.020080321285140562, "readRatioMax": 0.020080321285140562, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "53", "startMs": "1665768392636", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$130:d_date_sk, $131:d_year, $132:d_moy", "FROM date_dim", "WHERE and(equal($131, 2000), equal($132, 3))" ] }, { "kind": "WRITE", "substeps": [ "$130", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "24", "writeMsMax": "24", "writeRatioAvg": 0.0963855421686747, "writeRatioMax": 0.0963855421686747 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.05622489959839357, "computeRatioMax": 0.05622489959839357, "endMs": "1665768392715", "id": "10", "name": "S0A: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.024096385542168676, "readRatioMax": 0.024096385542168676, "recordsRead": "18000", "recordsWritten": "879", "shuffleOutputBytes": "18459", "shuffleOutputBytesSpilled": "0", "slotMs": "37", "startMs": "1665768392674", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_id, $11:i_color", "FROM item", "WHERE in($11, 'powder', 'orchid', 'pink')" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage0A_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.060240963855421686, "writeRatioMax": 0.060240963855421686 }, { "completedParallelInputs": "1", "computeMsAvg": "26", "computeMsMax": "26", "computeRatioAvg": 0.10441767068273092, "computeRatioMax": 0.10441767068273092, "endMs": "1665768392784", "id": "11", "name": "S0B: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.024096385542168676, "readRatioMax": 0.024096385542168676, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "85", "startMs": "1665768392697", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage0B_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "38", "writeMsMax": "38", "writeRatioAvg": 0.15261044176706828, "writeRatioMax": 0.15261044176706828 }, { "completedParallelInputs": "1", "computeMsAvg": "16", "computeMsMax": "16", "computeRatioAvg": 0.0642570281124498, "computeRatioMax": 0.0642570281124498, "endMs": "1665768392760", "id": "12", "name": "S0C: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.024096385542168676, "readRatioMax": 0.024096385542168676, "recordsRead": "50000", "recordsWritten": "21901", "shuffleOutputBytes": "197109", "shuffleOutputBytesSpilled": "0", "slotMs": "39", "startMs": "1665768392720", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:ca_address_sk, $71:ca_gmt_offset", "FROM customer_address", "WHERE equal($71, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage0C_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "12", "writeMsMax": "12", "writeRatioAvg": 0.04819277108433735, "writeRatioMax": 0.04819277108433735 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.060240963855421686, "computeRatioMax": 0.060240963855421686, "endMs": "1665768392780", "id": "13", "name": "S0D: Input", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.040160642570281124, "readRatioMax": 0.040160642570281124, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "41", "startMs": "1665768392741", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120:d_date_sk, $121:d_year, $122:d_moy", "FROM date_dim", "WHERE and(equal($121, 2000), equal($122, 3))" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage0D_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.0321285140562249, "writeRatioMax": 0.0321285140562249 }, { "completedParallelInputs": "1", "computeMsAvg": "187", "computeMsMax": "187", "computeRatioAvg": 0.751004016064257, "computeRatioMax": 0.751004016064257, "endMs": "1665768392915", "id": "15", "inputStages": [ "3", "1", "0", "2" ], "name": "S0F: Join+", "parallelInputs": "1", "readMsAvg": "18", "readMsMax": "18", "readRatioAvg": 0.07228915662650602, "readRatioMax": 0.07228915662650602, "recordsRead": "760195", "recordsWritten": "236", "shuffleOutputBytes": "8968", "shuffleOutputBytesSpilled": "0", "slotMs": "198", "startMs": "1665768392771", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$100:ws_sold_date_sk, $101:ws_item_sk, $102:ws_bill_addr_sk, $103:ws_ext_sales_price", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$140", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$110", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$40, $41", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$50", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $400 := $390", "$230 := SUM($391)" ] }, { "kind": "JOIN", "substeps": [ "$390 := $381, $391 := $380", "SEMI HASH JOIN EACH WITH ALL ON $381 = $50" ] }, { "kind": "JOIN", "substeps": [ "$380 := $371, $381 := $41", "INNER HASH JOIN EACH WITH ALL ON $370 = $40" ] }, { "kind": "JOIN", "substeps": [ "$370 := $360, $371 := $362", "INNER HASH JOIN EACH WITH ALL ON $361 = $110" ] }, { "kind": "JOIN", "substeps": [ "$360 := $101, $361 := $102, $362 := $103", "INNER HASH JOIN EACH WITH ALL ON $100 = $140" ] }, { "kind": "WRITE", "substeps": [ "$400, $230", "TO __stage0F_output", "BY HASH($400)" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.008032128514056224, "waitRatioMax": 0.008032128514056224, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.028112449799196786, "writeRatioMax": 0.028112449799196786 }, { "completedParallelInputs": "5", "computeMsAvg": "106", "computeMsMax": "121", "computeRatioAvg": 0.42570281124497994, "computeRatioMax": 0.4859437751004016, "endMs": "1665768392889", "id": "16", "inputStages": [ "5", "6", "7", "8" ], "name": "S10: Join+", "parallelInputs": "5", "readMsAvg": "19", "readMsMax": "23", "readRatioAvg": 0.07630522088353414, "readRatioMax": 0.09236947791164658, "recordsRead": "1645603", "recordsWritten": "592", "shuffleOutputBytes": "22496", "shuffleOutputBytesSpilled": "0", "slotMs": "629", "startMs": "1665768392776", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80:cs_sold_date_sk, $81:cs_bill_addr_sk, $82:cs_item_sk, $83:cs_ext_sales_price", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$130", "FROM __stage08_output" ] }, { "kind": "READ", "substeps": [ "$90", "FROM __stage07_output" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage05_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $340 := $330", "$220 := SUM($331)" ] }, { "kind": "JOIN", "substeps": [ "$330 := $321, $331 := $320", "SEMI HASH JOIN EACH WITH ALL ON $321 = $30" ] }, { "kind": "JOIN", "substeps": [ "$320 := $311, $321 := $21", "INNER HASH JOIN EACH WITH ALL ON $310 = $20" ] }, { "kind": "JOIN", "substeps": [ "$310 := $301, $311 := $302", "INNER HASH JOIN EACH WITH ALL ON $300 = $90" ] }, { "kind": "JOIN", "substeps": [ "$300 := $81, $301 := $82, $302 := $83", "INNER HASH JOIN EACH WITH ALL ON $80 = $130" ] }, { "kind": "WRITE", "substeps": [ "$340, $220", "TO __stage10_output", "BY HASH($340)" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.008032128514056224, "waitRatioMax": 0.008032128514056224, "writeMsAvg": "5", "writeMsMax": "6", "writeRatioAvg": 0.020080321285140562, "writeRatioMax": 0.024096385542168676 }, { "completedParallelInputs": "6", "computeMsAvg": "168", "computeMsMax": "249", "computeRatioAvg": 0.6746987951807228, "computeRatioMax": 1, "endMs": "1665768392976", "id": "18", "inputStages": [ "13", "12", "11", "10" ], "name": "S12: Join+", "parallelInputs": "6", "readMsAvg": "19", "readMsMax": "23", "readRatioAvg": 0.07630522088353414, "readRatioMax": 0.09236947791164658, "recordsRead": "3125270", "recordsWritten": "971", "shuffleOutputBytes": "36754", "shuffleOutputBytesSpilled": "0", "slotMs": "988", "startMs": "1665768392814", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:ss_sold_date_sk, $61:ss_item_sk, $62:ss_addr_sk, $63:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$120", "FROM __stage0D_output" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage0C_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $280 := $270", "$210 := SUM($271)" ] }, { "kind": "JOIN", "substeps": [ "$270 := $261, $271 := $260", "SEMI HASH JOIN EACH WITH ALL ON $261 = $10" ] }, { "kind": "JOIN", "substeps": [ "$260 := $251, $261 := $2", "INNER HASH JOIN EACH WITH ALL ON $250 = $1" ] }, { "kind": "JOIN", "substeps": [ "$250 := $240, $251 := $242", "INNER HASH JOIN EACH WITH ALL ON $241 = $70" ] }, { "kind": "JOIN", "substeps": [ "$240 := $61, $241 := $62, $242 := $63", "INNER HASH JOIN EACH WITH ALL ON $60 = $120" ] }, { "kind": "WRITE", "substeps": [ "$280, $210", "TO __stage12_output", "BY HASH($280)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "5", "writeMsMax": "6", "writeRatioAvg": 0.020080321285140562, "writeRatioMax": 0.024096385542168676 }, { "completedParallelInputs": "3", "computeMsAvg": "9", "computeMsMax": "11", "computeRatioAvg": 0.03614457831325301, "computeRatioMax": 0.04417670682730924, "endMs": "1665768393069", "id": "19", "inputStages": [ "18", "16", "15" ], "name": "S13: Aggregate", "parallelInputs": "3", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1799", "recordsWritten": "1284", "shuffleOutputBytes": "48744", "shuffleOutputBytesSpilled": "0", "slotMs": "147", "startMs": "1665768393006", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$280, $210", "FROM __stage12_output" ] }, { "kind": "READ", "substeps": [ "$340, $220", "FROM __stage10_output" ] }, { "kind": "READ", "substeps": [ "$400, $230", "FROM __stage0F_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $420 := $170", "$160 := SUM($171)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $290 := $280", "$180 := SUM($210)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $350 := $340", "$190 := SUM($220)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $410 := $400", "$200 := SUM($230)" ] }, { "kind": "WRITE", "substeps": [ "$160, $420", "TO __stage13_output", "BY HASH($420)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "47", "writeMsMax": "55", "writeRatioAvg": 0.18875502008032127, "writeRatioMax": 0.22088353413654618 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.040160642570281124, "computeRatioMax": 0.040160642570281124, "endMs": "1665768393123", "id": "20", "inputStages": [ "19" ], "name": "S14: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1284", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "36", "startMs": "1665768393074", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $420", "FROM __stage13_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC, $430 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $430 := $420", "$150 := SUM($160)" ] }, { "kind": "WRITE", "substeps": [ "$440, $441", "TO __stage14_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "25", "writeMsMax": "25", "writeRatioAvg": 0.10040160642570281, "writeRatioMax": 0.10040160642570281 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.03614457831325301, "computeRatioMax": 0.03614457831325301, "endMs": "1665768393143", "id": "21", "inputStages": [ "20" ], "name": "S15: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "40", "startMs": "1665768393103", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$440, $441", "FROM __stage14_output" ] }, { "kind": "SORT", "substeps": [ "$440 ASC, $441 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$450, $451", "TO __stage15_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004016064257028112, "waitRatioMax": 0.004016064257028112, "writeMsAvg": "20", "writeMsMax": "20", "writeRatioAvg": 0.08032128514056225, "writeRatioMax": 0.08032128514056225 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_address" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" } ], "statementType": "SELECT", "timeline": [ { "activeUnits": "2", "completedUnits": "23", "elapsedMs": "640", "estimatedRunnableUnits": "0", "pendingUnits": "1", "totalSlotMs": "2393" }, { "activeUnits": "2", "completedUnits": "29", "elapsedMs": "860", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2835" } ], "totalBytesBilled": "201326592", "totalBytesProcessed": "200781230", "totalPartitionsProcessed": "0", "totalSlotMs": "2835", "transferredBytes": "0" }, "startTime": "1665768392328", "totalBytesProcessed": "200781230", "totalSlotMs": "2835" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon07a27ab1_e891_4919_b896_a846a3ca17ee" }, "priority": "INTERACTIVE", "query": "with ss as (\n select i_item_id,sum(ss_ext_sales_price) total_sales\n from\n \tstore_sales,\n \tdate_dim,\n customer_address,\n item\n where i_item_id in (select\n i_item_id\nfrom item\nwhere i_color in ('powder','orchid','pink'))\n and ss_item_sk = i_item_sk\n and ss_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 3\n and ss_addr_sk = ca_address_sk\n and ca_gmt_offset = -6 \n group by i_item_id),\n cs as (\n select i_item_id,sum(cs_ext_sales_price) total_sales\n from\n \tcatalog_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom item\nwhere i_color in ('powder','orchid','pink'))\n and cs_item_sk = i_item_sk\n and cs_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 3\n and cs_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -6 \n group by i_item_id),\n ws as (\n select i_item_id,sum(ws_ext_sales_price) total_sales\n from\n \tweb_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom item\nwhere i_color in ('powder','orchid','pink'))\n and ws_item_sk = i_item_sk\n and ws_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 3\n and ws_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -6\n group by i_item_id)\n select i_item_id ,sum(total_sales) total_sales\n from (select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ss \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from cs \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ws) tmp1\n group by i_item_id\n order by total_sales,\n i_item_id\n limit 100;\n", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "Yi5iAbE+G+lJm057LmH6+w==", "id": "test-project-364309:europe-west1.query56_1665777806", "jobReference": { "jobId": "query56_1665777806", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query56_1665777806?location=europe-west1", "statistics": { "creationTime": "1665777807174", "endTime": "1665777808101", "finalExecutionDurationMs": "660", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "200781230", "performanceInsights": { "avgPreviousExecutionMs": "612" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.050505050505050504, "computeRatioMax": 0.050505050505050504, "endMs": "1665777807422", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.016835016835016835, "readRatioMax": 0.016835016835016835, "recordsRead": "18000", "recordsWritten": "879", "shuffleOutputBytes": "18459", "shuffleOutputBytesSpilled": "0", "slotMs": "33", "startMs": "1665777807383", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$50:i_item_id, $51:i_color", "FROM item", "WHERE in($51, 'powder', 'orchid', 'pink')" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage00_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.006734006734006734, "waitRatioMax": 0.006734006734006734, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.04713804713804714, "writeRatioMax": 0.04713804713804714 }, { "completedParallelInputs": "1", "computeMsAvg": "25", "computeMsMax": "25", "computeRatioAvg": 0.08417508417508418, "computeRatioMax": 0.08417508417508418, "endMs": "1665777807458", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.020202020202020204, "readRatioMax": 0.020202020202020204, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "59", "startMs": "1665777807402", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$40, $41", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003367003367003367, "waitRatioMax": 0.003367003367003367, "writeMsAvg": "22", "writeMsMax": "22", "writeRatioAvg": 0.07407407407407407, "writeRatioMax": 0.07407407407407407 }, { "completedParallelInputs": "1", "computeMsAvg": "27", "computeMsMax": "27", "computeRatioAvg": 0.09090909090909091, "computeRatioMax": 0.09090909090909091, "endMs": "1665777807462", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.026936026936026935, "readRatioMax": 0.026936026936026935, "recordsRead": "50000", "recordsWritten": "21901", "shuffleOutputBytes": "197109", "shuffleOutputBytesSpilled": "0", "slotMs": "46", "startMs": "1665777807420", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110:ca_address_sk, $111:ca_gmt_offset", "FROM customer_address", "WHERE equal($111, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage02_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.006734006734006734, "waitRatioMax": 0.006734006734006734, "writeMsAvg": "10", "writeMsMax": "10", "writeRatioAvg": 0.03367003367003367, "writeRatioMax": 0.03367003367003367 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.04040404040404041, "computeRatioMax": 0.04040404040404041, "endMs": "1665777807494", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.02356902356902357, "readRatioMax": 0.02356902356902357, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "29", "startMs": "1665777807453", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140:d_date_sk, $141:d_year, $142:d_moy", "FROM date_dim", "WHERE and(equal($141, 2000), equal($142, 3))" ] }, { "kind": "WRITE", "substeps": [ "$140", "TO __stage03_output" ] } ], "waitMsAvg": "14", "waitMsMax": "14", "waitRatioAvg": 0.04713804713804714, "waitRatioMax": 0.04713804713804714, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.050505050505050504, "writeRatioMax": 0.050505050505050504 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.03367003367003367, "computeRatioMax": 0.03367003367003367, "endMs": "1665777807516", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.020202020202020204, "readRatioMax": 0.020202020202020204, "recordsRead": "18000", "recordsWritten": "879", "shuffleOutputBytes": "18459", "shuffleOutputBytesSpilled": "0", "slotMs": "27", "startMs": "1665777807479", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:i_item_id, $31:i_color", "FROM item", "WHERE in($31, 'powder', 'orchid', 'pink')" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003367003367003367, "waitRatioMax": 0.003367003367003367, "writeMsAvg": "12", "writeMsMax": "12", "writeRatioAvg": 0.04040404040404041, "writeRatioMax": 0.04040404040404041 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.04713804713804714, "computeRatioMax": 0.04713804713804714, "endMs": "1665777807574", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.016835016835016835, "readRatioMax": 0.016835016835016835, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "55", "startMs": "1665777807496", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:i_item_sk, $21:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage06_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.006734006734006734, "waitRatioMax": 0.006734006734006734, "writeMsAvg": "63", "writeMsMax": "63", "writeRatioAvg": 0.21212121212121213, "writeRatioMax": 0.21212121212121213 }, { "completedParallelInputs": "1", "computeMsAvg": "19", "computeMsMax": "19", "computeRatioAvg": 0.06397306397306397, "computeRatioMax": 0.06397306397306397, "endMs": "1665777807546", "id": "7", "name": "S07: Input", "parallelInputs": "1", "readMsAvg": "12", "readMsMax": "12", "readRatioAvg": 0.04040404040404041, "readRatioMax": 0.04040404040404041, "recordsRead": "50000", "recordsWritten": "21901", "shuffleOutputBytes": "197109", "shuffleOutputBytesSpilled": "0", "slotMs": "32", "startMs": "1665777807512", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90:ca_address_sk, $91:ca_gmt_offset", "FROM customer_address", "WHERE equal($91, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage07_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.006734006734006734, "waitRatioMax": 0.006734006734006734, "writeMsAvg": "6", "writeMsMax": "6", "writeRatioAvg": 0.020202020202020204, "writeRatioMax": 0.020202020202020204 }, { "completedParallelInputs": "1", "computeMsAvg": "17", "computeMsMax": "17", "computeRatioAvg": 0.05723905723905724, "computeRatioMax": 0.05723905723905724, "endMs": "1665777807587", "id": "8", "name": "S08: Input", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.030303030303030304, "readRatioMax": 0.030303030303030304, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "48", "startMs": "1665777807528", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$130:d_date_sk, $131:d_year, $132:d_moy", "FROM date_dim", "WHERE and(equal($131, 2000), equal($132, 3))" ] }, { "kind": "WRITE", "substeps": [ "$130", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003367003367003367, "waitRatioMax": 0.003367003367003367, "writeMsAvg": "25", "writeMsMax": "25", "writeRatioAvg": 0.08417508417508418, "writeRatioMax": 0.08417508417508418 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.04377104377104377, "computeRatioMax": 0.04377104377104377, "endMs": "1665777807606", "id": "10", "name": "S0A: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.016835016835016835, "readRatioMax": 0.016835016835016835, "recordsRead": "18000", "recordsWritten": "879", "shuffleOutputBytes": "18459", "shuffleOutputBytesSpilled": "0", "slotMs": "35", "startMs": "1665777807565", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_id, $11:i_color", "FROM item", "WHERE in($11, 'powder', 'orchid', 'pink')" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage0A_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003367003367003367, "waitRatioMax": 0.003367003367003367, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.050505050505050504, "writeRatioMax": 0.050505050505050504 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.050505050505050504, "computeRatioMax": 0.050505050505050504, "endMs": "1665777807633", "id": "11", "name": "S0B: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.013468013468013467, "readRatioMax": 0.013468013468013467, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "40", "startMs": "1665777807582", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage0B_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.006734006734006734, "waitRatioMax": 0.006734006734006734, "writeMsAvg": "26", "writeMsMax": "26", "writeRatioAvg": 0.08754208754208755, "writeRatioMax": 0.08754208754208755 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.050505050505050504, "computeRatioMax": 0.050505050505050504, "endMs": "1665777807638", "id": "12", "name": "S0C: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.02356902356902357, "readRatioMax": 0.02356902356902357, "recordsRead": "50000", "recordsWritten": "21901", "shuffleOutputBytes": "197109", "shuffleOutputBytesSpilled": "0", "slotMs": "47", "startMs": "1665777807600", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:ca_address_sk, $71:ca_gmt_offset", "FROM customer_address", "WHERE equal($71, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage0C_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.006734006734006734, "waitRatioMax": 0.006734006734006734, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.02356902356902357, "writeRatioMax": 0.02356902356902357 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.037037037037037035, "computeRatioMax": 0.037037037037037035, "endMs": "1665777807657", "id": "13", "name": "S0D: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.02356902356902357, "readRatioMax": 0.02356902356902357, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "49", "startMs": "1665777807617", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120:d_date_sk, $121:d_year, $122:d_moy", "FROM date_dim", "WHERE and(equal($121, 2000), equal($122, 3))" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage0D_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003367003367003367, "waitRatioMax": 0.003367003367003367, "writeMsAvg": "12", "writeMsMax": "12", "writeRatioAvg": 0.04040404040404041, "writeRatioMax": 0.04040404040404041 }, { "completedParallelInputs": "1", "computeMsAvg": "204", "computeMsMax": "204", "computeRatioAvg": 0.6868686868686869, "computeRatioMax": 0.6868686868686869, "endMs": "1665777807808", "id": "15", "inputStages": [ "1", "3", "2", "0" ], "name": "S0F: Join+", "parallelInputs": "1", "readMsAvg": "22", "readMsMax": "22", "readRatioAvg": 0.07407407407407407, "readRatioMax": 0.07407407407407407, "recordsRead": "760195", "recordsWritten": "236", "shuffleOutputBytes": "8968", "shuffleOutputBytesSpilled": "0", "slotMs": "197", "startMs": "1665777807649", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$100:ws_sold_date_sk, $101:ws_item_sk, $102:ws_bill_addr_sk, $103:ws_ext_sales_price", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$140", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$110", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$40, $41", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$50", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $400 := $390", "$230 := SUM($391)" ] }, { "kind": "JOIN", "substeps": [ "$390 := $381, $391 := $380", "SEMI HASH JOIN EACH WITH ALL ON $381 = $50" ] }, { "kind": "JOIN", "substeps": [ "$380 := $371, $381 := $41", "INNER HASH JOIN EACH WITH ALL ON $370 = $40" ] }, { "kind": "JOIN", "substeps": [ "$370 := $360, $371 := $362", "INNER HASH JOIN EACH WITH ALL ON $361 = $110" ] }, { "kind": "JOIN", "substeps": [ "$360 := $101, $361 := $102, $362 := $103", "INNER HASH JOIN EACH WITH ALL ON $100 = $140" ] }, { "kind": "WRITE", "substeps": [ "$400, $230", "TO __stage0F_output", "BY HASH($400)" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.006734006734006734, "waitRatioMax": 0.006734006734006734, "writeMsAvg": "12", "writeMsMax": "12", "writeRatioAvg": 0.04040404040404041, "writeRatioMax": 0.04040404040404041 }, { "completedParallelInputs": "5", "computeMsAvg": "132", "computeMsMax": "160", "computeRatioAvg": 0.4444444444444444, "computeRatioMax": 0.5387205387205387, "endMs": "1665777807798", "id": "16", "inputStages": [ "7", "5", "8", "6" ], "name": "S10: Join+", "parallelInputs": "5", "readMsAvg": "19", "readMsMax": "28", "readRatioAvg": 0.06397306397306397, "readRatioMax": 0.09427609427609428, "recordsRead": "1645603", "recordsWritten": "592", "shuffleOutputBytes": "22496", "shuffleOutputBytesSpilled": "0", "slotMs": "696", "startMs": "1665777807653", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80:cs_sold_date_sk, $81:cs_bill_addr_sk, $82:cs_item_sk, $83:cs_ext_sales_price", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$130", "FROM __stage08_output" ] }, { "kind": "READ", "substeps": [ "$90", "FROM __stage07_output" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage05_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $340 := $330", "$220 := SUM($331)" ] }, { "kind": "JOIN", "substeps": [ "$330 := $321, $331 := $320", "SEMI HASH JOIN EACH WITH ALL ON $321 = $30" ] }, { "kind": "JOIN", "substeps": [ "$320 := $311, $321 := $21", "INNER HASH JOIN EACH WITH ALL ON $310 = $20" ] }, { "kind": "JOIN", "substeps": [ "$310 := $301, $311 := $302", "INNER HASH JOIN EACH WITH ALL ON $300 = $90" ] }, { "kind": "JOIN", "substeps": [ "$300 := $81, $301 := $82, $302 := $83", "INNER HASH JOIN EACH WITH ALL ON $80 = $130" ] }, { "kind": "WRITE", "substeps": [ "$340, $220", "TO __stage10_output", "BY HASH($340)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003367003367003367, "waitRatioMax": 0.003367003367003367, "writeMsAvg": "5", "writeMsMax": "7", "writeRatioAvg": 0.016835016835016835, "writeRatioMax": 0.02356902356902357 }, { "completedParallelInputs": "6", "computeMsAvg": "214", "computeMsMax": "297", "computeRatioAvg": 0.7205387205387206, "computeRatioMax": 1, "endMs": "1665777807868", "id": "17", "inputStages": [ "11", "10", "12", "13" ], "name": "S11: Join+", "parallelInputs": "6", "readMsAvg": "20", "readMsMax": "23", "readRatioAvg": 0.06734006734006734, "readRatioMax": 0.07744107744107744, "recordsRead": "3125270", "recordsWritten": "971", "shuffleOutputBytes": "36754", "shuffleOutputBytesSpilled": "0", "slotMs": "1582", "startMs": "1665777807671", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:ss_sold_date_sk, $61:ss_item_sk, $62:ss_addr_sk, $63:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$120", "FROM __stage0D_output" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage0C_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $280 := $270", "$210 := SUM($271)" ] }, { "kind": "JOIN", "substeps": [ "$270 := $261, $271 := $260", "SEMI HASH JOIN EACH WITH ALL ON $261 = $10" ] }, { "kind": "JOIN", "substeps": [ "$260 := $251, $261 := $2", "INNER HASH JOIN EACH WITH ALL ON $250 = $1" ] }, { "kind": "JOIN", "substeps": [ "$250 := $240, $251 := $242", "INNER HASH JOIN EACH WITH ALL ON $241 = $70" ] }, { "kind": "JOIN", "substeps": [ "$240 := $61, $241 := $62, $242 := $63", "INNER HASH JOIN EACH WITH ALL ON $60 = $120" ] }, { "kind": "WRITE", "substeps": [ "$280, $210", "TO __stage11_output", "BY HASH($280)" ] } ], "waitMsAvg": "1", "waitMsMax": "2", "waitRatioAvg": 0.003367003367003367, "waitRatioMax": 0.006734006734006734, "writeMsAvg": "5", "writeMsMax": "8", "writeRatioAvg": 0.016835016835016835, "writeRatioMax": 0.026936026936026935 }, { "completedParallelInputs": "3", "computeMsAvg": "9", "computeMsMax": "11", "computeRatioAvg": 0.030303030303030304, "computeRatioMax": 0.037037037037037035, "endMs": "1665777807930", "id": "18", "inputStages": [ "16", "17", "15" ], "name": "S12: Aggregate", "parallelInputs": "3", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1799", "recordsWritten": "1284", "shuffleOutputBytes": "48744", "shuffleOutputBytesSpilled": "0", "slotMs": "105", "startMs": "1665777807892", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$280, $210", "FROM __stage11_output" ] }, { "kind": "READ", "substeps": [ "$340, $220", "FROM __stage10_output" ] }, { "kind": "READ", "substeps": [ "$400, $230", "FROM __stage0F_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $420 := $170", "$160 := SUM($171)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $290 := $280", "$180 := SUM($210)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $350 := $340", "$190 := SUM($220)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $410 := $400", "$200 := SUM($230)" ] }, { "kind": "WRITE", "substeps": [ "$160, $420", "TO __stage12_output", "BY HASH($420)" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.006734006734006734, "waitRatioMax": 0.006734006734006734, "writeMsAvg": "20", "writeMsMax": "29", "writeRatioAvg": 0.06734006734006734, "writeRatioMax": 0.09764309764309764 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.026936026936026935, "computeRatioMax": 0.026936026936026935, "endMs": "1665777807981", "id": "19", "inputStages": [ "18" ], "name": "S13: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1284", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "30", "startMs": "1665777807944", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $420", "FROM __stage12_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC, $430 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $430 := $420", "$150 := SUM($160)" ] }, { "kind": "WRITE", "substeps": [ "$440, $441", "TO __stage13_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003367003367003367, "waitRatioMax": 0.003367003367003367, "writeMsAvg": "26", "writeMsMax": "26", "writeRatioAvg": 0.08754208754208755, "writeRatioMax": 0.08754208754208755 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.04377104377104377, "computeRatioMax": 0.04377104377104377, "endMs": "1665777808002", "id": "20", "inputStages": [ "19" ], "name": "S14: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "32", "startMs": "1665777807961", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$440, $441", "FROM __stage13_output" ] }, { "kind": "SORT", "substeps": [ "$440 ASC, $441 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$450, $451", "TO __stage14_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.006734006734006734, "waitRatioMax": 0.006734006734006734, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.026936026936026935, "writeRatioMax": 0.026936026936026935 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_address" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" } ], "statementType": "SELECT", "timeline": [ { "activeUnits": "0", "completedUnits": "24", "elapsedMs": "648", "estimatedRunnableUnits": "0", "pendingUnits": "3", "totalSlotMs": "3106" }, { "activeUnits": "0", "completedUnits": "29", "elapsedMs": "810", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "3275" } ], "totalBytesBilled": "201326592", "totalBytesProcessed": "200781230", "totalPartitionsProcessed": "0", "totalSlotMs": "3275", "transferredBytes": "0" }, "startTime": "1665777807237", "totalBytesProcessed": "200781230", "totalSlotMs": "3275" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon3199bea5_3303_4f52_a94f_5a5df25b173c" }, "priority": "INTERACTIVE", "query": "with ss as (\n select i_item_id,sum(ss_ext_sales_price) total_sales\n from\n \tstore_sales,\n \tdate_dim,\n customer_address,\n item\n where i_item_id in (select\n i_item_id\nfrom item\nwhere i_color in ('powder','orchid','pink'))\n and ss_item_sk = i_item_sk\n and ss_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 3\n and ss_addr_sk = ca_address_sk\n and ca_gmt_offset = -6 \n group by i_item_id),\n cs as (\n select i_item_id,sum(cs_ext_sales_price) total_sales\n from\n \tcatalog_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom item\nwhere i_color in ('powder','orchid','pink'))\n and cs_item_sk = i_item_sk\n and cs_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 3\n and cs_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -6 \n group by i_item_id),\n ws as (\n select i_item_id,sum(ws_ext_sales_price) total_sales\n from\n \tweb_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom item\nwhere i_color in ('powder','orchid','pink'))\n and ws_item_sk = i_item_sk\n and ws_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 3\n and ws_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -6\n group by i_item_id)\n select i_item_id ,sum(total_sales) total_sales\n from (select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ss \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from cs \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ws) tmp1\n group by i_item_id\n order by total_sales,\n i_item_id\n limit 100;\n", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "5dHBGfUEQ20AfDQf2qGJ6Q==", "id": "test-project-364309:europe-west1.query56_1665777809", "jobReference": { "jobId": "query56_1665777809", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query56_1665777809?location=europe-west1", "statistics": { "creationTime": "1665777809765", "endTime": "1665777810521", "finalExecutionDurationMs": "511", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "200781230", "performanceInsights": { "avgPreviousExecutionMs": "619" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.025454545454545455, "computeRatioMax": 0.025454545454545455, "endMs": "1665777809978", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.01818181818181818, "readRatioMax": 0.01818181818181818, "recordsRead": "18000", "recordsWritten": "879", "shuffleOutputBytes": "18459", "shuffleOutputBytesSpilled": "0", "slotMs": "23", "startMs": "1665777809955", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$50:i_item_id, $51:i_color", "FROM item", "WHERE in($51, 'powder', 'orchid', 'pink')" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0036363636363636364, "waitRatioMax": 0.0036363636363636364, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.04727272727272727, "writeRatioMax": 0.04727272727272727 }, { "completedParallelInputs": "1", "computeMsAvg": "23", "computeMsMax": "23", "computeRatioAvg": 0.08363636363636363, "computeRatioMax": 0.08363636363636363, "endMs": "1665777810013", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.02181818181818182, "readRatioMax": 0.02181818181818182, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "54", "startMs": "1665777809967", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$40, $41", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0036363636363636364, "waitRatioMax": 0.0036363636363636364, "writeMsAvg": "26", "writeMsMax": "26", "writeRatioAvg": 0.09454545454545454, "writeRatioMax": 0.09454545454545454 }, { "completedParallelInputs": "1", "computeMsAvg": "17", "computeMsMax": "17", "computeRatioAvg": 0.06181818181818182, "computeRatioMax": 0.06181818181818182, "endMs": "1665777810013", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.02909090909090909, "readRatioMax": 0.02909090909090909, "recordsRead": "50000", "recordsWritten": "21901", "shuffleOutputBytes": "197109", "shuffleOutputBytesSpilled": "0", "slotMs": "42", "startMs": "1665777809980", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110:ca_address_sk, $111:ca_gmt_offset", "FROM customer_address", "WHERE equal($111, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0036363636363636364, "waitRatioMax": 0.0036363636363636364, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.04727272727272727, "writeRatioMax": 0.04727272727272727 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.05454545454545454, "computeRatioMax": 0.05454545454545454, "endMs": "1665777810023", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.03636363636363636, "readRatioMax": 0.03636363636363636, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665777809992", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140:d_date_sk, $141:d_year, $142:d_moy", "FROM date_dim", "WHERE and(equal($141, 2000), equal($142, 3))" ] }, { "kind": "WRITE", "substeps": [ "$140", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0036363636363636364, "waitRatioMax": 0.0036363636363636364, "writeMsAvg": "9", "writeMsMax": "9", "writeRatioAvg": 0.03272727272727273, "writeRatioMax": 0.03272727272727273 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.05090909090909091, "computeRatioMax": 0.05090909090909091, "endMs": "1665777810051", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.02181818181818182, "readRatioMax": 0.02181818181818182, "recordsRead": "18000", "recordsWritten": "879", "shuffleOutputBytes": "18459", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665777810018", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:i_item_id, $31:i_color", "FROM item", "WHERE in($31, 'powder', 'orchid', 'pink')" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0036363636363636364, "waitRatioMax": 0.0036363636363636364, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.025454545454545455, "writeRatioMax": 0.025454545454545455 }, { "completedParallelInputs": "1", "computeMsAvg": "21", "computeMsMax": "21", "computeRatioAvg": 0.07636363636363637, "computeRatioMax": 0.07636363636363637, "endMs": "1665777810072", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.025454545454545455, "readRatioMax": 0.025454545454545455, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "50", "startMs": "1665777810030", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:i_item_sk, $21:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0036363636363636364, "waitRatioMax": 0.0036363636363636364, "writeMsAvg": "21", "writeMsMax": "21", "writeRatioAvg": 0.07636363636363637, "writeRatioMax": 0.07636363636363637 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.04727272727272727, "computeRatioMax": 0.04727272727272727, "endMs": "1665777810074", "id": "7", "name": "S07: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.02181818181818182, "readRatioMax": 0.02181818181818182, "recordsRead": "50000", "recordsWritten": "21901", "shuffleOutputBytes": "197109", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665777810043", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90:ca_address_sk, $91:ca_gmt_offset", "FROM customer_address", "WHERE equal($91, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0036363636363636364, "waitRatioMax": 0.0036363636363636364, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.04727272727272727, "writeRatioMax": 0.04727272727272727 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.02909090909090909, "computeRatioMax": 0.02909090909090909, "endMs": "1665777810087", "id": "8", "name": "S08: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.01818181818181818, "readRatioMax": 0.01818181818181818, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "38", "startMs": "1665777810056", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$130:d_date_sk, $131:d_year, $132:d_moy", "FROM date_dim", "WHERE and(equal($131, 2000), equal($132, 3))" ] }, { "kind": "WRITE", "substeps": [ "$130", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0036363636363636364, "waitRatioMax": 0.0036363636363636364, "writeMsAvg": "6", "writeMsMax": "6", "writeRatioAvg": 0.02181818181818182, "writeRatioMax": 0.02181818181818182 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.02909090909090909, "computeRatioMax": 0.02909090909090909, "endMs": "1665777810119", "id": "10", "name": "S0A: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.01818181818181818, "readRatioMax": 0.01818181818181818, "recordsRead": "18000", "recordsWritten": "879", "shuffleOutputBytes": "18459", "shuffleOutputBytesSpilled": "0", "slotMs": "28", "startMs": "1665777810082", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_id, $11:i_color", "FROM item", "WHERE in($11, 'powder', 'orchid', 'pink')" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage0A_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0036363636363636364, "waitRatioMax": 0.0036363636363636364, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.05090909090909091, "writeRatioMax": 0.05090909090909091 }, { "completedParallelInputs": "1", "computeMsAvg": "18", "computeMsMax": "18", "computeRatioAvg": 0.06545454545454546, "computeRatioMax": 0.06545454545454546, "endMs": "1665777810139", "id": "11", "name": "S0B: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.02909090909090909, "readRatioMax": 0.02909090909090909, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "46", "startMs": "1665777810093", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage0B_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0036363636363636364, "waitRatioMax": 0.0036363636363636364, "writeMsAvg": "25", "writeMsMax": "25", "writeRatioAvg": 0.09090909090909091, "writeRatioMax": 0.09090909090909091 }, { "completedParallelInputs": "1", "computeMsAvg": "18", "computeMsMax": "18", "computeRatioAvg": 0.06545454545454546, "computeRatioMax": 0.06545454545454546, "endMs": "1665777810137", "id": "12", "name": "S0C: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.02909090909090909, "readRatioMax": 0.02909090909090909, "recordsRead": "50000", "recordsWritten": "21901", "shuffleOutputBytes": "197109", "shuffleOutputBytesSpilled": "0", "slotMs": "39", "startMs": "1665777810104", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:ca_address_sk, $71:ca_gmt_offset", "FROM customer_address", "WHERE equal($71, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage0C_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0036363636363636364, "waitRatioMax": 0.0036363636363636364, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.05090909090909091, "writeRatioMax": 0.05090909090909091 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.03636363636363636, "computeRatioMax": 0.03636363636363636, "endMs": "1665777810155", "id": "13", "name": "S0D: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.02909090909090909, "readRatioMax": 0.02909090909090909, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "32", "startMs": "1665777810118", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120:d_date_sk, $121:d_year, $122:d_moy", "FROM date_dim", "WHERE and(equal($121, 2000), equal($122, 3))" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage0D_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0036363636363636364, "waitRatioMax": 0.0036363636363636364, "writeMsAvg": "6", "writeMsMax": "6", "writeRatioAvg": 0.02181818181818182, "writeRatioMax": 0.02181818181818182 }, { "completedParallelInputs": "1", "computeMsAvg": "275", "computeMsMax": "275", "computeRatioAvg": 1, "computeRatioMax": 1, "endMs": "1665777810321", "id": "15", "inputStages": [ "3", "2", "1", "0" ], "name": "S0F: Join+", "parallelInputs": "1", "readMsAvg": "18", "readMsMax": "18", "readRatioAvg": 0.06545454545454546, "readRatioMax": 0.06545454545454546, "recordsRead": "760195", "recordsWritten": "236", "shuffleOutputBytes": "8968", "shuffleOutputBytesSpilled": "0", "slotMs": "270", "startMs": "1665777810144", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$100:ws_sold_date_sk, $101:ws_item_sk, $102:ws_bill_addr_sk, $103:ws_ext_sales_price", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$140", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$110", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$40, $41", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$50", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $400 := $390", "$230 := SUM($391)" ] }, { "kind": "JOIN", "substeps": [ "$390 := $381, $391 := $380", "SEMI HASH JOIN EACH WITH ALL ON $381 = $50" ] }, { "kind": "JOIN", "substeps": [ "$380 := $371, $381 := $41", "INNER HASH JOIN EACH WITH ALL ON $370 = $40" ] }, { "kind": "JOIN", "substeps": [ "$370 := $360, $371 := $362", "INNER HASH JOIN EACH WITH ALL ON $361 = $110" ] }, { "kind": "JOIN", "substeps": [ "$360 := $101, $361 := $102, $362 := $103", "INNER HASH JOIN EACH WITH ALL ON $100 = $140" ] }, { "kind": "WRITE", "substeps": [ "$400, $230", "TO __stage0F_output", "BY HASH($400)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0036363636363636364, "waitRatioMax": 0.0036363636363636364, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.025454545454545455, "writeRatioMax": 0.025454545454545455 }, { "completedParallelInputs": "5", "computeMsAvg": "118", "computeMsMax": "130", "computeRatioAvg": 0.4290909090909091, "computeRatioMax": 0.4727272727272727, "endMs": "1665777810294", "id": "16", "inputStages": [ "6", "8", "7", "5" ], "name": "S10: Join+", "parallelInputs": "5", "readMsAvg": "19", "readMsMax": "30", "readRatioAvg": 0.06909090909090909, "readRatioMax": 0.10909090909090909, "recordsRead": "1645603", "recordsWritten": "592", "shuffleOutputBytes": "22496", "shuffleOutputBytesSpilled": "0", "slotMs": "1021", "startMs": "1665777810148", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80:cs_sold_date_sk, $81:cs_bill_addr_sk, $82:cs_item_sk, $83:cs_ext_sales_price", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$130", "FROM __stage08_output" ] }, { "kind": "READ", "substeps": [ "$90", "FROM __stage07_output" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage05_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $340 := $330", "$220 := SUM($331)" ] }, { "kind": "JOIN", "substeps": [ "$330 := $321, $331 := $320", "SEMI HASH JOIN EACH WITH ALL ON $321 = $30" ] }, { "kind": "JOIN", "substeps": [ "$320 := $311, $321 := $21", "INNER HASH JOIN EACH WITH ALL ON $310 = $20" ] }, { "kind": "JOIN", "substeps": [ "$310 := $301, $311 := $302", "INNER HASH JOIN EACH WITH ALL ON $300 = $90" ] }, { "kind": "JOIN", "substeps": [ "$300 := $81, $301 := $82, $302 := $83", "INNER HASH JOIN EACH WITH ALL ON $80 = $130" ] }, { "kind": "WRITE", "substeps": [ "$340, $220", "TO __stage10_output", "BY HASH($340)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0036363636363636364, "waitRatioMax": 0.0036363636363636364, "writeMsAvg": "5", "writeMsMax": "7", "writeRatioAvg": 0.01818181818181818, "writeRatioMax": 0.025454545454545455 }, { "completedParallelInputs": "6", "computeMsAvg": "193", "computeMsMax": "217", "computeRatioAvg": 0.7018181818181818, "computeRatioMax": 0.7890909090909091, "endMs": "1665777810325", "id": "17", "inputStages": [ "11", "13", "12", "10" ], "name": "S11: Join+", "parallelInputs": "6", "readMsAvg": "21", "readMsMax": "32", "readRatioAvg": 0.07636363636363637, "readRatioMax": 0.11636363636363636, "recordsRead": "3125270", "recordsWritten": "971", "shuffleOutputBytes": "36754", "shuffleOutputBytesSpilled": "0", "slotMs": "1243", "startMs": "1665777810168", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:ss_sold_date_sk, $61:ss_item_sk, $62:ss_addr_sk, $63:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$120", "FROM __stage0D_output" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage0C_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $280 := $270", "$210 := SUM($271)" ] }, { "kind": "JOIN", "substeps": [ "$270 := $261, $271 := $260", "SEMI HASH JOIN EACH WITH ALL ON $261 = $10" ] }, { "kind": "JOIN", "substeps": [ "$260 := $251, $261 := $2", "INNER HASH JOIN EACH WITH ALL ON $250 = $1" ] }, { "kind": "JOIN", "substeps": [ "$250 := $240, $251 := $242", "INNER HASH JOIN EACH WITH ALL ON $241 = $70" ] }, { "kind": "JOIN", "substeps": [ "$240 := $61, $241 := $62, $242 := $63", "INNER HASH JOIN EACH WITH ALL ON $60 = $120" ] }, { "kind": "WRITE", "substeps": [ "$280, $210", "TO __stage11_output", "BY HASH($280)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0036363636363636364, "waitRatioMax": 0.0036363636363636364, "writeMsAvg": "7", "writeMsMax": "11", "writeRatioAvg": 0.025454545454545455, "writeRatioMax": 0.04 }, { "completedParallelInputs": "3", "computeMsAvg": "13", "computeMsMax": "14", "computeRatioAvg": 0.04727272727272727, "computeRatioMax": 0.05090909090909091, "endMs": "1665777810388", "id": "18", "inputStages": [ "16", "15", "17" ], "name": "S12: Aggregate", "parallelInputs": "3", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1799", "recordsWritten": "1284", "shuffleOutputBytes": "48744", "shuffleOutputBytesSpilled": "0", "slotMs": "119", "startMs": "1665777810349", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$280, $210", "FROM __stage11_output" ] }, { "kind": "READ", "substeps": [ "$340, $220", "FROM __stage10_output" ] }, { "kind": "READ", "substeps": [ "$400, $230", "FROM __stage0F_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $420 := $170", "$160 := SUM($171)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $290 := $280", "$180 := SUM($210)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $350 := $340", "$190 := SUM($220)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $410 := $400", "$200 := SUM($230)" ] }, { "kind": "WRITE", "substeps": [ "$160, $420", "TO __stage12_output", "BY HASH($420)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0036363636363636364, "waitRatioMax": 0.0036363636363636364, "writeMsAvg": "13", "writeMsMax": "14", "writeRatioAvg": 0.04727272727272727, "writeRatioMax": 0.05090909090909091 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.02909090909090909, "computeRatioMax": 0.02909090909090909, "endMs": "1665777810430", "id": "19", "inputStages": [ "18" ], "name": "S13: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1284", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "33", "startMs": "1665777810396", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $420", "FROM __stage12_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC, $430 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $430 := $420", "$150 := SUM($160)" ] }, { "kind": "WRITE", "substeps": [ "$440, $441", "TO __stage13_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0036363636363636364, "waitRatioMax": 0.0036363636363636364, "writeMsAvg": "12", "writeMsMax": "12", "writeRatioAvg": 0.04363636363636364, "writeRatioMax": 0.04363636363636364 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.03272727272727273, "computeRatioMax": 0.03272727272727273, "endMs": "1665777810435", "id": "20", "inputStages": [ "19" ], "name": "S14: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "30", "startMs": "1665777810409", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$440, $441", "FROM __stage13_output" ] }, { "kind": "SORT", "substeps": [ "$440 ASC, $441 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$450, $451", "TO __stage14_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0036363636363636364, "waitRatioMax": 0.0036363636363636364, "writeMsAvg": "5", "writeMsMax": "5", "writeRatioAvg": 0.01818181818181818, "writeRatioMax": 0.01818181818181818 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_address" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "29", "elapsedMs": "644", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "3229" } ], "totalBytesBilled": "201326592", "totalBytesProcessed": "200781230", "totalPartitionsProcessed": "0", "totalSlotMs": "3229", "transferredBytes": "0" }, "startTime": "1665777809824", "totalBytesProcessed": "200781230", "totalSlotMs": "3229" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anonc68be9e3_5c10_4fe3_9e43_c4977d97febd" }, "priority": "INTERACTIVE", "query": "with ss as (\n select i_item_id,sum(ss_ext_sales_price) total_sales\n from\n \tstore_sales,\n \tdate_dim,\n customer_address,\n item\n where i_item_id in (select\n i_item_id\nfrom item\nwhere i_color in ('powder','orchid','pink'))\n and ss_item_sk = i_item_sk\n and ss_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 3\n and ss_addr_sk = ca_address_sk\n and ca_gmt_offset = -6 \n group by i_item_id),\n cs as (\n select i_item_id,sum(cs_ext_sales_price) total_sales\n from\n \tcatalog_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom item\nwhere i_color in ('powder','orchid','pink'))\n and cs_item_sk = i_item_sk\n and cs_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 3\n and cs_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -6 \n group by i_item_id),\n ws as (\n select i_item_id,sum(ws_ext_sales_price) total_sales\n from\n \tweb_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom item\nwhere i_color in ('powder','orchid','pink'))\n and ws_item_sk = i_item_sk\n and ws_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 3\n and ws_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -6\n group by i_item_id)\n select i_item_id ,sum(total_sales) total_sales\n from (select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ss \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from cs \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ws) tmp1\n group by i_item_id\n order by total_sales,\n i_item_id\n limit 100;\n", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "zWSSu0hsKkzQaT8VYhsB2w==", "id": "test-project-364309:europe-west1.query56_1665777811", "jobReference": { "jobId": "query56_1665777811", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query56_1665777811?location=europe-west1", "statistics": { "creationTime": "1665777812223", "endTime": "1665777813100", "finalExecutionDurationMs": "643", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "200781230", "performanceInsights": { "avgPreviousExecutionMs": "605" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.054474708171206226, "computeRatioMax": 0.054474708171206226, "endMs": "1665777812444", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.023346303501945526, "readRatioMax": 0.023346303501945526, "recordsRead": "18000", "recordsWritten": "879", "shuffleOutputBytes": "18459", "shuffleOutputBytesSpilled": "0", "slotMs": "47", "startMs": "1665777812401", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$50:i_item_id, $51:i_color", "FROM item", "WHERE in($51, 'powder', 'orchid', 'pink')" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage00_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.007782101167315175, "waitRatioMax": 0.007782101167315175, "writeMsAvg": "17", "writeMsMax": "17", "writeRatioAvg": 0.06614785992217899, "writeRatioMax": 0.06614785992217899 }, { "completedParallelInputs": "1", "computeMsAvg": "24", "computeMsMax": "24", "computeRatioAvg": 0.0933852140077821, "computeRatioMax": 0.0933852140077821, "endMs": "1665777812478", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.0311284046692607, "readRatioMax": 0.0311284046692607, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "72", "startMs": "1665777812423", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$40, $41", "TO __stage01_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.007782101167315175, "waitRatioMax": 0.007782101167315175, "writeMsAvg": "22", "writeMsMax": "22", "writeRatioAvg": 0.08560311284046693, "writeRatioMax": 0.08560311284046693 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.04669260700389105, "computeRatioMax": 0.04669260700389105, "endMs": "1665777812481", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.023346303501945526, "readRatioMax": 0.023346303501945526, "recordsRead": "50000", "recordsWritten": "21901", "shuffleOutputBytes": "197109", "shuffleOutputBytesSpilled": "0", "slotMs": "45", "startMs": "1665777812442", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110:ca_address_sk, $111:ca_gmt_offset", "FROM customer_address", "WHERE equal($111, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0038910505836575876, "waitRatioMax": 0.0038910505836575876, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.0311284046692607, "writeRatioMax": 0.0311284046692607 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.05058365758754864, "computeRatioMax": 0.05058365758754864, "endMs": "1665777812490", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.0311284046692607, "readRatioMax": 0.0311284046692607, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "42", "startMs": "1665777812458", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140:d_date_sk, $141:d_year, $142:d_moy", "FROM date_dim", "WHERE and(equal($141, 2000), equal($142, 3))" ] }, { "kind": "WRITE", "substeps": [ "$140", "TO __stage03_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.007782101167315175, "waitRatioMax": 0.007782101167315175, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.054474708171206226, "writeRatioMax": 0.054474708171206226 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.027237354085603113, "computeRatioMax": 0.027237354085603113, "endMs": "1665777812517", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.019455252918287938, "readRatioMax": 0.019455252918287938, "recordsRead": "18000", "recordsWritten": "879", "shuffleOutputBytes": "18459", "shuffleOutputBytesSpilled": "0", "slotMs": "26", "startMs": "1665777812491", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:i_item_id, $31:i_color", "FROM item", "WHERE in($31, 'powder', 'orchid', 'pink')" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0038910505836575876, "waitRatioMax": 0.0038910505836575876, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.05058365758754864, "writeRatioMax": 0.05058365758754864 }, { "completedParallelInputs": "1", "computeMsAvg": "19", "computeMsMax": "19", "computeRatioAvg": 0.07392996108949416, "computeRatioMax": 0.07392996108949416, "endMs": "1665777812551", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.027237354085603113, "readRatioMax": 0.027237354085603113, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "46", "startMs": "1665777812504", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:i_item_sk, $21:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0038910505836575876, "waitRatioMax": 0.0038910505836575876, "writeMsAvg": "26", "writeMsMax": "26", "writeRatioAvg": 0.10116731517509728, "writeRatioMax": 0.10116731517509728 }, { "completedParallelInputs": "1", "computeMsAvg": "17", "computeMsMax": "17", "computeRatioAvg": 0.06614785992217899, "computeRatioMax": 0.06614785992217899, "endMs": "1665777812560", "id": "7", "name": "S07: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.023346303501945526, "readRatioMax": 0.023346303501945526, "recordsRead": "50000", "recordsWritten": "21901", "shuffleOutputBytes": "197109", "shuffleOutputBytesSpilled": "0", "slotMs": "47", "startMs": "1665777812520", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90:ca_address_sk, $91:ca_gmt_offset", "FROM customer_address", "WHERE equal($91, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage07_output" ] } ], "waitMsAvg": "0", "waitMsMax": "0", "waitRatioAvg": 0, "waitRatioMax": 0, "writeMsAvg": "12", "writeMsMax": "12", "writeRatioAvg": 0.04669260700389105, "writeRatioMax": 0.04669260700389105 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.04669260700389105, "computeRatioMax": 0.04669260700389105, "endMs": "1665777812577", "id": "8", "name": "S08: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.023346303501945526, "readRatioMax": 0.023346303501945526, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "28", "startMs": "1665777812537", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$130:d_date_sk, $131:d_year, $132:d_moy", "FROM date_dim", "WHERE and(equal($131, 2000), equal($132, 3))" ] }, { "kind": "WRITE", "substeps": [ "$130", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0038910505836575876, "waitRatioMax": 0.0038910505836575876, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.05058365758754864, "writeRatioMax": 0.05058365758754864 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.058365758754863814, "computeRatioMax": 0.058365758754863814, "endMs": "1665777812620", "id": "10", "name": "S0A: Input", "parallelInputs": "1", "readMsAvg": "15", "readMsMax": "15", "readRatioAvg": 0.058365758754863814, "readRatioMax": 0.058365758754863814, "recordsRead": "18000", "recordsWritten": "879", "shuffleOutputBytes": "18459", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665777812573", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_id, $11:i_color", "FROM item", "WHERE in($11, 'powder', 'orchid', 'pink')" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage0A_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.007782101167315175, "waitRatioMax": 0.007782101167315175, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.027237354085603113, "writeRatioMax": 0.027237354085603113 }, { "completedParallelInputs": "1", "computeMsAvg": "18", "computeMsMax": "18", "computeRatioAvg": 0.07003891050583658, "computeRatioMax": 0.07003891050583658, "endMs": "1665777812643", "id": "11", "name": "S0B: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.027237354085603113, "readRatioMax": 0.027237354085603113, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "58", "startMs": "1665777812588", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage0B_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.007782101167315175, "waitRatioMax": 0.007782101167315175, "writeMsAvg": "24", "writeMsMax": "24", "writeRatioAvg": 0.0933852140077821, "writeRatioMax": 0.0933852140077821 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.04669260700389105, "computeRatioMax": 0.04669260700389105, "endMs": "1665777812643", "id": "12", "name": "S0C: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.019455252918287938, "readRatioMax": 0.019455252918287938, "recordsRead": "50000", "recordsWritten": "21901", "shuffleOutputBytes": "197109", "shuffleOutputBytesSpilled": "0", "slotMs": "30", "startMs": "1665777812613", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:ca_address_sk, $71:ca_gmt_offset", "FROM customer_address", "WHERE equal($71, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage0C_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.007782101167315175, "waitRatioMax": 0.007782101167315175, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.058365758754863814, "writeRatioMax": 0.058365758754863814 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.042801556420233464, "computeRatioMax": 0.042801556420233464, "endMs": "1665777812658", "id": "13", "name": "S0D: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.0311284046692607, "readRatioMax": 0.0311284046692607, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "32", "startMs": "1665777812629", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120:d_date_sk, $121:d_year, $122:d_moy", "FROM date_dim", "WHERE and(equal($121, 2000), equal($122, 3))" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage0D_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.007782101167315175, "waitRatioMax": 0.007782101167315175, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.054474708171206226, "writeRatioMax": 0.054474708171206226 }, { "completedParallelInputs": "1", "computeMsAvg": "219", "computeMsMax": "219", "computeRatioAvg": 0.8521400778210116, "computeRatioMax": 0.8521400778210116, "endMs": "1665777812848", "id": "15", "inputStages": [ "1", "2", "3", "0" ], "name": "S0F: Join+", "parallelInputs": "1", "readMsAvg": "21", "readMsMax": "21", "readRatioAvg": 0.08171206225680934, "readRatioMax": 0.08171206225680934, "recordsRead": "760195", "recordsWritten": "236", "shuffleOutputBytes": "8968", "shuffleOutputBytesSpilled": "0", "slotMs": "2804", "startMs": "1665777812661", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$100:ws_sold_date_sk, $101:ws_item_sk, $102:ws_bill_addr_sk, $103:ws_ext_sales_price", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$140", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$110", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$40, $41", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$50", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $400 := $390", "$230 := SUM($391)" ] }, { "kind": "JOIN", "substeps": [ "$390 := $381, $391 := $380", "SEMI HASH JOIN EACH WITH ALL ON $381 = $50" ] }, { "kind": "JOIN", "substeps": [ "$380 := $371, $381 := $41", "INNER HASH JOIN EACH WITH ALL ON $370 = $40" ] }, { "kind": "JOIN", "substeps": [ "$370 := $360, $371 := $362", "INNER HASH JOIN EACH WITH ALL ON $361 = $110" ] }, { "kind": "JOIN", "substeps": [ "$360 := $101, $361 := $102, $362 := $103", "INNER HASH JOIN EACH WITH ALL ON $100 = $140" ] }, { "kind": "WRITE", "substeps": [ "$400, $230", "TO __stage0F_output", "BY HASH($400)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0038910505836575876, "waitRatioMax": 0.0038910505836575876, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.0311284046692607, "writeRatioMax": 0.0311284046692607 }, { "completedParallelInputs": "5", "computeMsAvg": "142", "computeMsMax": "189", "computeRatioAvg": 0.5525291828793775, "computeRatioMax": 0.7354085603112841, "endMs": "1665777812790", "id": "16", "inputStages": [ "6", "8", "7", "5" ], "name": "S10: Join+", "parallelInputs": "5", "readMsAvg": "17", "readMsMax": "19", "readRatioAvg": 0.06614785992217899, "readRatioMax": 0.07392996108949416, "recordsRead": "1645603", "recordsWritten": "592", "shuffleOutputBytes": "22496", "shuffleOutputBytesSpilled": "0", "slotMs": "766", "startMs": "1665777812666", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80:cs_sold_date_sk, $81:cs_bill_addr_sk, $82:cs_item_sk, $83:cs_ext_sales_price", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$130", "FROM __stage08_output" ] }, { "kind": "READ", "substeps": [ "$90", "FROM __stage07_output" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage05_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $340 := $330", "$220 := SUM($331)" ] }, { "kind": "JOIN", "substeps": [ "$330 := $321, $331 := $320", "SEMI HASH JOIN EACH WITH ALL ON $321 = $30" ] }, { "kind": "JOIN", "substeps": [ "$320 := $311, $321 := $21", "INNER HASH JOIN EACH WITH ALL ON $310 = $20" ] }, { "kind": "JOIN", "substeps": [ "$310 := $301, $311 := $302", "INNER HASH JOIN EACH WITH ALL ON $300 = $90" ] }, { "kind": "JOIN", "substeps": [ "$300 := $81, $301 := $82, $302 := $83", "INNER HASH JOIN EACH WITH ALL ON $80 = $130" ] }, { "kind": "WRITE", "substeps": [ "$340, $220", "TO __stage10_output", "BY HASH($340)" ] } ], "waitMsAvg": "1", "waitMsMax": "2", "waitRatioAvg": 0.0038910505836575876, "waitRatioMax": 0.007782101167315175, "writeMsAvg": "4", "writeMsMax": "5", "writeRatioAvg": 0.01556420233463035, "writeRatioMax": 0.019455252918287938 }, { "completedParallelInputs": "6", "computeMsAvg": "171", "computeMsMax": "257", "computeRatioAvg": 0.6653696498054474, "computeRatioMax": 1, "endMs": "1665777812869", "id": "17", "inputStages": [ "13", "11", "12", "10" ], "name": "S11: Join+", "parallelInputs": "6", "readMsAvg": "21", "readMsMax": "43", "readRatioAvg": 0.08171206225680934, "readRatioMax": 0.16731517509727625, "recordsRead": "3125270", "recordsWritten": "971", "shuffleOutputBytes": "36754", "shuffleOutputBytesSpilled": "0", "slotMs": "1304", "startMs": "1665777812671", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:ss_sold_date_sk, $61:ss_item_sk, $62:ss_addr_sk, $63:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$120", "FROM __stage0D_output" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage0C_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $280 := $270", "$210 := SUM($271)" ] }, { "kind": "JOIN", "substeps": [ "$270 := $261, $271 := $260", "SEMI HASH JOIN EACH WITH ALL ON $261 = $10" ] }, { "kind": "JOIN", "substeps": [ "$260 := $251, $261 := $2", "INNER HASH JOIN EACH WITH ALL ON $250 = $1" ] }, { "kind": "JOIN", "substeps": [ "$250 := $240, $251 := $242", "INNER HASH JOIN EACH WITH ALL ON $241 = $70" ] }, { "kind": "JOIN", "substeps": [ "$240 := $61, $241 := $62, $242 := $63", "INNER HASH JOIN EACH WITH ALL ON $60 = $120" ] }, { "kind": "WRITE", "substeps": [ "$280, $210", "TO __stage11_output", "BY HASH($280)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0038910505836575876, "waitRatioMax": 0.0038910505836575876, "writeMsAvg": "5", "writeMsMax": "7", "writeRatioAvg": 0.019455252918287938, "writeRatioMax": 0.027237354085603113 }, { "completedParallelInputs": "3", "computeMsAvg": "9", "computeMsMax": "10", "computeRatioAvg": 0.03501945525291829, "computeRatioMax": 0.038910505836575876, "endMs": "1665777812930", "id": "18", "inputStages": [ "15", "17", "16" ], "name": "S12: Aggregate", "parallelInputs": "3", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1799", "recordsWritten": "1284", "shuffleOutputBytes": "48744", "shuffleOutputBytesSpilled": "0", "slotMs": "97", "startMs": "1665777812894", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$280, $210", "FROM __stage11_output" ] }, { "kind": "READ", "substeps": [ "$340, $220", "FROM __stage10_output" ] }, { "kind": "READ", "substeps": [ "$400, $230", "FROM __stage0F_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $420 := $170", "$160 := SUM($171)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $290 := $280", "$180 := SUM($210)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $350 := $340", "$190 := SUM($220)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $410 := $400", "$200 := SUM($230)" ] }, { "kind": "WRITE", "substeps": [ "$160, $420", "TO __stage12_output", "BY HASH($420)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0038910505836575876, "waitRatioMax": 0.0038910505836575876, "writeMsAvg": "19", "writeMsMax": "27", "writeRatioAvg": 0.07392996108949416, "writeRatioMax": 0.10505836575875487 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.042801556420233464, "computeRatioMax": 0.042801556420233464, "endMs": "1665777812978", "id": "19", "inputStages": [ "18" ], "name": "S13: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1284", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "49", "startMs": "1665777812944", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $420", "FROM __stage12_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC, $430 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $430 := $420", "$150 := SUM($160)" ] }, { "kind": "WRITE", "substeps": [ "$440, $441", "TO __stage13_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0038910505836575876, "waitRatioMax": 0.0038910505836575876, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.054474708171206226, "writeRatioMax": 0.054474708171206226 }, { "completedParallelInputs": "1", "computeMsAvg": "26", "computeMsMax": "26", "computeRatioAvg": 0.10116731517509728, "computeRatioMax": 0.10116731517509728, "endMs": "1665777813007", "id": "20", "inputStages": [ "19" ], "name": "S14: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "64", "startMs": "1665777812960", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$440, $441", "FROM __stage13_output" ] }, { "kind": "SORT", "substeps": [ "$440 ASC, $441 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$450, $451", "TO __stage14_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0038910505836575876, "waitRatioMax": 0.0038910505836575876, "writeMsAvg": "10", "writeMsMax": "10", "writeRatioAvg": 0.038910505836575876, "writeRatioMax": 0.038910505836575876 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_address" } ], "statementType": "SELECT", "timeline": [ { "activeUnits": "3", "completedUnits": "24", "elapsedMs": "628", "estimatedRunnableUnits": "0", "pendingUnits": "3", "totalSlotMs": "5389" }, { "activeUnits": "3", "completedUnits": "29", "elapsedMs": "779", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "5600" } ], "totalBytesBilled": "201326592", "totalBytesProcessed": "200781230", "totalPartitionsProcessed": "0", "totalSlotMs": "5600", "transferredBytes": "0" }, "startTime": "1665777812274", "totalBytesProcessed": "200781230", "totalSlotMs": "5600" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon43a779e0_a87b_4d0b_83cd_79211f23d85b" }, "priority": "INTERACTIVE", "query": "with ss as (\n select i_item_id,sum(ss_ext_sales_price) total_sales\n from\n \tstore_sales,\n \tdate_dim,\n customer_address,\n item\n where i_item_id in (select\n i_item_id\nfrom item\nwhere i_color in ('powder','orchid','pink'))\n and ss_item_sk = i_item_sk\n and ss_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 3\n and ss_addr_sk = ca_address_sk\n and ca_gmt_offset = -6 \n group by i_item_id),\n cs as (\n select i_item_id,sum(cs_ext_sales_price) total_sales\n from\n \tcatalog_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom item\nwhere i_color in ('powder','orchid','pink'))\n and cs_item_sk = i_item_sk\n and cs_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 3\n and cs_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -6 \n group by i_item_id),\n ws as (\n select i_item_id,sum(ws_ext_sales_price) total_sales\n from\n \tweb_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom item\nwhere i_color in ('powder','orchid','pink'))\n and ws_item_sk = i_item_sk\n and ws_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 3\n and ws_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -6\n group by i_item_id)\n select i_item_id ,sum(total_sales) total_sales\n from (select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ss \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from cs \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ws) tmp1\n group by i_item_id\n order by total_sales,\n i_item_id\n limit 100;\n", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "2r/OCmbeyb1IHrxFgJuHSQ==", "id": "test-project-364309:europe-west1.query56_1665777814", "jobReference": { "jobId": "query56_1665777814", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query56_1665777814?location=europe-west1", "statistics": { "creationTime": "1665777814792", "endTime": "1665777815804", "finalExecutionDurationMs": "754", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "200781230", "performanceInsights": { "avgPreviousExecutionMs": "610" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.045283018867924525, "computeRatioMax": 0.045283018867924525, "endMs": "1665777815035", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.022641509433962263, "readRatioMax": 0.022641509433962263, "recordsRead": "18000", "recordsWritten": "879", "shuffleOutputBytes": "18459", "shuffleOutputBytesSpilled": "0", "slotMs": "44", "startMs": "1665777814994", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$50:i_item_id, $51:i_color", "FROM item", "WHERE in($51, 'powder', 'orchid', 'pink')" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage00_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.007547169811320755, "waitRatioMax": 0.007547169811320755, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.05660377358490566, "writeRatioMax": 0.05660377358490566 }, { "completedParallelInputs": "1", "computeMsAvg": "22", "computeMsMax": "22", "computeRatioAvg": 0.0830188679245283, "computeRatioMax": 0.0830188679245283, "endMs": "1665777815072", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.022641509433962263, "readRatioMax": 0.022641509433962263, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "87", "startMs": "1665777815016", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$40, $41", "TO __stage01_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.007547169811320755, "waitRatioMax": 0.007547169811320755, "writeMsAvg": "28", "writeMsMax": "28", "writeRatioAvg": 0.10566037735849057, "writeRatioMax": 0.10566037735849057 }, { "completedParallelInputs": "1", "computeMsAvg": "23", "computeMsMax": "23", "computeRatioAvg": 0.08679245283018867, "computeRatioMax": 0.08679245283018867, "endMs": "1665777815077", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.033962264150943396, "readRatioMax": 0.033962264150943396, "recordsRead": "50000", "recordsWritten": "21901", "shuffleOutputBytes": "197109", "shuffleOutputBytesSpilled": "0", "slotMs": "56", "startMs": "1665777815033", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110:ca_address_sk, $111:ca_gmt_offset", "FROM customer_address", "WHERE equal($111, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage02_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.007547169811320755, "waitRatioMax": 0.007547169811320755, "writeMsAvg": "10", "writeMsMax": "10", "writeRatioAvg": 0.03773584905660377, "writeRatioMax": 0.03773584905660377 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.052830188679245285, "computeRatioMax": 0.052830188679245285, "endMs": "1665777815125", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.022641509433962263, "readRatioMax": 0.022641509433962263, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "82", "startMs": "1665777815073", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140:d_date_sk, $141:d_year, $142:d_moy", "FROM date_dim", "WHERE and(equal($141, 2000), equal($142, 3))" ] }, { "kind": "WRITE", "substeps": [ "$140", "TO __stage03_output" ] } ], "waitMsAvg": "25", "waitMsMax": "25", "waitRatioAvg": 0.09433962264150944, "waitRatioMax": 0.09433962264150944, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.04905660377358491, "writeRatioMax": 0.04905660377358491 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.04905660377358491, "computeRatioMax": 0.04905660377358491, "endMs": "1665777815156", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.018867924528301886, "readRatioMax": 0.018867924528301886, "recordsRead": "18000", "recordsWritten": "879", "shuffleOutputBytes": "18459", "shuffleOutputBytesSpilled": "0", "slotMs": "81", "startMs": "1665777815092", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:i_item_id, $31:i_color", "FROM item", "WHERE in($31, 'powder', 'orchid', 'pink')" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0037735849056603774, "waitRatioMax": 0.0037735849056603774, "writeMsAvg": "50", "writeMsMax": "50", "writeRatioAvg": 0.18867924528301888, "writeRatioMax": 0.18867924528301888 }, { "completedParallelInputs": "1", "computeMsAvg": "27", "computeMsMax": "27", "computeRatioAvg": 0.1018867924528302, "computeRatioMax": 0.1018867924528302, "endMs": "1665777815198", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.022641509433962263, "readRatioMax": 0.022641509433962263, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "97", "startMs": "1665777815129", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:i_item_sk, $21:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0037735849056603774, "waitRatioMax": 0.0037735849056603774, "writeMsAvg": "39", "writeMsMax": "39", "writeRatioAvg": 0.1471698113207547, "writeRatioMax": 0.1471698113207547 }, { "completedParallelInputs": "1", "computeMsAvg": "23", "computeMsMax": "23", "computeRatioAvg": 0.08679245283018867, "computeRatioMax": 0.08679245283018867, "endMs": "1665777815195", "id": "7", "name": "S07: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.03018867924528302, "readRatioMax": 0.03018867924528302, "recordsRead": "50000", "recordsWritten": "21901", "shuffleOutputBytes": "197109", "shuffleOutputBytesSpilled": "0", "slotMs": "59", "startMs": "1665777815151", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90:ca_address_sk, $91:ca_gmt_offset", "FROM customer_address", "WHERE equal($91, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0037735849056603774, "waitRatioMax": 0.0037735849056603774, "writeMsAvg": "9", "writeMsMax": "9", "writeRatioAvg": 0.033962264150943396, "writeRatioMax": 0.033962264150943396 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.033962264150943396, "computeRatioMax": 0.033962264150943396, "endMs": "1665777815217", "id": "8", "name": "S08: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.026415094339622643, "readRatioMax": 0.026415094339622643, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "38", "startMs": "1665777815175", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$130:d_date_sk, $131:d_year, $132:d_moy", "FROM date_dim", "WHERE and(equal($131, 2000), equal($132, 3))" ] }, { "kind": "WRITE", "substeps": [ "$130", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0037735849056603774, "waitRatioMax": 0.0037735849056603774, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.05660377358490566, "writeRatioMax": 0.05660377358490566 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.04150943396226415, "computeRatioMax": 0.04150943396226415, "endMs": "1665777815252", "id": "10", "name": "S0A: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.022641509433962263, "readRatioMax": 0.022641509433962263, "recordsRead": "18000", "recordsWritten": "879", "shuffleOutputBytes": "18459", "shuffleOutputBytesSpilled": "0", "slotMs": "50", "startMs": "1665777815210", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_id, $11:i_color", "FROM item", "WHERE in($11, 'powder', 'orchid', 'pink')" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage0A_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0037735849056603774, "waitRatioMax": 0.0037735849056603774, "writeMsAvg": "17", "writeMsMax": "17", "writeRatioAvg": 0.06415094339622641, "writeRatioMax": 0.06415094339622641 }, { "completedParallelInputs": "1", "computeMsAvg": "23", "computeMsMax": "23", "computeRatioAvg": 0.08679245283018867, "computeRatioMax": 0.08679245283018867, "endMs": "1665777815301", "id": "11", "name": "S0B: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.03018867924528302, "readRatioMax": 0.03018867924528302, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "75", "startMs": "1665777815241", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage0B_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.007547169811320755, "waitRatioMax": 0.007547169811320755, "writeMsAvg": "25", "writeMsMax": "25", "writeRatioAvg": 0.09433962264150944, "writeRatioMax": 0.09433962264150944 }, { "completedParallelInputs": "1", "computeMsAvg": "18", "computeMsMax": "18", "computeRatioAvg": 0.06792452830188679, "computeRatioMax": 0.06792452830188679, "endMs": "1665777815312", "id": "12", "name": "S0C: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.026415094339622643, "readRatioMax": 0.026415094339622643, "recordsRead": "50000", "recordsWritten": "21901", "shuffleOutputBytes": "197109", "shuffleOutputBytesSpilled": "0", "slotMs": "55", "startMs": "1665777815266", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:ca_address_sk, $71:ca_gmt_offset", "FROM customer_address", "WHERE equal($71, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage0C_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.007547169811320755, "waitRatioMax": 0.007547169811320755, "writeMsAvg": "10", "writeMsMax": "10", "writeRatioAvg": 0.03773584905660377, "writeRatioMax": 0.03773584905660377 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.045283018867924525, "computeRatioMax": 0.045283018867924525, "endMs": "1665777815330", "id": "13", "name": "S0D: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.03018867924528302, "readRatioMax": 0.03018867924528302, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "65", "startMs": "1665777815285", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120:d_date_sk, $121:d_year, $122:d_moy", "FROM date_dim", "WHERE and(equal($121, 2000), equal($122, 3))" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage0D_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.007547169811320755, "waitRatioMax": 0.007547169811320755, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.052830188679245285, "writeRatioMax": 0.052830188679245285 }, { "completedParallelInputs": "1", "computeMsAvg": "265", "computeMsMax": "265", "computeRatioAvg": 1, "computeRatioMax": 1, "endMs": "1665777815498", "id": "15", "inputStages": [ "3", "0", "1", "2" ], "name": "S0F: Join+", "parallelInputs": "1", "readMsAvg": "17", "readMsMax": "17", "readRatioAvg": 0.06415094339622641, "readRatioMax": 0.06415094339622641, "recordsRead": "760195", "recordsWritten": "236", "shuffleOutputBytes": "8968", "shuffleOutputBytesSpilled": "0", "slotMs": "253", "startMs": "1665777815334", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$100:ws_sold_date_sk, $101:ws_item_sk, $102:ws_bill_addr_sk, $103:ws_ext_sales_price", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$140", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$110", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$40, $41", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$50", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $400 := $390", "$230 := SUM($391)" ] }, { "kind": "JOIN", "substeps": [ "$390 := $381, $391 := $380", "SEMI HASH JOIN EACH WITH ALL ON $381 = $50" ] }, { "kind": "JOIN", "substeps": [ "$380 := $371, $381 := $41", "INNER HASH JOIN EACH WITH ALL ON $370 = $40" ] }, { "kind": "JOIN", "substeps": [ "$370 := $360, $371 := $362", "INNER HASH JOIN EACH WITH ALL ON $361 = $110" ] }, { "kind": "JOIN", "substeps": [ "$360 := $101, $361 := $102, $362 := $103", "INNER HASH JOIN EACH WITH ALL ON $100 = $140" ] }, { "kind": "WRITE", "substeps": [ "$400, $230", "TO __stage0F_output", "BY HASH($400)" ] } ], "waitMsAvg": "3", "waitMsMax": "3", "waitRatioAvg": 0.011320754716981131, "waitRatioMax": 0.011320754716981131, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.026415094339622643, "writeRatioMax": 0.026415094339622643 }, { "completedParallelInputs": "5", "computeMsAvg": "101", "computeMsMax": "124", "computeRatioAvg": 0.38113207547169814, "computeRatioMax": 0.4679245283018868, "endMs": "1665777815469", "id": "16", "inputStages": [ "8", "6", "5", "7" ], "name": "S10: Join+", "parallelInputs": "5", "readMsAvg": "19", "readMsMax": "25", "readRatioAvg": 0.07169811320754717, "readRatioMax": 0.09433962264150944, "recordsRead": "1645603", "recordsWritten": "592", "shuffleOutputBytes": "22496", "shuffleOutputBytesSpilled": "0", "slotMs": "618", "startMs": "1665777815344", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80:cs_sold_date_sk, $81:cs_bill_addr_sk, $82:cs_item_sk, $83:cs_ext_sales_price", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$130", "FROM __stage08_output" ] }, { "kind": "READ", "substeps": [ "$90", "FROM __stage07_output" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage05_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $340 := $330", "$220 := SUM($331)" ] }, { "kind": "JOIN", "substeps": [ "$330 := $321, $331 := $320", "SEMI HASH JOIN EACH WITH ALL ON $321 = $30" ] }, { "kind": "JOIN", "substeps": [ "$320 := $311, $321 := $21", "INNER HASH JOIN EACH WITH ALL ON $310 = $20" ] }, { "kind": "JOIN", "substeps": [ "$310 := $301, $311 := $302", "INNER HASH JOIN EACH WITH ALL ON $300 = $90" ] }, { "kind": "JOIN", "substeps": [ "$300 := $81, $301 := $82, $302 := $83", "INNER HASH JOIN EACH WITH ALL ON $80 = $130" ] }, { "kind": "WRITE", "substeps": [ "$340, $220", "TO __stage10_output", "BY HASH($340)" ] } ], "waitMsAvg": "1", "waitMsMax": "2", "waitRatioAvg": 0.0037735849056603774, "waitRatioMax": 0.007547169811320755, "writeMsAvg": "5", "writeMsMax": "6", "writeRatioAvg": 0.018867924528301886, "writeRatioMax": 0.022641509433962263 }, { "completedParallelInputs": "6", "computeMsAvg": "193", "computeMsMax": "228", "computeRatioAvg": 0.7283018867924528, "computeRatioMax": 0.8603773584905661, "endMs": "1665777815521", "id": "17", "inputStages": [ "12", "11", "10", "13" ], "name": "S11: Join+", "parallelInputs": "6", "readMsAvg": "20", "readMsMax": "25", "readRatioAvg": 0.07547169811320754, "readRatioMax": 0.09433962264150944, "recordsRead": "3125270", "recordsWritten": "971", "shuffleOutputBytes": "36754", "shuffleOutputBytesSpilled": "0", "slotMs": "1315", "startMs": "1665777815356", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:ss_sold_date_sk, $61:ss_item_sk, $62:ss_addr_sk, $63:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$120", "FROM __stage0D_output" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage0C_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $280 := $270", "$210 := SUM($271)" ] }, { "kind": "JOIN", "substeps": [ "$270 := $261, $271 := $260", "SEMI HASH JOIN EACH WITH ALL ON $261 = $10" ] }, { "kind": "JOIN", "substeps": [ "$260 := $251, $261 := $2", "INNER HASH JOIN EACH WITH ALL ON $250 = $1" ] }, { "kind": "JOIN", "substeps": [ "$250 := $240, $251 := $242", "INNER HASH JOIN EACH WITH ALL ON $241 = $70" ] }, { "kind": "JOIN", "substeps": [ "$240 := $61, $241 := $62, $242 := $63", "INNER HASH JOIN EACH WITH ALL ON $60 = $120" ] }, { "kind": "WRITE", "substeps": [ "$280, $210", "TO __stage11_output", "BY HASH($280)" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.007547169811320755, "waitRatioMax": 0.007547169811320755, "writeMsAvg": "6", "writeMsMax": "8", "writeRatioAvg": 0.022641509433962263, "writeRatioMax": 0.03018867924528302 }, { "completedParallelInputs": "3", "computeMsAvg": "12", "computeMsMax": "13", "computeRatioAvg": 0.045283018867924525, "computeRatioMax": 0.04905660377358491, "endMs": "1665777815593", "id": "18", "inputStages": [ "15", "17", "16" ], "name": "S12: Aggregate", "parallelInputs": "3", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1799", "recordsWritten": "1284", "shuffleOutputBytes": "48744", "shuffleOutputBytesSpilled": "0", "slotMs": "154", "startMs": "1665777815545", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$280, $210", "FROM __stage11_output" ] }, { "kind": "READ", "substeps": [ "$340, $220", "FROM __stage10_output" ] }, { "kind": "READ", "substeps": [ "$400, $230", "FROM __stage0F_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $420 := $170", "$160 := SUM($171)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $290 := $280", "$180 := SUM($210)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $350 := $340", "$190 := SUM($220)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $410 := $400", "$200 := SUM($230)" ] }, { "kind": "WRITE", "substeps": [ "$160, $420", "TO __stage12_output", "BY HASH($420)" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.007547169811320755, "waitRatioMax": 0.007547169811320755, "writeMsAvg": "26", "writeMsMax": "27", "writeRatioAvg": 0.09811320754716982, "writeRatioMax": 0.1018867924528302 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.033962264150943396, "computeRatioMax": 0.033962264150943396, "endMs": "1665777815670", "id": "19", "inputStages": [ "18" ], "name": "S13: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1284", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "38", "startMs": "1665777815605", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $420", "FROM __stage12_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC, $430 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $430 := $420", "$150 := SUM($160)" ] }, { "kind": "WRITE", "substeps": [ "$440, $441", "TO __stage13_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0037735849056603774, "waitRatioMax": 0.0037735849056603774, "writeMsAvg": "56", "writeMsMax": "56", "writeRatioAvg": 0.21132075471698114, "writeRatioMax": 0.21132075471698114 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.03773584905660377, "computeRatioMax": 0.03773584905660377, "endMs": "1665777815691", "id": "20", "inputStages": [ "19" ], "name": "S14: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "91", "startMs": "1665777815623", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$440, $441", "FROM __stage13_output" ] }, { "kind": "SORT", "substeps": [ "$440 ASC, $441 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$450, $451", "TO __stage14_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0037735849056603774, "waitRatioMax": 0.0037735849056603774, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.03018867924528302, "writeRatioMax": 0.03018867924528302 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_address" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" } ], "statementType": "SELECT", "timeline": [ { "activeUnits": "6", "completedUnits": "18", "elapsedMs": "641", "estimatedRunnableUnits": "0", "pendingUnits": "6", "totalSlotMs": "1746" }, { "activeUnits": "6", "completedUnits": "29", "elapsedMs": "897", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "3419" } ], "totalBytesBilled": "201326592", "totalBytesProcessed": "200781230", "totalPartitionsProcessed": "0", "totalSlotMs": "3419", "transferredBytes": "0" }, "startTime": "1665777814854", "totalBytesProcessed": "200781230", "totalSlotMs": "3419" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anonf8b2e36d_ab4b_407c_94a7_eeda30a8cefe" }, "priority": "INTERACTIVE", "query": "with ss as (\n select i_item_id,sum(ss_ext_sales_price) total_sales\n from\n \tstore_sales,\n \tdate_dim,\n customer_address,\n item\n where i_item_id in (select\n i_item_id\nfrom item\nwhere i_color in ('powder','orchid','pink'))\n and ss_item_sk = i_item_sk\n and ss_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 3\n and ss_addr_sk = ca_address_sk\n and ca_gmt_offset = -6 \n group by i_item_id),\n cs as (\n select i_item_id,sum(cs_ext_sales_price) total_sales\n from\n \tcatalog_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom item\nwhere i_color in ('powder','orchid','pink'))\n and cs_item_sk = i_item_sk\n and cs_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 3\n and cs_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -6 \n group by i_item_id),\n ws as (\n select i_item_id,sum(ws_ext_sales_price) total_sales\n from\n \tweb_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom item\nwhere i_color in ('powder','orchid','pink'))\n and ws_item_sk = i_item_sk\n and ws_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 3\n and ws_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -6\n group by i_item_id)\n select i_item_id ,sum(total_sales) total_sales\n from (select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ss \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from cs \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ws) tmp1\n group by i_item_id\n order by total_sales,\n i_item_id\n limit 100;\n", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "z8tAyYOHATbl5yVhLDtxhg==", "id": "test-project-364309:europe-west1.query56_1665777816", "jobReference": { "jobId": "query56_1665777816", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query56_1665777816?location=europe-west1", "statistics": { "creationTime": "1665777817423", "endTime": "1665777818324", "finalExecutionDurationMs": "621", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "200781230", "performanceInsights": { "avgPreviousExecutionMs": "624" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "19", "computeMsMax": "19", "computeRatioAvg": 0.07364341085271318, "computeRatioMax": 0.07364341085271318, "endMs": "1665777817670", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.03875968992248062, "readRatioMax": 0.03875968992248062, "recordsRead": "18000", "recordsWritten": "879", "shuffleOutputBytes": "18459", "shuffleOutputBytesSpilled": "0", "slotMs": "47", "startMs": "1665777817632", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$50:i_item_id, $51:i_color", "FROM item", "WHERE in($51, 'powder', 'orchid', 'pink')" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003875968992248062, "waitRatioMax": 0.003875968992248062, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.05426356589147287, "writeRatioMax": 0.05426356589147287 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.050387596899224806, "computeRatioMax": 0.050387596899224806, "endMs": "1665777817698", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.015503875968992248, "readRatioMax": 0.015503875968992248, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "43", "startMs": "1665777817646", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$40, $41", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003875968992248062, "waitRatioMax": 0.003875968992248062, "writeMsAvg": "28", "writeMsMax": "28", "writeRatioAvg": 0.10852713178294573, "writeRatioMax": 0.10852713178294573 }, { "completedParallelInputs": "1", "computeMsAvg": "20", "computeMsMax": "20", "computeRatioAvg": 0.07751937984496124, "computeRatioMax": 0.07751937984496124, "endMs": "1665777817704", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.01937984496124031, "readRatioMax": 0.01937984496124031, "recordsRead": "50000", "recordsWritten": "21901", "shuffleOutputBytes": "197109", "shuffleOutputBytesSpilled": "0", "slotMs": "79", "startMs": "1665777817665", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110:ca_address_sk, $111:ca_gmt_offset", "FROM customer_address", "WHERE equal($111, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003875968992248062, "waitRatioMax": 0.003875968992248062, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.050387596899224806, "writeRatioMax": 0.050387596899224806 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.027131782945736434, "computeRatioMax": 0.027131782945736434, "endMs": "1665777817750", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.01937984496124031, "readRatioMax": 0.01937984496124031, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "42", "startMs": "1665777817698", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140:d_date_sk, $141:d_year, $142:d_moy", "FROM date_dim", "WHERE and(equal($141, 2000), equal($142, 3))" ] }, { "kind": "WRITE", "substeps": [ "$140", "TO __stage03_output" ] } ], "waitMsAvg": "12", "waitMsMax": "12", "waitRatioAvg": 0.046511627906976744, "waitRatioMax": 0.046511627906976744, "writeMsAvg": "27", "writeMsMax": "27", "writeRatioAvg": 0.10465116279069768, "writeRatioMax": 0.10465116279069768 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.05426356589147287, "computeRatioMax": 0.05426356589147287, "endMs": "1665777817770", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.023255813953488372, "readRatioMax": 0.023255813953488372, "recordsRead": "18000", "recordsWritten": "879", "shuffleOutputBytes": "18459", "shuffleOutputBytesSpilled": "0", "slotMs": "33", "startMs": "1665777817728", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:i_item_id, $31:i_color", "FROM item", "WHERE in($31, 'powder', 'orchid', 'pink')" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003875968992248062, "waitRatioMax": 0.003875968992248062, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.05426356589147287, "writeRatioMax": 0.05426356589147287 }, { "completedParallelInputs": "1", "computeMsAvg": "25", "computeMsMax": "25", "computeRatioAvg": 0.09689922480620156, "computeRatioMax": 0.09689922480620156, "endMs": "1665777817799", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.027131782945736434, "readRatioMax": 0.027131782945736434, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "53", "startMs": "1665777817742", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:i_item_sk, $21:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003875968992248062, "waitRatioMax": 0.003875968992248062, "writeMsAvg": "25", "writeMsMax": "25", "writeRatioAvg": 0.09689922480620156, "writeRatioMax": 0.09689922480620156 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.05813953488372093, "computeRatioMax": 0.05813953488372093, "endMs": "1665777817789", "id": "7", "name": "S07: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.027131782945736434, "readRatioMax": 0.027131782945736434, "recordsRead": "50000", "recordsWritten": "21901", "shuffleOutputBytes": "197109", "shuffleOutputBytesSpilled": "0", "slotMs": "36", "startMs": "1665777817757", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90:ca_address_sk, $91:ca_gmt_offset", "FROM customer_address", "WHERE equal($91, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003875968992248062, "waitRatioMax": 0.003875968992248062, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.05426356589147287, "writeRatioMax": 0.05426356589147287 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.04263565891472868, "computeRatioMax": 0.04263565891472868, "endMs": "1665777817816", "id": "8", "name": "S08: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.027131782945736434, "readRatioMax": 0.027131782945736434, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "44", "startMs": "1665777817774", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$130:d_date_sk, $131:d_year, $132:d_moy", "FROM date_dim", "WHERE and(equal($131, 2000), equal($132, 3))" ] }, { "kind": "WRITE", "substeps": [ "$130", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003875968992248062, "waitRatioMax": 0.003875968992248062, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.06201550387596899, "writeRatioMax": 0.06201550387596899 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.05426356589147287, "computeRatioMax": 0.05426356589147287, "endMs": "1665777817842", "id": "10", "name": "S0A: Input", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.03875968992248062, "readRatioMax": 0.03875968992248062, "recordsRead": "18000", "recordsWritten": "879", "shuffleOutputBytes": "18459", "shuffleOutputBytesSpilled": "0", "slotMs": "43", "startMs": "1665777817807", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_id, $11:i_color", "FROM item", "WHERE in($11, 'powder', 'orchid', 'pink')" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage0A_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003875968992248062, "waitRatioMax": 0.003875968992248062, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.05813953488372093, "writeRatioMax": 0.05813953488372093 }, { "completedParallelInputs": "1", "computeMsAvg": "16", "computeMsMax": "16", "computeRatioAvg": 0.06201550387596899, "computeRatioMax": 0.06201550387596899, "endMs": "1665777817875", "id": "11", "name": "S0B: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.027131782945736434, "readRatioMax": 0.027131782945736434, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "60", "startMs": "1665777817823", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage0B_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003875968992248062, "waitRatioMax": 0.003875968992248062, "writeMsAvg": "24", "writeMsMax": "24", "writeRatioAvg": 0.09302325581395349, "writeRatioMax": 0.09302325581395349 }, { "completedParallelInputs": "1", "computeMsAvg": "17", "computeMsMax": "17", "computeRatioAvg": 0.06589147286821706, "computeRatioMax": 0.06589147286821706, "endMs": "1665777817886", "id": "12", "name": "S0C: Input", "parallelInputs": "1", "readMsAvg": "12", "readMsMax": "12", "readRatioAvg": 0.046511627906976744, "readRatioMax": 0.046511627906976744, "recordsRead": "50000", "recordsWritten": "21901", "shuffleOutputBytes": "197109", "shuffleOutputBytesSpilled": "0", "slotMs": "56", "startMs": "1665777817843", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:ca_address_sk, $71:ca_gmt_offset", "FROM customer_address", "WHERE equal($71, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage0C_output" ] } ], "waitMsAvg": "3", "waitMsMax": "3", "waitRatioAvg": 0.011627906976744186, "waitRatioMax": 0.011627906976744186, "writeMsAvg": "9", "writeMsMax": "9", "writeRatioAvg": 0.03488372093023256, "writeRatioMax": 0.03488372093023256 }, { "completedParallelInputs": "1", "computeMsAvg": "27", "computeMsMax": "27", "computeRatioAvg": 0.10465116279069768, "computeRatioMax": 0.10465116279069768, "endMs": "1665777817906", "id": "13", "name": "S0D: Input", "parallelInputs": "1", "readMsAvg": "16", "readMsMax": "16", "readRatioAvg": 0.06201550387596899, "readRatioMax": 0.06201550387596899, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "74", "startMs": "1665777817858", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120:d_date_sk, $121:d_year, $122:d_moy", "FROM date_dim", "WHERE and(equal($121, 2000), equal($122, 3))" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage0D_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003875968992248062, "waitRatioMax": 0.003875968992248062, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.05813953488372093, "writeRatioMax": 0.05813953488372093 }, { "completedParallelInputs": "1", "computeMsAvg": "200", "computeMsMax": "200", "computeRatioAvg": 0.7751937984496124, "computeRatioMax": 0.7751937984496124, "endMs": "1665777818054", "id": "15", "inputStages": [ "0", "2", "3", "1" ], "name": "S0F: Join+", "parallelInputs": "1", "readMsAvg": "20", "readMsMax": "20", "readRatioAvg": 0.07751937984496124, "readRatioMax": 0.07751937984496124, "recordsRead": "760195", "recordsWritten": "236", "shuffleOutputBytes": "8968", "shuffleOutputBytesSpilled": "0", "slotMs": "234", "startMs": "1665777817890", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$100:ws_sold_date_sk, $101:ws_item_sk, $102:ws_bill_addr_sk, $103:ws_ext_sales_price", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$140", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$110", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$40, $41", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$50", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $400 := $390", "$230 := SUM($391)" ] }, { "kind": "JOIN", "substeps": [ "$390 := $381, $391 := $380", "SEMI HASH JOIN EACH WITH ALL ON $381 = $50" ] }, { "kind": "JOIN", "substeps": [ "$380 := $371, $381 := $41", "INNER HASH JOIN EACH WITH ALL ON $370 = $40" ] }, { "kind": "JOIN", "substeps": [ "$370 := $360, $371 := $362", "INNER HASH JOIN EACH WITH ALL ON $361 = $110" ] }, { "kind": "JOIN", "substeps": [ "$360 := $101, $361 := $102, $362 := $103", "INNER HASH JOIN EACH WITH ALL ON $100 = $140" ] }, { "kind": "WRITE", "substeps": [ "$400, $230", "TO __stage0F_output", "BY HASH($400)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003875968992248062, "waitRatioMax": 0.003875968992248062, "writeMsAvg": "9", "writeMsMax": "9", "writeRatioAvg": 0.03488372093023256, "writeRatioMax": 0.03488372093023256 }, { "completedParallelInputs": "5", "computeMsAvg": "136", "computeMsMax": "159", "computeRatioAvg": 0.5271317829457365, "computeRatioMax": 0.6162790697674418, "endMs": "1665777818061", "id": "16", "inputStages": [ "5", "7", "8", "6" ], "name": "S10: Join+", "parallelInputs": "5", "readMsAvg": "27", "readMsMax": "57", "readRatioAvg": 0.10465116279069768, "readRatioMax": 0.22093023255813954, "recordsRead": "1645603", "recordsWritten": "592", "shuffleOutputBytes": "22496", "shuffleOutputBytesSpilled": "0", "slotMs": "835", "startMs": "1665777817894", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80:cs_sold_date_sk, $81:cs_bill_addr_sk, $82:cs_item_sk, $83:cs_ext_sales_price", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$130", "FROM __stage08_output" ] }, { "kind": "READ", "substeps": [ "$90", "FROM __stage07_output" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage05_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $340 := $330", "$220 := SUM($331)" ] }, { "kind": "JOIN", "substeps": [ "$330 := $321, $331 := $320", "SEMI HASH JOIN EACH WITH ALL ON $321 = $30" ] }, { "kind": "JOIN", "substeps": [ "$320 := $311, $321 := $21", "INNER HASH JOIN EACH WITH ALL ON $310 = $20" ] }, { "kind": "JOIN", "substeps": [ "$310 := $301, $311 := $302", "INNER HASH JOIN EACH WITH ALL ON $300 = $90" ] }, { "kind": "JOIN", "substeps": [ "$300 := $81, $301 := $82, $302 := $83", "INNER HASH JOIN EACH WITH ALL ON $80 = $130" ] }, { "kind": "WRITE", "substeps": [ "$340, $220", "TO __stage10_output", "BY HASH($340)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003875968992248062, "waitRatioMax": 0.003875968992248062, "writeMsAvg": "6", "writeMsMax": "8", "writeRatioAvg": 0.023255813953488372, "writeRatioMax": 0.031007751937984496 }, { "completedParallelInputs": "6", "computeMsAvg": "204", "computeMsMax": "258", "computeRatioAvg": 0.7906976744186046, "computeRatioMax": 1, "endMs": "1665777818094", "id": "17", "inputStages": [ "10", "13", "11", "12" ], "name": "S11: Join+", "parallelInputs": "6", "readMsAvg": "18", "readMsMax": "23", "readRatioAvg": 0.06976744186046512, "readRatioMax": 0.08914728682170543, "recordsRead": "3125270", "recordsWritten": "971", "shuffleOutputBytes": "36754", "shuffleOutputBytesSpilled": "0", "slotMs": "1273", "startMs": "1665777817927", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:ss_sold_date_sk, $61:ss_item_sk, $62:ss_addr_sk, $63:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$120", "FROM __stage0D_output" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage0C_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $280 := $270", "$210 := SUM($271)" ] }, { "kind": "JOIN", "substeps": [ "$270 := $261, $271 := $260", "SEMI HASH JOIN EACH WITH ALL ON $261 = $10" ] }, { "kind": "JOIN", "substeps": [ "$260 := $251, $261 := $2", "INNER HASH JOIN EACH WITH ALL ON $250 = $1" ] }, { "kind": "JOIN", "substeps": [ "$250 := $240, $251 := $242", "INNER HASH JOIN EACH WITH ALL ON $241 = $70" ] }, { "kind": "JOIN", "substeps": [ "$240 := $61, $241 := $62, $242 := $63", "INNER HASH JOIN EACH WITH ALL ON $60 = $120" ] }, { "kind": "WRITE", "substeps": [ "$280, $210", "TO __stage11_output", "BY HASH($280)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003875968992248062, "waitRatioMax": 0.003875968992248062, "writeMsAvg": "7", "writeMsMax": "12", "writeRatioAvg": 0.027131782945736434, "writeRatioMax": 0.046511627906976744 }, { "completedParallelInputs": "3", "computeMsAvg": "12", "computeMsMax": "14", "computeRatioAvg": 0.046511627906976744, "computeRatioMax": 0.05426356589147287, "endMs": "1665777818151", "id": "18", "inputStages": [ "15", "16", "17" ], "name": "S12: Aggregate", "parallelInputs": "3", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1799", "recordsWritten": "1284", "shuffleOutputBytes": "48744", "shuffleOutputBytesSpilled": "0", "slotMs": "136", "startMs": "1665777818114", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$280, $210", "FROM __stage11_output" ] }, { "kind": "READ", "substeps": [ "$340, $220", "FROM __stage10_output" ] }, { "kind": "READ", "substeps": [ "$400, $230", "FROM __stage0F_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $420 := $170", "$160 := SUM($171)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $290 := $280", "$180 := SUM($210)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $350 := $340", "$190 := SUM($220)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $410 := $400", "$200 := SUM($230)" ] }, { "kind": "WRITE", "substeps": [ "$160, $420", "TO __stage12_output", "BY HASH($420)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003875968992248062, "waitRatioMax": 0.003875968992248062, "writeMsAvg": "14", "writeMsMax": "15", "writeRatioAvg": 0.05426356589147287, "writeRatioMax": 0.05813953488372093 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.03488372093023256, "computeRatioMax": 0.03488372093023256, "endMs": "1665777818196", "id": "19", "inputStages": [ "18" ], "name": "S13: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1284", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "38", "startMs": "1665777818160", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $420", "FROM __stage12_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC, $430 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $430 := $420", "$150 := SUM($160)" ] }, { "kind": "WRITE", "substeps": [ "$440, $441", "TO __stage13_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003875968992248062, "waitRatioMax": 0.003875968992248062, "writeMsAvg": "26", "writeMsMax": "26", "writeRatioAvg": 0.10077519379844961, "writeRatioMax": 0.10077519379844961 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.027131782945736434, "computeRatioMax": 0.027131782945736434, "endMs": "1665777818214", "id": "20", "inputStages": [ "19" ], "name": "S14: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "40", "startMs": "1665777818176", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$440, $441", "FROM __stage13_output" ] }, { "kind": "SORT", "substeps": [ "$440 ASC, $441 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$450, $451", "TO __stage14_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003875968992248062, "waitRatioMax": 0.003875968992248062, "writeMsAvg": "5", "writeMsMax": "5", "writeRatioAvg": 0.01937984496124031, "writeRatioMax": 0.01937984496124031 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_address" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" } ], "statementType": "SELECT", "timeline": [ { "activeUnits": "3", "completedUnits": "24", "elapsedMs": "646", "estimatedRunnableUnits": "0", "pendingUnits": "3", "totalSlotMs": "3203" }, { "activeUnits": "3", "completedUnits": "29", "elapsedMs": "766", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "3419" } ], "totalBytesBilled": "201326592", "totalBytesProcessed": "200781230", "totalPartitionsProcessed": "0", "totalSlotMs": "3419", "transferredBytes": "0" }, "startTime": "1665777817488", "totalBytesProcessed": "200781230", "totalSlotMs": "3419" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
