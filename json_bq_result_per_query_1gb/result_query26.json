{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anona3067a1d_e1e5_46a5_a9f6_e936e53fd60f" }, "priority": "INTERACTIVE", "query": "-- start query 26 in stream 0 using template query26.tpl\nselect i_item_id, \n avg(cs_quantity) agg1,\n avg(cs_list_price) agg2,\n avg(cs_coupon_amt) agg3,\n avg(cs_sales_price) agg4 \n from catalog_sales, customer_demographics, date_dim, item, promotion\n where cs_sold_date_sk = d_date_sk and\n cs_item_sk = i_item_sk and\n cs_bill_cdemo_sk = cd_demo_sk and\n cs_promo_sk = p_promo_sk and\n cd_gender = 'M' and \n cd_marital_status = 'S' and\n cd_education_status = 'College' and\n (p_channel_email = 'N' or p_channel_event = 'N') and\n d_year = 2000 \n group by i_item_id\n order by i_item_id\n limit 100\n ;\n\n-- end query 26 in stream 0 using template query26.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "hnmWxlCX8p9DNQImMimtgw==", "id": "test-project-364309:europe-west1.query26_1665768300", "jobReference": { "jobId": "query26_1665768300", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query26_1665768300?location=europe-west1", "statistics": { "creationTime": "1665768300570", "endTime": "1665768301257", "finalExecutionDurationMs": "466", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "177042933", "performanceInsights": { "avgPreviousExecutionMs": "485" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.03666666666666667, "computeRatioMax": 0.03666666666666667, "endMs": "1665768300782", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.013333333333333334, "readRatioMax": 0.013333333333333334, "recordsRead": "300", "recordsWritten": "299", "shuffleOutputBytes": "2691", "shuffleOutputBytesSpilled": "0", "slotMs": "53", "startMs": "1665768300743", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:p_promo_sk, $11:p_channel_email, $12:p_channel_event", "FROM promotion", "WHERE or(equal($11, 'N'), equal($12, 'N'))" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0033333333333333335, "waitRatioMax": 0.0033333333333333335, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.05333333333333334, "writeRatioMax": 0.05333333333333334 }, { "completedParallelInputs": "1", "computeMsAvg": "22", "computeMsMax": "22", "computeRatioAvg": 0.07333333333333333, "computeRatioMax": 0.07333333333333333, "endMs": "1665768300832", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.02666666666666667, "readRatioMax": 0.02666666666666667, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "73", "startMs": "1665768300757", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0033333333333333335, "waitRatioMax": 0.0033333333333333335, "writeMsAvg": "39", "writeMsMax": "39", "writeRatioAvg": 0.13, "writeRatioMax": 0.13 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.03, "computeRatioMax": 0.03, "endMs": "1665768300841", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.03, "readRatioMax": 0.03, "recordsRead": "73049", "recordsWritten": "366", "shuffleOutputBytes": "3294", "shuffleOutputBytesSpilled": "0", "slotMs": "59", "startMs": "1665768300773", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_year", "FROM date_dim", "WHERE equal($31, 2000)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0033333333333333335, "waitRatioMax": 0.0033333333333333335, "writeMsAvg": "53", "writeMsMax": "53", "writeRatioAvg": 0.17666666666666667, "writeRatioMax": 0.17666666666666667 }, { "completedParallelInputs": "1", "computeMsAvg": "27", "computeMsMax": "27", "computeRatioAvg": 0.09, "computeRatioMax": 0.09, "endMs": "1665768300878", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.03333333333333333, "readRatioMax": 0.03333333333333333, "recordsRead": "1920800", "recordsWritten": "27440", "shuffleOutputBytes": "246960", "shuffleOutputBytesSpilled": "0", "slotMs": "56", "startMs": "1665768300821", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:cd_demo_sk, $41:cd_gender, $42:cd_marital_status, $43:cd_education_status", "FROM customer_demographics", "WHERE and(equal($41, 'M'), equal($42, 'S'), equal($43, 'College'))" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0033333333333333335, "waitRatioMax": 0.0033333333333333335, "writeMsAvg": "19", "writeMsMax": "19", "writeRatioAvg": 0.06333333333333334, "writeRatioMax": 0.06333333333333334 }, { "completedParallelInputs": "5", "computeMsAvg": "260", "computeMsMax": "300", "computeRatioAvg": 0.8666666666666667, "computeRatioMax": 1, "endMs": "1665768301111", "id": "5", "inputStages": [ "3", "2", "1", "0" ], "name": "S05: Join+", "parallelInputs": "5", "readMsAvg": "20", "readMsMax": "22", "readRatioAvg": 0.06666666666666667, "readRatioMax": 0.07333333333333333, "recordsRead": "1672073", "recordsWritten": "3845", "shuffleOutputBytes": "291521", "shuffleOutputBytesSpilled": "0", "slotMs": "1158", "startMs": "1665768300889", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:cs_sold_date_sk, $21:cs_bill_cdemo_sk, $22:cs_item_sk, $23:cs_promo_sk, $24:cs_quantity, $25:cs_list_price, $26:cs_sales_price, $27:cs_coupon_amt", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $130", "$60 := SHARD_AVG($131)", "$61 := SHARD_AVG($132)", "$62 := SHARD_AVG($134)", "$63 := SHARD_AVG($133)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $115, $131 := $111, $132 := $112, $133 := $113, $134 := $114", "INNER HASH JOIN EACH WITH ALL ON $110 = $10" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102, $112 := $103, $113 := $104, $114 := $105, $115 := $2", "INNER HASH JOIN EACH WITH ALL ON $100 = $1" ] }, { "kind": "JOIN", "substeps": [ "$100 := $81, $101 := $82, $102 := $83, $103 := $84, $104 := $85, $105 := $86", "INNER HASH JOIN EACH WITH ALL ON $80 = $30" ] }, { "kind": "JOIN", "substeps": [ "$80 := $20, $81 := $22, $82 := $23, $83 := $24, $84 := $25, $85 := $26, $86 := $27", "INNER HASH JOIN EACH WITH ALL ON $21 = $40" ] }, { "kind": "WRITE", "substeps": [ "$140, $60, $61, $62, $63", "TO __stage05_output", "BY HASH($140)" ] } ], "waitMsAvg": "1", "waitMsMax": "2", "waitRatioAvg": 0.0033333333333333335, "waitRatioMax": 0.006666666666666667, "writeMsAvg": "4", "writeMsMax": "6", "writeRatioAvg": 0.013333333333333334, "writeRatioMax": 0.02 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.04666666666666667, "computeRatioMax": 0.04666666666666667, "endMs": "1665768301135", "id": "6", "inputStages": [ "5" ], "name": "S06: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "3845", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "17", "startMs": "1665768301122", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140, $60, $61, $62, $63", "FROM __stage05_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$50 := ROOT_AVG($60)", "$51 := ROOT_AVG($61)", "$52 := ROOT_AVG($62)", "$53 := ROOT_AVG($63)" ] }, { "kind": "WRITE", "substeps": [ "$160, $161, $162, $163, $164", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0033333333333333335, "waitRatioMax": 0.0033333333333333335, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.0033333333333333335, "writeRatioMax": 0.0033333333333333335 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.04, "computeRatioMax": 0.04, "endMs": "1665768301176", "id": "7", "inputStages": [ "6" ], "name": "S07: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "28", "startMs": "1665768301141", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $161, $162, $163, $164", "FROM __stage06_output" ] }, { "kind": "SORT", "substeps": [ "$160 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$170, $171, $172, $173, $174", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0033333333333333335, "waitRatioMax": 0.0033333333333333335, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.04666666666666667, "writeRatioMax": 0.04666666666666667 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "promotion" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_demographics" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "11", "elapsedMs": "568", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "1447" } ], "totalBytesBilled": "177209344", "totalBytesProcessed": "177042933", "totalPartitionsProcessed": "0", "totalSlotMs": "1447", "transferredBytes": "0" }, "startTime": "1665768300633", "totalBytesProcessed": "177042933", "totalSlotMs": "1447" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon8faf55ca_bb22_4534_b978_3abbc4e39d0b" }, "priority": "INTERACTIVE", "query": "-- start query 26 in stream 0 using template query26.tpl\nselect i_item_id, \n avg(cs_quantity) agg1,\n avg(cs_list_price) agg2,\n avg(cs_coupon_amt) agg3,\n avg(cs_sales_price) agg4 \n from catalog_sales, customer_demographics, date_dim, item, promotion\n where cs_sold_date_sk = d_date_sk and\n cs_item_sk = i_item_sk and\n cs_bill_cdemo_sk = cd_demo_sk and\n cs_promo_sk = p_promo_sk and\n cd_gender = 'M' and \n cd_marital_status = 'S' and\n cd_education_status = 'College' and\n (p_channel_email = 'N' or p_channel_event = 'N') and\n d_year = 2000 \n group by i_item_id\n order by i_item_id\n limit 100\n ;\n\n-- end query 26 in stream 0 using template query26.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "p7nJd+u+PROM6uDd2ZLwDQ==", "id": "test-project-364309:europe-west1.query26_1665777189", "jobReference": { "jobId": "query26_1665777189", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query26_1665777189?location=europe-west1", "statistics": { "creationTime": "1665777190340", "endTime": "1665777190998", "finalExecutionDurationMs": "442", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "177042933", "performanceInsights": { "avgPreviousExecutionMs": "483" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.0375, "computeRatioMax": 0.0375, "endMs": "1665777190526", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.015625, "readRatioMax": 0.015625, "recordsRead": "300", "recordsWritten": "299", "shuffleOutputBytes": "2691", "shuffleOutputBytesSpilled": "0", "slotMs": "22", "startMs": "1665777190497", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:p_promo_sk, $11:p_channel_email, $12:p_channel_event", "FROM promotion", "WHERE or(equal($11, 'N'), equal($12, 'N'))" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003125, "waitRatioMax": 0.003125, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.046875, "writeRatioMax": 0.046875 }, { "completedParallelInputs": "1", "computeMsAvg": "27", "computeMsMax": "27", "computeRatioAvg": 0.084375, "computeRatioMax": 0.084375, "endMs": "1665777190568", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.03125, "readRatioMax": 0.03125, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "62", "startMs": "1665777190509", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003125, "waitRatioMax": 0.003125, "writeMsAvg": "22", "writeMsMax": "22", "writeRatioAvg": 0.06875, "writeRatioMax": 0.06875 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.028125, "computeRatioMax": 0.028125, "endMs": "1665777190556", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.01875, "readRatioMax": 0.01875, "recordsRead": "73049", "recordsWritten": "366", "shuffleOutputBytes": "3294", "shuffleOutputBytesSpilled": "0", "slotMs": "31", "startMs": "1665777190524", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_year", "FROM date_dim", "WHERE equal($31, 2000)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003125, "waitRatioMax": 0.003125, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.021875, "writeRatioMax": 0.021875 }, { "completedParallelInputs": "1", "computeMsAvg": "30", "computeMsMax": "30", "computeRatioAvg": 0.09375, "computeRatioMax": 0.09375, "endMs": "1665777190582", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "14", "readMsMax": "14", "readRatioAvg": 0.04375, "readRatioMax": 0.04375, "recordsRead": "1920800", "recordsWritten": "27440", "shuffleOutputBytes": "246960", "shuffleOutputBytesSpilled": "0", "slotMs": "49", "startMs": "1665777190540", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:cd_demo_sk, $41:cd_gender, $42:cd_marital_status, $43:cd_education_status", "FROM customer_demographics", "WHERE and(equal($41, 'M'), equal($42, 'S'), equal($43, 'College'))" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003125, "waitRatioMax": 0.003125, "writeMsAvg": "11", "writeMsMax": "11", "writeRatioAvg": 0.034375, "writeRatioMax": 0.034375 }, { "completedParallelInputs": "5", "computeMsAvg": "273", "computeMsMax": "320", "computeRatioAvg": 0.853125, "computeRatioMax": 1, "endMs": "1665777190844", "id": "5", "inputStages": [ "3", "0", "2", "1" ], "name": "S05: Join+", "parallelInputs": "5", "readMsAvg": "21", "readMsMax": "27", "readRatioAvg": 0.065625, "readRatioMax": 0.084375, "recordsRead": "1672073", "recordsWritten": "3845", "shuffleOutputBytes": "291521", "shuffleOutputBytesSpilled": "0", "slotMs": "1210", "startMs": "1665777190598", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:cs_sold_date_sk, $21:cs_bill_cdemo_sk, $22:cs_item_sk, $23:cs_promo_sk, $24:cs_quantity, $25:cs_list_price, $26:cs_sales_price, $27:cs_coupon_amt", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $130", "$60 := SHARD_AVG($131)", "$61 := SHARD_AVG($132)", "$62 := SHARD_AVG($134)", "$63 := SHARD_AVG($133)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $115, $131 := $111, $132 := $112, $133 := $113, $134 := $114", "INNER HASH JOIN EACH WITH ALL ON $110 = $10" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102, $112 := $103, $113 := $104, $114 := $105, $115 := $2", "INNER HASH JOIN EACH WITH ALL ON $100 = $1" ] }, { "kind": "JOIN", "substeps": [ "$100 := $81, $101 := $82, $102 := $83, $103 := $84, $104 := $85, $105 := $86", "INNER HASH JOIN EACH WITH ALL ON $80 = $30" ] }, { "kind": "JOIN", "substeps": [ "$80 := $20, $81 := $22, $82 := $23, $83 := $24, $84 := $25, $85 := $26, $86 := $27", "INNER HASH JOIN EACH WITH ALL ON $21 = $40" ] }, { "kind": "WRITE", "substeps": [ "$140, $60, $61, $62, $63", "TO __stage05_output", "BY HASH($140)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003125, "waitRatioMax": 0.003125, "writeMsAvg": "4", "writeMsMax": "5", "writeRatioAvg": 0.0125, "writeRatioMax": 0.015625 }, { "completedParallelInputs": "1", "computeMsAvg": "16", "computeMsMax": "16", "computeRatioAvg": 0.05, "computeRatioMax": 0.05, "endMs": "1665777190875", "id": "6", "inputStages": [ "5" ], "name": "S06: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "3845", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "17", "startMs": "1665777190857", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140, $60, $61, $62, $63", "FROM __stage05_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$50 := ROOT_AVG($60)", "$51 := ROOT_AVG($61)", "$52 := ROOT_AVG($62)", "$53 := ROOT_AVG($63)" ] }, { "kind": "WRITE", "substeps": [ "$160, $161, $162, $163, $164", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003125, "waitRatioMax": 0.003125, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.003125, "writeRatioMax": 0.003125 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.034375, "computeRatioMax": 0.034375, "endMs": "1665777190908", "id": "7", "inputStages": [ "6" ], "name": "S07: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "38", "startMs": "1665777190870", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $161, $162, $163, $164", "FROM __stage06_output" ] }, { "kind": "SORT", "substeps": [ "$160 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$170, $171, $172, $173, $174", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003125, "waitRatioMax": 0.003125, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.046875, "writeRatioMax": 0.046875 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_demographics" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "promotion" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "11", "elapsedMs": "539", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "1432" } ], "totalBytesBilled": "177209344", "totalBytesProcessed": "177042933", "totalPartitionsProcessed": "0", "totalSlotMs": "1432", "transferredBytes": "0" }, "startTime": "1665777190399", "totalBytesProcessed": "177042933", "totalSlotMs": "1432" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anona82b86fb_799b_4262_b344_9cf47daa2539" }, "priority": "INTERACTIVE", "query": "-- start query 26 in stream 0 using template query26.tpl\nselect i_item_id, \n avg(cs_quantity) agg1,\n avg(cs_list_price) agg2,\n avg(cs_coupon_amt) agg3,\n avg(cs_sales_price) agg4 \n from catalog_sales, customer_demographics, date_dim, item, promotion\n where cs_sold_date_sk = d_date_sk and\n cs_item_sk = i_item_sk and\n cs_bill_cdemo_sk = cd_demo_sk and\n cs_promo_sk = p_promo_sk and\n cd_gender = 'M' and \n cd_marital_status = 'S' and\n cd_education_status = 'College' and\n (p_channel_email = 'N' or p_channel_event = 'N') and\n d_year = 2000 \n group by i_item_id\n order by i_item_id\n limit 100\n ;\n\n-- end query 26 in stream 0 using template query26.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "qOPIqxy1zpr/chgNt76Y6w==", "id": "test-project-364309:europe-west1.query26_1665777192", "jobReference": { "jobId": "query26_1665777192", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query26_1665777192?location=europe-west1", "statistics": { "creationTime": "1665777192688", "endTime": "1665777193313", "finalExecutionDurationMs": "436", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "177042933", "performanceInsights": { "avgPreviousExecutionMs": "478" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.030534351145038167, "computeRatioMax": 0.030534351145038167, "endMs": "1665777192863", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.015267175572519083, "readRatioMax": 0.015267175572519083, "recordsRead": "300", "recordsWritten": "299", "shuffleOutputBytes": "2691", "shuffleOutputBytesSpilled": "0", "slotMs": "32", "startMs": "1665777192833", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:p_promo_sk, $11:p_channel_email, $12:p_channel_event", "FROM promotion", "WHERE or(equal($11, 'N'), equal($12, 'N'))" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002544529262086514, "waitRatioMax": 0.002544529262086514, "writeMsAvg": "17", "writeMsMax": "17", "writeRatioAvg": 0.043256997455470736, "writeRatioMax": 0.043256997455470736 }, { "completedParallelInputs": "1", "computeMsAvg": "20", "computeMsMax": "20", "computeRatioAvg": 0.05089058524173028, "computeRatioMax": 0.05089058524173028, "endMs": "1665777192893", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.015267175572519083, "readRatioMax": 0.015267175572519083, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "43", "startMs": "1665777192848", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002544529262086514, "waitRatioMax": 0.002544529262086514, "writeMsAvg": "26", "writeMsMax": "26", "writeRatioAvg": 0.06615776081424936, "writeRatioMax": 0.06615776081424936 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.03816793893129771, "computeRatioMax": 0.03816793893129771, "endMs": "1665777192900", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.022900763358778626, "readRatioMax": 0.022900763358778626, "recordsRead": "73049", "recordsWritten": "366", "shuffleOutputBytes": "3294", "shuffleOutputBytesSpilled": "0", "slotMs": "40", "startMs": "1665777192862", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_year", "FROM date_dim", "WHERE equal($31, 2000)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002544529262086514, "waitRatioMax": 0.002544529262086514, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.020356234096692113, "writeRatioMax": 0.020356234096692113 }, { "completedParallelInputs": "1", "computeMsAvg": "30", "computeMsMax": "30", "computeRatioAvg": 0.07633587786259542, "computeRatioMax": 0.07633587786259542, "endMs": "1665777192917", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "11", "readMsMax": "11", "readRatioAvg": 0.027989821882951654, "readRatioMax": 0.027989821882951654, "recordsRead": "1920800", "recordsWritten": "27440", "shuffleOutputBytes": "246960", "shuffleOutputBytesSpilled": "0", "slotMs": "40", "startMs": "1665777192879", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:cd_demo_sk, $41:cd_gender, $42:cd_marital_status, $43:cd_education_status", "FROM customer_demographics", "WHERE and(equal($41, 'M'), equal($42, 'S'), equal($43, 'College'))" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002544529262086514, "waitRatioMax": 0.002544529262086514, "writeMsAvg": "9", "writeMsMax": "9", "writeRatioAvg": 0.022900763358778626, "writeRatioMax": 0.022900763358778626 }, { "completedParallelInputs": "5", "computeMsAvg": "312", "computeMsMax": "393", "computeRatioAvg": 0.7938931297709924, "computeRatioMax": 1, "endMs": "1665777193188", "id": "5", "inputStages": [ "3", "2", "0", "1" ], "name": "S05: Join+", "parallelInputs": "5", "readMsAvg": "26", "readMsMax": "37", "readRatioAvg": 0.06615776081424936, "readRatioMax": 0.09414758269720101, "recordsRead": "1672073", "recordsWritten": "3845", "shuffleOutputBytes": "291521", "shuffleOutputBytesSpilled": "0", "slotMs": "1549", "startMs": "1665777192930", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:cs_sold_date_sk, $21:cs_bill_cdemo_sk, $22:cs_item_sk, $23:cs_promo_sk, $24:cs_quantity, $25:cs_list_price, $26:cs_sales_price, $27:cs_coupon_amt", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $130", "$60 := SHARD_AVG($131)", "$61 := SHARD_AVG($132)", "$62 := SHARD_AVG($134)", "$63 := SHARD_AVG($133)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $115, $131 := $111, $132 := $112, $133 := $113, $134 := $114", "INNER HASH JOIN EACH WITH ALL ON $110 = $10" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102, $112 := $103, $113 := $104, $114 := $105, $115 := $2", "INNER HASH JOIN EACH WITH ALL ON $100 = $1" ] }, { "kind": "JOIN", "substeps": [ "$100 := $81, $101 := $82, $102 := $83, $103 := $84, $104 := $85, $105 := $86", "INNER HASH JOIN EACH WITH ALL ON $80 = $30" ] }, { "kind": "JOIN", "substeps": [ "$80 := $20, $81 := $22, $82 := $23, $83 := $24, $84 := $25, $85 := $26, $86 := $27", "INNER HASH JOIN EACH WITH ALL ON $21 = $40" ] }, { "kind": "WRITE", "substeps": [ "$140, $60, $61, $62, $63", "TO __stage05_output", "BY HASH($140)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002544529262086514, "waitRatioMax": 0.002544529262086514, "writeMsAvg": "6", "writeMsMax": "9", "writeRatioAvg": 0.015267175572519083, "writeRatioMax": 0.022900763358778626 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.020356234096692113, "computeRatioMax": 0.020356234096692113, "endMs": "1665777193205", "id": "6", "inputStages": [ "5" ], "name": "S06: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "3845", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "10", "startMs": "1665777193194", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140, $60, $61, $62, $63", "FROM __stage05_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$50 := ROOT_AVG($60)", "$51 := ROOT_AVG($61)", "$52 := ROOT_AVG($62)", "$53 := ROOT_AVG($63)" ] }, { "kind": "WRITE", "substeps": [ "$160, $161, $162, $163, $164", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002544529262086514, "waitRatioMax": 0.002544529262086514, "writeMsAvg": "0", "writeMsMax": "0", "writeRatioAvg": 0, "writeRatioMax": 0 }, { "completedParallelInputs": "1", "computeMsAvg": "5", "computeMsMax": "5", "computeRatioAvg": 0.01272264631043257, "computeRatioMax": 0.01272264631043257, "endMs": "1665777193239", "id": "7", "inputStages": [ "6" ], "name": "S07: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "26", "startMs": "1665777193209", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $161, $162, $163, $164", "FROM __stage06_output" ] }, { "kind": "SORT", "substeps": [ "$160 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$170, $171, $172, $173, $174", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002544529262086514, "waitRatioMax": 0.002544529262086514, "writeMsAvg": "24", "writeMsMax": "24", "writeRatioAvg": 0.061068702290076333, "writeRatioMax": 0.061068702290076333 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_demographics" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "promotion" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "11", "elapsedMs": "526", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "1743" } ], "totalBytesBilled": "177209344", "totalBytesProcessed": "177042933", "totalPartitionsProcessed": "0", "totalSlotMs": "1743", "transferredBytes": "0" }, "startTime": "1665777192739", "totalBytesProcessed": "177042933", "totalSlotMs": "1743" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon004098e3_aa3e_405a_8c8d_080fb7979f29" }, "priority": "INTERACTIVE", "query": "-- start query 26 in stream 0 using template query26.tpl\nselect i_item_id, \n avg(cs_quantity) agg1,\n avg(cs_list_price) agg2,\n avg(cs_coupon_amt) agg3,\n avg(cs_sales_price) agg4 \n from catalog_sales, customer_demographics, date_dim, item, promotion\n where cs_sold_date_sk = d_date_sk and\n cs_item_sk = i_item_sk and\n cs_bill_cdemo_sk = cd_demo_sk and\n cs_promo_sk = p_promo_sk and\n cd_gender = 'M' and \n cd_marital_status = 'S' and\n cd_education_status = 'College' and\n (p_channel_email = 'N' or p_channel_event = 'N') and\n d_year = 2000 \n group by i_item_id\n order by i_item_id\n limit 100\n ;\n\n-- end query 26 in stream 0 using template query26.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "FoJjPjcQBLDeZYimSxH9fA==", "id": "test-project-364309:europe-west1.query26_1665777194", "jobReference": { "jobId": "query26_1665777194", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query26_1665777194?location=europe-west1", "statistics": { "creationTime": "1665777194998", "endTime": "1665777195613", "finalExecutionDurationMs": "405", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "177042933", "performanceInsights": { "avgPreviousExecutionMs": "474" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.022292993630573247, "computeRatioMax": 0.022292993630573247, "endMs": "1665777195189", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.012738853503184714, "readRatioMax": 0.012738853503184714, "recordsRead": "300", "recordsWritten": "299", "shuffleOutputBytes": "2691", "shuffleOutputBytesSpilled": "0", "slotMs": "29", "startMs": "1665777195156", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:p_promo_sk, $11:p_channel_email, $12:p_channel_event", "FROM promotion", "WHERE or(equal($11, 'N'), equal($12, 'N'))" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0031847133757961785, "waitRatioMax": 0.0031847133757961785, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.025477707006369428, "writeRatioMax": 0.025477707006369428 }, { "completedParallelInputs": "1", "computeMsAvg": "22", "computeMsMax": "22", "computeRatioAvg": 0.07006369426751592, "computeRatioMax": 0.07006369426751592, "endMs": "1665777195213", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.03184713375796178, "readRatioMax": 0.03184713375796178, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "50", "startMs": "1665777195168", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0031847133757961785, "waitRatioMax": 0.0031847133757961785, "writeMsAvg": "20", "writeMsMax": "20", "writeRatioAvg": 0.06369426751592357, "writeRatioMax": 0.06369426751592357 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.03184713375796178, "computeRatioMax": 0.03184713375796178, "endMs": "1665777195219", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.022292993630573247, "readRatioMax": 0.022292993630573247, "recordsRead": "73049", "recordsWritten": "366", "shuffleOutputBytes": "3294", "shuffleOutputBytesSpilled": "0", "slotMs": "38", "startMs": "1665777195180", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_year", "FROM date_dim", "WHERE equal($31, 2000)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0031847133757961785, "waitRatioMax": 0.0031847133757961785, "writeMsAvg": "12", "writeMsMax": "12", "writeRatioAvg": 0.03821656050955414, "writeRatioMax": 0.03821656050955414 }, { "completedParallelInputs": "1", "computeMsAvg": "27", "computeMsMax": "27", "computeRatioAvg": 0.08598726114649681, "computeRatioMax": 0.08598726114649681, "endMs": "1665777195227", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.03184713375796178, "readRatioMax": 0.03184713375796178, "recordsRead": "1920800", "recordsWritten": "27440", "shuffleOutputBytes": "246960", "shuffleOutputBytesSpilled": "0", "slotMs": "38", "startMs": "1665777195193", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:cd_demo_sk, $41:cd_gender, $42:cd_marital_status, $43:cd_education_status", "FROM customer_demographics", "WHERE and(equal($41, 'M'), equal($42, 'S'), equal($43, 'College'))" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0031847133757961785, "waitRatioMax": 0.0031847133757961785, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.022292993630573247, "writeRatioMax": 0.022292993630573247 }, { "completedParallelInputs": "5", "computeMsAvg": "278", "computeMsMax": "314", "computeRatioAvg": 0.8853503184713376, "computeRatioMax": 1, "endMs": "1665777195465", "id": "5", "inputStages": [ "1", "3", "2", "0" ], "name": "S05: Join+", "parallelInputs": "5", "readMsAvg": "20", "readMsMax": "24", "readRatioAvg": 0.06369426751592357, "readRatioMax": 0.07643312101910828, "recordsRead": "1672073", "recordsWritten": "3845", "shuffleOutputBytes": "291521", "shuffleOutputBytesSpilled": "0", "slotMs": "1242", "startMs": "1665777195236", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:cs_sold_date_sk, $21:cs_bill_cdemo_sk, $22:cs_item_sk, $23:cs_promo_sk, $24:cs_quantity, $25:cs_list_price, $26:cs_sales_price, $27:cs_coupon_amt", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $130", "$60 := SHARD_AVG($131)", "$61 := SHARD_AVG($132)", "$62 := SHARD_AVG($134)", "$63 := SHARD_AVG($133)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $115, $131 := $111, $132 := $112, $133 := $113, $134 := $114", "INNER HASH JOIN EACH WITH ALL ON $110 = $10" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102, $112 := $103, $113 := $104, $114 := $105, $115 := $2", "INNER HASH JOIN EACH WITH ALL ON $100 = $1" ] }, { "kind": "JOIN", "substeps": [ "$100 := $81, $101 := $82, $102 := $83, $103 := $84, $104 := $85, $105 := $86", "INNER HASH JOIN EACH WITH ALL ON $80 = $30" ] }, { "kind": "JOIN", "substeps": [ "$80 := $20, $81 := $22, $82 := $23, $83 := $24, $84 := $25, $85 := $26, $86 := $27", "INNER HASH JOIN EACH WITH ALL ON $21 = $40" ] }, { "kind": "WRITE", "substeps": [ "$140, $60, $61, $62, $63", "TO __stage05_output", "BY HASH($140)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0031847133757961785, "waitRatioMax": 0.0031847133757961785, "writeMsAvg": "4", "writeMsMax": "5", "writeRatioAvg": 0.012738853503184714, "writeRatioMax": 0.01592356687898089 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.03184713375796178, "computeRatioMax": 0.03184713375796178, "endMs": "1665777195489", "id": "6", "inputStages": [ "5" ], "name": "S06: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "3845", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "12", "startMs": "1665777195475", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140, $60, $61, $62, $63", "FROM __stage05_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$50 := ROOT_AVG($60)", "$51 := ROOT_AVG($61)", "$52 := ROOT_AVG($62)", "$53 := ROOT_AVG($63)" ] }, { "kind": "WRITE", "substeps": [ "$160, $161, $162, $163, $164", "TO __stage06_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.006369426751592357, "waitRatioMax": 0.006369426751592357, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.0031847133757961785, "writeRatioMax": 0.0031847133757961785 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.022292993630573247, "computeRatioMax": 0.022292993630573247, "endMs": "1665777195525", "id": "7", "inputStages": [ "6" ], "name": "S07: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "27", "startMs": "1665777195490", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $161, $162, $163, $164", "FROM __stage06_output" ] }, { "kind": "SORT", "substeps": [ "$160 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$170, $171, $172, $173, $174", "TO __stage07_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.006369426751592357, "waitRatioMax": 0.006369426751592357, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.04777070063694268, "writeRatioMax": 0.04777070063694268 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "promotion" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_demographics" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "11", "elapsedMs": "500", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "1439" } ], "totalBytesBilled": "177209344", "totalBytesProcessed": "177042933", "totalPartitionsProcessed": "0", "totalSlotMs": "1439", "transferredBytes": "0" }, "startTime": "1665777195057", "totalBytesProcessed": "177042933", "totalSlotMs": "1439" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anone77ef61d_5a0d_4779_a60a_b03c83b693a3" }, "priority": "INTERACTIVE", "query": "-- start query 26 in stream 0 using template query26.tpl\nselect i_item_id, \n avg(cs_quantity) agg1,\n avg(cs_list_price) agg2,\n avg(cs_coupon_amt) agg3,\n avg(cs_sales_price) agg4 \n from catalog_sales, customer_demographics, date_dim, item, promotion\n where cs_sold_date_sk = d_date_sk and\n cs_item_sk = i_item_sk and\n cs_bill_cdemo_sk = cd_demo_sk and\n cs_promo_sk = p_promo_sk and\n cd_gender = 'M' and \n cd_marital_status = 'S' and\n cd_education_status = 'College' and\n (p_channel_email = 'N' or p_channel_event = 'N') and\n d_year = 2000 \n group by i_item_id\n order by i_item_id\n limit 100\n ;\n\n-- end query 26 in stream 0 using template query26.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "Xb7ZLfn92cRF0Y88ppAJoQ==", "id": "test-project-364309:europe-west1.query26_1665777196", "jobReference": { "jobId": "query26_1665777196", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query26_1665777196?location=europe-west1", "statistics": { "creationTime": "1665777197268", "endTime": "1665777197846", "finalExecutionDurationMs": "380", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "177042933", "performanceInsights": { "avgPreviousExecutionMs": "468" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.02356902356902357, "computeRatioMax": 0.02356902356902357, "endMs": "1665777197452", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.016835016835016835, "readRatioMax": 0.016835016835016835, "recordsRead": "300", "recordsWritten": "299", "shuffleOutputBytes": "2691", "shuffleOutputBytesSpilled": "0", "slotMs": "26", "startMs": "1665777197422", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:p_promo_sk, $11:p_channel_email, $12:p_channel_event", "FROM promotion", "WHERE or(equal($11, 'N'), equal($12, 'N'))" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003367003367003367, "waitRatioMax": 0.003367003367003367, "writeMsAvg": "18", "writeMsMax": "18", "writeRatioAvg": 0.06060606060606061, "writeRatioMax": 0.06060606060606061 }, { "completedParallelInputs": "1", "computeMsAvg": "24", "computeMsMax": "24", "computeRatioAvg": 0.08080808080808081, "computeRatioMax": 0.08080808080808081, "endMs": "1665777197479", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.016835016835016835, "readRatioMax": 0.016835016835016835, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "48", "startMs": "1665777197436", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003367003367003367, "waitRatioMax": 0.003367003367003367, "writeMsAvg": "24", "writeMsMax": "24", "writeRatioAvg": 0.08080808080808081, "writeRatioMax": 0.08080808080808081 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.04040404040404041, "computeRatioMax": 0.04040404040404041, "endMs": "1665777197490", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.02356902356902357, "readRatioMax": 0.02356902356902357, "recordsRead": "73049", "recordsWritten": "366", "shuffleOutputBytes": "3294", "shuffleOutputBytesSpilled": "0", "slotMs": "40", "startMs": "1665777197451", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_year", "FROM date_dim", "WHERE equal($31, 2000)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003367003367003367, "waitRatioMax": 0.003367003367003367, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.04377104377104377, "writeRatioMax": 0.04377104377104377 }, { "completedParallelInputs": "1", "computeMsAvg": "26", "computeMsMax": "26", "computeRatioAvg": 0.08754208754208755, "computeRatioMax": 0.08754208754208755, "endMs": "1665777197501", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "12", "readMsMax": "12", "readRatioAvg": 0.04040404040404041, "readRatioMax": 0.04040404040404041, "recordsRead": "1920800", "recordsWritten": "27440", "shuffleOutputBytes": "246960", "shuffleOutputBytesSpilled": "0", "slotMs": "39", "startMs": "1665777197464", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:cd_demo_sk, $41:cd_gender, $42:cd_marital_status, $43:cd_education_status", "FROM customer_demographics", "WHERE and(equal($41, 'M'), equal($42, 'S'), equal($43, 'College'))" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003367003367003367, "waitRatioMax": 0.003367003367003367, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.02356902356902357, "writeRatioMax": 0.02356902356902357 }, { "completedParallelInputs": "5", "computeMsAvg": "240", "computeMsMax": "297", "computeRatioAvg": 0.8080808080808081, "computeRatioMax": 1, "endMs": "1665777197708", "id": "5", "inputStages": [ "1", "3", "2", "0" ], "name": "S05: Join+", "parallelInputs": "5", "readMsAvg": "24", "readMsMax": "32", "readRatioAvg": 0.08080808080808081, "readRatioMax": 0.10774410774410774, "recordsRead": "1672073", "recordsWritten": "3845", "shuffleOutputBytes": "291521", "shuffleOutputBytesSpilled": "0", "slotMs": "1131", "startMs": "1665777197515", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:cs_sold_date_sk, $21:cs_bill_cdemo_sk, $22:cs_item_sk, $23:cs_promo_sk, $24:cs_quantity, $25:cs_list_price, $26:cs_sales_price, $27:cs_coupon_amt", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $130", "$60 := SHARD_AVG($131)", "$61 := SHARD_AVG($132)", "$62 := SHARD_AVG($134)", "$63 := SHARD_AVG($133)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $115, $131 := $111, $132 := $112, $133 := $113, $134 := $114", "INNER HASH JOIN EACH WITH ALL ON $110 = $10" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102, $112 := $103, $113 := $104, $114 := $105, $115 := $2", "INNER HASH JOIN EACH WITH ALL ON $100 = $1" ] }, { "kind": "JOIN", "substeps": [ "$100 := $81, $101 := $82, $102 := $83, $103 := $84, $104 := $85, $105 := $86", "INNER HASH JOIN EACH WITH ALL ON $80 = $30" ] }, { "kind": "JOIN", "substeps": [ "$80 := $20, $81 := $22, $82 := $23, $83 := $24, $84 := $25, $85 := $26, $86 := $27", "INNER HASH JOIN EACH WITH ALL ON $21 = $40" ] }, { "kind": "WRITE", "substeps": [ "$140, $60, $61, $62, $63", "TO __stage05_output", "BY HASH($140)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003367003367003367, "waitRatioMax": 0.003367003367003367, "writeMsAvg": "7", "writeMsMax": "15", "writeRatioAvg": 0.02356902356902357, "writeRatioMax": 0.050505050505050504 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.04377104377104377, "computeRatioMax": 0.04377104377104377, "endMs": "1665777197734", "id": "6", "inputStages": [ "5" ], "name": "S06: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "3845", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "22", "startMs": "1665777197714", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140, $60, $61, $62, $63", "FROM __stage05_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$50 := ROOT_AVG($60)", "$51 := ROOT_AVG($61)", "$52 := ROOT_AVG($62)", "$53 := ROOT_AVG($63)" ] }, { "kind": "WRITE", "substeps": [ "$160, $161, $162, $163, $164", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003367003367003367, "waitRatioMax": 0.003367003367003367, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.003367003367003367, "writeRatioMax": 0.003367003367003367 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.02356902356902357, "computeRatioMax": 0.02356902356902357, "endMs": "1665777197769", "id": "7", "inputStages": [ "6" ], "name": "S07: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "33", "startMs": "1665777197730", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $161, $162, $163, $164", "FROM __stage06_output" ] }, { "kind": "SORT", "substeps": [ "$160 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$170, $171, $172, $173, $174", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003367003367003367, "waitRatioMax": 0.003367003367003367, "writeMsAvg": "17", "writeMsMax": "17", "writeRatioAvg": 0.05723905723905724, "writeRatioMax": 0.05723905723905724 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "promotion" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_demographics" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "11", "elapsedMs": "471", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "1341" } ], "totalBytesBilled": "177209344", "totalBytesProcessed": "177042933", "totalPartitionsProcessed": "0", "totalSlotMs": "1341", "transferredBytes": "0" }, "startTime": "1665777197325", "totalBytesProcessed": "177042933", "totalSlotMs": "1341" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon63598c13_1d7d_4632_884e_ba88f7fe8f7b" }, "priority": "INTERACTIVE", "query": "-- start query 26 in stream 0 using template query26.tpl\nselect i_item_id, \n avg(cs_quantity) agg1,\n avg(cs_list_price) agg2,\n avg(cs_coupon_amt) agg3,\n avg(cs_sales_price) agg4 \n from catalog_sales, customer_demographics, date_dim, item, promotion\n where cs_sold_date_sk = d_date_sk and\n cs_item_sk = i_item_sk and\n cs_bill_cdemo_sk = cd_demo_sk and\n cs_promo_sk = p_promo_sk and\n cd_gender = 'M' and \n cd_marital_status = 'S' and\n cd_education_status = 'College' and\n (p_channel_email = 'N' or p_channel_event = 'N') and\n d_year = 2000 \n group by i_item_id\n order by i_item_id\n limit 100\n ;\n\n-- end query 26 in stream 0 using template query26.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "LEKZYXhlzaTpBj1UD1OfOw==", "id": "test-project-364309:europe-west1.query26_1665777198", "jobReference": { "jobId": "query26_1665777198", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query26_1665777198?location=europe-west1", "statistics": { "creationTime": "1665777199475", "endTime": "1665777200096", "finalExecutionDurationMs": "408", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "177042933", "performanceInsights": { "avgPreviousExecutionMs": "461" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.025, "computeRatioMax": 0.025, "endMs": "1665777199659", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.013888888888888888, "readRatioMax": 0.013888888888888888, "recordsRead": "300", "recordsWritten": "299", "shuffleOutputBytes": "2691", "shuffleOutputBytesSpilled": "0", "slotMs": "29", "startMs": "1665777199625", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:p_promo_sk, $11:p_channel_email, $12:p_channel_event", "FROM promotion", "WHERE or(equal($11, 'N'), equal($12, 'N'))" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002777777777777778, "waitRatioMax": 0.002777777777777778, "writeMsAvg": "21", "writeMsMax": "21", "writeRatioAvg": 0.058333333333333334, "writeRatioMax": 0.058333333333333334 }, { "completedParallelInputs": "1", "computeMsAvg": "26", "computeMsMax": "26", "computeRatioAvg": 0.07222222222222222, "computeRatioMax": 0.07222222222222222, "endMs": "1665777199679", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.016666666666666666, "readRatioMax": 0.016666666666666666, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "45", "startMs": "1665777199636", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002777777777777778, "waitRatioMax": 0.002777777777777778, "writeMsAvg": "21", "writeMsMax": "21", "writeRatioAvg": 0.058333333333333334, "writeRatioMax": 0.058333333333333334 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.030555555555555555, "computeRatioMax": 0.030555555555555555, "endMs": "1665777199687", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.016666666666666666, "readRatioMax": 0.016666666666666666, "recordsRead": "73049", "recordsWritten": "366", "shuffleOutputBytes": "3294", "shuffleOutputBytesSpilled": "0", "slotMs": "33", "startMs": "1665777199651", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_year", "FROM date_dim", "WHERE equal($31, 2000)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002777777777777778, "waitRatioMax": 0.002777777777777778, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.022222222222222223, "writeRatioMax": 0.022222222222222223 }, { "completedParallelInputs": "1", "computeMsAvg": "34", "computeMsMax": "34", "computeRatioAvg": 0.09444444444444444, "computeRatioMax": 0.09444444444444444, "endMs": "1665777199709", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "14", "readMsMax": "14", "readRatioAvg": 0.03888888888888889, "readRatioMax": 0.03888888888888889, "recordsRead": "1920800", "recordsWritten": "27440", "shuffleOutputBytes": "246960", "shuffleOutputBytesSpilled": "0", "slotMs": "47", "startMs": "1665777199664", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:cd_demo_sk, $41:cd_gender, $42:cd_marital_status, $43:cd_education_status", "FROM customer_demographics", "WHERE and(equal($41, 'M'), equal($42, 'S'), equal($43, 'College'))" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002777777777777778, "waitRatioMax": 0.002777777777777778, "writeMsAvg": "10", "writeMsMax": "10", "writeRatioAvg": 0.027777777777777776, "writeRatioMax": 0.027777777777777776 }, { "completedParallelInputs": "5", "computeMsAvg": "268", "computeMsMax": "360", "computeRatioAvg": 0.7444444444444445, "computeRatioMax": 1, "endMs": "1665777199945", "id": "5", "inputStages": [ "2", "3", "0", "1" ], "name": "S05: Join+", "parallelInputs": "5", "readMsAvg": "20", "readMsMax": "25", "readRatioAvg": 0.05555555555555555, "readRatioMax": 0.06944444444444445, "recordsRead": "1672073", "recordsWritten": "3845", "shuffleOutputBytes": "291521", "shuffleOutputBytesSpilled": "0", "slotMs": "1139", "startMs": "1665777199720", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:cs_sold_date_sk, $21:cs_bill_cdemo_sk, $22:cs_item_sk, $23:cs_promo_sk, $24:cs_quantity, $25:cs_list_price, $26:cs_sales_price, $27:cs_coupon_amt", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $130", "$60 := SHARD_AVG($131)", "$61 := SHARD_AVG($132)", "$62 := SHARD_AVG($134)", "$63 := SHARD_AVG($133)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $115, $131 := $111, $132 := $112, $133 := $113, $134 := $114", "INNER HASH JOIN EACH WITH ALL ON $110 = $10" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102, $112 := $103, $113 := $104, $114 := $105, $115 := $2", "INNER HASH JOIN EACH WITH ALL ON $100 = $1" ] }, { "kind": "JOIN", "substeps": [ "$100 := $81, $101 := $82, $102 := $83, $103 := $84, $104 := $85, $105 := $86", "INNER HASH JOIN EACH WITH ALL ON $80 = $30" ] }, { "kind": "JOIN", "substeps": [ "$80 := $20, $81 := $22, $82 := $23, $83 := $24, $84 := $25, $85 := $26, $86 := $27", "INNER HASH JOIN EACH WITH ALL ON $21 = $40" ] }, { "kind": "WRITE", "substeps": [ "$140, $60, $61, $62, $63", "TO __stage05_output", "BY HASH($140)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002777777777777778, "waitRatioMax": 0.002777777777777778, "writeMsAvg": "5", "writeMsMax": "6", "writeRatioAvg": 0.013888888888888888, "writeRatioMax": 0.016666666666666666 }, { "completedParallelInputs": "1", "computeMsAvg": "19", "computeMsMax": "19", "computeRatioAvg": 0.05277777777777778, "computeRatioMax": 0.05277777777777778, "endMs": "1665777199969", "id": "6", "inputStages": [ "5" ], "name": "S06: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "3845", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "20", "startMs": "1665777199952", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140, $60, $61, $62, $63", "FROM __stage05_output" ] }, { "kind": "SORT", "substeps": [ "$150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$50 := ROOT_AVG($60)", "$51 := ROOT_AVG($61)", "$52 := ROOT_AVG($62)", "$53 := ROOT_AVG($63)" ] }, { "kind": "WRITE", "substeps": [ "$160, $161, $162, $163, $164", "TO __stage06_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.005555555555555556, "waitRatioMax": 0.005555555555555556, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.002777777777777778, "writeRatioMax": 0.002777777777777778 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.027777777777777776, "computeRatioMax": 0.027777777777777776, "endMs": "1665777200003", "id": "7", "inputStages": [ "6" ], "name": "S07: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "8100", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665777199966", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $161, $162, $163, $164", "FROM __stage06_output" ] }, { "kind": "SORT", "substeps": [ "$160 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$170, $171, $172, $173, $174", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.002777777777777778, "waitRatioMax": 0.002777777777777778, "writeMsAvg": "25", "writeMsMax": "25", "writeRatioAvg": 0.06944444444444445, "writeRatioMax": 0.06944444444444445 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_demographics" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "promotion" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "11", "elapsedMs": "503", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "1350" } ], "totalBytesBilled": "177209344", "totalBytesProcessed": "177042933", "totalPartitionsProcessed": "0", "totalSlotMs": "1350", "transferredBytes": "0" }, "startTime": "1665777199534", "totalBytesProcessed": "177042933", "totalSlotMs": "1350" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
