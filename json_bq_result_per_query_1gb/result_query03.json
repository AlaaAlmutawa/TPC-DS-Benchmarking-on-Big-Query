{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon448d1a80_6aca_4542_aa1d_37fd2530310b" }, "priority": "INTERACTIVE", "query": "-- start query 3 in stream 0 using template query3.tpl\nselect dt.d_year \n ,item.i_brand_id brand_id \n ,item.i_brand brand\n ,sum(ss_ext_sales_price) sum_agg\n from date_dim dt \n ,store_sales\n ,item\n where dt.d_date_sk = store_sales.ss_sold_date_sk\n and store_sales.ss_item_sk = item.i_item_sk\n and item.i_manufact_id = 128\n and dt.d_moy=11\n group by dt.d_year\n ,item.i_brand\n ,item.i_brand_id\n order by dt.d_year\n ,sum_agg desc\n ,brand_id\n limit 100\n ;\n\n-- end query 3 in stream 0 using template query3.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "Y0xenbUMWjhSpARdHZza7g==", "id": "test-project-364309:europe-west1.query03_1665768204", "jobReference": { "jobId": "query03_1665768204", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query03_1665768204?location=europe-west1", "statistics": { "creationTime": "1665768204739", "endTime": "1665768205185", "finalExecutionDurationMs": "276", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "91558285", "performanceInsights": { "avgPreviousExecutionMs": "316" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.06280193236714976, "computeRatioMax": 0.06280193236714976, "endMs": "1665768204925", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.028985507246376812, "readRatioMax": 0.028985507246376812, "recordsRead": "18000", "recordsWritten": "39", "shuffleOutputBytes": "1539", "shuffleOutputBytesSpilled": "0", "slotMs": "47", "startMs": "1665768204881", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_sk, $11:i_brand_id, $12:i_brand, $13:i_manufact_id", "FROM item", "WHERE equal($13, 128)" ] }, { "kind": "WRITE", "substeps": [ "$10, $11, $12", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004830917874396135, "waitRatioMax": 0.004830917874396135, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.07729468599033816, "writeRatioMax": 0.07729468599033816 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.04830917874396135, "computeRatioMax": 0.04830917874396135, "endMs": "1665768204938", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.028985507246376812, "readRatioMax": 0.028985507246376812, "recordsRead": "73049", "recordsWritten": "6000", "shuffleOutputBytes": "108000", "shuffleOutputBytesSpilled": "0", "slotMs": "30", "startMs": "1665768204911", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:d_date_sk, $21:d_year, $22:d_moy", "FROM date_dim", "WHERE equal($22, 11)" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004830917874396135, "waitRatioMax": 0.004830917874396135, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.06280193236714976, "writeRatioMax": 0.06280193236714976 }, { "completedParallelInputs": "6", "computeMsAvg": "151", "computeMsMax": "207", "computeRatioAvg": 0.7294685990338164, "computeRatioMax": 1, "endMs": "1665768205062", "id": "3", "inputStages": [ "2", "0" ], "name": "S03: Join+", "parallelInputs": "6", "readMsAvg": "14", "readMsMax": "16", "readRatioAvg": 0.06763285024154589, "readRatioMax": 0.07729468599033816, "recordsRead": "2916638", "recordsWritten": "440", "shuffleOutputBytes": "24653", "shuffleOutputBytesSpilled": "0", "slotMs": "828", "startMs": "1665768204950", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:ss_sold_date_sk, $2:ss_item_sk, $3:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$10, $11, $12", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $70 := $61, $71 := $63, $72 := $62", "$40 := SUM($60)" ] }, { "kind": "JOIN", "substeps": [ "$60 := $52, $61 := $50, $62 := $11, $63 := $12", "INNER HASH JOIN EACH WITH ALL ON $51 = $10" ] }, { "kind": "JOIN", "substeps": [ "$51 := $2, $52 := $3, $50 := $21", "INNER HASH JOIN EACH WITH ALL ON $1 = $20" ] }, { "kind": "WRITE", "substeps": [ "$72, $71, $70, $40", "TO __stage03_output", "BY HASH($70, $71, $72)" ] } ], "waitMsAvg": "1", "waitMsMax": "2", "waitRatioAvg": 0.004830917874396135, "waitRatioMax": 0.00966183574879227, "writeMsAvg": "5", "writeMsMax": "6", "writeRatioAvg": 0.024154589371980676, "writeRatioMax": 0.028985507246376812 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.043478260869565216, "computeRatioMax": 0.043478260869565216, "endMs": "1665768205081", "id": "4", "inputStages": [ "3" ], "name": "S04: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "440", "recordsWritten": "89", "shuffleOutputBytes": "4993", "shuffleOutputBytesSpilled": "0", "slotMs": "16", "startMs": "1665768205066", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$72, $71, $70, $40", "FROM __stage03_output" ] }, { "kind": "SORT", "substeps": [ "$80 ASC, $30 DESC, $82 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $80 := $70, $81 := $71, $82 := $72", "$30 := SUM($40)" ] }, { "kind": "WRITE", "substeps": [ "$90, $91, $92, $93", "TO __stage04_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004830917874396135, "waitRatioMax": 0.004830917874396135, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.004830917874396135, "writeRatioMax": 0.004830917874396135 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.057971014492753624, "computeRatioMax": 0.057971014492753624, "endMs": "1665768205118", "id": "5", "inputStages": [ "4" ], "name": "S05: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "89", "recordsWritten": "89", "shuffleOutputBytes": "4993", "shuffleOutputBytesSpilled": "0", "slotMs": "40", "startMs": "1665768205081", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90, $91, $92, $93", "FROM __stage04_output" ] }, { "kind": "SORT", "substeps": [ "$92 ASC, $93 DESC, $90 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$100, $101, $102, $103", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004830917874396135, "waitRatioMax": 0.004830917874396135, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.06763285024154589, "writeRatioMax": 0.06763285024154589 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "10", "elapsedMs": "358", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "969" } ], "totalBytesBilled": "92274688", "totalBytesProcessed": "91558285", "totalPartitionsProcessed": "0", "totalSlotMs": "969", "transferredBytes": "0" }, "startTime": "1665768204789", "totalBytesProcessed": "91558285", "totalSlotMs": "969" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anondc39550c_1850_490f_8b89_cbff679b9a50" }, "priority": "INTERACTIVE", "query": "-- start query 3 in stream 0 using template query3.tpl\nselect dt.d_year \n ,item.i_brand_id brand_id \n ,item.i_brand brand\n ,sum(ss_ext_sales_price) sum_agg\n from date_dim dt \n ,store_sales\n ,item\n where dt.d_date_sk = store_sales.ss_sold_date_sk\n and store_sales.ss_item_sk = item.i_item_sk\n and item.i_manufact_id = 128\n and dt.d_moy=11\n group by dt.d_year\n ,item.i_brand\n ,item.i_brand_id\n order by dt.d_year\n ,sum_agg desc\n ,brand_id\n limit 100\n ;\n\n-- end query 3 in stream 0 using template query3.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "te4nuEjWbloHOcdtt0meRg==", "id": "test-project-364309:europe-west1.query03_1665776431", "jobReference": { "jobId": "query03_1665776431", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query03_1665776431?location=europe-west1", "statistics": { "creationTime": "1665776432113", "endTime": "1665776432545", "finalExecutionDurationMs": "273", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "91558285", "performanceInsights": { "avgPreviousExecutionMs": "321" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.07971014492753623, "computeRatioMax": 0.07971014492753623, "endMs": "1665776432281", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.043478260869565216, "readRatioMax": 0.043478260869565216, "recordsRead": "18000", "recordsWritten": "39", "shuffleOutputBytes": "1539", "shuffleOutputBytesSpilled": "0", "slotMs": "46", "startMs": "1665776432252", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_sk, $11:i_brand_id, $12:i_brand, $13:i_manufact_id", "FROM item", "WHERE equal($13, 128)" ] }, { "kind": "WRITE", "substeps": [ "$10, $11, $12", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007246376811594203, "waitRatioMax": 0.007246376811594203, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.11594202898550725, "writeRatioMax": 0.11594202898550725 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.10144927536231885, "computeRatioMax": 0.10144927536231885, "endMs": "1665776432304", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.050724637681159424, "readRatioMax": 0.050724637681159424, "recordsRead": "73049", "recordsWritten": "6000", "shuffleOutputBytes": "108000", "shuffleOutputBytesSpilled": "0", "slotMs": "51", "startMs": "1665776432279", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:d_date_sk, $21:d_year, $22:d_moy", "FROM date_dim", "WHERE equal($22, 11)" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage02_output" ] } ], "waitMsAvg": "3", "waitMsMax": "3", "waitRatioAvg": 0.021739130434782608, "waitRatioMax": 0.021739130434782608, "writeMsAvg": "9", "writeMsMax": "9", "writeRatioAvg": 0.06521739130434782, "writeRatioMax": 0.06521739130434782 }, { "completedParallelInputs": "6", "computeMsAvg": "125", "computeMsMax": "138", "computeRatioAvg": 0.9057971014492754, "computeRatioMax": 1, "endMs": "1665776432427", "id": "3", "inputStages": [ "0", "2" ], "name": "S03: Join+", "parallelInputs": "6", "readMsAvg": "16", "readMsMax": "20", "readRatioAvg": 0.11594202898550725, "readRatioMax": 0.14492753623188406, "recordsRead": "2916638", "recordsWritten": "440", "shuffleOutputBytes": "24653", "shuffleOutputBytesSpilled": "0", "slotMs": "923", "startMs": "1665776432311", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:ss_sold_date_sk, $2:ss_item_sk, $3:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$10, $11, $12", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $70 := $61, $71 := $63, $72 := $62", "$40 := SUM($60)" ] }, { "kind": "JOIN", "substeps": [ "$60 := $52, $61 := $50, $62 := $11, $63 := $12", "INNER HASH JOIN EACH WITH ALL ON $51 = $10" ] }, { "kind": "JOIN", "substeps": [ "$51 := $2, $52 := $3, $50 := $21", "INNER HASH JOIN EACH WITH ALL ON $1 = $20" ] }, { "kind": "WRITE", "substeps": [ "$72, $71, $70, $40", "TO __stage03_output", "BY HASH($70, $71, $72)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007246376811594203, "waitRatioMax": 0.007246376811594203, "writeMsAvg": "5", "writeMsMax": "6", "writeRatioAvg": 0.036231884057971016, "writeRatioMax": 0.043478260869565216 }, { "completedParallelInputs": "1", "computeMsAvg": "5", "computeMsMax": "5", "computeRatioAvg": 0.036231884057971016, "computeRatioMax": 0.036231884057971016, "endMs": "1665776432449", "id": "4", "inputStages": [ "3" ], "name": "S04: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "440", "recordsWritten": "89", "shuffleOutputBytes": "4993", "shuffleOutputBytesSpilled": "0", "slotMs": "20", "startMs": "1665776432436", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$72, $71, $70, $40", "FROM __stage03_output" ] }, { "kind": "SORT", "substeps": [ "$80 ASC, $30 DESC, $82 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $80 := $70, $81 := $71, $82 := $72", "$30 := SUM($40)" ] }, { "kind": "WRITE", "substeps": [ "$90, $91, $92, $93", "TO __stage04_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007246376811594203, "waitRatioMax": 0.007246376811594203, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.007246376811594203, "writeRatioMax": 0.007246376811594203 }, { "completedParallelInputs": "1", "computeMsAvg": "22", "computeMsMax": "22", "computeRatioAvg": 0.15942028985507245, "computeRatioMax": 0.15942028985507245, "endMs": "1665776432493", "id": "5", "inputStages": [ "4" ], "name": "S05: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "89", "recordsWritten": "89", "shuffleOutputBytes": "4993", "shuffleOutputBytesSpilled": "0", "slotMs": "93", "startMs": "1665776432449", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90, $91, $92, $93", "FROM __stage04_output" ] }, { "kind": "SORT", "substeps": [ "$92 ASC, $93 DESC, $90 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$100, $101, $102, $103", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007246376811594203, "waitRatioMax": 0.007246376811594203, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.11594202898550725, "writeRatioMax": 0.11594202898550725 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "10", "elapsedMs": "338", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "1239" } ], "totalBytesBilled": "92274688", "totalBytesProcessed": "91558285", "totalPartitionsProcessed": "0", "totalSlotMs": "1239", "transferredBytes": "0" }, "startTime": "1665776432171", "totalBytesProcessed": "91558285", "totalSlotMs": "1239" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anonff2ff42e_00f3_40b7_b5d3_4a3e0568a3a0" }, "priority": "INTERACTIVE", "query": "-- start query 3 in stream 0 using template query3.tpl\nselect dt.d_year \n ,item.i_brand_id brand_id \n ,item.i_brand brand\n ,sum(ss_ext_sales_price) sum_agg\n from date_dim dt \n ,store_sales\n ,item\n where dt.d_date_sk = store_sales.ss_sold_date_sk\n and store_sales.ss_item_sk = item.i_item_sk\n and item.i_manufact_id = 128\n and dt.d_moy=11\n group by dt.d_year\n ,item.i_brand\n ,item.i_brand_id\n order by dt.d_year\n ,sum_agg desc\n ,brand_id\n limit 100\n ;\n\n-- end query 3 in stream 0 using template query3.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "YK8yyBiyYJZg8dI+U0JLSA==", "id": "test-project-364309:europe-west1.query03_1665776433", "jobReference": { "jobId": "query03_1665776433", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query03_1665776433?location=europe-west1", "statistics": { "creationTime": "1665776434031", "endTime": "1665776434532", "finalExecutionDurationMs": "283", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "91558285", "performanceInsights": { "avgPreviousExecutionMs": "319" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.06593406593406594, "computeRatioMax": 0.06593406593406594, "endMs": "1665776434192", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.03296703296703297, "readRatioMax": 0.03296703296703297, "recordsRead": "18000", "recordsWritten": "39", "shuffleOutputBytes": "1539", "shuffleOutputBytesSpilled": "0", "slotMs": "53", "startMs": "1665776434156", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_sk, $11:i_brand_id, $12:i_brand, $13:i_manufact_id", "FROM item", "WHERE equal($13, 128)" ] }, { "kind": "WRITE", "substeps": [ "$10, $11, $12", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005494505494505495, "waitRatioMax": 0.005494505494505495, "writeMsAvg": "9", "writeMsMax": "9", "writeRatioAvg": 0.04945054945054945, "writeRatioMax": 0.04945054945054945 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.06593406593406594, "computeRatioMax": 0.06593406593406594, "endMs": "1665776434223", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.027472527472527472, "readRatioMax": 0.027472527472527472, "recordsRead": "73049", "recordsWritten": "6000", "shuffleOutputBytes": "108000", "shuffleOutputBytesSpilled": "0", "slotMs": "53", "startMs": "1665776434181", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:d_date_sk, $21:d_year, $22:d_moy", "FROM date_dim", "WHERE equal($22, 11)" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005494505494505495, "waitRatioMax": 0.005494505494505495, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.07692307692307693, "writeRatioMax": 0.07692307692307693 }, { "completedParallelInputs": "6", "computeMsAvg": "137", "computeMsMax": "182", "computeRatioAvg": 0.7527472527472527, "computeRatioMax": 1, "endMs": "1665776434361", "id": "3", "inputStages": [ "2", "0" ], "name": "S03: Join+", "parallelInputs": "6", "readMsAvg": "13", "readMsMax": "18", "readRatioAvg": 0.07142857142857142, "readRatioMax": 0.0989010989010989, "recordsRead": "2916638", "recordsWritten": "440", "shuffleOutputBytes": "24653", "shuffleOutputBytesSpilled": "0", "slotMs": "937", "startMs": "1665776434235", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:ss_sold_date_sk, $2:ss_item_sk, $3:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$10, $11, $12", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $70 := $61, $71 := $63, $72 := $62", "$40 := SUM($60)" ] }, { "kind": "JOIN", "substeps": [ "$60 := $52, $61 := $50, $62 := $11, $63 := $12", "INNER HASH JOIN EACH WITH ALL ON $51 = $10" ] }, { "kind": "JOIN", "substeps": [ "$51 := $2, $52 := $3, $50 := $21", "INNER HASH JOIN EACH WITH ALL ON $1 = $20" ] }, { "kind": "WRITE", "substeps": [ "$72, $71, $70, $40", "TO __stage03_output", "BY HASH($70, $71, $72)" ] } ], "waitMsAvg": "0", "waitMsMax": "1", "waitRatioAvg": 0, "waitRatioMax": 0.005494505494505495, "writeMsAvg": "4", "writeMsMax": "5", "writeRatioAvg": 0.02197802197802198, "writeRatioMax": 0.027472527472527472 }, { "completedParallelInputs": "1", "computeMsAvg": "6", "computeMsMax": "6", "computeRatioAvg": 0.03296703296703297, "computeRatioMax": 0.03296703296703297, "endMs": "1665776434383", "id": "4", "inputStages": [ "3" ], "name": "S04: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "440", "recordsWritten": "89", "shuffleOutputBytes": "4993", "shuffleOutputBytesSpilled": "0", "slotMs": "12", "startMs": "1665776434372", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$72, $71, $70, $40", "FROM __stage03_output" ] }, { "kind": "SORT", "substeps": [ "$80 ASC, $30 DESC, $82 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $80 := $70, $81 := $71, $82 := $72", "$30 := SUM($40)" ] }, { "kind": "WRITE", "substeps": [ "$90, $91, $92, $93", "TO __stage04_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005494505494505495, "waitRatioMax": 0.005494505494505495, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.005494505494505495, "writeRatioMax": 0.005494505494505495 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.04945054945054945, "computeRatioMax": 0.04945054945054945, "endMs": "1665776434410", "id": "5", "inputStages": [ "4" ], "name": "S05: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "89", "recordsWritten": "89", "shuffleOutputBytes": "4993", "shuffleOutputBytesSpilled": "0", "slotMs": "29", "startMs": "1665776434386", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90, $91, $92, $93", "FROM __stage04_output" ] }, { "kind": "SORT", "substeps": [ "$92 ASC, $93 DESC, $90 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$100, $101, $102, $103", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005494505494505495, "waitRatioMax": 0.005494505494505495, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.08241758241758242, "writeRatioMax": 0.08241758241758242 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "10", "elapsedMs": "411", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "1086" } ], "totalBytesBilled": "92274688", "totalBytesProcessed": "91558285", "totalPartitionsProcessed": "0", "totalSlotMs": "1086", "transferredBytes": "0" }, "startTime": "1665776434073", "totalBytesProcessed": "91558285", "totalSlotMs": "1086" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon1bf48bfe_63df_4bf5_b8af_e57c41eed1e4" }, "priority": "INTERACTIVE", "query": "-- start query 3 in stream 0 using template query3.tpl\nselect dt.d_year \n ,item.i_brand_id brand_id \n ,item.i_brand brand\n ,sum(ss_ext_sales_price) sum_agg\n from date_dim dt \n ,store_sales\n ,item\n where dt.d_date_sk = store_sales.ss_sold_date_sk\n and store_sales.ss_item_sk = item.i_item_sk\n and item.i_manufact_id = 128\n and dt.d_moy=11\n group by dt.d_year\n ,item.i_brand\n ,item.i_brand_id\n order by dt.d_year\n ,sum_agg desc\n ,brand_id\n limit 100\n ;\n\n-- end query 3 in stream 0 using template query3.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "QYcVBSW2+Pg+K9/YdV8HQA==", "id": "test-project-364309:europe-west1.query03_1665776435", "jobReference": { "jobId": "query03_1665776435", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query03_1665776435?location=europe-west1", "statistics": { "creationTime": "1665776436259", "endTime": "1665776436783", "finalExecutionDurationMs": "275", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "91558285", "performanceInsights": { "avgPreviousExecutionMs": "317" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.05, "computeRatioMax": 0.05, "endMs": "1665776436426", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.03333333333333333, "readRatioMax": 0.03333333333333333, "recordsRead": "18000", "recordsWritten": "39", "shuffleOutputBytes": "1539", "shuffleOutputBytesSpilled": "0", "slotMs": "42", "startMs": "1665776436395", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_sk, $11:i_brand_id, $12:i_brand, $13:i_manufact_id", "FROM item", "WHERE equal($13, 128)" ] }, { "kind": "WRITE", "substeps": [ "$10, $11, $12", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005555555555555556, "waitRatioMax": 0.005555555555555556, "writeMsAvg": "17", "writeMsMax": "17", "writeRatioAvg": 0.09444444444444444, "writeRatioMax": 0.09444444444444444 }, { "completedParallelInputs": "1", "computeMsAvg": "16", "computeMsMax": "16", "computeRatioAvg": 0.08888888888888889, "computeRatioMax": 0.08888888888888889, "endMs": "1665776436456", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.044444444444444446, "readRatioMax": 0.044444444444444446, "recordsRead": "73049", "recordsWritten": "6000", "shuffleOutputBytes": "108000", "shuffleOutputBytesSpilled": "0", "slotMs": "39", "startMs": "1665776436423", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:d_date_sk, $21:d_year, $22:d_moy", "FROM date_dim", "WHERE equal($22, 11)" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005555555555555556, "waitRatioMax": 0.005555555555555556, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.07777777777777778, "writeRatioMax": 0.07777777777777778 }, { "completedParallelInputs": "6", "computeMsAvg": "146", "computeMsMax": "180", "computeRatioAvg": 0.8111111111111111, "computeRatioMax": 1, "endMs": "1665776436580", "id": "3", "inputStages": [ "0", "2" ], "name": "S03: Join+", "parallelInputs": "6", "readMsAvg": "14", "readMsMax": "18", "readRatioAvg": 0.07777777777777778, "readRatioMax": 0.1, "recordsRead": "2916638", "recordsWritten": "440", "shuffleOutputBytes": "24653", "shuffleOutputBytesSpilled": "0", "slotMs": "1122", "startMs": "1665776436466", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:ss_sold_date_sk, $2:ss_item_sk, $3:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$10, $11, $12", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $70 := $61, $71 := $63, $72 := $62", "$40 := SUM($60)" ] }, { "kind": "JOIN", "substeps": [ "$60 := $52, $61 := $50, $62 := $11, $63 := $12", "INNER HASH JOIN EACH WITH ALL ON $51 = $10" ] }, { "kind": "JOIN", "substeps": [ "$51 := $2, $52 := $3, $50 := $21", "INNER HASH JOIN EACH WITH ALL ON $1 = $20" ] }, { "kind": "WRITE", "substeps": [ "$72, $71, $70, $40", "TO __stage03_output", "BY HASH($70, $71, $72)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005555555555555556, "waitRatioMax": 0.005555555555555556, "writeMsAvg": "5", "writeMsMax": "7", "writeRatioAvg": 0.027777777777777776, "writeRatioMax": 0.03888888888888889 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.05, "computeRatioMax": 0.05, "endMs": "1665776436599", "id": "4", "inputStages": [ "3" ], "name": "S04: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "440", "recordsWritten": "89", "shuffleOutputBytes": "4993", "shuffleOutputBytesSpilled": "0", "slotMs": "17", "startMs": "1665776436588", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$72, $71, $70, $40", "FROM __stage03_output" ] }, { "kind": "SORT", "substeps": [ "$80 ASC, $30 DESC, $82 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $80 := $70, $81 := $71, $82 := $72", "$30 := SUM($40)" ] }, { "kind": "WRITE", "substeps": [ "$90, $91, $92, $93", "TO __stage04_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005555555555555556, "waitRatioMax": 0.005555555555555556, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.005555555555555556, "writeRatioMax": 0.005555555555555556 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.044444444444444446, "computeRatioMax": 0.044444444444444446, "endMs": "1665776436638", "id": "5", "inputStages": [ "4" ], "name": "S05: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "89", "recordsWritten": "89", "shuffleOutputBytes": "4993", "shuffleOutputBytesSpilled": "0", "slotMs": "78", "startMs": "1665776436601", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90, $91, $92, $93", "FROM __stage04_output" ] }, { "kind": "SORT", "substeps": [ "$92 ASC, $93 DESC, $90 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$100, $101, $102, $103", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005555555555555556, "waitRatioMax": 0.005555555555555556, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.08888888888888889, "writeRatioMax": 0.08888888888888889 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "10", "elapsedMs": "431", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "1376" } ], "totalBytesBilled": "92274688", "totalBytesProcessed": "91558285", "totalPartitionsProcessed": "0", "totalSlotMs": "1376", "transferredBytes": "0" }, "startTime": "1665776436309", "totalBytesProcessed": "91558285", "totalSlotMs": "1376" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anonf3678783_19ea_4494_95fb_b6f252165193" }, "priority": "INTERACTIVE", "query": "-- start query 3 in stream 0 using template query3.tpl\nselect dt.d_year \n ,item.i_brand_id brand_id \n ,item.i_brand brand\n ,sum(ss_ext_sales_price) sum_agg\n from date_dim dt \n ,store_sales\n ,item\n where dt.d_date_sk = store_sales.ss_sold_date_sk\n and store_sales.ss_item_sk = item.i_item_sk\n and item.i_manufact_id = 128\n and dt.d_moy=11\n group by dt.d_year\n ,item.i_brand\n ,item.i_brand_id\n order by dt.d_year\n ,sum_agg desc\n ,brand_id\n limit 100\n ;\n\n-- end query 3 in stream 0 using template query3.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "SUcrALrkkEyLNkuU3FxmlQ==", "id": "test-project-364309:europe-west1.query03_1665776437", "jobReference": { "jobId": "query03_1665776437", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query03_1665776437?location=europe-west1", "statistics": { "creationTime": "1665776438378", "endTime": "1665776439055", "finalExecutionDurationMs": "481", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "91558285", "performanceInsights": { "avgPreviousExecutionMs": "315" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "6", "computeMsMax": "6", "computeRatioAvg": 0.03333333333333333, "computeRatioMax": 0.03333333333333333, "endMs": "1665776438555", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.027777777777777776, "readRatioMax": 0.027777777777777776, "recordsRead": "18000", "recordsWritten": "39", "shuffleOutputBytes": "1539", "shuffleOutputBytesSpilled": "0", "slotMs": "37", "startMs": "1665776438526", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_sk, $11:i_brand_id, $12:i_brand, $13:i_manufact_id", "FROM item", "WHERE equal($13, 128)" ] }, { "kind": "WRITE", "substeps": [ "$10, $11, $12", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005555555555555556, "waitRatioMax": 0.005555555555555556, "writeMsAvg": "17", "writeMsMax": "17", "writeRatioAvg": 0.09444444444444444, "writeRatioMax": 0.09444444444444444 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.07777777777777778, "computeRatioMax": 0.07777777777777778, "endMs": "1665776438776", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.03333333333333333, "readRatioMax": 0.03333333333333333, "recordsRead": "73049", "recordsWritten": "6000", "shuffleOutputBytes": "108000", "shuffleOutputBytesSpilled": "0", "slotMs": "67", "startMs": "1665776438737", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:d_date_sk, $21:d_year, $22:d_moy", "FROM date_dim", "WHERE equal($22, 11)" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage02_output" ] } ], "waitMsAvg": "180", "waitMsMax": "180", "waitRatioAvg": 1, "waitRatioMax": 1, "writeMsAvg": "11", "writeMsMax": "11", "writeRatioAvg": 0.06111111111111111, "writeRatioMax": 0.06111111111111111 }, { "completedParallelInputs": "6", "computeMsAvg": "122", "computeMsMax": "155", "computeRatioAvg": 0.6777777777777778, "computeRatioMax": 0.8611111111111112, "endMs": "1665776438903", "id": "3", "inputStages": [ "2", "0" ], "name": "S03: Join+", "parallelInputs": "6", "readMsAvg": "15", "readMsMax": "30", "readRatioAvg": 0.08333333333333333, "readRatioMax": 0.16666666666666666, "recordsRead": "2916638", "recordsWritten": "440", "shuffleOutputBytes": "24653", "shuffleOutputBytesSpilled": "0", "slotMs": "927", "startMs": "1665776438784", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:ss_sold_date_sk, $2:ss_item_sk, $3:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$10, $11, $12", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $70 := $61, $71 := $63, $72 := $62", "$40 := SUM($60)" ] }, { "kind": "JOIN", "substeps": [ "$60 := $52, $61 := $50, $62 := $11, $63 := $12", "INNER HASH JOIN EACH WITH ALL ON $51 = $10" ] }, { "kind": "JOIN", "substeps": [ "$51 := $2, $52 := $3, $50 := $21", "INNER HASH JOIN EACH WITH ALL ON $1 = $20" ] }, { "kind": "WRITE", "substeps": [ "$72, $71, $70, $40", "TO __stage03_output", "BY HASH($70, $71, $72)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005555555555555556, "waitRatioMax": 0.005555555555555556, "writeMsAvg": "4", "writeMsMax": "5", "writeRatioAvg": 0.022222222222222223, "writeRatioMax": 0.027777777777777776 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.03888888888888889, "computeRatioMax": 0.03888888888888889, "endMs": "1665776438925", "id": "4", "inputStages": [ "3" ], "name": "S04: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "440", "recordsWritten": "89", "shuffleOutputBytes": "4993", "shuffleOutputBytesSpilled": "0", "slotMs": "12", "startMs": "1665776438914", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$72, $71, $70, $40", "FROM __stage03_output" ] }, { "kind": "SORT", "substeps": [ "$80 ASC, $30 DESC, $82 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $80 := $70, $81 := $71, $82 := $72", "$30 := SUM($40)" ] }, { "kind": "WRITE", "substeps": [ "$90, $91, $92, $93", "TO __stage04_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005555555555555556, "waitRatioMax": 0.005555555555555556, "writeMsAvg": "0", "writeMsMax": "0", "writeRatioAvg": 0, "writeRatioMax": 0 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.05, "computeRatioMax": 0.05, "endMs": "1665776438966", "id": "5", "inputStages": [ "4" ], "name": "S05: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "89", "recordsWritten": "89", "shuffleOutputBytes": "4993", "shuffleOutputBytesSpilled": "0", "slotMs": "68", "startMs": "1665776438928", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90, $91, $92, $93", "FROM __stage04_output" ] }, { "kind": "SORT", "substeps": [ "$92 ASC, $93 DESC, $90 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$100, $101, $102, $103", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005555555555555556, "waitRatioMax": 0.005555555555555556, "writeMsAvg": "17", "writeMsMax": "17", "writeRatioAvg": 0.09444444444444444, "writeRatioMax": 0.09444444444444444 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "10", "elapsedMs": "566", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2069" } ], "totalBytesBilled": "92274688", "totalBytesProcessed": "91558285", "totalPartitionsProcessed": "0", "totalSlotMs": "2069", "transferredBytes": "0" }, "startTime": "1665776438426", "totalBytesProcessed": "91558285", "totalSlotMs": "2069" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon502685ab_b698_41e2_9e11_8ed5c770e4f0" }, "priority": "INTERACTIVE", "query": "-- start query 3 in stream 0 using template query3.tpl\nselect dt.d_year \n ,item.i_brand_id brand_id \n ,item.i_brand brand\n ,sum(ss_ext_sales_price) sum_agg\n from date_dim dt \n ,store_sales\n ,item\n where dt.d_date_sk = store_sales.ss_sold_date_sk\n and store_sales.ss_item_sk = item.i_item_sk\n and item.i_manufact_id = 128\n and dt.d_moy=11\n group by dt.d_year\n ,item.i_brand\n ,item.i_brand_id\n order by dt.d_year\n ,sum_agg desc\n ,brand_id\n limit 100\n ;\n\n-- end query 3 in stream 0 using template query3.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "rxXsmMuPZ+Pxz07IRw2kxw==", "id": "test-project-364309:europe-west1.query03_1665776440", "jobReference": { "jobId": "query03_1665776440", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query03_1665776440?location=europe-west1", "statistics": { "creationTime": "1665776440738", "endTime": "1665776441294", "finalExecutionDurationMs": "322", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "91558285", "performanceInsights": { "avgPreviousExecutionMs": "323" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.06521739130434782, "computeRatioMax": 0.06521739130434782, "endMs": "1665776440932", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.03260869565217391, "readRatioMax": 0.03260869565217391, "recordsRead": "18000", "recordsWritten": "39", "shuffleOutputBytes": "1539", "shuffleOutputBytesSpilled": "0", "slotMs": "61", "startMs": "1665776440891", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_sk, $11:i_brand_id, $12:i_brand, $13:i_manufact_id", "FROM item", "WHERE equal($13, 128)" ] }, { "kind": "WRITE", "substeps": [ "$10, $11, $12", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005434782608695652, "waitRatioMax": 0.005434782608695652, "writeMsAvg": "17", "writeMsMax": "17", "writeRatioAvg": 0.09239130434782608, "writeRatioMax": 0.09239130434782608 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.059782608695652176, "computeRatioMax": 0.059782608695652176, "endMs": "1665776440965", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.021739130434782608, "readRatioMax": 0.021739130434782608, "recordsRead": "73049", "recordsWritten": "6000", "shuffleOutputBytes": "108000", "shuffleOutputBytesSpilled": "0", "slotMs": "103", "startMs": "1665776440925", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:d_date_sk, $21:d_year, $22:d_moy", "FROM date_dim", "WHERE equal($22, 11)" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005434782608695652, "waitRatioMax": 0.005434782608695652, "writeMsAvg": "29", "writeMsMax": "29", "writeRatioAvg": 0.15760869565217392, "writeRatioMax": 0.15760869565217392 }, { "completedParallelInputs": "6", "computeMsAvg": "133", "computeMsMax": "184", "computeRatioAvg": 0.7228260869565217, "computeRatioMax": 1, "endMs": "1665776441117", "id": "3", "inputStages": [ "0", "2" ], "name": "S03: Join+", "parallelInputs": "6", "readMsAvg": "16", "readMsMax": "23", "readRatioAvg": 0.08695652173913043, "readRatioMax": 0.125, "recordsRead": "2916638", "recordsWritten": "440", "shuffleOutputBytes": "24653", "shuffleOutputBytesSpilled": "0", "slotMs": "1069", "startMs": "1665776440979", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:ss_sold_date_sk, $2:ss_item_sk, $3:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$10, $11, $12", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $70 := $61, $71 := $63, $72 := $62", "$40 := SUM($60)" ] }, { "kind": "JOIN", "substeps": [ "$60 := $52, $61 := $50, $62 := $11, $63 := $12", "INNER HASH JOIN EACH WITH ALL ON $51 = $10" ] }, { "kind": "JOIN", "substeps": [ "$51 := $2, $52 := $3, $50 := $21", "INNER HASH JOIN EACH WITH ALL ON $1 = $20" ] }, { "kind": "WRITE", "substeps": [ "$72, $71, $70, $40", "TO __stage03_output", "BY HASH($70, $71, $72)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005434782608695652, "waitRatioMax": 0.005434782608695652, "writeMsAvg": "5", "writeMsMax": "8", "writeRatioAvg": 0.02717391304347826, "writeRatioMax": 0.043478260869565216 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.03804347826086957, "computeRatioMax": 0.03804347826086957, "endMs": "1665776441135", "id": "4", "inputStages": [ "3" ], "name": "S04: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "440", "recordsWritten": "89", "shuffleOutputBytes": "4993", "shuffleOutputBytesSpilled": "0", "slotMs": "12", "startMs": "1665776441125", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$72, $71, $70, $40", "FROM __stage03_output" ] }, { "kind": "SORT", "substeps": [ "$80 ASC, $30 DESC, $82 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $80 := $70, $81 := $71, $82 := $72", "$30 := SUM($40)" ] }, { "kind": "WRITE", "substeps": [ "$90, $91, $92, $93", "TO __stage04_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005434782608695652, "waitRatioMax": 0.005434782608695652, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.005434782608695652, "writeRatioMax": 0.005434782608695652 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.043478260869565216, "computeRatioMax": 0.043478260869565216, "endMs": "1665776441175", "id": "5", "inputStages": [ "4" ], "name": "S05: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "89", "recordsWritten": "89", "shuffleOutputBytes": "4993", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665776441143", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90, $91, $92, $93", "FROM __stage04_output" ] }, { "kind": "SORT", "substeps": [ "$92 ASC, $93 DESC, $90 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$100, $101, $102, $103", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005434782608695652, "waitRatioMax": 0.005434782608695652, "writeMsAvg": "25", "writeMsMax": "25", "writeRatioAvg": 0.1358695652173913, "writeRatioMax": 0.1358695652173913 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "10", "elapsedMs": "454", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "1280" } ], "totalBytesBilled": "92274688", "totalBytesProcessed": "91558285", "totalPartitionsProcessed": "0", "totalSlotMs": "1280", "transferredBytes": "0" }, "startTime": "1665776440790", "totalBytesProcessed": "91558285", "totalSlotMs": "1280" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon3fd76f57_222e_420f_a787_0266aee2208e" }, "priority": "INTERACTIVE", "query": "-- start query 3 in stream 0 using template query3.tpl\nselect dt.d_year \n ,item.i_brand_id brand_id \n ,item.i_brand brand\n ,sum(ss_ext_sales_price) sum_agg\n from date_dim dt \n ,store_sales\n ,item\n where dt.d_date_sk = store_sales.ss_sold_date_sk\n and store_sales.ss_item_sk = item.i_item_sk\n and item.i_manufact_id = 128\n and dt.d_moy=11\n group by dt.d_year\n ,item.i_brand\n ,item.i_brand_id\n order by dt.d_year\n ,sum_agg desc\n ,brand_id\n limit 100\n ;\n\n-- end query 3 in stream 0 using template query3.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "yf7COnkoCwoEsLuj/afh1g==", "id": "test-project-364309:europe-west1.query03_1665776700", "jobReference": { "jobId": "query03_1665776700", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query03_1665776700?location=europe-west1", "statistics": { "creationTime": "1665776701012", "endTime": "1665776701680", "finalExecutionDurationMs": "312", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "91558285", "performanceInsights": { "avgPreviousExecutionMs": "322" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.06629834254143646, "computeRatioMax": 0.06629834254143646, "endMs": "1665776701291", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.03867403314917127, "readRatioMax": 0.03867403314917127, "recordsRead": "18000", "recordsWritten": "39", "shuffleOutputBytes": "1539", "shuffleOutputBytesSpilled": "0", "slotMs": "41", "startMs": "1665776701255", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_sk, $11:i_brand_id, $12:i_brand, $13:i_manufact_id", "FROM item", "WHERE equal($13, 128)" ] }, { "kind": "WRITE", "substeps": [ "$10, $11, $12", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0055248618784530384, "waitRatioMax": 0.0055248618784530384, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.04419889502762431, "writeRatioMax": 0.04419889502762431 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.0718232044198895, "computeRatioMax": 0.0718232044198895, "endMs": "1665776701323", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.03314917127071823, "readRatioMax": 0.03314917127071823, "recordsRead": "73049", "recordsWritten": "6000", "shuffleOutputBytes": "108000", "shuffleOutputBytesSpilled": "0", "slotMs": "45", "startMs": "1665776701284", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:d_date_sk, $21:d_year, $22:d_moy", "FROM date_dim", "WHERE equal($22, 11)" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0055248618784530384, "waitRatioMax": 0.0055248618784530384, "writeMsAvg": "12", "writeMsMax": "12", "writeRatioAvg": 0.06629834254143646, "writeRatioMax": 0.06629834254143646 }, { "completedParallelInputs": "6", "computeMsAvg": "133", "computeMsMax": "181", "computeRatioAvg": 0.7348066298342542, "computeRatioMax": 1, "endMs": "1665776701459", "id": "3", "inputStages": [ "2", "0" ], "name": "S03: Join+", "parallelInputs": "6", "readMsAvg": "16", "readMsMax": "22", "readRatioAvg": 0.08839779005524862, "readRatioMax": 0.12154696132596685, "recordsRead": "2916638", "recordsWritten": "440", "shuffleOutputBytes": "24653", "shuffleOutputBytesSpilled": "0", "slotMs": "854", "startMs": "1665776701333", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:ss_sold_date_sk, $2:ss_item_sk, $3:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$10, $11, $12", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $70 := $61, $71 := $63, $72 := $62", "$40 := SUM($60)" ] }, { "kind": "JOIN", "substeps": [ "$60 := $52, $61 := $50, $62 := $11, $63 := $12", "INNER HASH JOIN EACH WITH ALL ON $51 = $10" ] }, { "kind": "JOIN", "substeps": [ "$51 := $2, $52 := $3, $50 := $21", "INNER HASH JOIN EACH WITH ALL ON $1 = $20" ] }, { "kind": "WRITE", "substeps": [ "$72, $71, $70, $40", "TO __stage03_output", "BY HASH($70, $71, $72)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0055248618784530384, "waitRatioMax": 0.0055248618784530384, "writeMsAvg": "5", "writeMsMax": "8", "writeRatioAvg": 0.027624309392265192, "writeRatioMax": 0.04419889502762431 }, { "completedParallelInputs": "1", "computeMsAvg": "6", "computeMsMax": "6", "computeRatioAvg": 0.03314917127071823, "computeRatioMax": 0.03314917127071823, "endMs": "1665776701480", "id": "4", "inputStages": [ "3" ], "name": "S04: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "440", "recordsWritten": "89", "shuffleOutputBytes": "4993", "shuffleOutputBytesSpilled": "0", "slotMs": "11", "startMs": "1665776701470", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$72, $71, $70, $40", "FROM __stage03_output" ] }, { "kind": "SORT", "substeps": [ "$80 ASC, $30 DESC, $82 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $80 := $70, $81 := $71, $82 := $72", "$30 := SUM($40)" ] }, { "kind": "WRITE", "substeps": [ "$90, $91, $92, $93", "TO __stage04_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0055248618784530384, "waitRatioMax": 0.0055248618784530384, "writeMsAvg": "0", "writeMsMax": "0", "writeRatioAvg": 0, "writeRatioMax": 0 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.055248618784530384, "computeRatioMax": 0.055248618784530384, "endMs": "1665776701527", "id": "5", "inputStages": [ "4" ], "name": "S05: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "89", "recordsWritten": "89", "shuffleOutputBytes": "4993", "shuffleOutputBytesSpilled": "0", "slotMs": "41", "startMs": "1665776701489", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90, $91, $92, $93", "FROM __stage04_output" ] }, { "kind": "SORT", "substeps": [ "$92 ASC, $93 DESC, $90 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$100, $101, $102, $103", "TO __stage05_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.011049723756906077, "waitRatioMax": 0.011049723756906077, "writeMsAvg": "18", "writeMsMax": "18", "writeRatioAvg": 0.09944751381215469, "writeRatioMax": 0.09944751381215469 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "10", "elapsedMs": "494", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "995" } ], "totalBytesBilled": "92274688", "totalBytesProcessed": "91558285", "totalPartitionsProcessed": "0", "totalSlotMs": "995", "transferredBytes": "0" }, "startTime": "1665776701123", "totalBytesProcessed": "91558285", "totalSlotMs": "995" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon3f6dd640_50a0_4ea8_9c20_608b95610673" }, "priority": "INTERACTIVE", "query": "-- start query 3 in stream 0 using template query3.tpl\nselect dt.d_year \n ,item.i_brand_id brand_id \n ,item.i_brand brand\n ,sum(ss_ext_sales_price) sum_agg\n from date_dim dt \n ,store_sales\n ,item\n where dt.d_date_sk = store_sales.ss_sold_date_sk\n and store_sales.ss_item_sk = item.i_item_sk\n and item.i_manufact_id = 128\n and dt.d_moy=11\n group by dt.d_year\n ,item.i_brand\n ,item.i_brand_id\n order by dt.d_year\n ,sum_agg desc\n ,brand_id\n limit 100\n ;\n\n-- end query 3 in stream 0 using template query3.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "+93Y1yibgkOaWuiGRyHQLw==", "id": "test-project-364309:europe-west1.query03_1665776702", "jobReference": { "jobId": "query03_1665776702", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query03_1665776702?location=europe-west1", "statistics": { "creationTime": "1665776703372", "endTime": "1665776703935", "finalExecutionDurationMs": "293", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "91558285", "performanceInsights": { "avgPreviousExecutionMs": "322" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.06521739130434782, "computeRatioMax": 0.06521739130434782, "endMs": "1665776703558", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.036231884057971016, "readRatioMax": 0.036231884057971016, "recordsRead": "18000", "recordsWritten": "39", "shuffleOutputBytes": "1539", "shuffleOutputBytesSpilled": "0", "slotMs": "37", "startMs": "1665776703523", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_sk, $11:i_brand_id, $12:i_brand, $13:i_manufact_id", "FROM item", "WHERE equal($13, 128)" ] }, { "kind": "WRITE", "substeps": [ "$10, $11, $12", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007246376811594203, "waitRatioMax": 0.007246376811594203, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.057971014492753624, "writeRatioMax": 0.057971014492753624 }, { "completedParallelInputs": "1", "computeMsAvg": "17", "computeMsMax": "17", "computeRatioAvg": 0.12318840579710146, "computeRatioMax": 0.12318840579710146, "endMs": "1665776703583", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.07246376811594203, "readRatioMax": 0.07246376811594203, "recordsRead": "73049", "recordsWritten": "6000", "shuffleOutputBytes": "108000", "shuffleOutputBytesSpilled": "0", "slotMs": "35", "startMs": "1665776703551", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:d_date_sk, $21:d_year, $22:d_moy", "FROM date_dim", "WHERE equal($22, 11)" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007246376811594203, "waitRatioMax": 0.007246376811594203, "writeMsAvg": "9", "writeMsMax": "9", "writeRatioAvg": 0.06521739130434782, "writeRatioMax": 0.06521739130434782 }, { "completedParallelInputs": "6", "computeMsAvg": "121", "computeMsMax": "138", "computeRatioAvg": 0.8768115942028986, "computeRatioMax": 1, "endMs": "1665776703715", "id": "3", "inputStages": [ "2", "0" ], "name": "S03: Join+", "parallelInputs": "6", "readMsAvg": "16", "readMsMax": "23", "readRatioAvg": 0.11594202898550725, "readRatioMax": 0.16666666666666666, "recordsRead": "2916638", "recordsWritten": "440", "shuffleOutputBytes": "24653", "shuffleOutputBytesSpilled": "0", "slotMs": "825", "startMs": "1665776703587", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:ss_sold_date_sk, $2:ss_item_sk, $3:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$10, $11, $12", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $70 := $61, $71 := $63, $72 := $62", "$40 := SUM($60)" ] }, { "kind": "JOIN", "substeps": [ "$60 := $52, $61 := $50, $62 := $11, $63 := $12", "INNER HASH JOIN EACH WITH ALL ON $51 = $10" ] }, { "kind": "JOIN", "substeps": [ "$51 := $2, $52 := $3, $50 := $21", "INNER HASH JOIN EACH WITH ALL ON $1 = $20" ] }, { "kind": "WRITE", "substeps": [ "$72, $71, $70, $40", "TO __stage03_output", "BY HASH($70, $71, $72)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007246376811594203, "waitRatioMax": 0.007246376811594203, "writeMsAvg": "5", "writeMsMax": "6", "writeRatioAvg": 0.036231884057971016, "writeRatioMax": 0.043478260869565216 }, { "completedParallelInputs": "1", "computeMsAvg": "6", "computeMsMax": "6", "computeRatioAvg": 0.043478260869565216, "computeRatioMax": 0.043478260869565216, "endMs": "1665776703741", "id": "4", "inputStages": [ "3" ], "name": "S04: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "440", "recordsWritten": "89", "shuffleOutputBytes": "4993", "shuffleOutputBytesSpilled": "0", "slotMs": "10", "startMs": "1665776703729", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$72, $71, $70, $40", "FROM __stage03_output" ] }, { "kind": "SORT", "substeps": [ "$80 ASC, $30 DESC, $82 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $80 := $70, $81 := $71, $82 := $72", "$30 := SUM($40)" ] }, { "kind": "WRITE", "substeps": [ "$90, $91, $92, $93", "TO __stage04_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007246376811594203, "waitRatioMax": 0.007246376811594203, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.007246376811594203, "writeRatioMax": 0.007246376811594203 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.07971014492753623, "computeRatioMax": 0.07971014492753623, "endMs": "1665776703785", "id": "5", "inputStages": [ "4" ], "name": "S05: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "89", "recordsWritten": "89", "shuffleOutputBytes": "4993", "shuffleOutputBytesSpilled": "0", "slotMs": "38", "startMs": "1665776703741", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90, $91, $92, $93", "FROM __stage04_output" ] }, { "kind": "SORT", "substeps": [ "$92 ASC, $93 DESC, $90 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$100, $101, $102, $103", "TO __stage05_output" ] } ], "waitMsAvg": "0", "waitMsMax": "0", "waitRatioAvg": 0, "waitRatioMax": 0, "writeMsAvg": "20", "writeMsMax": "20", "writeRatioAvg": 0.14492753623188406, "writeRatioMax": 0.14492753623188406 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "10", "elapsedMs": "451", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "946" } ], "totalBytesBilled": "92274688", "totalBytesProcessed": "91558285", "totalPartitionsProcessed": "0", "totalSlotMs": "946", "transferredBytes": "0" }, "startTime": "1665776703424", "totalBytesProcessed": "91558285", "totalSlotMs": "946" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anonbb4fccd1_6a6d_436c_8da8_1f22bea23c71" }, "priority": "INTERACTIVE", "query": "-- start query 3 in stream 0 using template query3.tpl\nselect dt.d_year \n ,item.i_brand_id brand_id \n ,item.i_brand brand\n ,sum(ss_ext_sales_price) sum_agg\n from date_dim dt \n ,store_sales\n ,item\n where dt.d_date_sk = store_sales.ss_sold_date_sk\n and store_sales.ss_item_sk = item.i_item_sk\n and item.i_manufact_id = 128\n and dt.d_moy=11\n group by dt.d_year\n ,item.i_brand\n ,item.i_brand_id\n order by dt.d_year\n ,sum_agg desc\n ,brand_id\n limit 100\n ;\n\n-- end query 3 in stream 0 using template query3.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "3KWDaI39IqWTRKuE1y6r3A==", "id": "test-project-364309:europe-west1.query03_1665776705", "jobReference": { "jobId": "query03_1665776705", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query03_1665776705?location=europe-west1", "statistics": { "creationTime": "1665776705668", "endTime": "1665776706337", "finalExecutionDurationMs": "469", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "91558285", "performanceInsights": { "avgPreviousExecutionMs": "321" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.06711409395973154, "computeRatioMax": 0.06711409395973154, "endMs": "1665776705853", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.040268456375838924, "readRatioMax": 0.040268456375838924, "recordsRead": "18000", "recordsWritten": "39", "shuffleOutputBytes": "1539", "shuffleOutputBytesSpilled": "0", "slotMs": "35", "startMs": "1665776705817", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_sk, $11:i_brand_id, $12:i_brand, $13:i_manufact_id", "FROM item", "WHERE equal($13, 128)" ] }, { "kind": "WRITE", "substeps": [ "$10, $11, $12", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.006711409395973154, "waitRatioMax": 0.006711409395973154, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.04697986577181208, "writeRatioMax": 0.04697986577181208 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.10067114093959731, "computeRatioMax": 0.10067114093959731, "endMs": "1665776706066", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.04697986577181208, "readRatioMax": 0.04697986577181208, "recordsRead": "73049", "recordsWritten": "6000", "shuffleOutputBytes": "108000", "shuffleOutputBytesSpilled": "0", "slotMs": "54", "startMs": "1665776706013", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:d_date_sk, $21:d_year, $22:d_moy", "FROM date_dim", "WHERE equal($22, 11)" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage02_output" ] } ], "waitMsAvg": "149", "waitMsMax": "149", "waitRatioAvg": 1, "waitRatioMax": 1, "writeMsAvg": "23", "writeMsMax": "23", "writeRatioAvg": 0.15436241610738255, "writeRatioMax": 0.15436241610738255 }, { "completedParallelInputs": "6", "computeMsAvg": "134", "computeMsMax": "148", "computeRatioAvg": 0.8993288590604027, "computeRatioMax": 0.9932885906040269, "endMs": "1665776706181", "id": "3", "inputStages": [ "2", "0" ], "name": "S03: Join+", "parallelInputs": "6", "readMsAvg": "14", "readMsMax": "16", "readRatioAvg": 0.09395973154362416, "readRatioMax": 0.10738255033557047, "recordsRead": "2916638", "recordsWritten": "440", "shuffleOutputBytes": "24653", "shuffleOutputBytesSpilled": "0", "slotMs": "822", "startMs": "1665776706074", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:ss_sold_date_sk, $2:ss_item_sk, $3:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$10, $11, $12", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $70 := $61, $71 := $63, $72 := $62", "$40 := SUM($60)" ] }, { "kind": "JOIN", "substeps": [ "$60 := $52, $61 := $50, $62 := $11, $63 := $12", "INNER HASH JOIN EACH WITH ALL ON $51 = $10" ] }, { "kind": "JOIN", "substeps": [ "$51 := $2, $52 := $3, $50 := $21", "INNER HASH JOIN EACH WITH ALL ON $1 = $20" ] }, { "kind": "WRITE", "substeps": [ "$72, $71, $70, $40", "TO __stage03_output", "BY HASH($70, $71, $72)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.006711409395973154, "waitRatioMax": 0.006711409395973154, "writeMsAvg": "4", "writeMsMax": "5", "writeRatioAvg": 0.026845637583892617, "writeRatioMax": 0.03355704697986577 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.06040268456375839, "computeRatioMax": 0.06040268456375839, "endMs": "1665776706205", "id": "4", "inputStages": [ "3" ], "name": "S04: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "440", "recordsWritten": "89", "shuffleOutputBytes": "4993", "shuffleOutputBytesSpilled": "0", "slotMs": "16", "startMs": "1665776706189", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$72, $71, $70, $40", "FROM __stage03_output" ] }, { "kind": "SORT", "substeps": [ "$80 ASC, $30 DESC, $82 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $80 := $70, $81 := $71, $82 := $72", "$30 := SUM($40)" ] }, { "kind": "WRITE", "substeps": [ "$90, $91, $92, $93", "TO __stage04_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.006711409395973154, "waitRatioMax": 0.006711409395973154, "writeMsAvg": "2", "writeMsMax": "2", "writeRatioAvg": 0.013422818791946308, "writeRatioMax": 0.013422818791946308 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.06040268456375839, "computeRatioMax": 0.06040268456375839, "endMs": "1665776706244", "id": "5", "inputStages": [ "4" ], "name": "S05: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "89", "recordsWritten": "89", "shuffleOutputBytes": "4993", "shuffleOutputBytesSpilled": "0", "slotMs": "39", "startMs": "1665776706207", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90, $91, $92, $93", "FROM __stage04_output" ] }, { "kind": "SORT", "substeps": [ "$92 ASC, $93 DESC, $90 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$100, $101, $102, $103", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.006711409395973154, "waitRatioMax": 0.006711409395973154, "writeMsAvg": "17", "writeMsMax": "17", "writeRatioAvg": 0.11409395973154363, "writeRatioMax": 0.11409395973154363 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "10", "elapsedMs": "564", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2295" } ], "totalBytesBilled": "92274688", "totalBytesProcessed": "91558285", "totalPartitionsProcessed": "0", "totalSlotMs": "2295", "transferredBytes": "0" }, "startTime": "1665776705715", "totalBytesProcessed": "91558285", "totalSlotMs": "2295" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon565dc3df_2bbe_43be_af3e_7cd7faf80d92" }, "priority": "INTERACTIVE", "query": "-- start query 3 in stream 0 using template query3.tpl\nselect dt.d_year \n ,item.i_brand_id brand_id \n ,item.i_brand brand\n ,sum(ss_ext_sales_price) sum_agg\n from date_dim dt \n ,store_sales\n ,item\n where dt.d_date_sk = store_sales.ss_sold_date_sk\n and store_sales.ss_item_sk = item.i_item_sk\n and item.i_manufact_id = 128\n and dt.d_moy=11\n group by dt.d_year\n ,item.i_brand\n ,item.i_brand_id\n order by dt.d_year\n ,sum_agg desc\n ,brand_id\n limit 100\n ;\n\n-- end query 3 in stream 0 using template query3.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "xMi7AU6rgXZlEE5NLe4OLA==", "id": "test-project-364309:europe-west1.query03_1665776707", "jobReference": { "jobId": "query03_1665776707", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query03_1665776707?location=europe-west1", "statistics": { "creationTime": "1665776707939", "endTime": "1665776708487", "finalExecutionDurationMs": "293", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "91558285", "performanceInsights": { "avgPreviousExecutionMs": "327" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "18", "computeMsMax": "18", "computeRatioAvg": 0.10344827586206896, "computeRatioMax": 0.10344827586206896, "endMs": "1665776708106", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "13", "readMsMax": "13", "readRatioAvg": 0.07471264367816093, "readRatioMax": 0.07471264367816093, "recordsRead": "18000", "recordsWritten": "39", "shuffleOutputBytes": "1539", "shuffleOutputBytesSpilled": "0", "slotMs": "47", "startMs": "1665776708070", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_sk, $11:i_brand_id, $12:i_brand, $13:i_manufact_id", "FROM item", "WHERE equal($13, 128)" ] }, { "kind": "WRITE", "substeps": [ "$10, $11, $12", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005747126436781609, "waitRatioMax": 0.005747126436781609, "writeMsAvg": "10", "writeMsMax": "10", "writeRatioAvg": 0.05747126436781609, "writeRatioMax": 0.05747126436781609 }, { "completedParallelInputs": "1", "computeMsAvg": "17", "computeMsMax": "17", "computeRatioAvg": 0.09770114942528736, "computeRatioMax": 0.09770114942528736, "endMs": "1665776708136", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "13", "readMsMax": "13", "readRatioAvg": 0.07471264367816093, "readRatioMax": 0.07471264367816093, "recordsRead": "73049", "recordsWritten": "6000", "shuffleOutputBytes": "108000", "shuffleOutputBytesSpilled": "0", "slotMs": "43", "startMs": "1665776708098", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:d_date_sk, $21:d_year, $22:d_moy", "FROM date_dim", "WHERE equal($22, 11)" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005747126436781609, "waitRatioMax": 0.005747126436781609, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.07471264367816093, "writeRatioMax": 0.07471264367816093 }, { "completedParallelInputs": "6", "computeMsAvg": "130", "computeMsMax": "174", "computeRatioAvg": 0.7471264367816092, "computeRatioMax": 1, "endMs": "1665776708270", "id": "3", "inputStages": [ "2", "0" ], "name": "S03: Join+", "parallelInputs": "6", "readMsAvg": "13", "readMsMax": "17", "readRatioAvg": 0.07471264367816093, "readRatioMax": 0.09770114942528736, "recordsRead": "2916638", "recordsWritten": "440", "shuffleOutputBytes": "24653", "shuffleOutputBytesSpilled": "0", "slotMs": "771", "startMs": "1665776708153", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:ss_sold_date_sk, $2:ss_item_sk, $3:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$10, $11, $12", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $70 := $61, $71 := $63, $72 := $62", "$40 := SUM($60)" ] }, { "kind": "JOIN", "substeps": [ "$60 := $52, $61 := $50, $62 := $11, $63 := $12", "INNER HASH JOIN EACH WITH ALL ON $51 = $10" ] }, { "kind": "JOIN", "substeps": [ "$51 := $2, $52 := $3, $50 := $21", "INNER HASH JOIN EACH WITH ALL ON $1 = $20" ] }, { "kind": "WRITE", "substeps": [ "$72, $71, $70, $40", "TO __stage03_output", "BY HASH($70, $71, $72)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005747126436781609, "waitRatioMax": 0.005747126436781609, "writeMsAvg": "5", "writeMsMax": "6", "writeRatioAvg": 0.028735632183908046, "writeRatioMax": 0.034482758620689655 }, { "completedParallelInputs": "1", "computeMsAvg": "4", "computeMsMax": "4", "computeRatioAvg": 0.022988505747126436, "computeRatioMax": 0.022988505747126436, "endMs": "1665776708288", "id": "4", "inputStages": [ "3" ], "name": "S04: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "440", "recordsWritten": "89", "shuffleOutputBytes": "4993", "shuffleOutputBytesSpilled": "0", "slotMs": "9", "startMs": "1665776708280", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$72, $71, $70, $40", "FROM __stage03_output" ] }, { "kind": "SORT", "substeps": [ "$80 ASC, $30 DESC, $82 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $80 := $70, $81 := $71, $82 := $72", "$30 := SUM($40)" ] }, { "kind": "WRITE", "substeps": [ "$90, $91, $92, $93", "TO __stage04_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005747126436781609, "waitRatioMax": 0.005747126436781609, "writeMsAvg": "0", "writeMsMax": "0", "writeRatioAvg": 0, "writeRatioMax": 0 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.05747126436781609, "computeRatioMax": 0.05747126436781609, "endMs": "1665776708334", "id": "5", "inputStages": [ "4" ], "name": "S05: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "89", "recordsWritten": "89", "shuffleOutputBytes": "4993", "shuffleOutputBytesSpilled": "0", "slotMs": "39", "startMs": "1665776708297", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90, $91, $92, $93", "FROM __stage04_output" ] }, { "kind": "SORT", "substeps": [ "$92 ASC, $93 DESC, $90 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$100, $101, $102, $103", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.005747126436781609, "waitRatioMax": 0.005747126436781609, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.08045977011494253, "writeRatioMax": 0.08045977011494253 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "10", "elapsedMs": "440", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "911" } ], "totalBytesBilled": "92274688", "totalBytesProcessed": "91558285", "totalPartitionsProcessed": "0", "totalSlotMs": "911", "transferredBytes": "0" }, "startTime": "1665776707992", "totalBytesProcessed": "91558285", "totalSlotMs": "911" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anondc1127d2_10a6_427f_b2e5_8e994bc1c139" }, "priority": "INTERACTIVE", "query": "-- start query 3 in stream 0 using template query3.tpl\nselect dt.d_year \n ,item.i_brand_id brand_id \n ,item.i_brand brand\n ,sum(ss_ext_sales_price) sum_agg\n from date_dim dt \n ,store_sales\n ,item\n where dt.d_date_sk = store_sales.ss_sold_date_sk\n and store_sales.ss_item_sk = item.i_item_sk\n and item.i_manufact_id = 128\n and dt.d_moy=11\n group by dt.d_year\n ,item.i_brand\n ,item.i_brand_id\n order by dt.d_year\n ,sum_agg desc\n ,brand_id\n limit 100\n ;\n\n-- end query 3 in stream 0 using template query3.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "NwxBqCqr5HhWkjJ4wvJlpQ==", "id": "test-project-364309:europe-west1.query03_1665776709", "jobReference": { "jobId": "query03_1665776709", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query03_1665776709?location=europe-west1", "statistics": { "creationTime": "1665776710085", "endTime": "1665776710669", "finalExecutionDurationMs": "381", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "91558285", "performanceInsights": { "avgPreviousExecutionMs": "325" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.060109289617486336, "computeRatioMax": 0.060109289617486336, "endMs": "1665776710285", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.03825136612021858, "readRatioMax": 0.03825136612021858, "recordsRead": "18000", "recordsWritten": "39", "shuffleOutputBytes": "1539", "shuffleOutputBytesSpilled": "0", "slotMs": "46", "startMs": "1665776710250", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_sk, $11:i_brand_id, $12:i_brand, $13:i_manufact_id", "FROM item", "WHERE equal($13, 128)" ] }, { "kind": "WRITE", "substeps": [ "$10, $11, $12", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00546448087431694, "waitRatioMax": 0.00546448087431694, "writeMsAvg": "19", "writeMsMax": "19", "writeRatioAvg": 0.10382513661202186, "writeRatioMax": 0.10382513661202186 }, { "completedParallelInputs": "1", "computeMsAvg": "21", "computeMsMax": "21", "computeRatioAvg": 0.11475409836065574, "computeRatioMax": 0.11475409836065574, "endMs": "1665776710345", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.0546448087431694, "readRatioMax": 0.0546448087431694, "recordsRead": "73049", "recordsWritten": "6000", "shuffleOutputBytes": "108000", "shuffleOutputBytesSpilled": "0", "slotMs": "65", "startMs": "1665776710291", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:d_date_sk, $21:d_year, $22:d_moy", "FROM date_dim", "WHERE equal($22, 11)" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00546448087431694, "waitRatioMax": 0.00546448087431694, "writeMsAvg": "17", "writeMsMax": "17", "writeRatioAvg": 0.09289617486338798, "writeRatioMax": 0.09289617486338798 }, { "completedParallelInputs": "6", "computeMsAvg": "140", "computeMsMax": "183", "computeRatioAvg": 0.7650273224043715, "computeRatioMax": 1, "endMs": "1665776710520", "id": "3", "inputStages": [ "2", "0" ], "name": "S03: Join+", "parallelInputs": "6", "readMsAvg": "18", "readMsMax": "30", "readRatioAvg": 0.09836065573770492, "readRatioMax": 0.16393442622950818, "recordsRead": "2916638", "recordsWritten": "440", "shuffleOutputBytes": "24653", "shuffleOutputBytesSpilled": "0", "slotMs": "959", "startMs": "1665776710369", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:ss_sold_date_sk, $2:ss_item_sk, $3:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$10, $11, $12", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $70 := $61, $71 := $63, $72 := $62", "$40 := SUM($60)" ] }, { "kind": "JOIN", "substeps": [ "$60 := $52, $61 := $50, $62 := $11, $63 := $12", "INNER HASH JOIN EACH WITH ALL ON $51 = $10" ] }, { "kind": "JOIN", "substeps": [ "$51 := $2, $52 := $3, $50 := $21", "INNER HASH JOIN EACH WITH ALL ON $1 = $20" ] }, { "kind": "WRITE", "substeps": [ "$72, $71, $70, $40", "TO __stage03_output", "BY HASH($70, $71, $72)" ] } ], "waitMsAvg": "7", "waitMsMax": "38", "waitRatioAvg": 0.03825136612021858, "waitRatioMax": 0.20765027322404372, "writeMsAvg": "5", "writeMsMax": "9", "writeRatioAvg": 0.0273224043715847, "writeRatioMax": 0.04918032786885246 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.03825136612021858, "computeRatioMax": 0.03825136612021858, "endMs": "1665776710542", "id": "4", "inputStages": [ "3" ], "name": "S04: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "440", "recordsWritten": "89", "shuffleOutputBytes": "4993", "shuffleOutputBytesSpilled": "0", "slotMs": "12", "startMs": "1665776710531", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$72, $71, $70, $40", "FROM __stage03_output" ] }, { "kind": "SORT", "substeps": [ "$80 ASC, $30 DESC, $82 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $80 := $70, $81 := $71, $82 := $72", "$30 := SUM($40)" ] }, { "kind": "WRITE", "substeps": [ "$90, $91, $92, $93", "TO __stage04_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00546448087431694, "waitRatioMax": 0.00546448087431694, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.00546448087431694, "writeRatioMax": 0.00546448087431694 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.07103825136612021, "computeRatioMax": 0.07103825136612021, "endMs": "1665776710590", "id": "5", "inputStages": [ "4" ], "name": "S05: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "89", "recordsWritten": "89", "shuffleOutputBytes": "4993", "shuffleOutputBytesSpilled": "0", "slotMs": "49", "startMs": "1665776710552", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90, $91, $92, $93", "FROM __stage04_output" ] }, { "kind": "SORT", "substeps": [ "$92 ASC, $93 DESC, $90 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$100, $101, $102, $103", "TO __stage05_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.01092896174863388, "waitRatioMax": 0.01092896174863388, "writeMsAvg": "27", "writeMsMax": "27", "writeRatioAvg": 0.14754098360655737, "writeRatioMax": 0.14754098360655737 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "10", "elapsedMs": "472", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "1245" } ], "totalBytesBilled": "92274688", "totalBytesProcessed": "91558285", "totalPartitionsProcessed": "0", "totalSlotMs": "1245", "transferredBytes": "0" }, "startTime": "1665776710145", "totalBytesProcessed": "91558285", "totalSlotMs": "1245" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
