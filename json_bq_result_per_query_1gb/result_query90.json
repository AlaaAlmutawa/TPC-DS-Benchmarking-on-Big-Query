{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anond6ceff48_c1b4_4dec_8a48_1509c2ba481e" }, "priority": "INTERACTIVE", "query": "-- start query 90 in stream 0 using template query90.tpl\nselect amc/pmc as am_pm_ratio\n from ( select count(*) amc\n from web_sales, household_demographics , time_dim, web_page\n where ws_sold_time_sk = time_dim.t_time_sk\n and ws_ship_hdemo_sk = household_demographics.hd_demo_sk\n and ws_web_page_sk = web_page.wp_web_page_sk\n and time_dim.t_hour between 8 and 8+1\n and household_demographics.hd_dep_count = 6\n and web_page.wp_char_count between 5000 and 5200) am_time,\n ( select count(*) pmc\n from web_sales, household_demographics , time_dim, web_page\n where ws_sold_time_sk = time_dim.t_time_sk\n and ws_ship_hdemo_sk = household_demographics.hd_demo_sk\n and ws_web_page_sk = web_page.wp_web_page_sk\n and time_dim.t_hour between 19 and 19+1\n and household_demographics.hd_dep_count = 6\n and web_page.wp_char_count between 5000 and 5200) pm_time\n order by am_pm_ratio\n limit 100\n ;\n\n-- end query 90 in stream 0 using template query90.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "a1ZV7BAjcWq5A1jx8H3stQ==", "id": "test-project-364309:europe-west1.query90_1665768510", "jobReference": { "jobId": "query90_1665768510", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query90_1665768510?location=europe-west1", "statistics": { "creationTime": "1665768511227", "endTime": "1665768511806", "finalExecutionDurationMs": "321", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "18759448", "performanceInsights": { "avgPreviousExecutionMs": "332" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.0546875, "computeRatioMax": 0.0546875, "endMs": "1665768511417", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.0390625, "readRatioMax": 0.0390625, "recordsRead": "60", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "30", "startMs": "1665768511385", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:wp_web_page_sk, $11:wp_char_count", "FROM web_page", "WHERE between($11, 5000, 5200)" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0078125, "waitRatioMax": 0.0078125, "writeMsAvg": "20", "writeMsMax": "20", "writeRatioAvg": 0.15625, "writeRatioMax": 0.15625 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.1171875, "computeRatioMax": 0.1171875, "endMs": "1665768511451", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.046875, "readRatioMax": 0.046875, "recordsRead": "86400", "recordsWritten": "7200", "shuffleOutputBytes": "64800", "shuffleOutputBytesSpilled": "0", "slotMs": "48", "startMs": "1665768511402", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$50:t_time_sk, $51:t_hour", "FROM time_dim", "WHERE between($51, 19, 20)" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0078125, "waitRatioMax": 0.0078125, "writeMsAvg": "18", "writeMsMax": "18", "writeRatioAvg": 0.140625, "writeRatioMax": 0.140625 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.0703125, "computeRatioMax": 0.0703125, "endMs": "1665768511454", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.03125, "readRatioMax": 0.03125, "recordsRead": "7200", "recordsWritten": "720", "shuffleOutputBytes": "6480", "shuffleOutputBytesSpilled": "0", "slotMs": "35", "startMs": "1665768511417", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:hd_demo_sk, $71:hd_dep_count", "FROM household_demographics", "WHERE equal($71, 6)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0078125, "waitRatioMax": 0.0078125, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.1171875, "writeRatioMax": 0.1171875 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.0703125, "computeRatioMax": 0.0703125, "endMs": "1665768511489", "id": "4", "name": "S04: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.03125, "readRatioMax": 0.03125, "recordsRead": "60", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "37", "startMs": "1665768511447", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:wp_web_page_sk, $2:wp_char_count", "FROM web_page", "WHERE between($2, 5000, 5200)" ] }, { "kind": "WRITE", "substeps": [ "$1", "TO __stage04_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0078125, "waitRatioMax": 0.0078125, "writeMsAvg": "17", "writeMsMax": "17", "writeRatioAvg": 0.1328125, "writeRatioMax": 0.1328125 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.0703125, "computeRatioMax": 0.0703125, "endMs": "1665768511498", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.03125, "readRatioMax": 0.03125, "recordsRead": "86400", "recordsWritten": "7200", "shuffleOutputBytes": "64800", "shuffleOutputBytesSpilled": "0", "slotMs": "33", "startMs": "1665768511463", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:t_time_sk, $31:t_hour", "FROM time_dim", "WHERE between($31, 8, 9)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0078125, "waitRatioMax": 0.0078125, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.109375, "writeRatioMax": 0.109375 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.078125, "computeRatioMax": 0.078125, "endMs": "1665768511518", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.0390625, "readRatioMax": 0.0390625, "recordsRead": "7200", "recordsWritten": "720", "shuffleOutputBytes": "6480", "shuffleOutputBytesSpilled": "0", "slotMs": "38", "startMs": "1665768511477", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:hd_demo_sk, $61:hd_dep_count", "FROM household_demographics", "WHERE equal($61, 6)" ] }, { "kind": "WRITE", "substeps": [ "$60", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0078125, "waitRatioMax": 0.0078125, "writeMsAvg": "29", "writeMsMax": "29", "writeRatioAvg": 0.2265625, "writeRatioMax": 0.2265625 }, { "completedParallelInputs": "1", "computeMsAvg": "99", "computeMsMax": "99", "computeRatioAvg": 0.7734375, "computeRatioMax": 0.7734375, "endMs": "1665768511567", "id": "8", "inputStages": [ "1", "0", "2" ], "name": "S08: Join+", "parallelInputs": "1", "readMsAvg": "12", "readMsMax": "12", "readRatioAvg": 0.09375, "readRatioMax": 0.09375, "recordsRead": "727305", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "97", "startMs": "1665768511490", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:ws_sold_time_sk, $41:ws_ship_hdemo_sk, $42:ws_web_page_sk", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$50", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$120 := COUNT_STAR()" ] }, { "kind": "JOIN", "substeps": [ "INNER HASH JOIN EACH WITH ALL ON $170 = $10" ] }, { "kind": "JOIN", "substeps": [ "$170 := $161", "INNER HASH JOIN EACH WITH ALL ON $160 = $50" ] }, { "kind": "JOIN", "substeps": [ "$160 := $40, $161 := $42", "INNER HASH JOIN EACH WITH ALL ON $41 = $70" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage08_output" ] } ], "waitMsAvg": "0", "waitMsMax": "0", "waitRatioAvg": 0, "waitRatioMax": 0, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.0078125, "writeRatioMax": 0.0078125 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.0546875, "computeRatioMax": 0.0546875, "endMs": "1665768511575", "id": "9", "inputStages": [ "8" ], "name": "S09: Aggregate", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "57", "startMs": "1665768511492", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120", "FROM __stage08_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$100 := SUM_OF_COUNTS($120)" ] }, { "kind": "WRITE", "substeps": [ "$100", "TO __stage09_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0078125, "waitRatioMax": 0.0078125, "writeMsAvg": "3", "writeMsMax": "3", "writeRatioAvg": 0.0234375, "writeRatioMax": 0.0234375 }, { "completedParallelInputs": "1", "computeMsAvg": "128", "computeMsMax": "128", "computeRatioAvg": 1, "computeRatioMax": 1, "endMs": "1665768511599", "id": "10", "inputStages": [ "4", "6", "5" ], "name": "S0A: Join+", "parallelInputs": "1", "readMsAvg": "13", "readMsMax": "13", "readRatioAvg": 0.1015625, "readRatioMax": 0.1015625, "recordsRead": "727305", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "121", "startMs": "1665768511525", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:ws_sold_time_sk, $21:ws_ship_hdemo_sk, $22:ws_web_page_sk", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$60", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage05_output" ] }, { "kind": "READ", "substeps": [ "$1", "FROM __stage04_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$110 := COUNT_STAR()" ] }, { "kind": "JOIN", "substeps": [ "INNER HASH JOIN EACH WITH ALL ON $140 = $1" ] }, { "kind": "JOIN", "substeps": [ "$140 := $131", "INNER HASH JOIN EACH WITH ALL ON $130 = $30" ] }, { "kind": "JOIN", "substeps": [ "$130 := $20, $131 := $22", "INNER HASH JOIN EACH WITH ALL ON $21 = $60" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage0A_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0078125, "waitRatioMax": 0.0078125, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.0078125, "writeRatioMax": 0.0078125 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.0546875, "computeRatioMax": 0.0546875, "endMs": "1665768511605", "id": "11", "inputStages": [ "10" ], "name": "S0B: Aggregate", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "69", "startMs": "1665768511528", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$90 := SUM_OF_COUNTS($110)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage0B_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0078125, "waitRatioMax": 0.0078125, "writeMsAvg": "2", "writeMsMax": "2", "writeRatioAvg": 0.015625, "writeRatioMax": 0.015625 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.0703125, "computeRatioMax": 0.0703125, "endMs": "1665768511673", "id": "12", "inputStages": [ "9", "11" ], "name": "S0C: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "2", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665768511634", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$100", "FROM __stage09_output" ] }, { "kind": "SORT", "substeps": [ "$80 ASC", "LIMIT 100" ] }, { "kind": "COMPUTE", "substeps": [ "$80 := divide(CAST($180 AS DOUBLE), CAST($181 AS DOUBLE))" ] }, { "kind": "JOIN", "substeps": [ "$180 := $90, $181 := $100", "CROSS ALL WITH ALL " ] }, { "kind": "WRITE", "substeps": [ "$190", "TO __stage0C_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0078125, "waitRatioMax": 0.0078125, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.1015625, "writeRatioMax": 0.1015625 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "time_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_page" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "household_demographics" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "11", "elapsedMs": "462", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "604" } ], "totalBytesBilled": "41943040", "totalBytesProcessed": "18759448", "totalPartitionsProcessed": "0", "totalSlotMs": "604", "transferredBytes": "0" }, "startTime": "1665768511288", "totalBytesProcessed": "18759448", "totalSlotMs": "604" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon0b89cdd2_c013_4bc8_88ee_72610b59ed4f" }, "priority": "INTERACTIVE", "query": "-- start query 90 in stream 0 using template query90.tpl\nselect amc/pmc as am_pm_ratio\n from ( select count(*) amc\n from web_sales, household_demographics , time_dim, web_page\n where ws_sold_time_sk = time_dim.t_time_sk\n and ws_ship_hdemo_sk = household_demographics.hd_demo_sk\n and ws_web_page_sk = web_page.wp_web_page_sk\n and time_dim.t_hour between 8 and 8+1\n and household_demographics.hd_dep_count = 6\n and web_page.wp_char_count between 5000 and 5200) am_time,\n ( select count(*) pmc\n from web_sales, household_demographics , time_dim, web_page\n where ws_sold_time_sk = time_dim.t_time_sk\n and ws_ship_hdemo_sk = household_demographics.hd_demo_sk\n and ws_web_page_sk = web_page.wp_web_page_sk\n and time_dim.t_hour between 19 and 19+1\n and household_demographics.hd_dep_count = 6\n and web_page.wp_char_count between 5000 and 5200) pm_time\n order by am_pm_ratio\n limit 100\n ;\n\n-- end query 90 in stream 0 using template query90.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "ctD+GTPkZ9RcYpAijt9Ngg==", "id": "test-project-364309:europe-west1.query90_1665778784", "jobReference": { "jobId": "query90_1665778784", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query90_1665778784?location=europe-west1", "statistics": { "creationTime": "1665778784665", "endTime": "1665778785259", "finalExecutionDurationMs": "371", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "18759448", "performanceInsights": { "avgPreviousExecutionMs": "331" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.10377358490566038, "computeRatioMax": 0.10377358490566038, "endMs": "1665778784896", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.05660377358490566, "readRatioMax": 0.05660377358490566, "recordsRead": "60", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "54", "startMs": "1665778784840", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:wp_web_page_sk, $11:wp_char_count", "FROM web_page", "WHERE between($11, 5000, 5200)" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.009433962264150943, "waitRatioMax": 0.009433962264150943, "writeMsAvg": "29", "writeMsMax": "29", "writeRatioAvg": 0.27358490566037735, "writeRatioMax": 0.27358490566037735 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.1320754716981132, "computeRatioMax": 0.1320754716981132, "endMs": "1665778784902", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.05660377358490566, "readRatioMax": 0.05660377358490566, "recordsRead": "86400", "recordsWritten": "7200", "shuffleOutputBytes": "64800", "shuffleOutputBytesSpilled": "0", "slotMs": "37", "startMs": "1665778784855", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$50:t_time_sk, $51:t_hour", "FROM time_dim", "WHERE between($51, 19, 20)" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.009433962264150943, "waitRatioMax": 0.009433962264150943, "writeMsAvg": "17", "writeMsMax": "17", "writeRatioAvg": 0.16037735849056603, "writeRatioMax": 0.16037735849056603 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.08490566037735849, "computeRatioMax": 0.08490566037735849, "endMs": "1665778784912", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.04716981132075472, "readRatioMax": 0.04716981132075472, "recordsRead": "7200", "recordsWritten": "720", "shuffleOutputBytes": "6480", "shuffleOutputBytesSpilled": "0", "slotMs": "30", "startMs": "1665778784873", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:hd_demo_sk, $71:hd_dep_count", "FROM household_demographics", "WHERE equal($71, 6)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.009433962264150943, "waitRatioMax": 0.009433962264150943, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.1509433962264151, "writeRatioMax": 0.1509433962264151 }, { "completedParallelInputs": "1", "computeMsAvg": "5", "computeMsMax": "5", "computeRatioAvg": 0.04716981132075472, "computeRatioMax": 0.04716981132075472, "endMs": "1665778784949", "id": "4", "name": "S04: Input", "parallelInputs": "1", "readMsAvg": "3", "readMsMax": "3", "readRatioAvg": 0.02830188679245283, "readRatioMax": 0.02830188679245283, "recordsRead": "60", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "30", "startMs": "1665778784911", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:wp_web_page_sk, $2:wp_char_count", "FROM web_page", "WHERE between($2, 5000, 5200)" ] }, { "kind": "WRITE", "substeps": [ "$1", "TO __stage04_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.009433962264150943, "waitRatioMax": 0.009433962264150943, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.1509433962264151, "writeRatioMax": 0.1509433962264151 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.10377358490566038, "computeRatioMax": 0.10377358490566038, "endMs": "1665778784970", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.05660377358490566, "readRatioMax": 0.05660377358490566, "recordsRead": "86400", "recordsWritten": "7200", "shuffleOutputBytes": "64800", "shuffleOutputBytesSpilled": "0", "slotMs": "40", "startMs": "1665778784927", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:t_time_sk, $31:t_hour", "FROM time_dim", "WHERE between($31, 8, 9)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.009433962264150943, "waitRatioMax": 0.009433962264150943, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.1509433962264151, "writeRatioMax": 0.1509433962264151 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.09433962264150944, "computeRatioMax": 0.09433962264150944, "endMs": "1665778784987", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.05660377358490566, "readRatioMax": 0.05660377358490566, "recordsRead": "7200", "recordsWritten": "720", "shuffleOutputBytes": "6480", "shuffleOutputBytesSpilled": "0", "slotMs": "38", "startMs": "1665778784941", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:hd_demo_sk, $61:hd_dep_count", "FROM household_demographics", "WHERE equal($61, 6)" ] }, { "kind": "WRITE", "substeps": [ "$60", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.009433962264150943, "waitRatioMax": 0.009433962264150943, "writeMsAvg": "18", "writeMsMax": "18", "writeRatioAvg": 0.16981132075471697, "writeRatioMax": 0.16981132075471697 }, { "completedParallelInputs": "1", "computeMsAvg": "106", "computeMsMax": "106", "computeRatioAvg": 1, "computeRatioMax": 1, "endMs": "1665778785041", "id": "8", "inputStages": [ "1", "0", "2" ], "name": "S08: Join+", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.08490566037735849, "readRatioMax": 0.08490566037735849, "recordsRead": "727305", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "96", "startMs": "1665778784964", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:ws_sold_time_sk, $41:ws_ship_hdemo_sk, $42:ws_web_page_sk", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$50", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$120 := COUNT_STAR()" ] }, { "kind": "JOIN", "substeps": [ "INNER HASH JOIN EACH WITH ALL ON $170 = $10" ] }, { "kind": "JOIN", "substeps": [ "$170 := $161", "INNER HASH JOIN EACH WITH ALL ON $160 = $50" ] }, { "kind": "JOIN", "substeps": [ "$160 := $40, $161 := $42", "INNER HASH JOIN EACH WITH ALL ON $41 = $70" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage08_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.018867924528301886, "waitRatioMax": 0.018867924528301886, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.009433962264150943, "writeRatioMax": 0.009433962264150943 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.08490566037735849, "computeRatioMax": 0.08490566037735849, "endMs": "1665778785049", "id": "9", "inputStages": [ "8" ], "name": "S09: Aggregate", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "72", "startMs": "1665778784969", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120", "FROM __stage08_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$100 := SUM_OF_COUNTS($120)" ] }, { "kind": "WRITE", "substeps": [ "$100", "TO __stage09_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.018867924528301886, "waitRatioMax": 0.018867924528301886, "writeMsAvg": "5", "writeMsMax": "5", "writeRatioAvg": 0.04716981132075472, "writeRatioMax": 0.04716981132075472 }, { "completedParallelInputs": "1", "computeMsAvg": "86", "computeMsMax": "86", "computeRatioAvg": 0.8113207547169812, "computeRatioMax": 0.8113207547169812, "endMs": "1665778785071", "id": "10", "inputStages": [ "6", "4", "5" ], "name": "S0A: Join+", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.07547169811320754, "readRatioMax": 0.07547169811320754, "recordsRead": "727305", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "83", "startMs": "1665778785002", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:ws_sold_time_sk, $21:ws_ship_hdemo_sk, $22:ws_web_page_sk", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$60", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage05_output" ] }, { "kind": "READ", "substeps": [ "$1", "FROM __stage04_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$110 := COUNT_STAR()" ] }, { "kind": "JOIN", "substeps": [ "INNER HASH JOIN EACH WITH ALL ON $140 = $1" ] }, { "kind": "JOIN", "substeps": [ "$140 := $131", "INNER HASH JOIN EACH WITH ALL ON $130 = $30" ] }, { "kind": "JOIN", "substeps": [ "$130 := $20, $131 := $22", "INNER HASH JOIN EACH WITH ALL ON $21 = $60" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage0A_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.018867924528301886, "waitRatioMax": 0.018867924528301886, "writeMsAvg": "0", "writeMsMax": "0", "writeRatioAvg": 0, "writeRatioMax": 0 }, { "completedParallelInputs": "1", "computeMsAvg": "6", "computeMsMax": "6", "computeRatioAvg": 0.05660377358490566, "computeRatioMax": 0.05660377358490566, "endMs": "1665778785086", "id": "11", "inputStages": [ "10" ], "name": "S0B: Aggregate", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "69", "startMs": "1665778785004", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$90 := SUM_OF_COUNTS($110)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage0B_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.018867924528301886, "waitRatioMax": 0.018867924528301886, "writeMsAvg": "3", "writeMsMax": "3", "writeRatioAvg": 0.02830188679245283, "writeRatioMax": 0.02830188679245283 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.07547169811320754, "computeRatioMax": 0.07547169811320754, "endMs": "1665778785169", "id": "12", "inputStages": [ "9", "11" ], "name": "S0C: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "2", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "44", "startMs": "1665778785119", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$100", "FROM __stage09_output" ] }, { "kind": "SORT", "substeps": [ "$80 ASC", "LIMIT 100" ] }, { "kind": "COMPUTE", "substeps": [ "$80 := divide(CAST($180 AS DOUBLE), CAST($181 AS DOUBLE))" ] }, { "kind": "JOIN", "substeps": [ "$180 := $90, $181 := $100", "CROSS ALL WITH ALL " ] }, { "kind": "WRITE", "substeps": [ "$190", "TO __stage0C_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.009433962264150943, "waitRatioMax": 0.009433962264150943, "writeMsAvg": "27", "writeMsMax": "27", "writeRatioAvg": 0.25471698113207547, "writeRatioMax": 0.25471698113207547 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_page" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "household_demographics" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "time_dim" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "11", "elapsedMs": "465", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "598" } ], "totalBytesBilled": "41943040", "totalBytesProcessed": "18759448", "totalPartitionsProcessed": "0", "totalSlotMs": "598", "transferredBytes": "0" }, "startTime": "1665778784741", "totalBytesProcessed": "18759448", "totalSlotMs": "598" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anona7cbf1c1_bcd0_49a7_85c0_1ec8cf48c731" }, "priority": "INTERACTIVE", "query": "-- start query 90 in stream 0 using template query90.tpl\nselect amc/pmc as am_pm_ratio\n from ( select count(*) amc\n from web_sales, household_demographics , time_dim, web_page\n where ws_sold_time_sk = time_dim.t_time_sk\n and ws_ship_hdemo_sk = household_demographics.hd_demo_sk\n and ws_web_page_sk = web_page.wp_web_page_sk\n and time_dim.t_hour between 8 and 8+1\n and household_demographics.hd_dep_count = 6\n and web_page.wp_char_count between 5000 and 5200) am_time,\n ( select count(*) pmc\n from web_sales, household_demographics , time_dim, web_page\n where ws_sold_time_sk = time_dim.t_time_sk\n and ws_ship_hdemo_sk = household_demographics.hd_demo_sk\n and ws_web_page_sk = web_page.wp_web_page_sk\n and time_dim.t_hour between 19 and 19+1\n and household_demographics.hd_dep_count = 6\n and web_page.wp_char_count between 5000 and 5200) pm_time\n order by am_pm_ratio\n limit 100\n ;\n\n-- end query 90 in stream 0 using template query90.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "hlZUtcaSfusEqWzC1Nj29w==", "id": "test-project-364309:europe-west1.query90_1665778786", "jobReference": { "jobId": "query90_1665778786", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query90_1665778786?location=europe-west1", "statistics": { "creationTime": "1665778786837", "endTime": "1665778787388", "finalExecutionDurationMs": "374", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "18759448", "performanceInsights": { "avgPreviousExecutionMs": "336" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.06299212598425197, "computeRatioMax": 0.06299212598425197, "endMs": "1665778787020", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.07086614173228346, "readRatioMax": 0.07086614173228346, "recordsRead": "60", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "39", "startMs": "1665778786974", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:wp_web_page_sk, $11:wp_char_count", "FROM web_page", "WHERE between($11, 5000, 5200)" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007874015748031496, "waitRatioMax": 0.007874015748031496, "writeMsAvg": "17", "writeMsMax": "17", "writeRatioAvg": 0.13385826771653545, "writeRatioMax": 0.13385826771653545 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.11811023622047244, "computeRatioMax": 0.11811023622047244, "endMs": "1665778787038", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.05511811023622047, "readRatioMax": 0.05511811023622047, "recordsRead": "86400", "recordsWritten": "7200", "shuffleOutputBytes": "64800", "shuffleOutputBytesSpilled": "0", "slotMs": "43", "startMs": "1665778786993", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$50:t_time_sk, $51:t_hour", "FROM time_dim", "WHERE between($51, 19, 20)" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007874015748031496, "waitRatioMax": 0.007874015748031496, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.12598425196850394, "writeRatioMax": 0.12598425196850394 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.05511811023622047, "computeRatioMax": 0.05511811023622047, "endMs": "1665778787049", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.03937007874015748, "readRatioMax": 0.03937007874015748, "recordsRead": "7200", "recordsWritten": "720", "shuffleOutputBytes": "6480", "shuffleOutputBytesSpilled": "0", "slotMs": "27", "startMs": "1665778787013", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:hd_demo_sk, $71:hd_dep_count", "FROM household_demographics", "WHERE equal($71, 6)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007874015748031496, "waitRatioMax": 0.007874015748031496, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.11811023622047244, "writeRatioMax": 0.11811023622047244 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.05511811023622047, "computeRatioMax": 0.05511811023622047, "endMs": "1665778787089", "id": "4", "name": "S04: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.031496062992125984, "readRatioMax": 0.031496062992125984, "recordsRead": "60", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "35", "startMs": "1665778787047", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:wp_web_page_sk, $2:wp_char_count", "FROM web_page", "WHERE between($2, 5000, 5200)" ] }, { "kind": "WRITE", "substeps": [ "$1", "TO __stage04_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007874015748031496, "waitRatioMax": 0.007874015748031496, "writeMsAvg": "19", "writeMsMax": "19", "writeRatioAvg": 0.14960629921259844, "writeRatioMax": 0.14960629921259844 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.08661417322834646, "computeRatioMax": 0.08661417322834646, "endMs": "1665778787101", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.047244094488188976, "readRatioMax": 0.047244094488188976, "recordsRead": "86400", "recordsWritten": "7200", "shuffleOutputBytes": "64800", "shuffleOutputBytesSpilled": "0", "slotMs": "37", "startMs": "1665778787066", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:t_time_sk, $31:t_hour", "FROM time_dim", "WHERE between($31, 8, 9)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007874015748031496, "waitRatioMax": 0.007874015748031496, "writeMsAvg": "6", "writeMsMax": "6", "writeRatioAvg": 0.047244094488188976, "writeRatioMax": 0.047244094488188976 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.07874015748031496, "computeRatioMax": 0.07874015748031496, "endMs": "1665778787122", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.03937007874015748, "readRatioMax": 0.03937007874015748, "recordsRead": "7200", "recordsWritten": "720", "shuffleOutputBytes": "6480", "shuffleOutputBytesSpilled": "0", "slotMs": "40", "startMs": "1665778787080", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:hd_demo_sk, $61:hd_dep_count", "FROM household_demographics", "WHERE equal($61, 6)" ] }, { "kind": "WRITE", "substeps": [ "$60", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007874015748031496, "waitRatioMax": 0.007874015748031496, "writeMsAvg": "17", "writeMsMax": "17", "writeRatioAvg": 0.13385826771653545, "writeRatioMax": 0.13385826771653545 }, { "completedParallelInputs": "1", "computeMsAvg": "126", "computeMsMax": "126", "computeRatioAvg": 0.9921259842519685, "computeRatioMax": 0.9921259842519685, "endMs": "1665778787183", "id": "8", "inputStages": [ "0", "2", "1" ], "name": "S08: Join+", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.07874015748031496, "readRatioMax": 0.07874015748031496, "recordsRead": "727305", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "114", "startMs": "1665778787097", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:ws_sold_time_sk, $41:ws_ship_hdemo_sk, $42:ws_web_page_sk", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$50", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$120 := COUNT_STAR()" ] }, { "kind": "JOIN", "substeps": [ "INNER HASH JOIN EACH WITH ALL ON $170 = $10" ] }, { "kind": "JOIN", "substeps": [ "$170 := $161", "INNER HASH JOIN EACH WITH ALL ON $160 = $50" ] }, { "kind": "JOIN", "substeps": [ "$160 := $40, $161 := $42", "INNER HASH JOIN EACH WITH ALL ON $41 = $70" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007874015748031496, "waitRatioMax": 0.007874015748031496, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.007874015748031496, "writeRatioMax": 0.007874015748031496 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.08661417322834646, "computeRatioMax": 0.08661417322834646, "endMs": "1665778787206", "id": "9", "inputStages": [ "8" ], "name": "S09: Aggregate", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "94", "startMs": "1665778787101", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120", "FROM __stage08_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$100 := SUM_OF_COUNTS($120)" ] }, { "kind": "WRITE", "substeps": [ "$100", "TO __stage09_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007874015748031496, "waitRatioMax": 0.007874015748031496, "writeMsAvg": "3", "writeMsMax": "3", "writeRatioAvg": 0.023622047244094488, "writeRatioMax": 0.023622047244094488 }, { "completedParallelInputs": "1", "computeMsAvg": "127", "computeMsMax": "127", "computeRatioAvg": 1, "computeRatioMax": 1, "endMs": "1665778787221", "id": "10", "inputStages": [ "4", "6", "5" ], "name": "S0A: Join+", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.07874015748031496, "readRatioMax": 0.07874015748031496, "recordsRead": "727305", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "120", "startMs": "1665778787129", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:ws_sold_time_sk, $21:ws_ship_hdemo_sk, $22:ws_web_page_sk", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$60", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage05_output" ] }, { "kind": "READ", "substeps": [ "$1", "FROM __stage04_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$110 := COUNT_STAR()" ] }, { "kind": "JOIN", "substeps": [ "INNER HASH JOIN EACH WITH ALL ON $140 = $1" ] }, { "kind": "JOIN", "substeps": [ "$140 := $131", "INNER HASH JOIN EACH WITH ALL ON $130 = $30" ] }, { "kind": "JOIN", "substeps": [ "$130 := $20, $131 := $22", "INNER HASH JOIN EACH WITH ALL ON $21 = $60" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage0A_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007874015748031496, "waitRatioMax": 0.007874015748031496, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.007874015748031496, "writeRatioMax": 0.007874015748031496 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.06299212598425197, "computeRatioMax": 0.06299212598425197, "endMs": "1665778787243", "id": "11", "inputStages": [ "10" ], "name": "S0B: Aggregate", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "87", "startMs": "1665778787133", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$90 := SUM_OF_COUNTS($110)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage0B_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.015748031496062992, "waitRatioMax": 0.015748031496062992, "writeMsAvg": "6", "writeMsMax": "6", "writeRatioAvg": 0.047244094488188976, "writeRatioMax": 0.047244094488188976 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.09448818897637795, "computeRatioMax": 0.09448818897637795, "endMs": "1665778787311", "id": "12", "inputStages": [ "9", "11" ], "name": "S0C: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "2", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "40", "startMs": "1665778787271", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$100", "FROM __stage09_output" ] }, { "kind": "SORT", "substeps": [ "$80 ASC", "LIMIT 100" ] }, { "kind": "COMPUTE", "substeps": [ "$80 := divide(CAST($180 AS DOUBLE), CAST($181 AS DOUBLE))" ] }, { "kind": "JOIN", "substeps": [ "$180 := $90, $181 := $100", "CROSS ALL WITH ALL " ] }, { "kind": "WRITE", "substeps": [ "$190", "TO __stage0C_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007874015748031496, "waitRatioMax": 0.007874015748031496, "writeMsAvg": "11", "writeMsMax": "11", "writeRatioAvg": 0.08661417322834646, "writeRatioMax": 0.08661417322834646 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "time_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_page" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "household_demographics" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "11", "elapsedMs": "463", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "681" } ], "totalBytesBilled": "41943040", "totalBytesProcessed": "18759448", "totalPartitionsProcessed": "0", "totalSlotMs": "681", "transferredBytes": "0" }, "startTime": "1665778786881", "totalBytesProcessed": "18759448", "totalSlotMs": "681" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anonf91e9223_3bab_42fd_b045_b54278bfbe3e" }, "priority": "INTERACTIVE", "query": "-- start query 90 in stream 0 using template query90.tpl\nselect amc/pmc as am_pm_ratio\n from ( select count(*) amc\n from web_sales, household_demographics , time_dim, web_page\n where ws_sold_time_sk = time_dim.t_time_sk\n and ws_ship_hdemo_sk = household_demographics.hd_demo_sk\n and ws_web_page_sk = web_page.wp_web_page_sk\n and time_dim.t_hour between 8 and 8+1\n and household_demographics.hd_dep_count = 6\n and web_page.wp_char_count between 5000 and 5200) am_time,\n ( select count(*) pmc\n from web_sales, household_demographics , time_dim, web_page\n where ws_sold_time_sk = time_dim.t_time_sk\n and ws_ship_hdemo_sk = household_demographics.hd_demo_sk\n and ws_web_page_sk = web_page.wp_web_page_sk\n and time_dim.t_hour between 19 and 19+1\n and household_demographics.hd_dep_count = 6\n and web_page.wp_char_count between 5000 and 5200) pm_time\n order by am_pm_ratio\n limit 100\n ;\n\n-- end query 90 in stream 0 using template query90.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "OEMb49D2d4QMXx6q2xW6gA==", "id": "test-project-364309:europe-west1.query90_1665778788", "jobReference": { "jobId": "query90_1665778788", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query90_1665778788?location=europe-west1", "statistics": { "creationTime": "1665778789055", "endTime": "1665778789619", "finalExecutionDurationMs": "381", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "18759448", "performanceInsights": { "avgPreviousExecutionMs": "340" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.1414141414141414, "computeRatioMax": 0.1414141414141414, "endMs": "1665778789230", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.0707070707070707, "readRatioMax": 0.0707070707070707, "recordsRead": "60", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "32", "startMs": "1665778789191", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:wp_web_page_sk, $11:wp_char_count", "FROM web_page", "WHERE between($11, 5000, 5200)" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.010101010101010102, "waitRatioMax": 0.010101010101010102, "writeMsAvg": "10", "writeMsMax": "10", "writeRatioAvg": 0.10101010101010101, "writeRatioMax": 0.10101010101010101 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.1414141414141414, "computeRatioMax": 0.1414141414141414, "endMs": "1665778789241", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.06060606060606061, "readRatioMax": 0.06060606060606061, "recordsRead": "86400", "recordsWritten": "7200", "shuffleOutputBytes": "64800", "shuffleOutputBytesSpilled": "0", "slotMs": "36", "startMs": "1665778789207", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$50:t_time_sk, $51:t_hour", "FROM time_dim", "WHERE between($51, 19, 20)" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.010101010101010102, "waitRatioMax": 0.010101010101010102, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.08080808080808081, "writeRatioMax": 0.08080808080808081 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.09090909090909091, "computeRatioMax": 0.09090909090909091, "endMs": "1665778789264", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.04040404040404041, "readRatioMax": 0.04040404040404041, "recordsRead": "7200", "recordsWritten": "720", "shuffleOutputBytes": "6480", "shuffleOutputBytesSpilled": "0", "slotMs": "35", "startMs": "1665778789223", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:hd_demo_sk, $71:hd_dep_count", "FROM household_demographics", "WHERE equal($71, 6)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.010101010101010102, "waitRatioMax": 0.010101010101010102, "writeMsAvg": "17", "writeMsMax": "17", "writeRatioAvg": 0.1717171717171717, "writeRatioMax": 0.1717171717171717 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.0707070707070707, "computeRatioMax": 0.0707070707070707, "endMs": "1665778789294", "id": "4", "name": "S04: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.04040404040404041, "readRatioMax": 0.04040404040404041, "recordsRead": "60", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665778789253", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:wp_web_page_sk, $2:wp_char_count", "FROM web_page", "WHERE between($2, 5000, 5200)" ] }, { "kind": "WRITE", "substeps": [ "$1", "TO __stage04_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.010101010101010102, "waitRatioMax": 0.010101010101010102, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.16161616161616163, "writeRatioMax": 0.16161616161616163 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.12121212121212122, "computeRatioMax": 0.12121212121212122, "endMs": "1665778789296", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.08080808080808081, "readRatioMax": 0.08080808080808081, "recordsRead": "86400", "recordsWritten": "7200", "shuffleOutputBytes": "64800", "shuffleOutputBytesSpilled": "0", "slotMs": "29", "startMs": "1665778789269", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:t_time_sk, $31:t_hour", "FROM time_dim", "WHERE between($31, 8, 9)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.010101010101010102, "waitRatioMax": 0.010101010101010102, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.08080808080808081, "writeRatioMax": 0.08080808080808081 }, { "completedParallelInputs": "1", "computeMsAvg": "17", "computeMsMax": "17", "computeRatioAvg": 0.1717171717171717, "computeRatioMax": 0.1717171717171717, "endMs": "1665778789325", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.0707070707070707, "readRatioMax": 0.0707070707070707, "recordsRead": "7200", "recordsWritten": "720", "shuffleOutputBytes": "6480", "shuffleOutputBytesSpilled": "0", "slotMs": "46", "startMs": "1665778789283", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:hd_demo_sk, $61:hd_dep_count", "FROM household_demographics", "WHERE equal($61, 6)" ] }, { "kind": "WRITE", "substeps": [ "$60", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.010101010101010102, "waitRatioMax": 0.010101010101010102, "writeMsAvg": "10", "writeMsMax": "10", "writeRatioAvg": 0.10101010101010101, "writeRatioMax": 0.10101010101010101 }, { "completedParallelInputs": "1", "computeMsAvg": "87", "computeMsMax": "87", "computeRatioAvg": 0.8787878787878788, "computeRatioMax": 0.8787878787878788, "endMs": "1665778789374", "id": "8", "inputStages": [ "2", "1", "0" ], "name": "S08: Join+", "parallelInputs": "1", "readMsAvg": "13", "readMsMax": "13", "readRatioAvg": 0.13131313131313133, "readRatioMax": 0.13131313131313133, "recordsRead": "727305", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "82", "startMs": "1665778789299", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:ws_sold_time_sk, $41:ws_ship_hdemo_sk, $42:ws_web_page_sk", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$50", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$120 := COUNT_STAR()" ] }, { "kind": "JOIN", "substeps": [ "INNER HASH JOIN EACH WITH ALL ON $170 = $10" ] }, { "kind": "JOIN", "substeps": [ "$170 := $161", "INNER HASH JOIN EACH WITH ALL ON $160 = $50" ] }, { "kind": "JOIN", "substeps": [ "$160 := $40, $161 := $42", "INNER HASH JOIN EACH WITH ALL ON $41 = $70" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage08_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.020202020202020204, "waitRatioMax": 0.020202020202020204, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.010101010101010102, "writeRatioMax": 0.010101010101010102 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.10101010101010101, "computeRatioMax": 0.10101010101010101, "endMs": "1665778789379", "id": "9", "inputStages": [ "8" ], "name": "S09: Aggregate", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "72", "startMs": "1665778789302", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120", "FROM __stage08_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$100 := SUM_OF_COUNTS($120)" ] }, { "kind": "WRITE", "substeps": [ "$100", "TO __stage09_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.010101010101010102, "waitRatioMax": 0.010101010101010102, "writeMsAvg": "3", "writeMsMax": "3", "writeRatioAvg": 0.030303030303030304, "writeRatioMax": 0.030303030303030304 }, { "completedParallelInputs": "1", "computeMsAvg": "99", "computeMsMax": "99", "computeRatioAvg": 1, "computeRatioMax": 1, "endMs": "1665778789424", "id": "10", "inputStages": [ "4", "5", "6" ], "name": "S0A: Join+", "parallelInputs": "1", "readMsAvg": "17", "readMsMax": "17", "readRatioAvg": 0.1717171717171717, "readRatioMax": 0.1717171717171717, "recordsRead": "727305", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "104", "startMs": "1665778789333", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:ws_sold_time_sk, $21:ws_ship_hdemo_sk, $22:ws_web_page_sk", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$60", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage05_output" ] }, { "kind": "READ", "substeps": [ "$1", "FROM __stage04_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$110 := COUNT_STAR()" ] }, { "kind": "JOIN", "substeps": [ "INNER HASH JOIN EACH WITH ALL ON $140 = $1" ] }, { "kind": "JOIN", "substeps": [ "$140 := $131", "INNER HASH JOIN EACH WITH ALL ON $130 = $30" ] }, { "kind": "JOIN", "substeps": [ "$130 := $20, $131 := $22", "INNER HASH JOIN EACH WITH ALL ON $21 = $60" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage0A_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.010101010101010102, "waitRatioMax": 0.010101010101010102, "writeMsAvg": "3", "writeMsMax": "3", "writeRatioAvg": 0.030303030303030304, "writeRatioMax": 0.030303030303030304 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.08080808080808081, "computeRatioMax": 0.08080808080808081, "endMs": "1665778789449", "id": "11", "inputStages": [ "10" ], "name": "S0B: Aggregate", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "106", "startMs": "1665778789335", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$90 := SUM_OF_COUNTS($110)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage0B_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.010101010101010102, "waitRatioMax": 0.010101010101010102, "writeMsAvg": "3", "writeMsMax": "3", "writeRatioAvg": 0.030303030303030304, "writeRatioMax": 0.030303030303030304 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.08080808080808081, "computeRatioMax": 0.08080808080808081, "endMs": "1665778789529", "id": "12", "inputStages": [ "11", "9" ], "name": "S0C: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "2", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665778789492", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$100", "FROM __stage09_output" ] }, { "kind": "SORT", "substeps": [ "$80 ASC", "LIMIT 100" ] }, { "kind": "COMPUTE", "substeps": [ "$80 := divide(CAST($180 AS DOUBLE), CAST($181 AS DOUBLE))" ] }, { "kind": "JOIN", "substeps": [ "$180 := $90, $181 := $100", "CROSS ALL WITH ALL " ] }, { "kind": "WRITE", "substeps": [ "$190", "TO __stage0C_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.010101010101010102, "waitRatioMax": 0.010101010101010102, "writeMsAvg": "24", "writeMsMax": "24", "writeRatioAvg": 0.24242424242424243, "writeRatioMax": 0.24242424242424243 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_page" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "time_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "household_demographics" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "11", "elapsedMs": "470", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "638" } ], "totalBytesBilled": "41943040", "totalBytesProcessed": "18759448", "totalPartitionsProcessed": "0", "totalSlotMs": "638", "transferredBytes": "0" }, "startTime": "1665778789095", "totalBytesProcessed": "18759448", "totalSlotMs": "638" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon0706e408_1d3b_403c_8015_dd47ecc480e8" }, "priority": "INTERACTIVE", "query": "-- start query 90 in stream 0 using template query90.tpl\nselect amc/pmc as am_pm_ratio\n from ( select count(*) amc\n from web_sales, household_demographics , time_dim, web_page\n where ws_sold_time_sk = time_dim.t_time_sk\n and ws_ship_hdemo_sk = household_demographics.hd_demo_sk\n and ws_web_page_sk = web_page.wp_web_page_sk\n and time_dim.t_hour between 8 and 8+1\n and household_demographics.hd_dep_count = 6\n and web_page.wp_char_count between 5000 and 5200) am_time,\n ( select count(*) pmc\n from web_sales, household_demographics , time_dim, web_page\n where ws_sold_time_sk = time_dim.t_time_sk\n and ws_ship_hdemo_sk = household_demographics.hd_demo_sk\n and ws_web_page_sk = web_page.wp_web_page_sk\n and time_dim.t_hour between 19 and 19+1\n and household_demographics.hd_dep_count = 6\n and web_page.wp_char_count between 5000 and 5200) pm_time\n order by am_pm_ratio\n limit 100\n ;\n\n-- end query 90 in stream 0 using template query90.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "qDymuuQIXqsEfwrRWJvRmg==", "id": "test-project-364309:europe-west1.query90_1665778790", "jobReference": { "jobId": "query90_1665778790", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query90_1665778790?location=europe-west1", "statistics": { "creationTime": "1665778791237", "endTime": "1665778791782", "finalExecutionDurationMs": "354", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "18759448", "performanceInsights": { "avgPreviousExecutionMs": "344" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.05925925925925926, "computeRatioMax": 0.05925925925925926, "endMs": "1665778791432", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.037037037037037035, "readRatioMax": 0.037037037037037035, "recordsRead": "60", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "35", "startMs": "1665778791394", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:wp_web_page_sk, $11:wp_char_count", "FROM web_page", "WHERE between($11, 5000, 5200)" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007407407407407408, "waitRatioMax": 0.007407407407407408, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.1111111111111111, "writeRatioMax": 0.1111111111111111 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.1111111111111111, "computeRatioMax": 0.1111111111111111, "endMs": "1665778791456", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.05185185185185185, "readRatioMax": 0.05185185185185185, "recordsRead": "86400", "recordsWritten": "7200", "shuffleOutputBytes": "64800", "shuffleOutputBytesSpilled": "0", "slotMs": "47", "startMs": "1665778791412", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$50:t_time_sk, $51:t_hour", "FROM time_dim", "WHERE between($51, 19, 20)" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007407407407407408, "waitRatioMax": 0.007407407407407408, "writeMsAvg": "11", "writeMsMax": "11", "writeRatioAvg": 0.08148148148148149, "writeRatioMax": 0.08148148148148149 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.07407407407407407, "computeRatioMax": 0.07407407407407407, "endMs": "1665778791467", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "12", "readMsMax": "12", "readRatioAvg": 0.08888888888888889, "readRatioMax": 0.08888888888888889, "recordsRead": "7200", "recordsWritten": "720", "shuffleOutputBytes": "6480", "shuffleOutputBytesSpilled": "0", "slotMs": "42", "startMs": "1665778791425", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:hd_demo_sk, $71:hd_dep_count", "FROM household_demographics", "WHERE equal($71, 6)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007407407407407408, "waitRatioMax": 0.007407407407407408, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.05185185185185185, "writeRatioMax": 0.05185185185185185 }, { "completedParallelInputs": "1", "computeMsAvg": "6", "computeMsMax": "6", "computeRatioAvg": 0.044444444444444446, "computeRatioMax": 0.044444444444444446, "endMs": "1665778791486", "id": "4", "name": "S04: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.044444444444444446, "readRatioMax": 0.044444444444444446, "recordsRead": "60", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665778791455", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:wp_web_page_sk, $2:wp_char_count", "FROM web_page", "WHERE between($2, 5000, 5200)" ] }, { "kind": "WRITE", "substeps": [ "$1", "TO __stage04_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007407407407407408, "waitRatioMax": 0.007407407407407408, "writeMsAvg": "20", "writeMsMax": "20", "writeRatioAvg": 0.14814814814814814, "writeRatioMax": 0.14814814814814814 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.08148148148148149, "computeRatioMax": 0.08148148148148149, "endMs": "1665778791506", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.037037037037037035, "readRatioMax": 0.037037037037037035, "recordsRead": "86400", "recordsWritten": "7200", "shuffleOutputBytes": "64800", "shuffleOutputBytesSpilled": "0", "slotMs": "33", "startMs": "1665778791470", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:t_time_sk, $31:t_hour", "FROM time_dim", "WHERE between($31, 8, 9)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage05_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.014814814814814815, "waitRatioMax": 0.014814814814814815, "writeMsAvg": "10", "writeMsMax": "10", "writeRatioAvg": 0.07407407407407407, "writeRatioMax": 0.07407407407407407 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.05185185185185185, "computeRatioMax": 0.05185185185185185, "endMs": "1665778791527", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.02962962962962963, "readRatioMax": 0.02962962962962963, "recordsRead": "7200", "recordsWritten": "720", "shuffleOutputBytes": "6480", "shuffleOutputBytesSpilled": "0", "slotMs": "47", "startMs": "1665778791487", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:hd_demo_sk, $61:hd_dep_count", "FROM household_demographics", "WHERE equal($61, 6)" ] }, { "kind": "WRITE", "substeps": [ "$60", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007407407407407408, "waitRatioMax": 0.007407407407407408, "writeMsAvg": "19", "writeMsMax": "19", "writeRatioAvg": 0.14074074074074075, "writeRatioMax": 0.14074074074074075 }, { "completedParallelInputs": "1", "computeMsAvg": "88", "computeMsMax": "88", "computeRatioAvg": 0.6518518518518519, "computeRatioMax": 0.6518518518518519, "endMs": "1665778791578", "id": "8", "inputStages": [ "1", "0", "2" ], "name": "S08: Join+", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.06666666666666667, "readRatioMax": 0.06666666666666667, "recordsRead": "727305", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "88", "startMs": "1665778791506", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:ws_sold_time_sk, $41:ws_ship_hdemo_sk, $42:ws_web_page_sk", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$50", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$120 := COUNT_STAR()" ] }, { "kind": "JOIN", "substeps": [ "INNER HASH JOIN EACH WITH ALL ON $170 = $10" ] }, { "kind": "JOIN", "substeps": [ "$170 := $161", "INNER HASH JOIN EACH WITH ALL ON $160 = $50" ] }, { "kind": "JOIN", "substeps": [ "$160 := $40, $161 := $42", "INNER HASH JOIN EACH WITH ALL ON $41 = $70" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage08_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.014814814814814815, "waitRatioMax": 0.014814814814814815, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.007407407407407408, "writeRatioMax": 0.007407407407407408 }, { "completedParallelInputs": "1", "computeMsAvg": "6", "computeMsMax": "6", "computeRatioAvg": 0.044444444444444446, "computeRatioMax": 0.044444444444444446, "endMs": "1665778791611", "id": "9", "inputStages": [ "8" ], "name": "S09: Aggregate", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "83", "startMs": "1665778791506", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120", "FROM __stage08_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$100 := SUM_OF_COUNTS($120)" ] }, { "kind": "WRITE", "substeps": [ "$100", "TO __stage09_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007407407407407408, "waitRatioMax": 0.007407407407407408, "writeMsAvg": "2", "writeMsMax": "2", "writeRatioAvg": 0.014814814814814815, "writeRatioMax": 0.014814814814814815 }, { "completedParallelInputs": "1", "computeMsAvg": "135", "computeMsMax": "135", "computeRatioAvg": 1, "computeRatioMax": 1, "endMs": "1665778791632", "id": "10", "inputStages": [ "4", "6", "5" ], "name": "S0A: Join+", "parallelInputs": "1", "readMsAvg": "14", "readMsMax": "14", "readRatioAvg": 0.1037037037037037, "readRatioMax": 0.1037037037037037, "recordsRead": "727305", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "128", "startMs": "1665778791537", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:ws_sold_time_sk, $21:ws_ship_hdemo_sk, $22:ws_web_page_sk", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$60", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage05_output" ] }, { "kind": "READ", "substeps": [ "$1", "FROM __stage04_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$110 := COUNT_STAR()" ] }, { "kind": "JOIN", "substeps": [ "INNER HASH JOIN EACH WITH ALL ON $140 = $1" ] }, { "kind": "JOIN", "substeps": [ "$140 := $131", "INNER HASH JOIN EACH WITH ALL ON $130 = $30" ] }, { "kind": "JOIN", "substeps": [ "$130 := $20, $131 := $22", "INNER HASH JOIN EACH WITH ALL ON $21 = $60" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage0A_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007407407407407408, "waitRatioMax": 0.007407407407407408, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.007407407407407408, "writeRatioMax": 0.007407407407407408 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.07407407407407407, "computeRatioMax": 0.07407407407407407, "endMs": "1665778791649", "id": "11", "inputStages": [ "10" ], "name": "S0B: Aggregate", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "97", "startMs": "1665778791540", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$90 := SUM_OF_COUNTS($110)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage0B_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.014814814814814815, "waitRatioMax": 0.014814814814814815, "writeMsAvg": "3", "writeMsMax": "3", "writeRatioAvg": 0.022222222222222223, "writeRatioMax": 0.022222222222222223 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.08148148148148149, "computeRatioMax": 0.08148148148148149, "endMs": "1665778791707", "id": "12", "inputStages": [ "9", "11" ], "name": "S0C: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "2", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "36", "startMs": "1665778791668", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$100", "FROM __stage09_output" ] }, { "kind": "SORT", "substeps": [ "$80 ASC", "LIMIT 100" ] }, { "kind": "COMPUTE", "substeps": [ "$80 := divide(CAST($180 AS DOUBLE), CAST($181 AS DOUBLE))" ] }, { "kind": "JOIN", "substeps": [ "$180 := $90, $181 := $100", "CROSS ALL WITH ALL " ] }, { "kind": "WRITE", "substeps": [ "$190", "TO __stage0C_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007407407407407408, "waitRatioMax": 0.007407407407407408, "writeMsAvg": "12", "writeMsMax": "12", "writeRatioAvg": 0.08888888888888889, "writeRatioMax": 0.08888888888888889 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "household_demographics" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_page" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "time_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "11", "elapsedMs": "447", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "674" } ], "totalBytesBilled": "41943040", "totalBytesProcessed": "18759448", "totalPartitionsProcessed": "0", "totalSlotMs": "674", "transferredBytes": "0" }, "startTime": "1665778791293", "totalBytesProcessed": "18759448", "totalSlotMs": "674" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon6f0397c0_b92c_4900_8a97_f42db2e2d2ec" }, "priority": "INTERACTIVE", "query": "-- start query 90 in stream 0 using template query90.tpl\nselect amc/pmc as am_pm_ratio\n from ( select count(*) amc\n from web_sales, household_demographics , time_dim, web_page\n where ws_sold_time_sk = time_dim.t_time_sk\n and ws_ship_hdemo_sk = household_demographics.hd_demo_sk\n and ws_web_page_sk = web_page.wp_web_page_sk\n and time_dim.t_hour between 8 and 8+1\n and household_demographics.hd_dep_count = 6\n and web_page.wp_char_count between 5000 and 5200) am_time,\n ( select count(*) pmc\n from web_sales, household_demographics , time_dim, web_page\n where ws_sold_time_sk = time_dim.t_time_sk\n and ws_ship_hdemo_sk = household_demographics.hd_demo_sk\n and ws_web_page_sk = web_page.wp_web_page_sk\n and time_dim.t_hour between 19 and 19+1\n and household_demographics.hd_dep_count = 6\n and web_page.wp_char_count between 5000 and 5200) pm_time\n order by am_pm_ratio\n limit 100\n ;\n\n-- end query 90 in stream 0 using template query90.tpl", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "shWKKPYSx9wWPNoL/weMdg==", "id": "test-project-364309:europe-west1.query90_1665778792", "jobReference": { "jobId": "query90_1665778792", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query90_1665778792?location=europe-west1", "statistics": { "creationTime": "1665778793331", "endTime": "1665778793913", "finalExecutionDurationMs": "397", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "18759448", "performanceInsights": { "avgPreviousExecutionMs": "345" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.05511811023622047, "computeRatioMax": 0.05511811023622047, "endMs": "1665778793516", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.031496062992125984, "readRatioMax": 0.031496062992125984, "recordsRead": "60", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665778793476", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:wp_web_page_sk, $11:wp_char_count", "FROM web_page", "WHERE between($11, 5000, 5200)" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007874015748031496, "waitRatioMax": 0.007874015748031496, "writeMsAvg": "17", "writeMsMax": "17", "writeRatioAvg": 0.13385826771653545, "writeRatioMax": 0.13385826771653545 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.09448818897637795, "computeRatioMax": 0.09448818897637795, "endMs": "1665778793539", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.03937007874015748, "readRatioMax": 0.03937007874015748, "recordsRead": "86400", "recordsWritten": "7200", "shuffleOutputBytes": "64800", "shuffleOutputBytesSpilled": "0", "slotMs": "62", "startMs": "1665778793496", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$50:t_time_sk, $51:t_hour", "FROM time_dim", "WHERE between($51, 19, 20)" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007874015748031496, "waitRatioMax": 0.007874015748031496, "writeMsAvg": "31", "writeMsMax": "31", "writeRatioAvg": 0.2440944881889764, "writeRatioMax": 0.2440944881889764 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.08661417322834646, "computeRatioMax": 0.08661417322834646, "endMs": "1665778793570", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.03937007874015748, "readRatioMax": 0.03937007874015748, "recordsRead": "7200", "recordsWritten": "720", "shuffleOutputBytes": "6480", "shuffleOutputBytesSpilled": "0", "slotMs": "47", "startMs": "1665778793522", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:hd_demo_sk, $71:hd_dep_count", "FROM household_demographics", "WHERE equal($71, 6)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007874015748031496, "waitRatioMax": 0.007874015748031496, "writeMsAvg": "20", "writeMsMax": "20", "writeRatioAvg": 0.15748031496062992, "writeRatioMax": 0.15748031496062992 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.07874015748031496, "computeRatioMax": 0.07874015748031496, "endMs": "1665778793607", "id": "4", "name": "S04: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.031496062992125984, "readRatioMax": 0.031496062992125984, "recordsRead": "60", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "50", "startMs": "1665778793554", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:wp_web_page_sk, $2:wp_char_count", "FROM web_page", "WHERE between($2, 5000, 5200)" ] }, { "kind": "WRITE", "substeps": [ "$1", "TO __stage04_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007874015748031496, "waitRatioMax": 0.007874015748031496, "writeMsAvg": "31", "writeMsMax": "31", "writeRatioAvg": 0.2440944881889764, "writeRatioMax": 0.2440944881889764 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.11023622047244094, "computeRatioMax": 0.11023622047244094, "endMs": "1665778793611", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.03937007874015748, "readRatioMax": 0.03937007874015748, "recordsRead": "86400", "recordsWritten": "7200", "shuffleOutputBytes": "64800", "shuffleOutputBytesSpilled": "0", "slotMs": "39", "startMs": "1665778793570", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:t_time_sk, $31:t_hour", "FROM time_dim", "WHERE between($31, 8, 9)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007874015748031496, "waitRatioMax": 0.007874015748031496, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.11023622047244094, "writeRatioMax": 0.11023622047244094 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.11811023622047244, "computeRatioMax": 0.11811023622047244, "endMs": "1665778793631", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.047244094488188976, "readRatioMax": 0.047244094488188976, "recordsRead": "7200", "recordsWritten": "720", "shuffleOutputBytes": "6480", "shuffleOutputBytesSpilled": "0", "slotMs": "60", "startMs": "1665778793590", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:hd_demo_sk, $61:hd_dep_count", "FROM household_demographics", "WHERE equal($61, 6)" ] }, { "kind": "WRITE", "substeps": [ "$60", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007874015748031496, "waitRatioMax": 0.007874015748031496, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.11811023622047244, "writeRatioMax": 0.11811023622047244 }, { "completedParallelInputs": "1", "computeMsAvg": "106", "computeMsMax": "106", "computeRatioAvg": 0.8346456692913385, "computeRatioMax": 0.8346456692913385, "endMs": "1665778793698", "id": "8", "inputStages": [ "2", "0", "1" ], "name": "S08: Join+", "parallelInputs": "1", "readMsAvg": "16", "readMsMax": "16", "readRatioAvg": 0.12598425196850394, "readRatioMax": 0.12598425196850394, "recordsRead": "727305", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "106", "startMs": "1665778793611", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:ws_sold_time_sk, $41:ws_ship_hdemo_sk, $42:ws_web_page_sk", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$50", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$120 := COUNT_STAR()" ] }, { "kind": "JOIN", "substeps": [ "INNER HASH JOIN EACH WITH ALL ON $170 = $10" ] }, { "kind": "JOIN", "substeps": [ "$170 := $161", "INNER HASH JOIN EACH WITH ALL ON $160 = $50" ] }, { "kind": "JOIN", "substeps": [ "$160 := $40, $161 := $42", "INNER HASH JOIN EACH WITH ALL ON $41 = $70" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007874015748031496, "waitRatioMax": 0.007874015748031496, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.007874015748031496, "writeRatioMax": 0.007874015748031496 }, { "completedParallelInputs": "1", "computeMsAvg": "6", "computeMsMax": "6", "computeRatioAvg": 0.047244094488188976, "computeRatioMax": 0.047244094488188976, "endMs": "1665778793710", "id": "9", "inputStages": [ "8" ], "name": "S09: Aggregate", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "77", "startMs": "1665778793613", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120", "FROM __stage08_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$100 := SUM_OF_COUNTS($120)" ] }, { "kind": "WRITE", "substeps": [ "$100", "TO __stage09_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007874015748031496, "waitRatioMax": 0.007874015748031496, "writeMsAvg": "2", "writeMsMax": "2", "writeRatioAvg": 0.015748031496062992, "writeRatioMax": 0.015748031496062992 }, { "completedParallelInputs": "1", "computeMsAvg": "127", "computeMsMax": "127", "computeRatioAvg": 1, "computeRatioMax": 1, "endMs": "1665778793722", "id": "10", "inputStages": [ "4", "6", "5" ], "name": "S0A: Join+", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.07086614173228346, "readRatioMax": 0.07086614173228346, "recordsRead": "727305", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "110", "startMs": "1665778793642", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:ws_sold_time_sk, $21:ws_ship_hdemo_sk, $22:ws_web_page_sk", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$60", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage05_output" ] }, { "kind": "READ", "substeps": [ "$1", "FROM __stage04_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$110 := COUNT_STAR()" ] }, { "kind": "JOIN", "substeps": [ "INNER HASH JOIN EACH WITH ALL ON $140 = $1" ] }, { "kind": "JOIN", "substeps": [ "$140 := $131", "INNER HASH JOIN EACH WITH ALL ON $130 = $30" ] }, { "kind": "JOIN", "substeps": [ "$130 := $20, $131 := $22", "INNER HASH JOIN EACH WITH ALL ON $21 = $60" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage0A_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007874015748031496, "waitRatioMax": 0.007874015748031496, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.007874015748031496, "writeRatioMax": 0.007874015748031496 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.06299212598425197, "computeRatioMax": 0.06299212598425197, "endMs": "1665778793749", "id": "11", "inputStages": [ "10" ], "name": "S0B: Aggregate", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "121", "startMs": "1665778793644", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$90 := SUM_OF_COUNTS($110)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage0B_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007874015748031496, "waitRatioMax": 0.007874015748031496, "writeMsAvg": "3", "writeMsMax": "3", "writeRatioAvg": 0.023622047244094488, "writeRatioMax": 0.023622047244094488 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.11023622047244094, "computeRatioMax": 0.11023622047244094, "endMs": "1665778793826", "id": "12", "inputStages": [ "9", "11" ], "name": "S0C: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "2", "recordsWritten": "1", "shuffleOutputBytes": "9", "shuffleOutputBytesSpilled": "0", "slotMs": "46", "startMs": "1665778793773", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$100", "FROM __stage09_output" ] }, { "kind": "SORT", "substeps": [ "$80 ASC", "LIMIT 100" ] }, { "kind": "COMPUTE", "substeps": [ "$80 := divide(CAST($180 AS DOUBLE), CAST($181 AS DOUBLE))" ] }, { "kind": "JOIN", "substeps": [ "$180 := $90, $181 := $100", "CROSS ALL WITH ALL " ] }, { "kind": "WRITE", "substeps": [ "$190", "TO __stage0C_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007874015748031496, "waitRatioMax": 0.007874015748031496, "writeMsAvg": "27", "writeMsMax": "27", "writeRatioAvg": 0.2125984251968504, "writeRatioMax": 0.2125984251968504 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "time_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "household_demographics" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_page" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "11", "elapsedMs": "482", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "758" } ], "totalBytesBilled": "41943040", "totalBytesProcessed": "18759448", "totalPartitionsProcessed": "0", "totalSlotMs": "758", "transferredBytes": "0" }, "startTime": "1665778793386", "totalBytesProcessed": "18759448", "totalSlotMs": "758" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
