{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anoncd6b7b3a_89e9_40cd_89c2_59e3889e3f0f" }, "priority": "INTERACTIVE", "query": "with ss as (\n select\n i_item_id,sum(ss_ext_sales_price) total_sales\n from\n \tstore_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom\n item\nwhere i_category in ('Jewelry'))\n and ss_item_sk = i_item_sk\n and ss_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 10\n and ss_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_item_id),\n cs as (\n select\n i_item_id,sum(cs_ext_sales_price) total_sales\n from\n \tcatalog_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom\n item\nwhere i_category in ('Jewelry'))\n and cs_item_sk = i_item_sk\n and cs_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 10\n and cs_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_item_id),\n ws as (\n select\n i_item_id,sum(ws_ext_sales_price) total_sales\n from\n \tweb_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom\n item\nwhere i_category in ('Jewelry'))\n and ws_item_sk = i_item_sk\n and ws_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 10\n and ws_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5\n group by i_item_id)\n select \n i_item_id\n,sum(total_sales) total_sales\n from (select benchmark.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ss \n union all\n select benchmark.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from cs \n union all\n select benchmark.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ws) tmp1\n group by i_item_id\n order by i_item_id\n ,total_sales\n limit 100;\n", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "DL3oQx0CjkleBvmrt6Jc+A==", "id": "test-project-364309:europe-west1.query60_1665768403", "jobReference": { "jobId": "query60_1665768403", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query60_1665768403?location=europe-west1", "statistics": { "creationTime": "1665768404065", "endTime": "1665768405028", "finalExecutionDurationMs": "670", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "200790347", "performanceInsights": { "avgPreviousExecutionMs": "605" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.03832752613240418, "computeRatioMax": 0.03832752613240418, "endMs": "1665768404363", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.024390243902439025, "readRatioMax": 0.024390243902439025, "recordsRead": "18000", "recordsWritten": "1740", "shuffleOutputBytes": "36540", "shuffleOutputBytesSpilled": "0", "slotMs": "53", "startMs": "1665768404306", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$50:i_item_id, $51:i_category", "FROM item", "WHERE in($51, 'Jewelry')" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003484320557491289, "waitRatioMax": 0.003484320557491289, "writeMsAvg": "29", "writeMsMax": "29", "writeRatioAvg": 0.10104529616724739, "writeRatioMax": 0.10104529616724739 }, { "completedParallelInputs": "1", "computeMsAvg": "17", "computeMsMax": "17", "computeRatioAvg": 0.059233449477351915, "computeRatioMax": 0.059233449477351915, "endMs": "1665768404379", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.017421602787456445, "readRatioMax": 0.017421602787456445, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "53", "startMs": "1665768404325", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$40, $41", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003484320557491289, "waitRatioMax": 0.003484320557491289, "writeMsAvg": "25", "writeMsMax": "25", "writeRatioAvg": 0.08710801393728224, "writeRatioMax": 0.08710801393728224 }, { "completedParallelInputs": "1", "computeMsAvg": "16", "computeMsMax": "16", "computeRatioAvg": 0.05574912891986063, "computeRatioMax": 0.05574912891986063, "endMs": "1665768404398", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "11", "readMsMax": "11", "readRatioAvg": 0.03832752613240418, "readRatioMax": 0.03832752613240418, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "47", "startMs": "1665768404346", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110:ca_address_sk, $111:ca_gmt_offset", "FROM customer_address", "WHERE equal($111, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003484320557491289, "waitRatioMax": 0.003484320557491289, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.04529616724738676, "writeRatioMax": 0.04529616724738676 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.04529616724738676, "computeRatioMax": 0.04529616724738676, "endMs": "1665768404410", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.0313588850174216, "readRatioMax": 0.0313588850174216, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "46", "startMs": "1665768404364", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140:d_date_sk, $141:d_year, $142:d_moy", "FROM date_dim", "WHERE and(equal($141, 2000), equal($142, 10))" ] }, { "kind": "WRITE", "substeps": [ "$140", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003484320557491289, "waitRatioMax": 0.003484320557491289, "writeMsAvg": "17", "writeMsMax": "17", "writeRatioAvg": 0.059233449477351915, "writeRatioMax": 0.059233449477351915 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.027874564459930314, "computeRatioMax": 0.027874564459930314, "endMs": "1665768404451", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.013937282229965157, "readRatioMax": 0.013937282229965157, "recordsRead": "18000", "recordsWritten": "1740", "shuffleOutputBytes": "36540", "shuffleOutputBytesSpilled": "0", "slotMs": "39", "startMs": "1665768404412", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:i_item_id, $31:i_category", "FROM item", "WHERE in($31, 'Jewelry')" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003484320557491289, "waitRatioMax": 0.003484320557491289, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.05226480836236934, "writeRatioMax": 0.05226480836236934 }, { "completedParallelInputs": "1", "computeMsAvg": "17", "computeMsMax": "17", "computeRatioAvg": 0.059233449477351915, "computeRatioMax": 0.059233449477351915, "endMs": "1665768404486", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.020905923344947737, "readRatioMax": 0.020905923344947737, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "54", "startMs": "1665768404427", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:i_item_sk, $21:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003484320557491289, "waitRatioMax": 0.003484320557491289, "writeMsAvg": "26", "writeMsMax": "26", "writeRatioAvg": 0.09059233449477352, "writeRatioMax": 0.09059233449477352 }, { "completedParallelInputs": "1", "computeMsAvg": "16", "computeMsMax": "16", "computeRatioAvg": 0.05574912891986063, "computeRatioMax": 0.05574912891986063, "endMs": "1665768404475", "id": "7", "name": "S07: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.024390243902439025, "readRatioMax": 0.024390243902439025, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "33", "startMs": "1665768404445", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90:ca_address_sk, $91:ca_gmt_offset", "FROM customer_address", "WHERE equal($91, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003484320557491289, "waitRatioMax": 0.003484320557491289, "writeMsAvg": "11", "writeMsMax": "11", "writeRatioAvg": 0.03832752613240418, "writeRatioMax": 0.03832752613240418 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.03832752613240418, "computeRatioMax": 0.03832752613240418, "endMs": "1665768404502", "id": "8", "name": "S08: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.027874564459930314, "readRatioMax": 0.027874564459930314, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "38", "startMs": "1665768404461", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$130:d_date_sk, $131:d_year, $132:d_moy", "FROM date_dim", "WHERE and(equal($131, 2000), equal($132, 10))" ] }, { "kind": "WRITE", "substeps": [ "$130", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003484320557491289, "waitRatioMax": 0.003484320557491289, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.04529616724738676, "writeRatioMax": 0.04529616724738676 }, { "completedParallelInputs": "1", "computeMsAvg": "19", "computeMsMax": "19", "computeRatioAvg": 0.06620209059233449, "computeRatioMax": 0.06620209059233449, "endMs": "1665768404553", "id": "10", "name": "S0A: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.024390243902439025, "readRatioMax": 0.024390243902439025, "recordsRead": "18000", "recordsWritten": "1740", "shuffleOutputBytes": "36540", "shuffleOutputBytesSpilled": "0", "slotMs": "43", "startMs": "1665768404498", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_id, $11:i_category", "FROM item", "WHERE in($11, 'Jewelry')" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage0A_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003484320557491289, "waitRatioMax": 0.003484320557491289, "writeMsAvg": "11", "writeMsMax": "11", "writeRatioAvg": 0.03832752613240418, "writeRatioMax": 0.03832752613240418 }, { "completedParallelInputs": "1", "computeMsAvg": "29", "computeMsMax": "29", "computeRatioAvg": 0.10104529616724739, "computeRatioMax": 0.10104529616724739, "endMs": "1665768404577", "id": "11", "name": "S0B: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.020905923344947737, "readRatioMax": 0.020905923344947737, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "49", "startMs": "1665768404518", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage0B_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003484320557491289, "waitRatioMax": 0.003484320557491289, "writeMsAvg": "25", "writeMsMax": "25", "writeRatioAvg": 0.08710801393728224, "writeRatioMax": 0.08710801393728224 }, { "completedParallelInputs": "1", "computeMsAvg": "18", "computeMsMax": "18", "computeRatioAvg": 0.0627177700348432, "computeRatioMax": 0.0627177700348432, "endMs": "1665768404570", "id": "12", "name": "S0C: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.024390243902439025, "readRatioMax": 0.024390243902439025, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "31", "startMs": "1665768404539", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:ca_address_sk, $71:ca_gmt_offset", "FROM customer_address", "WHERE equal($71, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage0C_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003484320557491289, "waitRatioMax": 0.003484320557491289, "writeMsAvg": "12", "writeMsMax": "12", "writeRatioAvg": 0.041811846689895474, "writeRatioMax": 0.041811846689895474 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.04529616724738676, "computeRatioMax": 0.04529616724738676, "endMs": "1665768404596", "id": "13", "name": "S0D: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.020905923344947737, "readRatioMax": 0.020905923344947737, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665768404554", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120:d_date_sk, $121:d_year, $122:d_moy", "FROM date_dim", "WHERE and(equal($121, 2000), equal($122, 10))" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage0D_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003484320557491289, "waitRatioMax": 0.003484320557491289, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.05574912891986063, "writeRatioMax": 0.05574912891986063 }, { "completedParallelInputs": "1", "computeMsAvg": "204", "computeMsMax": "204", "computeRatioAvg": 0.710801393728223, "computeRatioMax": 0.710801393728223, "endMs": "1665768404738", "id": "15", "inputStages": [ "3", "0", "2", "1" ], "name": "S0F: Join+", "parallelInputs": "1", "readMsAvg": "16", "readMsMax": "16", "readRatioAvg": 0.05574912891986063, "readRatioMax": 0.05574912891986063, "recordsRead": "757401", "recordsWritten": "782", "shuffleOutputBytes": "29716", "shuffleOutputBytesSpilled": "0", "slotMs": "194", "startMs": "1665768404594", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$100:ws_sold_date_sk, $101:ws_item_sk, $102:ws_bill_addr_sk, $103:ws_ext_sales_price", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$140", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$110", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$40, $41", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$50", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $400 := $390", "$230 := SUM($391)" ] }, { "kind": "JOIN", "substeps": [ "$390 := $381, $391 := $380", "SEMI HASH JOIN EACH WITH ALL ON $381 = $50" ] }, { "kind": "JOIN", "substeps": [ "$380 := $371, $381 := $41", "INNER HASH JOIN EACH WITH ALL ON $370 = $40" ] }, { "kind": "JOIN", "substeps": [ "$370 := $360, $371 := $362", "INNER HASH JOIN EACH WITH ALL ON $361 = $110" ] }, { "kind": "JOIN", "substeps": [ "$360 := $101, $361 := $102, $362 := $103", "INNER HASH JOIN EACH WITH ALL ON $100 = $140" ] }, { "kind": "WRITE", "substeps": [ "$400, $230", "TO __stage0F_output", "BY HASH($400)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003484320557491289, "waitRatioMax": 0.003484320557491289, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.024390243902439025, "writeRatioMax": 0.024390243902439025 }, { "completedParallelInputs": "5", "computeMsAvg": "117", "computeMsMax": "136", "computeRatioAvg": 0.4076655052264808, "computeRatioMax": 0.4738675958188153, "endMs": "1665768404718", "id": "16", "inputStages": [ "6", "5", "7", "8" ], "name": "S10: Join+", "parallelInputs": "5", "readMsAvg": "21", "readMsMax": "27", "readRatioAvg": 0.07317073170731707, "readRatioMax": 0.09407665505226481, "recordsRead": "1631633", "recordsWritten": "1782", "shuffleOutputBytes": "67700", "shuffleOutputBytesSpilled": "0", "slotMs": "662", "startMs": "1665768404599", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80:cs_sold_date_sk, $81:cs_bill_addr_sk, $82:cs_item_sk, $83:cs_ext_sales_price", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$130", "FROM __stage08_output" ] }, { "kind": "READ", "substeps": [ "$90", "FROM __stage07_output" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage05_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $340 := $330", "$220 := SUM($331)" ] }, { "kind": "JOIN", "substeps": [ "$330 := $321, $331 := $320", "SEMI HASH JOIN EACH WITH ALL ON $321 = $30" ] }, { "kind": "JOIN", "substeps": [ "$320 := $311, $321 := $21", "INNER HASH JOIN EACH WITH ALL ON $310 = $20" ] }, { "kind": "JOIN", "substeps": [ "$310 := $301, $311 := $302", "INNER HASH JOIN EACH WITH ALL ON $300 = $90" ] }, { "kind": "JOIN", "substeps": [ "$300 := $81, $301 := $82, $302 := $83", "INNER HASH JOIN EACH WITH ALL ON $80 = $130" ] }, { "kind": "WRITE", "substeps": [ "$340, $220", "TO __stage10_output", "BY HASH($340)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003484320557491289, "waitRatioMax": 0.003484320557491289, "writeMsAvg": "5", "writeMsMax": "7", "writeRatioAvg": 0.017421602787456445, "writeRatioMax": 0.024390243902439025 }, { "completedParallelInputs": "6", "computeMsAvg": "234", "computeMsMax": "287", "computeRatioAvg": 0.8153310104529616, "computeRatioMax": 1, "endMs": "1665768404780", "id": "17", "inputStages": [ "13", "12", "10", "11" ], "name": "S11: Join+", "parallelInputs": "6", "readMsAvg": "19", "readMsMax": "24", "readRatioAvg": 0.06620209059233449, "readRatioMax": 0.08362369337979095, "recordsRead": "3108506", "recordsWritten": "3248", "shuffleOutputBytes": "122864", "shuffleOutputBytesSpilled": "0", "slotMs": "1271", "startMs": "1665768404607", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:ss_sold_date_sk, $61:ss_item_sk, $62:ss_addr_sk, $63:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$120", "FROM __stage0D_output" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage0C_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $280 := $270", "$210 := SUM($271)" ] }, { "kind": "JOIN", "substeps": [ "$270 := $261, $271 := $260", "SEMI HASH JOIN EACH WITH ALL ON $261 = $10" ] }, { "kind": "JOIN", "substeps": [ "$260 := $251, $261 := $2", "INNER HASH JOIN EACH WITH ALL ON $250 = $1" ] }, { "kind": "JOIN", "substeps": [ "$250 := $240, $251 := $242", "INNER HASH JOIN EACH WITH ALL ON $241 = $70" ] }, { "kind": "JOIN", "substeps": [ "$240 := $61, $241 := $62, $242 := $63", "INNER HASH JOIN EACH WITH ALL ON $60 = $120" ] }, { "kind": "WRITE", "substeps": [ "$280, $210", "TO __stage11_output", "BY HASH($280)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003484320557491289, "waitRatioMax": 0.003484320557491289, "writeMsAvg": "7", "writeMsMax": "12", "writeRatioAvg": 0.024390243902439025, "writeRatioMax": 0.041811846689895474 }, { "completedParallelInputs": "3", "computeMsAvg": "10", "computeMsMax": "13", "computeRatioAvg": 0.03484320557491289, "computeRatioMax": 0.04529616724738676, "endMs": "1665768404849", "id": "18", "inputStages": [ "17", "15", "16" ], "name": "S12: Aggregate", "parallelInputs": "3", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "5812", "recordsWritten": "3411", "shuffleOutputBytes": "129570", "shuffleOutputBytesSpilled": "0", "slotMs": "101", "startMs": "1665768404813", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$280, $210", "FROM __stage11_output" ] }, { "kind": "READ", "substeps": [ "$340, $220", "FROM __stage10_output" ] }, { "kind": "READ", "substeps": [ "$400, $230", "FROM __stage0F_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $420 := $170", "$160 := SUM($171)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $290 := $280", "$180 := SUM($210)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $350 := $340", "$190 := SUM($220)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $410 := $400", "$200 := SUM($230)" ] }, { "kind": "WRITE", "substeps": [ "$160, $420", "TO __stage12_output", "BY HASH($420)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003484320557491289, "waitRatioMax": 0.003484320557491289, "writeMsAvg": "26", "writeMsMax": "27", "writeRatioAvg": 0.09059233449477352, "writeRatioMax": 0.09407665505226481 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.04529616724738676, "computeRatioMax": 0.04529616724738676, "endMs": "1665768404895", "id": "19", "inputStages": [ "18" ], "name": "S13: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "3411", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "39", "startMs": "1665768404852", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $420", "FROM __stage12_output" ] }, { "kind": "SORT", "substeps": [ "$430 ASC, $150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $430 := $420", "$150 := SUM($160)" ] }, { "kind": "WRITE", "substeps": [ "$440, $441", "TO __stage13_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003484320557491289, "waitRatioMax": 0.003484320557491289, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.05574912891986063, "writeRatioMax": 0.05574912891986063 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.04529616724738676, "computeRatioMax": 0.04529616724738676, "endMs": "1665768404937", "id": "20", "inputStages": [ "19" ], "name": "S14: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "65", "startMs": "1665768404869", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$440, $441", "FROM __stage13_output" ] }, { "kind": "SORT", "substeps": [ "$441 ASC, $440 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$450, $451", "TO __stage14_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.003484320557491289, "waitRatioMax": 0.003484320557491289, "writeMsAvg": "40", "writeMsMax": "40", "writeRatioAvg": 0.13937282229965156, "writeRatioMax": 0.13937282229965156 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_address" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" } ], "statementType": "SELECT", "timeline": [ { "activeUnits": "0", "completedUnits": "24", "elapsedMs": "686", "estimatedRunnableUnits": "0", "pendingUnits": "3", "totalSlotMs": "2771" }, { "activeUnits": "0", "completedUnits": "29", "elapsedMs": "854", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2978" } ], "totalBytesBilled": "201326592", "totalBytesProcessed": "200790347", "totalPartitionsProcessed": "0", "totalSlotMs": "2978", "transferredBytes": "0" }, "startTime": "1665768404121", "totalBytesProcessed": "200790347", "totalSlotMs": "2978" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon566a7ebc_d685_471e_a100_8576703d645a" }, "priority": "INTERACTIVE", "query": "with ss as (\n select\n i_item_id,sum(ss_ext_sales_price) total_sales\n from\n \tstore_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom\n item\nwhere i_category in ('Jewelry'))\n and ss_item_sk = i_item_sk\n and ss_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 10\n and ss_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_item_id),\n cs as (\n select\n i_item_id,sum(cs_ext_sales_price) total_sales\n from\n \tcatalog_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom\n item\nwhere i_category in ('Jewelry'))\n and cs_item_sk = i_item_sk\n and cs_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 10\n and cs_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_item_id),\n ws as (\n select\n i_item_id,sum(ws_ext_sales_price) total_sales\n from\n \tweb_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom\n item\nwhere i_category in ('Jewelry'))\n and ws_item_sk = i_item_sk\n and ws_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 10\n and ws_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5\n group by i_item_id)\n select \n i_item_id\n,sum(total_sales) total_sales\n from (select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ss \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from cs \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ws) tmp1\n group by i_item_id\n order by i_item_id\n ,total_sales\n limit 100;\n", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "zst126yYTqo/mFsrwbxKvw==", "id": "test-project-364309:europe-west1.query60_1665777867", "jobReference": { "jobId": "query60_1665777867", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query60_1665777867?location=europe-west1", "statistics": { "creationTime": "1665777868009", "endTime": "1665777868834", "finalExecutionDurationMs": "562", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "200790347", "performanceInsights": { "avgPreviousExecutionMs": "616" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.03636363636363636, "computeRatioMax": 0.03636363636363636, "endMs": "1665777868228", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.02727272727272727, "readRatioMax": 0.02727272727272727, "recordsRead": "18000", "recordsWritten": "1740", "shuffleOutputBytes": "36540", "shuffleOutputBytesSpilled": "0", "slotMs": "26", "startMs": "1665777868199", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$50:i_item_id, $51:i_category", "FROM item", "WHERE in($51, 'Jewelry')" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage00_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.00909090909090909, "waitRatioMax": 0.00909090909090909, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.06818181818181818, "writeRatioMax": 0.06818181818181818 }, { "completedParallelInputs": "1", "computeMsAvg": "24", "computeMsMax": "24", "computeRatioAvg": 0.10909090909090909, "computeRatioMax": 0.10909090909090909, "endMs": "1665777868258", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.02727272727272727, "readRatioMax": 0.02727272727272727, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "48", "startMs": "1665777868212", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$40, $41", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "27", "writeMsMax": "27", "writeRatioAvg": 0.12272727272727273, "writeRatioMax": 0.12272727272727273 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.05454545454545454, "computeRatioMax": 0.05454545454545454, "endMs": "1665777868256", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.045454545454545456, "readRatioMax": 0.045454545454545456, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "32", "startMs": "1665777868225", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110:ca_address_sk, $111:ca_gmt_offset", "FROM customer_address", "WHERE equal($111, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "9", "writeMsMax": "9", "writeRatioAvg": 0.04090909090909091, "writeRatioMax": 0.04090909090909091 }, { "completedParallelInputs": "1", "computeMsAvg": "6", "computeMsMax": "6", "computeRatioAvg": 0.02727272727272727, "computeRatioMax": 0.02727272727272727, "endMs": "1665777868275", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.022727272727272728, "readRatioMax": 0.022727272727272728, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665777868238", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140:d_date_sk, $141:d_year, $142:d_moy", "FROM date_dim", "WHERE and(equal($141, 2000), equal($142, 10))" ] }, { "kind": "WRITE", "substeps": [ "$140", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "12", "writeMsMax": "12", "writeRatioAvg": 0.05454545454545454, "writeRatioMax": 0.05454545454545454 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.05, "computeRatioMax": 0.05, "endMs": "1665777868299", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.02727272727272727, "readRatioMax": 0.02727272727272727, "recordsRead": "18000", "recordsWritten": "1740", "shuffleOutputBytes": "36540", "shuffleOutputBytesSpilled": "0", "slotMs": "32", "startMs": "1665777868265", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:i_item_id, $31:i_category", "FROM item", "WHERE in($31, 'Jewelry')" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.03636363636363636, "writeRatioMax": 0.03636363636363636 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.06363636363636363, "computeRatioMax": 0.06363636363636363, "endMs": "1665777868322", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.02727272727272727, "readRatioMax": 0.02727272727272727, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "42", "startMs": "1665777868281", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:i_item_sk, $21:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "24", "writeMsMax": "24", "writeRatioAvg": 0.10909090909090909, "writeRatioMax": 0.10909090909090909 }, { "completedParallelInputs": "1", "computeMsAvg": "18", "computeMsMax": "18", "computeRatioAvg": 0.08181818181818182, "computeRatioMax": 0.08181818181818182, "endMs": "1665777868330", "id": "7", "name": "S07: Input", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.04090909090909091, "readRatioMax": 0.04090909090909091, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "50", "startMs": "1665777868293", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90:ca_address_sk, $91:ca_gmt_offset", "FROM customer_address", "WHERE equal($91, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.06363636363636363, "writeRatioMax": 0.06363636363636363 }, { "completedParallelInputs": "1", "computeMsAvg": "16", "computeMsMax": "16", "computeRatioAvg": 0.07272727272727272, "computeRatioMax": 0.07272727272727272, "endMs": "1665777868343", "id": "8", "name": "S08: Input", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.045454545454545456, "readRatioMax": 0.045454545454545456, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "39", "startMs": "1665777868308", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$130:d_date_sk, $131:d_year, $132:d_moy", "FROM date_dim", "WHERE and(equal($131, 2000), equal($132, 10))" ] }, { "kind": "WRITE", "substeps": [ "$130", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.06363636363636363, "writeRatioMax": 0.06363636363636363 }, { "completedParallelInputs": "1", "computeMsAvg": "17", "computeMsMax": "17", "computeRatioAvg": 0.07727272727272727, "computeRatioMax": 0.07727272727272727, "endMs": "1665777868379", "id": "10", "name": "S0A: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.03636363636363636, "readRatioMax": 0.03636363636363636, "recordsRead": "18000", "recordsWritten": "1740", "shuffleOutputBytes": "36540", "shuffleOutputBytesSpilled": "0", "slotMs": "49", "startMs": "1665777868335", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_id, $11:i_category", "FROM item", "WHERE in($11, 'Jewelry')" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage0A_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.00909090909090909, "waitRatioMax": 0.00909090909090909, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.05909090909090909, "writeRatioMax": 0.05909090909090909 }, { "completedParallelInputs": "1", "computeMsAvg": "24", "computeMsMax": "24", "computeRatioAvg": 0.10909090909090909, "computeRatioMax": 0.10909090909090909, "endMs": "1665777868398", "id": "11", "name": "S0B: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.031818181818181815, "readRatioMax": 0.031818181818181815, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "51", "startMs": "1665777868353", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage0B_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "22", "writeMsMax": "22", "writeRatioAvg": 0.1, "writeRatioMax": 0.1 }, { "completedParallelInputs": "1", "computeMsAvg": "18", "computeMsMax": "18", "computeRatioAvg": 0.08181818181818182, "computeRatioMax": 0.08181818181818182, "endMs": "1665777868410", "id": "12", "name": "S0C: Input", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.04090909090909091, "readRatioMax": 0.04090909090909091, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "40", "startMs": "1665777868366", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:ca_address_sk, $71:ca_gmt_offset", "FROM customer_address", "WHERE equal($71, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage0C_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "10", "writeMsMax": "10", "writeRatioAvg": 0.045454545454545456, "writeRatioMax": 0.045454545454545456 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.04090909090909091, "computeRatioMax": 0.04090909090909091, "endMs": "1665777868411", "id": "13", "name": "S0D: Input", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.04090909090909091, "readRatioMax": 0.04090909090909091, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665777868377", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120:d_date_sk, $121:d_year, $122:d_moy", "FROM date_dim", "WHERE and(equal($121, 2000), equal($122, 10))" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage0D_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.031818181818181815, "writeRatioMax": 0.031818181818181815 }, { "completedParallelInputs": "1", "computeMsAvg": "160", "computeMsMax": "160", "computeRatioAvg": 0.7272727272727273, "computeRatioMax": 0.7272727272727273, "endMs": "1665777868520", "id": "15", "inputStages": [ "0", "1", "2", "3" ], "name": "S0F: Join+", "parallelInputs": "1", "readMsAvg": "16", "readMsMax": "16", "readRatioAvg": 0.07272727272727272, "readRatioMax": 0.07272727272727272, "recordsRead": "757401", "recordsWritten": "782", "shuffleOutputBytes": "29716", "shuffleOutputBytesSpilled": "0", "slotMs": "175", "startMs": "1665777868402", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$100:ws_sold_date_sk, $101:ws_item_sk, $102:ws_bill_addr_sk, $103:ws_ext_sales_price", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$140", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$110", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$40, $41", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$50", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $400 := $390", "$230 := SUM($391)" ] }, { "kind": "JOIN", "substeps": [ "$390 := $381, $391 := $380", "SEMI HASH JOIN EACH WITH ALL ON $381 = $50" ] }, { "kind": "JOIN", "substeps": [ "$380 := $371, $381 := $41", "INNER HASH JOIN EACH WITH ALL ON $370 = $40" ] }, { "kind": "JOIN", "substeps": [ "$370 := $360, $371 := $362", "INNER HASH JOIN EACH WITH ALL ON $361 = $110" ] }, { "kind": "JOIN", "substeps": [ "$360 := $101, $361 := $102, $362 := $103", "INNER HASH JOIN EACH WITH ALL ON $100 = $140" ] }, { "kind": "WRITE", "substeps": [ "$400, $230", "TO __stage0F_output", "BY HASH($400)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.031818181818181815, "writeRatioMax": 0.031818181818181815 }, { "completedParallelInputs": "5", "computeMsAvg": "116", "computeMsMax": "137", "computeRatioAvg": 0.5272727272727272, "computeRatioMax": 0.6227272727272727, "endMs": "1665777868527", "id": "16", "inputStages": [ "5", "6", "8", "7" ], "name": "S10: Join+", "parallelInputs": "5", "readMsAvg": "16", "readMsMax": "19", "readRatioAvg": 0.07272727272727272, "readRatioMax": 0.08636363636363636, "recordsRead": "1631633", "recordsWritten": "1782", "shuffleOutputBytes": "67700", "shuffleOutputBytesSpilled": "0", "slotMs": "654", "startMs": "1665777868416", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80:cs_sold_date_sk, $81:cs_bill_addr_sk, $82:cs_item_sk, $83:cs_ext_sales_price", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$130", "FROM __stage08_output" ] }, { "kind": "READ", "substeps": [ "$90", "FROM __stage07_output" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage05_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $340 := $330", "$220 := SUM($331)" ] }, { "kind": "JOIN", "substeps": [ "$330 := $321, $331 := $320", "SEMI HASH JOIN EACH WITH ALL ON $321 = $30" ] }, { "kind": "JOIN", "substeps": [ "$320 := $311, $321 := $21", "INNER HASH JOIN EACH WITH ALL ON $310 = $20" ] }, { "kind": "JOIN", "substeps": [ "$310 := $301, $311 := $302", "INNER HASH JOIN EACH WITH ALL ON $300 = $90" ] }, { "kind": "JOIN", "substeps": [ "$300 := $81, $301 := $82, $302 := $83", "INNER HASH JOIN EACH WITH ALL ON $80 = $130" ] }, { "kind": "WRITE", "substeps": [ "$340, $220", "TO __stage10_output", "BY HASH($340)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "5", "writeMsMax": "5", "writeRatioAvg": 0.022727272727272728, "writeRatioMax": 0.022727272727272728 }, { "completedParallelInputs": "6", "computeMsAvg": "178", "computeMsMax": "220", "computeRatioAvg": 0.8090909090909091, "computeRatioMax": 1, "endMs": "1665777868607", "id": "17", "inputStages": [ "12", "13", "11", "10" ], "name": "S11: Join+", "parallelInputs": "6", "readMsAvg": "19", "readMsMax": "29", "readRatioAvg": 0.08636363636363636, "readRatioMax": 0.1318181818181818, "recordsRead": "3108506", "recordsWritten": "3248", "shuffleOutputBytes": "122864", "shuffleOutputBytesSpilled": "0", "slotMs": "1099", "startMs": "1665777868427", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:ss_sold_date_sk, $61:ss_item_sk, $62:ss_addr_sk, $63:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$120", "FROM __stage0D_output" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage0C_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $280 := $270", "$210 := SUM($271)" ] }, { "kind": "JOIN", "substeps": [ "$270 := $261, $271 := $260", "SEMI HASH JOIN EACH WITH ALL ON $261 = $10" ] }, { "kind": "JOIN", "substeps": [ "$260 := $251, $261 := $2", "INNER HASH JOIN EACH WITH ALL ON $250 = $1" ] }, { "kind": "JOIN", "substeps": [ "$250 := $240, $251 := $242", "INNER HASH JOIN EACH WITH ALL ON $241 = $70" ] }, { "kind": "JOIN", "substeps": [ "$240 := $61, $241 := $62, $242 := $63", "INNER HASH JOIN EACH WITH ALL ON $60 = $120" ] }, { "kind": "WRITE", "substeps": [ "$280, $210", "TO __stage11_output", "BY HASH($280)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "5", "writeMsMax": "5", "writeRatioAvg": 0.022727272727272728, "writeRatioMax": 0.022727272727272728 }, { "completedParallelInputs": "3", "computeMsAvg": "11", "computeMsMax": "13", "computeRatioAvg": 0.05, "computeRatioMax": 0.05909090909090909, "endMs": "1665777868667", "id": "18", "inputStages": [ "16", "17", "15" ], "name": "S12: Aggregate", "parallelInputs": "3", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "5812", "recordsWritten": "3411", "shuffleOutputBytes": "129570", "shuffleOutputBytesSpilled": "0", "slotMs": "102", "startMs": "1665777868630", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$280, $210", "FROM __stage11_output" ] }, { "kind": "READ", "substeps": [ "$340, $220", "FROM __stage10_output" ] }, { "kind": "READ", "substeps": [ "$400, $230", "FROM __stage0F_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $420 := $170", "$160 := SUM($171)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $290 := $280", "$180 := SUM($210)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $350 := $340", "$190 := SUM($220)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $410 := $400", "$200 := SUM($230)" ] }, { "kind": "WRITE", "substeps": [ "$160, $420", "TO __stage12_output", "BY HASH($420)" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.00909090909090909, "waitRatioMax": 0.00909090909090909, "writeMsAvg": "13", "writeMsMax": "14", "writeRatioAvg": 0.05909090909090909, "writeRatioMax": 0.06363636363636363 }, { "completedParallelInputs": "1", "computeMsAvg": "6", "computeMsMax": "6", "computeRatioAvg": 0.02727272727272727, "computeRatioMax": 0.02727272727272727, "endMs": "1665777868696", "id": "19", "inputStages": [ "18" ], "name": "S13: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "3411", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "17", "startMs": "1665777868675", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $420", "FROM __stage12_output" ] }, { "kind": "SORT", "substeps": [ "$430 ASC, $150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $430 := $420", "$150 := SUM($160)" ] }, { "kind": "WRITE", "substeps": [ "$440, $441", "TO __stage13_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.05909090909090909, "writeRatioMax": 0.05909090909090909 }, { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.03636363636363636, "computeRatioMax": 0.03636363636363636, "endMs": "1665777868722", "id": "20", "inputStages": [ "19" ], "name": "S14: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "40", "startMs": "1665777868688", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$440, $441", "FROM __stage13_output" ] }, { "kind": "SORT", "substeps": [ "$441 ASC, $440 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$450, $451", "TO __stage14_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.07272727272727272, "writeRatioMax": 0.07272727272727272 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_address" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" } ], "statementType": "SELECT", "timeline": [ { "activeUnits": "1", "completedUnits": "28", "elapsedMs": "634", "estimatedRunnableUnits": "0", "pendingUnits": "1", "totalSlotMs": "2711" }, { "activeUnits": "1", "completedUnits": "29", "elapsedMs": "699", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2751" } ], "totalBytesBilled": "201326592", "totalBytesProcessed": "200790347", "totalPartitionsProcessed": "0", "totalSlotMs": "2751", "transferredBytes": "0" }, "startTime": "1665777868068", "totalBytesProcessed": "200790347", "totalSlotMs": "2751" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon76423216_9065_4c2b_b845_d52c0433f93e" }, "priority": "INTERACTIVE", "query": "with ss as (\n select\n i_item_id,sum(ss_ext_sales_price) total_sales\n from\n \tstore_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom\n item\nwhere i_category in ('Jewelry'))\n and ss_item_sk = i_item_sk\n and ss_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 10\n and ss_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_item_id),\n cs as (\n select\n i_item_id,sum(cs_ext_sales_price) total_sales\n from\n \tcatalog_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom\n item\nwhere i_category in ('Jewelry'))\n and cs_item_sk = i_item_sk\n and cs_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 10\n and cs_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_item_id),\n ws as (\n select\n i_item_id,sum(ws_ext_sales_price) total_sales\n from\n \tweb_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom\n item\nwhere i_category in ('Jewelry'))\n and ws_item_sk = i_item_sk\n and ws_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 10\n and ws_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5\n group by i_item_id)\n select \n i_item_id\n,sum(total_sales) total_sales\n from (select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ss \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from cs \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ws) tmp1\n group by i_item_id\n order by i_item_id\n ,total_sales\n limit 100;\n", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "UBXmpIP5l9iFr+e8Ilm9Kg==", "id": "test-project-364309:europe-west1.query60_1665777869", "jobReference": { "jobId": "query60_1665777869", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query60_1665777869?location=europe-west1", "statistics": { "creationTime": "1665777870416", "endTime": "1665777871225", "finalExecutionDurationMs": "543", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "200790347", "performanceInsights": { "avgPreviousExecutionMs": "608" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.06578947368421052, "computeRatioMax": 0.06578947368421052, "endMs": "1665777870653", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.03070175438596491, "readRatioMax": 0.03070175438596491, "recordsRead": "18000", "recordsWritten": "1740", "shuffleOutputBytes": "36540", "shuffleOutputBytesSpilled": "0", "slotMs": "49", "startMs": "1665777870610", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$50:i_item_id, $51:i_category", "FROM item", "WHERE in($51, 'Jewelry')" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0043859649122807015, "waitRatioMax": 0.0043859649122807015, "writeMsAvg": "12", "writeMsMax": "12", "writeRatioAvg": 0.05263157894736842, "writeRatioMax": 0.05263157894736842 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.06140350877192982, "computeRatioMax": 0.06140350877192982, "endMs": "1665777870675", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.021929824561403508, "readRatioMax": 0.021929824561403508, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "50", "startMs": "1665777870624", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$40, $41", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0043859649122807015, "waitRatioMax": 0.0043859649122807015, "writeMsAvg": "23", "writeMsMax": "23", "writeRatioAvg": 0.10087719298245613, "writeRatioMax": 0.10087719298245613 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.06140350877192982, "computeRatioMax": 0.06140350877192982, "endMs": "1665777870674", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.021929824561403508, "readRatioMax": 0.021929824561403508, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "29", "startMs": "1665777870639", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110:ca_address_sk, $111:ca_gmt_offset", "FROM customer_address", "WHERE equal($111, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0043859649122807015, "waitRatioMax": 0.0043859649122807015, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.03508771929824561, "writeRatioMax": 0.03508771929824561 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.05263157894736842, "computeRatioMax": 0.05263157894736842, "endMs": "1665777870693", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.043859649122807015, "readRatioMax": 0.043859649122807015, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "43", "startMs": "1665777870653", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140:d_date_sk, $141:d_year, $142:d_moy", "FROM date_dim", "WHERE and(equal($141, 2000), equal($142, 10))" ] }, { "kind": "WRITE", "substeps": [ "$140", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0043859649122807015, "waitRatioMax": 0.0043859649122807015, "writeMsAvg": "10", "writeMsMax": "10", "writeRatioAvg": 0.043859649122807015, "writeRatioMax": 0.043859649122807015 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.05701754385964912, "computeRatioMax": 0.05701754385964912, "endMs": "1665777870719", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.043859649122807015, "readRatioMax": 0.043859649122807015, "recordsRead": "18000", "recordsWritten": "1740", "shuffleOutputBytes": "36540", "shuffleOutputBytesSpilled": "0", "slotMs": "37", "startMs": "1665777870680", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:i_item_id, $31:i_category", "FROM item", "WHERE in($31, 'Jewelry')" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0043859649122807015, "waitRatioMax": 0.0043859649122807015, "writeMsAvg": "18", "writeMsMax": "18", "writeRatioAvg": 0.07894736842105263, "writeRatioMax": 0.07894736842105263 }, { "completedParallelInputs": "1", "computeMsAvg": "24", "computeMsMax": "24", "computeRatioAvg": 0.10526315789473684, "computeRatioMax": 0.10526315789473684, "endMs": "1665777870745", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.02631578947368421, "readRatioMax": 0.02631578947368421, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "69", "startMs": "1665777870691", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:i_item_sk, $21:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0043859649122807015, "waitRatioMax": 0.0043859649122807015, "writeMsAvg": "23", "writeMsMax": "23", "writeRatioAvg": 0.10087719298245613, "writeRatioMax": 0.10087719298245613 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.043859649122807015, "computeRatioMax": 0.043859649122807015, "endMs": "1665777870734", "id": "7", "name": "S07: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.02631578947368421, "readRatioMax": 0.02631578947368421, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "37", "startMs": "1665777870705", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90:ca_address_sk, $91:ca_gmt_offset", "FROM customer_address", "WHERE equal($91, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0043859649122807015, "waitRatioMax": 0.0043859649122807015, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.06140350877192982, "writeRatioMax": 0.06140350877192982 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.04824561403508772, "computeRatioMax": 0.04824561403508772, "endMs": "1665777870753", "id": "8", "name": "S08: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.03508771929824561, "readRatioMax": 0.03508771929824561, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "38", "startMs": "1665777870721", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$130:d_date_sk, $131:d_year, $132:d_moy", "FROM date_dim", "WHERE and(equal($131, 2000), equal($132, 10))" ] }, { "kind": "WRITE", "substeps": [ "$130", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0043859649122807015, "waitRatioMax": 0.0043859649122807015, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.06578947368421052, "writeRatioMax": 0.06578947368421052 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.04824561403508772, "computeRatioMax": 0.04824561403508772, "endMs": "1665777870779", "id": "10", "name": "S0A: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.021929824561403508, "readRatioMax": 0.021929824561403508, "recordsRead": "18000", "recordsWritten": "1740", "shuffleOutputBytes": "36540", "shuffleOutputBytesSpilled": "0", "slotMs": "23", "startMs": "1665777870752", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_id, $11:i_category", "FROM item", "WHERE in($11, 'Jewelry')" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage0A_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0043859649122807015, "waitRatioMax": 0.0043859649122807015, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.06578947368421052, "writeRatioMax": 0.06578947368421052 }, { "completedParallelInputs": "1", "computeMsAvg": "19", "computeMsMax": "19", "computeRatioAvg": 0.08333333333333333, "computeRatioMax": 0.08333333333333333, "endMs": "1665777870807", "id": "11", "name": "S0B: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.021929824561403508, "readRatioMax": 0.021929824561403508, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "42", "startMs": "1665777870765", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage0B_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0043859649122807015, "waitRatioMax": 0.0043859649122807015, "writeMsAvg": "25", "writeMsMax": "25", "writeRatioAvg": 0.10964912280701754, "writeRatioMax": 0.10964912280701754 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.04824561403508772, "computeRatioMax": 0.04824561403508772, "endMs": "1665777870805", "id": "12", "name": "S0C: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.021929824561403508, "readRatioMax": 0.021929824561403508, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "28", "startMs": "1665777870779", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:ca_address_sk, $71:ca_gmt_offset", "FROM customer_address", "WHERE equal($71, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage0C_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0043859649122807015, "waitRatioMax": 0.0043859649122807015, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.05701754385964912, "writeRatioMax": 0.05701754385964912 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.05701754385964912, "computeRatioMax": 0.05701754385964912, "endMs": "1665777870821", "id": "13", "name": "S0D: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.03070175438596491, "readRatioMax": 0.03070175438596491, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665777870793", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120:d_date_sk, $121:d_year, $122:d_moy", "FROM date_dim", "WHERE and(equal($121, 2000), equal($122, 10))" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage0D_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0043859649122807015, "waitRatioMax": 0.0043859649122807015, "writeMsAvg": "12", "writeMsMax": "12", "writeRatioAvg": 0.05263157894736842, "writeRatioMax": 0.05263157894736842 }, { "completedParallelInputs": "1", "computeMsAvg": "171", "computeMsMax": "171", "computeRatioAvg": 0.75, "computeRatioMax": 0.75, "endMs": "1665777870956", "id": "15", "inputStages": [ "0", "2", "1", "3" ], "name": "S0F: Join+", "parallelInputs": "1", "readMsAvg": "16", "readMsMax": "16", "readRatioAvg": 0.07017543859649122, "readRatioMax": 0.07017543859649122, "recordsRead": "757401", "recordsWritten": "782", "shuffleOutputBytes": "29716", "shuffleOutputBytesSpilled": "0", "slotMs": "192", "startMs": "1665777870820", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$100:ws_sold_date_sk, $101:ws_item_sk, $102:ws_bill_addr_sk, $103:ws_ext_sales_price", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$140", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$110", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$40, $41", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$50", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $400 := $390", "$230 := SUM($391)" ] }, { "kind": "JOIN", "substeps": [ "$390 := $381, $391 := $380", "SEMI HASH JOIN EACH WITH ALL ON $381 = $50" ] }, { "kind": "JOIN", "substeps": [ "$380 := $371, $381 := $41", "INNER HASH JOIN EACH WITH ALL ON $370 = $40" ] }, { "kind": "JOIN", "substeps": [ "$370 := $360, $371 := $362", "INNER HASH JOIN EACH WITH ALL ON $361 = $110" ] }, { "kind": "JOIN", "substeps": [ "$360 := $101, $361 := $102, $362 := $103", "INNER HASH JOIN EACH WITH ALL ON $100 = $140" ] }, { "kind": "WRITE", "substeps": [ "$400, $230", "TO __stage0F_output", "BY HASH($400)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0043859649122807015, "waitRatioMax": 0.0043859649122807015, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.03070175438596491, "writeRatioMax": 0.03070175438596491 }, { "completedParallelInputs": "5", "computeMsAvg": "121", "computeMsMax": "142", "computeRatioAvg": 0.5307017543859649, "computeRatioMax": 0.6228070175438597, "endMs": "1665777870951", "id": "16", "inputStages": [ "5", "7", "8", "6" ], "name": "S10: Join+", "parallelInputs": "5", "readMsAvg": "18", "readMsMax": "24", "readRatioAvg": 0.07894736842105263, "readRatioMax": 0.10526315789473684, "recordsRead": "1631633", "recordsWritten": "1782", "shuffleOutputBytes": "67700", "shuffleOutputBytesSpilled": "0", "slotMs": "724", "startMs": "1665777870824", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80:cs_sold_date_sk, $81:cs_bill_addr_sk, $82:cs_item_sk, $83:cs_ext_sales_price", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$130", "FROM __stage08_output" ] }, { "kind": "READ", "substeps": [ "$90", "FROM __stage07_output" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage05_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $340 := $330", "$220 := SUM($331)" ] }, { "kind": "JOIN", "substeps": [ "$330 := $321, $331 := $320", "SEMI HASH JOIN EACH WITH ALL ON $321 = $30" ] }, { "kind": "JOIN", "substeps": [ "$320 := $311, $321 := $21", "INNER HASH JOIN EACH WITH ALL ON $310 = $20" ] }, { "kind": "JOIN", "substeps": [ "$310 := $301, $311 := $302", "INNER HASH JOIN EACH WITH ALL ON $300 = $90" ] }, { "kind": "JOIN", "substeps": [ "$300 := $81, $301 := $82, $302 := $83", "INNER HASH JOIN EACH WITH ALL ON $80 = $130" ] }, { "kind": "WRITE", "substeps": [ "$340, $220", "TO __stage10_output", "BY HASH($340)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0043859649122807015, "waitRatioMax": 0.0043859649122807015, "writeMsAvg": "5", "writeMsMax": "6", "writeRatioAvg": 0.021929824561403508, "writeRatioMax": 0.02631578947368421 }, { "completedParallelInputs": "6", "computeMsAvg": "181", "computeMsMax": "228", "computeRatioAvg": 0.793859649122807, "computeRatioMax": 1, "endMs": "1665777871003", "id": "17", "inputStages": [ "10", "11", "12", "13" ], "name": "S11: Join+", "parallelInputs": "6", "readMsAvg": "18", "readMsMax": "26", "readRatioAvg": 0.07894736842105263, "readRatioMax": 0.11403508771929824, "recordsRead": "3108506", "recordsWritten": "3248", "shuffleOutputBytes": "122864", "shuffleOutputBytesSpilled": "0", "slotMs": "1081", "startMs": "1665777870829", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:ss_sold_date_sk, $61:ss_item_sk, $62:ss_addr_sk, $63:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$120", "FROM __stage0D_output" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage0C_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $280 := $270", "$210 := SUM($271)" ] }, { "kind": "JOIN", "substeps": [ "$270 := $261, $271 := $260", "SEMI HASH JOIN EACH WITH ALL ON $261 = $10" ] }, { "kind": "JOIN", "substeps": [ "$260 := $251, $261 := $2", "INNER HASH JOIN EACH WITH ALL ON $250 = $1" ] }, { "kind": "JOIN", "substeps": [ "$250 := $240, $251 := $242", "INNER HASH JOIN EACH WITH ALL ON $241 = $70" ] }, { "kind": "JOIN", "substeps": [ "$240 := $61, $241 := $62, $242 := $63", "INNER HASH JOIN EACH WITH ALL ON $60 = $120" ] }, { "kind": "WRITE", "substeps": [ "$280, $210", "TO __stage11_output", "BY HASH($280)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0043859649122807015, "waitRatioMax": 0.0043859649122807015, "writeMsAvg": "10", "writeMsMax": "34", "writeRatioAvg": 0.043859649122807015, "writeRatioMax": 0.14912280701754385 }, { "completedParallelInputs": "3", "computeMsAvg": "16", "computeMsMax": "21", "computeRatioAvg": 0.07017543859649122, "computeRatioMax": 0.09210526315789473, "endMs": "1665777871068", "id": "18", "inputStages": [ "17", "15", "16" ], "name": "S12: Aggregate", "parallelInputs": "3", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "5812", "recordsWritten": "3411", "shuffleOutputBytes": "129570", "shuffleOutputBytesSpilled": "0", "slotMs": "125", "startMs": "1665777871023", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$280, $210", "FROM __stage11_output" ] }, { "kind": "READ", "substeps": [ "$340, $220", "FROM __stage10_output" ] }, { "kind": "READ", "substeps": [ "$400, $230", "FROM __stage0F_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $420 := $170", "$160 := SUM($171)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $290 := $280", "$180 := SUM($210)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $350 := $340", "$190 := SUM($220)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $410 := $400", "$200 := SUM($230)" ] }, { "kind": "WRITE", "substeps": [ "$160, $420", "TO __stage12_output", "BY HASH($420)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0043859649122807015, "waitRatioMax": 0.0043859649122807015, "writeMsAvg": "16", "writeMsMax": "19", "writeRatioAvg": 0.07017543859649122, "writeRatioMax": 0.08333333333333333 }, { "completedParallelInputs": "1", "computeMsAvg": "6", "computeMsMax": "6", "computeRatioAvg": 0.02631578947368421, "computeRatioMax": 0.02631578947368421, "endMs": "1665777871104", "id": "19", "inputStages": [ "18" ], "name": "S13: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "3411", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "29", "startMs": "1665777871071", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $420", "FROM __stage12_output" ] }, { "kind": "SORT", "substeps": [ "$430 ASC, $150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $430 := $420", "$150 := SUM($160)" ] }, { "kind": "WRITE", "substeps": [ "$440, $441", "TO __stage13_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0043859649122807015, "waitRatioMax": 0.0043859649122807015, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.05701754385964912, "writeRatioMax": 0.05701754385964912 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.05263157894736842, "computeRatioMax": 0.05263157894736842, "endMs": "1665777871125", "id": "20", "inputStages": [ "19" ], "name": "S14: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "35", "startMs": "1665777871081", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$440, $441", "FROM __stage13_output" ] }, { "kind": "SORT", "substeps": [ "$441 ASC, $440 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$450, $451", "TO __stage14_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0043859649122807015, "waitRatioMax": 0.0043859649122807015, "writeMsAvg": "6", "writeMsMax": "6", "writeRatioAvg": 0.02631578947368421, "writeRatioMax": 0.02631578947368421 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_address" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" } ], "statementType": "SELECT", "timeline": [ { "activeUnits": "1", "completedUnits": "28", "elapsedMs": "642", "estimatedRunnableUnits": "0", "pendingUnits": "1", "totalSlotMs": "2716" }, { "activeUnits": "1", "completedUnits": "29", "elapsedMs": "688", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2752" } ], "totalBytesBilled": "201326592", "totalBytesProcessed": "200790347", "totalPartitionsProcessed": "0", "totalSlotMs": "2752", "transferredBytes": "0" }, "startTime": "1665777870470", "totalBytesProcessed": "200790347", "totalSlotMs": "2752" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anonc1c626ed_e5c1_4b4a_87ec_c81d61d68a0e" }, "priority": "INTERACTIVE", "query": "with ss as (\n select\n i_item_id,sum(ss_ext_sales_price) total_sales\n from\n \tstore_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom\n item\nwhere i_category in ('Jewelry'))\n and ss_item_sk = i_item_sk\n and ss_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 10\n and ss_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_item_id),\n cs as (\n select\n i_item_id,sum(cs_ext_sales_price) total_sales\n from\n \tcatalog_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom\n item\nwhere i_category in ('Jewelry'))\n and cs_item_sk = i_item_sk\n and cs_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 10\n and cs_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_item_id),\n ws as (\n select\n i_item_id,sum(ws_ext_sales_price) total_sales\n from\n \tweb_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom\n item\nwhere i_category in ('Jewelry'))\n and ws_item_sk = i_item_sk\n and ws_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 10\n and ws_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5\n group by i_item_id)\n select \n i_item_id\n,sum(total_sales) total_sales\n from (select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ss \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from cs \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ws) tmp1\n group by i_item_id\n order by i_item_id\n ,total_sales\n limit 100;\n", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "Tkhc4QyU6mdXzYh9RCkYig==", "id": "test-project-364309:europe-west1.query60_1665777872", "jobReference": { "jobId": "query60_1665777872", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query60_1665777872?location=europe-west1", "statistics": { "creationTime": "1665777872769", "endTime": "1665777873777", "finalExecutionDurationMs": "725", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "200790347", "performanceInsights": { "avgPreviousExecutionMs": "600" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "8", "computeMsMax": "8", "computeRatioAvg": 0.030418250950570342, "computeRatioMax": 0.030418250950570342, "endMs": "1665777873061", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.015209125475285171, "readRatioMax": 0.015209125475285171, "recordsRead": "18000", "recordsWritten": "1740", "shuffleOutputBytes": "36540", "shuffleOutputBytesSpilled": "0", "slotMs": "42", "startMs": "1665777873012", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$50:i_item_id, $51:i_category", "FROM item", "WHERE in($51, 'Jewelry')" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage00_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.0076045627376425855, "waitRatioMax": 0.0076045627376425855, "writeMsAvg": "26", "writeMsMax": "26", "writeRatioAvg": 0.09885931558935361, "writeRatioMax": 0.09885931558935361 }, { "completedParallelInputs": "1", "computeMsAvg": "19", "computeMsMax": "19", "computeRatioAvg": 0.07224334600760456, "computeRatioMax": 0.07224334600760456, "endMs": "1665777873087", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.022813688212927757, "readRatioMax": 0.022813688212927757, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "61", "startMs": "1665777873029", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$40, $41", "TO __stage01_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.0076045627376425855, "waitRatioMax": 0.0076045627376425855, "writeMsAvg": "27", "writeMsMax": "27", "writeRatioAvg": 0.10266159695817491, "writeRatioMax": 0.10266159695817491 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.049429657794676805, "computeRatioMax": 0.049429657794676805, "endMs": "1665777873096", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.022813688212927757, "readRatioMax": 0.022813688212927757, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "42", "startMs": "1665777873050", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110:ca_address_sk, $111:ca_gmt_offset", "FROM customer_address", "WHERE equal($111, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage02_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.0076045627376425855, "waitRatioMax": 0.0076045627376425855, "writeMsAvg": "29", "writeMsMax": "29", "writeRatioAvg": 0.11026615969581749, "writeRatioMax": 0.11026615969581749 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.03802281368821293, "computeRatioMax": 0.03802281368821293, "endMs": "1665777873123", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.030418250950570342, "readRatioMax": 0.030418250950570342, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "47", "startMs": "1665777873078", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140:d_date_sk, $141:d_year, $142:d_moy", "FROM date_dim", "WHERE and(equal($141, 2000), equal($142, 10))" ] }, { "kind": "WRITE", "substeps": [ "$140", "TO __stage03_output" ] } ], "waitMsAvg": "11", "waitMsMax": "11", "waitRatioAvg": 0.04182509505703422, "waitRatioMax": 0.04182509505703422, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.060836501901140684, "writeRatioMax": 0.060836501901140684 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.04182509505703422, "computeRatioMax": 0.04182509505703422, "endMs": "1665777873133", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.022813688212927757, "readRatioMax": 0.022813688212927757, "recordsRead": "18000", "recordsWritten": "1740", "shuffleOutputBytes": "36540", "shuffleOutputBytesSpilled": "0", "slotMs": "29", "startMs": "1665777873104", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:i_item_id, $31:i_category", "FROM item", "WHERE in($31, 'Jewelry')" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0038022813688212928, "waitRatioMax": 0.0038022813688212928, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.060836501901140684, "writeRatioMax": 0.060836501901140684 }, { "completedParallelInputs": "1", "computeMsAvg": "25", "computeMsMax": "25", "computeRatioAvg": 0.09505703422053231, "computeRatioMax": 0.09505703422053231, "endMs": "1665777873179", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.026615969581749048, "readRatioMax": 0.026615969581749048, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "53", "startMs": "1665777873119", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:i_item_sk, $21:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage06_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.0076045627376425855, "waitRatioMax": 0.0076045627376425855, "writeMsAvg": "27", "writeMsMax": "27", "writeRatioAvg": 0.10266159695817491, "writeRatioMax": 0.10266159695817491 }, { "completedParallelInputs": "1", "computeMsAvg": "17", "computeMsMax": "17", "computeRatioAvg": 0.06463878326996197, "computeRatioMax": 0.06463878326996197, "endMs": "1665777873214", "id": "7", "name": "S07: Input", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.034220532319391636, "readRatioMax": 0.034220532319391636, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "81", "startMs": "1665777873134", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90:ca_address_sk, $91:ca_gmt_offset", "FROM customer_address", "WHERE equal($91, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0038022813688212928, "waitRatioMax": 0.0038022813688212928, "writeMsAvg": "57", "writeMsMax": "57", "writeRatioAvg": 0.21673003802281368, "writeRatioMax": 0.21673003802281368 }, { "completedParallelInputs": "1", "computeMsAvg": "6", "computeMsMax": "6", "computeRatioAvg": 0.022813688212927757, "computeRatioMax": 0.022813688212927757, "endMs": "1665777873208", "id": "8", "name": "S08: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.022813688212927757, "readRatioMax": 0.022813688212927757, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "32", "startMs": "1665777873172", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$130:d_date_sk, $131:d_year, $132:d_moy", "FROM date_dim", "WHERE and(equal($131, 2000), equal($132, 10))" ] }, { "kind": "WRITE", "substeps": [ "$130", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0038022813688212928, "waitRatioMax": 0.0038022813688212928, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.049429657794676805, "writeRatioMax": 0.049429657794676805 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.034220532319391636, "computeRatioMax": 0.034220532319391636, "endMs": "1665777873249", "id": "10", "name": "S0A: Input", "parallelInputs": "1", "readMsAvg": "11", "readMsMax": "11", "readRatioAvg": 0.04182509505703422, "readRatioMax": 0.04182509505703422, "recordsRead": "18000", "recordsWritten": "1740", "shuffleOutputBytes": "36540", "shuffleOutputBytesSpilled": "0", "slotMs": "37", "startMs": "1665777873208", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_id, $11:i_category", "FROM item", "WHERE in($11, 'Jewelry')" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage0A_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0038022813688212928, "waitRatioMax": 0.0038022813688212928, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.030418250950570342, "writeRatioMax": 0.030418250950570342 }, { "completedParallelInputs": "1", "computeMsAvg": "31", "computeMsMax": "31", "computeRatioAvg": 0.11787072243346007, "computeRatioMax": 0.11787072243346007, "endMs": "1665777873277", "id": "11", "name": "S0B: Input", "parallelInputs": "1", "readMsAvg": "12", "readMsMax": "12", "readRatioAvg": 0.045627376425855515, "readRatioMax": 0.045627376425855515, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "69", "startMs": "1665777873222", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage0B_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0038022813688212928, "waitRatioMax": 0.0038022813688212928, "writeMsAvg": "23", "writeMsMax": "23", "writeRatioAvg": 0.08745247148288973, "writeRatioMax": 0.08745247148288973 }, { "completedParallelInputs": "1", "computeMsAvg": "21", "computeMsMax": "21", "computeRatioAvg": 0.07984790874524715, "computeRatioMax": 0.07984790874524715, "endMs": "1665777873331", "id": "12", "name": "S0C: Input", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.034220532319391636, "readRatioMax": 0.034220532319391636, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "83", "startMs": "1665777873239", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:ca_address_sk, $71:ca_gmt_offset", "FROM customer_address", "WHERE equal($71, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage0C_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0038022813688212928, "waitRatioMax": 0.0038022813688212928, "writeMsAvg": "25", "writeMsMax": "25", "writeRatioAvg": 0.09505703422053231, "writeRatioMax": 0.09505703422053231 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.03802281368821293, "computeRatioMax": 0.03802281368821293, "endMs": "1665777873338", "id": "13", "name": "S0D: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.022813688212927757, "readRatioMax": 0.022813688212927757, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "79", "startMs": "1665777873255", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120:d_date_sk, $121:d_year, $122:d_moy", "FROM date_dim", "WHERE and(equal($121, 2000), equal($122, 10))" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage0D_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0038022813688212928, "waitRatioMax": 0.0038022813688212928, "writeMsAvg": "56", "writeMsMax": "56", "writeRatioAvg": 0.21292775665399238, "writeRatioMax": 0.21292775665399238 }, { "completedParallelInputs": "1", "computeMsAvg": "263", "computeMsMax": "263", "computeRatioAvg": 1, "computeRatioMax": 1, "endMs": "1665777873492", "id": "15", "inputStages": [ "3", "1", "2", "0" ], "name": "S0F: Join+", "parallelInputs": "1", "readMsAvg": "17", "readMsMax": "17", "readRatioAvg": 0.06463878326996197, "readRatioMax": 0.06463878326996197, "recordsRead": "757401", "recordsWritten": "782", "shuffleOutputBytes": "29716", "shuffleOutputBytesSpilled": "0", "slotMs": "242", "startMs": "1665777873329", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$100:ws_sold_date_sk, $101:ws_item_sk, $102:ws_bill_addr_sk, $103:ws_ext_sales_price", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$140", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$110", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$40, $41", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$50", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $400 := $390", "$230 := SUM($391)" ] }, { "kind": "JOIN", "substeps": [ "$390 := $381, $391 := $380", "SEMI HASH JOIN EACH WITH ALL ON $381 = $50" ] }, { "kind": "JOIN", "substeps": [ "$380 := $371, $381 := $41", "INNER HASH JOIN EACH WITH ALL ON $370 = $40" ] }, { "kind": "JOIN", "substeps": [ "$370 := $360, $371 := $362", "INNER HASH JOIN EACH WITH ALL ON $361 = $110" ] }, { "kind": "JOIN", "substeps": [ "$360 := $101, $361 := $102, $362 := $103", "INNER HASH JOIN EACH WITH ALL ON $100 = $140" ] }, { "kind": "WRITE", "substeps": [ "$400, $230", "TO __stage0F_output", "BY HASH($400)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0038022813688212928, "waitRatioMax": 0.0038022813688212928, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.030418250950570342, "writeRatioMax": 0.030418250950570342 }, { "completedParallelInputs": "5", "computeMsAvg": "105", "computeMsMax": "137", "computeRatioAvg": 0.39923954372623577, "computeRatioMax": 0.5209125475285171, "endMs": "1665777873538", "id": "17", "inputStages": [ "6", "7", "8", "5" ], "name": "S11: Join+", "parallelInputs": "5", "readMsAvg": "18", "readMsMax": "25", "readRatioAvg": 0.06844106463878327, "readRatioMax": 0.09505703422053231, "recordsRead": "1631633", "recordsWritten": "1782", "shuffleOutputBytes": "67700", "shuffleOutputBytesSpilled": "0", "slotMs": "592", "startMs": "1665777873351", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80:cs_sold_date_sk, $81:cs_bill_addr_sk, $82:cs_item_sk, $83:cs_ext_sales_price", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$130", "FROM __stage08_output" ] }, { "kind": "READ", "substeps": [ "$90", "FROM __stage07_output" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage05_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $340 := $330", "$220 := SUM($331)" ] }, { "kind": "JOIN", "substeps": [ "$330 := $321, $331 := $320", "SEMI HASH JOIN EACH WITH ALL ON $321 = $30" ] }, { "kind": "JOIN", "substeps": [ "$320 := $311, $321 := $21", "INNER HASH JOIN EACH WITH ALL ON $310 = $20" ] }, { "kind": "JOIN", "substeps": [ "$310 := $301, $311 := $302", "INNER HASH JOIN EACH WITH ALL ON $300 = $90" ] }, { "kind": "JOIN", "substeps": [ "$300 := $81, $301 := $82, $302 := $83", "INNER HASH JOIN EACH WITH ALL ON $80 = $130" ] }, { "kind": "WRITE", "substeps": [ "$340, $220", "TO __stage11_output", "BY HASH($340)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0038022813688212928, "waitRatioMax": 0.0038022813688212928, "writeMsAvg": "5", "writeMsMax": "8", "writeRatioAvg": 0.019011406844106463, "writeRatioMax": 0.030418250950570342 }, { "completedParallelInputs": "6", "computeMsAvg": "189", "computeMsMax": "250", "computeRatioAvg": 0.7186311787072244, "computeRatioMax": 0.9505703422053232, "endMs": "1665777873524", "id": "18", "inputStages": [ "13", "12", "10", "11" ], "name": "S12: Join+", "parallelInputs": "6", "readMsAvg": "17", "readMsMax": "21", "readRatioAvg": 0.06463878326996197, "readRatioMax": 0.07984790874524715, "recordsRead": "3108506", "recordsWritten": "3248", "shuffleOutputBytes": "122864", "shuffleOutputBytesSpilled": "0", "slotMs": "1114", "startMs": "1665777873357", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:ss_sold_date_sk, $61:ss_item_sk, $62:ss_addr_sk, $63:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$120", "FROM __stage0D_output" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage0C_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $280 := $270", "$210 := SUM($271)" ] }, { "kind": "JOIN", "substeps": [ "$270 := $261, $271 := $260", "SEMI HASH JOIN EACH WITH ALL ON $261 = $10" ] }, { "kind": "JOIN", "substeps": [ "$260 := $251, $261 := $2", "INNER HASH JOIN EACH WITH ALL ON $250 = $1" ] }, { "kind": "JOIN", "substeps": [ "$250 := $240, $251 := $242", "INNER HASH JOIN EACH WITH ALL ON $241 = $70" ] }, { "kind": "JOIN", "substeps": [ "$240 := $61, $241 := $62, $242 := $63", "INNER HASH JOIN EACH WITH ALL ON $60 = $120" ] }, { "kind": "WRITE", "substeps": [ "$280, $210", "TO __stage12_output", "BY HASH($280)" ] } ], "waitMsAvg": "1", "waitMsMax": "2", "waitRatioAvg": 0.0038022813688212928, "waitRatioMax": 0.0076045627376425855, "writeMsAvg": "7", "writeMsMax": "13", "writeRatioAvg": 0.026615969581749048, "writeRatioMax": 0.049429657794676805 }, { "completedParallelInputs": "3", "computeMsAvg": "14", "computeMsMax": "26", "computeRatioAvg": 0.053231939163498096, "computeRatioMax": 0.09885931558935361, "endMs": "1665777873623", "id": "19", "inputStages": [ "17", "18", "15" ], "name": "S13: Aggregate", "parallelInputs": "3", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "5812", "recordsWritten": "3411", "shuffleOutputBytes": "129570", "shuffleOutputBytesSpilled": "0", "slotMs": "121", "startMs": "1665777873575", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$280, $210", "FROM __stage12_output" ] }, { "kind": "READ", "substeps": [ "$340, $220", "FROM __stage11_output" ] }, { "kind": "READ", "substeps": [ "$400, $230", "FROM __stage0F_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $420 := $170", "$160 := SUM($171)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $290 := $280", "$180 := SUM($210)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $350 := $340", "$190 := SUM($220)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $410 := $400", "$200 := SUM($230)" ] }, { "kind": "WRITE", "substeps": [ "$160, $420", "TO __stage13_output", "BY HASH($420)" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.0076045627376425855, "waitRatioMax": 0.0076045627376425855, "writeMsAvg": "23", "writeMsMax": "29", "writeRatioAvg": 0.08745247148288973, "writeRatioMax": 0.11026615969581749 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.026615969581749048, "computeRatioMax": 0.026615969581749048, "endMs": "1665777873673", "id": "20", "inputStages": [ "19" ], "name": "S14: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "3411", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "39", "startMs": "1665777873626", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $420", "FROM __stage13_output" ] }, { "kind": "SORT", "substeps": [ "$430 ASC, $150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $430 := $420", "$150 := SUM($160)" ] }, { "kind": "WRITE", "substeps": [ "$440, $441", "TO __stage14_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0038022813688212928, "waitRatioMax": 0.0038022813688212928, "writeMsAvg": "27", "writeMsMax": "27", "writeRatioAvg": 0.10266159695817491, "writeRatioMax": 0.10266159695817491 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.04182509505703422, "computeRatioMax": 0.04182509505703422, "endMs": "1665777873688", "id": "21", "inputStages": [ "20" ], "name": "S15: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "42", "startMs": "1665777873643", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$440, $441", "FROM __stage14_output" ] }, { "kind": "SORT", "substeps": [ "$441 ASC, $440 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$450, $451", "TO __stage15_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.0038022813688212928, "waitRatioMax": 0.0038022813688212928, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.026615969581749048, "writeRatioMax": 0.026615969581749048 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_address" } ], "statementType": "SELECT", "timeline": [ { "activeUnits": "9", "completedUnits": "20", "elapsedMs": "690", "estimatedRunnableUnits": "0", "pendingUnits": "4", "totalSlotMs": "1915" }, { "activeUnits": "9", "completedUnits": "29", "elapsedMs": "908", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2848" } ], "totalBytesBilled": "201326592", "totalBytesProcessed": "200790347", "totalPartitionsProcessed": "0", "totalSlotMs": "2848", "transferredBytes": "0" }, "startTime": "1665777872824", "totalBytesProcessed": "200790347", "totalSlotMs": "2848" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anonbc1cb69a_ca99_4dc9_8525_1c3acc060d42" }, "priority": "INTERACTIVE", "query": "with ss as (\n select\n i_item_id,sum(ss_ext_sales_price) total_sales\n from\n \tstore_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom\n item\nwhere i_category in ('Jewelry'))\n and ss_item_sk = i_item_sk\n and ss_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 10\n and ss_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_item_id),\n cs as (\n select\n i_item_id,sum(cs_ext_sales_price) total_sales\n from\n \tcatalog_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom\n item\nwhere i_category in ('Jewelry'))\n and cs_item_sk = i_item_sk\n and cs_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 10\n and cs_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_item_id),\n ws as (\n select\n i_item_id,sum(ws_ext_sales_price) total_sales\n from\n \tweb_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom\n item\nwhere i_category in ('Jewelry'))\n and ws_item_sk = i_item_sk\n and ws_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 10\n and ws_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5\n group by i_item_id)\n select \n i_item_id\n,sum(total_sales) total_sales\n from (select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ss \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from cs \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ws) tmp1\n group by i_item_id\n order by i_item_id\n ,total_sales\n limit 100;\n", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "vKkhKjzn+GjB0x5htiwaeg==", "id": "test-project-364309:europe-west1.query60_1665777874", "jobReference": { "jobId": "query60_1665777874", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query60_1665777874?location=europe-west1", "statistics": { "creationTime": "1665777875453", "endTime": "1665777876368", "finalExecutionDurationMs": "666", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "200790347", "performanceInsights": { "avgPreviousExecutionMs": "614" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.053497942386831275, "computeRatioMax": 0.053497942386831275, "endMs": "1665777875692", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.024691358024691357, "readRatioMax": 0.024691358024691357, "recordsRead": "18000", "recordsWritten": "1740", "shuffleOutputBytes": "36540", "shuffleOutputBytesSpilled": "0", "slotMs": "43", "startMs": "1665777875648", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$50:i_item_id, $51:i_category", "FROM item", "WHERE in($51, 'Jewelry')" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00411522633744856, "waitRatioMax": 0.00411522633744856, "writeMsAvg": "27", "writeMsMax": "27", "writeRatioAvg": 0.1111111111111111, "writeRatioMax": 0.1111111111111111 }, { "completedParallelInputs": "1", "computeMsAvg": "24", "computeMsMax": "24", "computeRatioAvg": 0.09876543209876543, "computeRatioMax": 0.09876543209876543, "endMs": "1665777875736", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.02880658436213992, "readRatioMax": 0.02880658436213992, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "65", "startMs": "1665777875675", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$40, $41", "TO __stage01_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.00823045267489712, "waitRatioMax": 0.00823045267489712, "writeMsAvg": "26", "writeMsMax": "26", "writeRatioAvg": 0.10699588477366255, "writeRatioMax": 0.10699588477366255 }, { "completedParallelInputs": "1", "computeMsAvg": "19", "computeMsMax": "19", "computeRatioAvg": 0.07818930041152264, "computeRatioMax": 0.07818930041152264, "endMs": "1665777875740", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "12", "readMsMax": "12", "readRatioAvg": 0.04938271604938271, "readRatioMax": 0.04938271604938271, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "42", "startMs": "1665777875705", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110:ca_address_sk, $111:ca_gmt_offset", "FROM customer_address", "WHERE equal($111, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage02_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.00823045267489712, "waitRatioMax": 0.00823045267489712, "writeMsAvg": "10", "writeMsMax": "10", "writeRatioAvg": 0.0411522633744856, "writeRatioMax": 0.0411522633744856 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.04938271604938271, "computeRatioMax": 0.04938271604938271, "endMs": "1665777875781", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.03292181069958848, "readRatioMax": 0.03292181069958848, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "54", "startMs": "1665777875722", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140:d_date_sk, $141:d_year, $142:d_moy", "FROM date_dim", "WHERE and(equal($141, 2000), equal($142, 10))" ] }, { "kind": "WRITE", "substeps": [ "$140", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00411522633744856, "waitRatioMax": 0.00411522633744856, "writeMsAvg": "18", "writeMsMax": "18", "writeRatioAvg": 0.07407407407407407, "writeRatioMax": 0.07407407407407407 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.04938271604938271, "computeRatioMax": 0.04938271604938271, "endMs": "1665777875818", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.0205761316872428, "readRatioMax": 0.0205761316872428, "recordsRead": "18000", "recordsWritten": "1740", "shuffleOutputBytes": "36540", "shuffleOutputBytesSpilled": "0", "slotMs": "36", "startMs": "1665777875780", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:i_item_id, $31:i_category", "FROM item", "WHERE in($31, 'Jewelry')" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00411522633744856, "waitRatioMax": 0.00411522633744856, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.06172839506172839, "writeRatioMax": 0.06172839506172839 }, { "completedParallelInputs": "1", "computeMsAvg": "22", "computeMsMax": "22", "computeRatioAvg": 0.09053497942386832, "computeRatioMax": 0.09053497942386832, "endMs": "1665777875839", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.02880658436213992, "readRatioMax": 0.02880658436213992, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "49", "startMs": "1665777875796", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:i_item_sk, $21:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00411522633744856, "waitRatioMax": 0.00411522633744856, "writeMsAvg": "23", "writeMsMax": "23", "writeRatioAvg": 0.09465020576131687, "writeRatioMax": 0.09465020576131687 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.04938271604938271, "computeRatioMax": 0.04938271604938271, "endMs": "1665777875841", "id": "7", "name": "S07: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.02880658436213992, "readRatioMax": 0.02880658436213992, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "28", "startMs": "1665777875812", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90:ca_address_sk, $91:ca_gmt_offset", "FROM customer_address", "WHERE equal($91, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage07_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00411522633744856, "waitRatioMax": 0.00411522633744856, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.03292181069958848, "writeRatioMax": 0.03292181069958848 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.0411522633744856, "computeRatioMax": 0.0411522633744856, "endMs": "1665777875855", "id": "8", "name": "S08: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.02880658436213992, "readRatioMax": 0.02880658436213992, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "30", "startMs": "1665777875827", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$130:d_date_sk, $131:d_year, $132:d_moy", "FROM date_dim", "WHERE and(equal($131, 2000), equal($132, 10))" ] }, { "kind": "WRITE", "substeps": [ "$130", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00411522633744856, "waitRatioMax": 0.00411522633744856, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.053497942386831275, "writeRatioMax": 0.053497942386831275 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.053497942386831275, "computeRatioMax": 0.053497942386831275, "endMs": "1665777875895", "id": "10", "name": "S0A: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.02880658436213992, "readRatioMax": 0.02880658436213992, "recordsRead": "18000", "recordsWritten": "1740", "shuffleOutputBytes": "36540", "shuffleOutputBytesSpilled": "0", "slotMs": "32", "startMs": "1665777875857", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_id, $11:i_category", "FROM item", "WHERE in($11, 'Jewelry')" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage0A_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.00823045267489712, "waitRatioMax": 0.00823045267489712, "writeMsAvg": "9", "writeMsMax": "9", "writeRatioAvg": 0.037037037037037035, "writeRatioMax": 0.037037037037037035 }, { "completedParallelInputs": "1", "computeMsAvg": "22", "computeMsMax": "22", "computeRatioAvg": 0.09053497942386832, "computeRatioMax": 0.09053497942386832, "endMs": "1665777875929", "id": "11", "name": "S0B: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.02880658436213992, "readRatioMax": 0.02880658436213992, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "59", "startMs": "1665777875873", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage0B_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.00823045267489712, "waitRatioMax": 0.00823045267489712, "writeMsAvg": "23", "writeMsMax": "23", "writeRatioAvg": 0.09465020576131687, "writeRatioMax": 0.09465020576131687 }, { "completedParallelInputs": "1", "computeMsAvg": "17", "computeMsMax": "17", "computeRatioAvg": 0.06995884773662552, "computeRatioMax": 0.06995884773662552, "endMs": "1665777875953", "id": "12", "name": "S0C: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.03292181069958848, "readRatioMax": 0.03292181069958848, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "45", "startMs": "1665777875895", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:ca_address_sk, $71:ca_gmt_offset", "FROM customer_address", "WHERE equal($71, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage0C_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00411522633744856, "waitRatioMax": 0.00411522633744856, "writeMsAvg": "25", "writeMsMax": "25", "writeRatioAvg": 0.102880658436214, "writeRatioMax": 0.102880658436214 }, { "completedParallelInputs": "1", "computeMsAvg": "21", "computeMsMax": "21", "computeRatioAvg": 0.08641975308641975, "computeRatioMax": 0.08641975308641975, "endMs": "1665777875964", "id": "13", "name": "S0D: Input", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.0411522633744856, "readRatioMax": 0.0411522633744856, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "50", "startMs": "1665777875917", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120:d_date_sk, $121:d_year, $122:d_moy", "FROM date_dim", "WHERE and(equal($121, 2000), equal($122, 10))" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage0D_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00411522633744856, "waitRatioMax": 0.00411522633744856, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.05761316872427984, "writeRatioMax": 0.05761316872427984 }, { "completedParallelInputs": "1", "computeMsAvg": "243", "computeMsMax": "243", "computeRatioAvg": 1, "computeRatioMax": 1, "endMs": "1665777876087", "id": "15", "inputStages": [ "3", "0", "1", "2" ], "name": "S0F: Join+", "parallelInputs": "1", "readMsAvg": "11", "readMsMax": "11", "readRatioAvg": 0.04526748971193416, "readRatioMax": 0.04526748971193416, "recordsRead": "757401", "recordsWritten": "782", "shuffleOutputBytes": "29716", "shuffleOutputBytesSpilled": "0", "slotMs": "244", "startMs": "1665777875967", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$100:ws_sold_date_sk, $101:ws_item_sk, $102:ws_bill_addr_sk, $103:ws_ext_sales_price", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$140", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$110", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$40, $41", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$50", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $400 := $390", "$230 := SUM($391)" ] }, { "kind": "JOIN", "substeps": [ "$390 := $381, $391 := $380", "SEMI HASH JOIN EACH WITH ALL ON $381 = $50" ] }, { "kind": "JOIN", "substeps": [ "$380 := $371, $381 := $41", "INNER HASH JOIN EACH WITH ALL ON $370 = $40" ] }, { "kind": "JOIN", "substeps": [ "$370 := $360, $371 := $362", "INNER HASH JOIN EACH WITH ALL ON $361 = $110" ] }, { "kind": "JOIN", "substeps": [ "$360 := $101, $361 := $102, $362 := $103", "INNER HASH JOIN EACH WITH ALL ON $100 = $140" ] }, { "kind": "WRITE", "substeps": [ "$400, $230", "TO __stage0F_output", "BY HASH($400)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00411522633744856, "waitRatioMax": 0.00411522633744856, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.02880658436213992, "writeRatioMax": 0.02880658436213992 }, { "completedParallelInputs": "5", "computeMsAvg": "119", "computeMsMax": "145", "computeRatioAvg": 0.4897119341563786, "computeRatioMax": 0.5967078189300411, "endMs": "1665777876087", "id": "16", "inputStages": [ "7", "8", "5", "6" ], "name": "S10: Join+", "parallelInputs": "5", "readMsAvg": "16", "readMsMax": "19", "readRatioAvg": 0.06584362139917696, "readRatioMax": 0.07818930041152264, "recordsRead": "1631633", "recordsWritten": "1782", "shuffleOutputBytes": "67700", "shuffleOutputBytesSpilled": "0", "slotMs": "650", "startMs": "1665777875973", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80:cs_sold_date_sk, $81:cs_bill_addr_sk, $82:cs_item_sk, $83:cs_ext_sales_price", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$130", "FROM __stage08_output" ] }, { "kind": "READ", "substeps": [ "$90", "FROM __stage07_output" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage05_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $340 := $330", "$220 := SUM($331)" ] }, { "kind": "JOIN", "substeps": [ "$330 := $321, $331 := $320", "SEMI HASH JOIN EACH WITH ALL ON $321 = $30" ] }, { "kind": "JOIN", "substeps": [ "$320 := $311, $321 := $21", "INNER HASH JOIN EACH WITH ALL ON $310 = $20" ] }, { "kind": "JOIN", "substeps": [ "$310 := $301, $311 := $302", "INNER HASH JOIN EACH WITH ALL ON $300 = $90" ] }, { "kind": "JOIN", "substeps": [ "$300 := $81, $301 := $82, $302 := $83", "INNER HASH JOIN EACH WITH ALL ON $80 = $130" ] }, { "kind": "WRITE", "substeps": [ "$340, $220", "TO __stage10_output", "BY HASH($340)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00411522633744856, "waitRatioMax": 0.00411522633744856, "writeMsAvg": "4", "writeMsMax": "4", "writeRatioAvg": 0.01646090534979424, "writeRatioMax": 0.01646090534979424 }, { "completedParallelInputs": "6", "computeMsAvg": "156", "computeMsMax": "187", "computeRatioAvg": 0.6419753086419753, "computeRatioMax": 0.7695473251028807, "endMs": "1665777876133", "id": "17", "inputStages": [ "11", "12", "13", "10" ], "name": "S11: Join+", "parallelInputs": "6", "readMsAvg": "16", "readMsMax": "21", "readRatioAvg": 0.06584362139917696, "readRatioMax": 0.08641975308641975, "recordsRead": "3108506", "recordsWritten": "3248", "shuffleOutputBytes": "122864", "shuffleOutputBytesSpilled": "0", "slotMs": "1120", "startMs": "1665777875982", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:ss_sold_date_sk, $61:ss_item_sk, $62:ss_addr_sk, $63:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$120", "FROM __stage0D_output" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage0C_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $280 := $270", "$210 := SUM($271)" ] }, { "kind": "JOIN", "substeps": [ "$270 := $261, $271 := $260", "SEMI HASH JOIN EACH WITH ALL ON $261 = $10" ] }, { "kind": "JOIN", "substeps": [ "$260 := $251, $261 := $2", "INNER HASH JOIN EACH WITH ALL ON $250 = $1" ] }, { "kind": "JOIN", "substeps": [ "$250 := $240, $251 := $242", "INNER HASH JOIN EACH WITH ALL ON $241 = $70" ] }, { "kind": "JOIN", "substeps": [ "$240 := $61, $241 := $62, $242 := $63", "INNER HASH JOIN EACH WITH ALL ON $60 = $120" ] }, { "kind": "WRITE", "substeps": [ "$280, $210", "TO __stage11_output", "BY HASH($280)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00411522633744856, "waitRatioMax": 0.00411522633744856, "writeMsAvg": "4", "writeMsMax": "5", "writeRatioAvg": 0.01646090534979424, "writeRatioMax": 0.0205761316872428 }, { "completedParallelInputs": "3", "computeMsAvg": "10", "computeMsMax": "13", "computeRatioAvg": 0.0411522633744856, "computeRatioMax": 0.053497942386831275, "endMs": "1665777876205", "id": "18", "inputStages": [ "16", "17", "15" ], "name": "S12: Aggregate", "parallelInputs": "3", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "5812", "recordsWritten": "3411", "shuffleOutputBytes": "129570", "shuffleOutputBytesSpilled": "0", "slotMs": "130", "startMs": "1665777876154", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$280, $210", "FROM __stage11_output" ] }, { "kind": "READ", "substeps": [ "$340, $220", "FROM __stage10_output" ] }, { "kind": "READ", "substeps": [ "$400, $230", "FROM __stage0F_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $420 := $170", "$160 := SUM($171)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $290 := $280", "$180 := SUM($210)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $350 := $340", "$190 := SUM($220)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $410 := $400", "$200 := SUM($230)" ] }, { "kind": "WRITE", "substeps": [ "$160, $420", "TO __stage12_output", "BY HASH($420)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00411522633744856, "waitRatioMax": 0.00411522633744856, "writeMsAvg": "28", "writeMsMax": "29", "writeRatioAvg": 0.11522633744855967, "writeRatioMax": 0.11934156378600823 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.037037037037037035, "computeRatioMax": 0.037037037037037035, "endMs": "1665777876245", "id": "19", "inputStages": [ "18" ], "name": "S13: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "3411", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "31", "startMs": "1665777876209", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $420", "FROM __stage12_output" ] }, { "kind": "SORT", "substeps": [ "$430 ASC, $150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $430 := $420", "$150 := SUM($160)" ] }, { "kind": "WRITE", "substeps": [ "$440, $441", "TO __stage13_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00411522633744856, "waitRatioMax": 0.00411522633744856, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.06172839506172839, "writeRatioMax": 0.06172839506172839 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.04938271604938271, "computeRatioMax": 0.04938271604938271, "endMs": "1665777876267", "id": "20", "inputStages": [ "19" ], "name": "S14: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "42", "startMs": "1665777876226", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$440, $441", "FROM __stage13_output" ] }, { "kind": "SORT", "substeps": [ "$441 ASC, $440 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$450, $451", "TO __stage14_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.00411522633744856, "waitRatioMax": 0.00411522633744856, "writeMsAvg": "7", "writeMsMax": "7", "writeRatioAvg": 0.02880658436213992, "writeRatioMax": 0.02880658436213992 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_address" } ], "statementType": "SELECT", "timeline": [ { "activeUnits": "0", "completedUnits": "24", "elapsedMs": "639", "estimatedRunnableUnits": "0", "pendingUnits": "3", "totalSlotMs": "2581" }, { "activeUnits": "0", "completedUnits": "29", "elapsedMs": "804", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2786" } ], "totalBytesBilled": "201326592", "totalBytesProcessed": "200790347", "totalPartitionsProcessed": "0", "totalSlotMs": "2786", "transferredBytes": "0" }, "startTime": "1665777875512", "totalBytesProcessed": "200790347", "totalSlotMs": "2786" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon0877d7d5_9ad1_41cb_83b6_1530bb550b59" }, "priority": "INTERACTIVE", "query": "with ss as (\n select\n i_item_id,sum(ss_ext_sales_price) total_sales\n from\n \tstore_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom\n item\nwhere i_category in ('Jewelry'))\n and ss_item_sk = i_item_sk\n and ss_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 10\n and ss_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_item_id),\n cs as (\n select\n i_item_id,sum(cs_ext_sales_price) total_sales\n from\n \tcatalog_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom\n item\nwhere i_category in ('Jewelry'))\n and cs_item_sk = i_item_sk\n and cs_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 10\n and cs_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5 \n group by i_item_id),\n ws as (\n select\n i_item_id,sum(ws_ext_sales_price) total_sales\n from\n \tweb_sales,\n \tdate_dim,\n customer_address,\n item\n where\n i_item_id in (select\n i_item_id\nfrom\n item\nwhere i_category in ('Jewelry'))\n and ws_item_sk = i_item_sk\n and ws_sold_date_sk = d_date_sk\n and d_year = 2000\n and d_moy = 10\n and ws_bill_addr_sk = ca_address_sk\n and ca_gmt_offset = -5\n group by i_item_id)\n select \n i_item_id\n,sum(total_sales) total_sales\n from (select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ss \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from cs \n union all\n select benchmark.sh benchmark_938pm.sh benchmark_alaa.sh done json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp from ws) tmp1\n group by i_item_id\n order by i_item_id\n ,total_sales\n limit 100;\n", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "YxXg/IakKdFmRyudNaJVvQ==", "id": "test-project-364309:europe-west1.query60_1665777877", "jobReference": { "jobId": "query60_1665777877", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query60_1665777877?location=europe-west1", "statistics": { "creationTime": "1665777877994", "endTime": "1665777878945", "finalExecutionDurationMs": "623", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "200790347", "performanceInsights": { "avgPreviousExecutionMs": "619" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.04090909090909091, "computeRatioMax": 0.04090909090909091, "endMs": "1665777878292", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.022727272727272728, "readRatioMax": 0.022727272727272728, "recordsRead": "18000", "recordsWritten": "1740", "shuffleOutputBytes": "36540", "shuffleOutputBytesSpilled": "0", "slotMs": "37", "startMs": "1665777878252", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$50:i_item_id, $51:i_category", "FROM item", "WHERE in($51, 'Jewelry')" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.06363636363636363, "writeRatioMax": 0.06363636363636363 }, { "completedParallelInputs": "1", "computeMsAvg": "16", "computeMsMax": "16", "computeRatioAvg": 0.07272727272727272, "computeRatioMax": 0.07272727272727272, "endMs": "1665777878328", "id": "1", "name": "S01: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.02727272727272727, "readRatioMax": 0.02727272727272727, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "46", "startMs": "1665777878271", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$40, $41", "TO __stage01_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "27", "writeMsMax": "27", "writeRatioAvg": 0.12272727272727273, "writeRatioMax": 0.12272727272727273 }, { "completedParallelInputs": "1", "computeMsAvg": "27", "computeMsMax": "27", "computeRatioAvg": 0.12272727272727273, "computeRatioMax": 0.12272727272727273, "endMs": "1665777878344", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "18", "readMsMax": "18", "readRatioAvg": 0.08181818181818182, "readRatioMax": 0.08181818181818182, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "62", "startMs": "1665777878289", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$110:ca_address_sk, $111:ca_gmt_offset", "FROM customer_address", "WHERE equal($111, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$110", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "18", "writeMsMax": "18", "writeRatioAvg": 0.08181818181818182, "writeRatioMax": 0.08181818181818182 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.05, "computeRatioMax": 0.05, "endMs": "1665777878339", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "11", "readMsMax": "11", "readRatioAvg": 0.05, "readRatioMax": 0.05, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "32", "startMs": "1665777878309", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$140:d_date_sk, $141:d_year, $142:d_moy", "FROM date_dim", "WHERE and(equal($141, 2000), equal($142, 10))" ] }, { "kind": "WRITE", "substeps": [ "$140", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "9", "writeMsMax": "9", "writeRatioAvg": 0.04090909090909091, "writeRatioMax": 0.04090909090909091 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.05, "computeRatioMax": 0.05, "endMs": "1665777878386", "id": "5", "name": "S05: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.031818181818181815, "readRatioMax": 0.031818181818181815, "recordsRead": "18000", "recordsWritten": "1740", "shuffleOutputBytes": "36540", "shuffleOutputBytesSpilled": "0", "slotMs": "48", "startMs": "1665777878340", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:i_item_id, $31:i_category", "FROM item", "WHERE in($31, 'Jewelry')" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.07272727272727272, "writeRatioMax": 0.07272727272727272 }, { "completedParallelInputs": "1", "computeMsAvg": "24", "computeMsMax": "24", "computeRatioAvg": 0.10909090909090909, "computeRatioMax": 0.10909090909090909, "endMs": "1665777878419", "id": "6", "name": "S06: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.031818181818181815, "readRatioMax": 0.031818181818181815, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "69", "startMs": "1665777878358", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:i_item_sk, $21:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$20, $21", "TO __stage06_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "24", "writeMsMax": "24", "writeRatioAvg": 0.10909090909090909, "writeRatioMax": 0.10909090909090909 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.06818181818181818, "computeRatioMax": 0.06818181818181818, "endMs": "1665777878430", "id": "7", "name": "S07: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.02727272727272727, "readRatioMax": 0.02727272727272727, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "47", "startMs": "1665777878387", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$90:ca_address_sk, $91:ca_gmt_offset", "FROM customer_address", "WHERE equal($91, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$90", "TO __stage07_output" ] } ], "waitMsAvg": "0", "waitMsMax": "0", "waitRatioAvg": 0, "waitRatioMax": 0, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.05909090909090909, "writeRatioMax": 0.05909090909090909 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.05, "computeRatioMax": 0.05, "endMs": "1665777878450", "id": "8", "name": "S08: Input", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.04090909090909091, "readRatioMax": 0.04090909090909091, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "41", "startMs": "1665777878405", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$130:d_date_sk, $131:d_year, $132:d_moy", "FROM date_dim", "WHERE and(equal($131, 2000), equal($132, 10))" ] }, { "kind": "WRITE", "substeps": [ "$130", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.07272727272727272, "writeRatioMax": 0.07272727272727272 }, { "completedParallelInputs": "1", "computeMsAvg": "16", "computeMsMax": "16", "computeRatioAvg": 0.07272727272727272, "computeRatioMax": 0.07272727272727272, "endMs": "1665777878481", "id": "10", "name": "S0A: Input", "parallelInputs": "1", "readMsAvg": "9", "readMsMax": "9", "readRatioAvg": 0.04090909090909091, "readRatioMax": 0.04090909090909091, "recordsRead": "18000", "recordsWritten": "1740", "shuffleOutputBytes": "36540", "shuffleOutputBytesSpilled": "0", "slotMs": "48", "startMs": "1665777878440", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:i_item_id, $11:i_category", "FROM item", "WHERE in($11, 'Jewelry')" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage0A_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "9", "writeMsMax": "9", "writeRatioAvg": 0.04090909090909091, "writeRatioMax": 0.04090909090909091 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.06818181818181818, "computeRatioMax": 0.06818181818181818, "endMs": "1665777878508", "id": "11", "name": "S0B: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.022727272727272728, "readRatioMax": 0.022727272727272728, "recordsRead": "18000", "recordsWritten": "18000", "shuffleOutputBytes": "540000", "shuffleOutputBytesSpilled": "0", "slotMs": "45", "startMs": "1665777878457", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:i_item_sk, $2:i_item_id", "FROM item" ] }, { "kind": "WRITE", "substeps": [ "$1, $2", "TO __stage0B_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "23", "writeMsMax": "23", "writeRatioAvg": 0.10454545454545454, "writeRatioMax": 0.10454545454545454 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.05454545454545454, "computeRatioMax": 0.05454545454545454, "endMs": "1665777878505", "id": "12", "name": "S0C: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.031818181818181815, "readRatioMax": 0.031818181818181815, "recordsRead": "50000", "recordsWritten": "18246", "shuffleOutputBytes": "164214", "shuffleOutputBytesSpilled": "0", "slotMs": "32", "startMs": "1665777878474", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$70:ca_address_sk, $71:ca_gmt_offset", "FROM customer_address", "WHERE equal($71, NUMERIC<...>)" ] }, { "kind": "WRITE", "substeps": [ "$70", "TO __stage0C_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.06818181818181818, "writeRatioMax": 0.06818181818181818 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.05, "computeRatioMax": 0.05, "endMs": "1665777878535", "id": "13", "name": "S0D: Input", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.045454545454545456, "readRatioMax": 0.045454545454545456, "recordsRead": "73049", "recordsWritten": "31", "shuffleOutputBytes": "279", "shuffleOutputBytesSpilled": "0", "slotMs": "45", "startMs": "1665777878491", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$120:d_date_sk, $121:d_year, $122:d_moy", "FROM date_dim", "WHERE and(equal($121, 2000), equal($122, 10))" ] }, { "kind": "WRITE", "substeps": [ "$120", "TO __stage0D_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "10", "writeMsMax": "10", "writeRatioAvg": 0.045454545454545456, "writeRatioMax": 0.045454545454545456 }, { "completedParallelInputs": "1", "computeMsAvg": "190", "computeMsMax": "190", "computeRatioAvg": 0.8636363636363636, "computeRatioMax": 0.8636363636363636, "endMs": "1665777878686", "id": "16", "inputStages": [ "0", "2", "3", "1" ], "name": "S10: Join+", "parallelInputs": "1", "readMsAvg": "21", "readMsMax": "21", "readRatioAvg": 0.09545454545454546, "readRatioMax": 0.09545454545454546, "recordsRead": "757401", "recordsWritten": "782", "shuffleOutputBytes": "29716", "shuffleOutputBytesSpilled": "0", "slotMs": "214", "startMs": "1665777878535", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$100:ws_sold_date_sk, $101:ws_item_sk, $102:ws_bill_addr_sk, $103:ws_ext_sales_price", "FROM web_sales" ] }, { "kind": "READ", "substeps": [ "$140", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$110", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$40, $41", "FROM __stage01_output" ] }, { "kind": "READ", "substeps": [ "$50", "FROM __stage00_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $400 := $390", "$230 := SUM($391)" ] }, { "kind": "JOIN", "substeps": [ "$390 := $381, $391 := $380", "SEMI HASH JOIN EACH WITH ALL ON $381 = $50" ] }, { "kind": "JOIN", "substeps": [ "$380 := $371, $381 := $41", "INNER HASH JOIN EACH WITH ALL ON $370 = $40" ] }, { "kind": "JOIN", "substeps": [ "$370 := $360, $371 := $362", "INNER HASH JOIN EACH WITH ALL ON $361 = $110" ] }, { "kind": "JOIN", "substeps": [ "$360 := $101, $361 := $102, $362 := $103", "INNER HASH JOIN EACH WITH ALL ON $100 = $140" ] }, { "kind": "WRITE", "substeps": [ "$400, $230", "TO __stage10_output", "BY HASH($400)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.03636363636363636, "writeRatioMax": 0.03636363636363636 }, { "completedParallelInputs": "5", "computeMsAvg": "124", "computeMsMax": "170", "computeRatioAvg": 0.5636363636363636, "computeRatioMax": 0.7727272727272727, "endMs": "1665777878671", "id": "17", "inputStages": [ "8", "7", "6", "5" ], "name": "S11: Join+", "parallelInputs": "5", "readMsAvg": "16", "readMsMax": "19", "readRatioAvg": 0.07272727272727272, "readRatioMax": 0.08636363636363636, "recordsRead": "1631633", "recordsWritten": "1782", "shuffleOutputBytes": "67700", "shuffleOutputBytesSpilled": "0", "slotMs": "695", "startMs": "1665777878541", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80:cs_sold_date_sk, $81:cs_bill_addr_sk, $82:cs_item_sk, $83:cs_ext_sales_price", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$130", "FROM __stage08_output" ] }, { "kind": "READ", "substeps": [ "$90", "FROM __stage07_output" ] }, { "kind": "READ", "substeps": [ "$20, $21", "FROM __stage06_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage05_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $340 := $330", "$220 := SUM($331)" ] }, { "kind": "JOIN", "substeps": [ "$330 := $321, $331 := $320", "SEMI HASH JOIN EACH WITH ALL ON $321 = $30" ] }, { "kind": "JOIN", "substeps": [ "$320 := $311, $321 := $21", "INNER HASH JOIN EACH WITH ALL ON $310 = $20" ] }, { "kind": "JOIN", "substeps": [ "$310 := $301, $311 := $302", "INNER HASH JOIN EACH WITH ALL ON $300 = $90" ] }, { "kind": "JOIN", "substeps": [ "$300 := $81, $301 := $82, $302 := $83", "INNER HASH JOIN EACH WITH ALL ON $80 = $130" ] }, { "kind": "WRITE", "substeps": [ "$340, $220", "TO __stage11_output", "BY HASH($340)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "5", "writeMsMax": "7", "writeRatioAvg": 0.022727272727272728, "writeRatioMax": 0.031818181818181815 }, { "completedParallelInputs": "6", "computeMsAvg": "177", "computeMsMax": "220", "computeRatioAvg": 0.8045454545454546, "computeRatioMax": 1, "endMs": "1665777878702", "id": "18", "inputStages": [ "13", "11", "10", "12" ], "name": "S12: Join+", "parallelInputs": "6", "readMsAvg": "18", "readMsMax": "24", "readRatioAvg": 0.08181818181818182, "readRatioMax": 0.10909090909090909, "recordsRead": "3108506", "recordsWritten": "3248", "shuffleOutputBytes": "122864", "shuffleOutputBytesSpilled": "0", "slotMs": "1048", "startMs": "1665777878546", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60:ss_sold_date_sk, $61:ss_item_sk, $62:ss_addr_sk, $63:ss_ext_sales_price", "FROM store_sales" ] }, { "kind": "READ", "substeps": [ "$120", "FROM __stage0D_output" ] }, { "kind": "READ", "substeps": [ "$70", "FROM __stage0C_output" ] }, { "kind": "READ", "substeps": [ "$1, $2", "FROM __stage0B_output" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage0A_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $280 := $270", "$210 := SUM($271)" ] }, { "kind": "JOIN", "substeps": [ "$270 := $261, $271 := $260", "SEMI HASH JOIN EACH WITH ALL ON $261 = $10" ] }, { "kind": "JOIN", "substeps": [ "$260 := $251, $261 := $2", "INNER HASH JOIN EACH WITH ALL ON $250 = $1" ] }, { "kind": "JOIN", "substeps": [ "$250 := $240, $251 := $242", "INNER HASH JOIN EACH WITH ALL ON $241 = $70" ] }, { "kind": "JOIN", "substeps": [ "$240 := $61, $241 := $62, $242 := $63", "INNER HASH JOIN EACH WITH ALL ON $60 = $120" ] }, { "kind": "WRITE", "substeps": [ "$280, $210", "TO __stage12_output", "BY HASH($280)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "5", "writeMsMax": "6", "writeRatioAvg": 0.022727272727272728, "writeRatioMax": 0.02727272727272727 }, { "completedParallelInputs": "3", "computeMsAvg": "11", "computeMsMax": "13", "computeRatioAvg": 0.05, "computeRatioMax": 0.05909090909090909, "endMs": "1665777878777", "id": "19", "inputStages": [ "16", "18", "17" ], "name": "S13: Aggregate", "parallelInputs": "3", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "5812", "recordsWritten": "3411", "shuffleOutputBytes": "129570", "shuffleOutputBytesSpilled": "0", "slotMs": "101", "startMs": "1665777878739", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$280, $210", "FROM __stage12_output" ] }, { "kind": "READ", "substeps": [ "$340, $220", "FROM __stage11_output" ] }, { "kind": "READ", "substeps": [ "$400, $230", "FROM __stage10_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $420 := $170", "$160 := SUM($171)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $290 := $280", "$180 := SUM($210)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $350 := $340", "$190 := SUM($220)" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $410 := $400", "$200 := SUM($230)" ] }, { "kind": "WRITE", "substeps": [ "$160, $420", "TO __stage13_output", "BY HASH($420)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "26", "writeMsMax": "27", "writeRatioAvg": 0.11818181818181818, "writeRatioMax": 0.12272727272727273 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.031818181818181815, "computeRatioMax": 0.031818181818181815, "endMs": "1665777878814", "id": "20", "inputStages": [ "19" ], "name": "S14: Sort+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "3411", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "26", "startMs": "1665777878780", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$160, $420", "FROM __stage13_output" ] }, { "kind": "SORT", "substeps": [ "$430 ASC, $150 ASC", "LIMIT 100" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $430 := $420", "$150 := SUM($160)" ] }, { "kind": "WRITE", "substeps": [ "$440, $441", "TO __stage14_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.07272727272727272, "writeRatioMax": 0.07272727272727272 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.05, "computeRatioMax": 0.05, "endMs": "1665777878840", "id": "21", "inputStages": [ "20" ], "name": "S15: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "100", "recordsWritten": "100", "shuffleOutputBytes": "3800", "shuffleOutputBytesSpilled": "0", "slotMs": "39", "startMs": "1665777878798", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$440, $441", "FROM __stage14_output" ] }, { "kind": "SORT", "substeps": [ "$441 ASC, $440 ASC", "LIMIT 100" ] }, { "kind": "WRITE", "substeps": [ "$450, $451", "TO __stage15_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.004545454545454545, "waitRatioMax": 0.004545454545454545, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.03636363636363636, "writeRatioMax": 0.03636363636363636 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "customer_address" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "store_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "web_sales" } ], "statementType": "SELECT", "timeline": [ { "activeUnits": "3", "completedUnits": "24", "elapsedMs": "655", "estimatedRunnableUnits": "0", "pendingUnits": "3", "totalSlotMs": "2652" }, { "activeUnits": "3", "completedUnits": "29", "elapsedMs": "780", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "2819" } ], "totalBytesBilled": "201326592", "totalBytesProcessed": "200790347", "totalPartitionsProcessed": "0", "totalSlotMs": "2819", "transferredBytes": "0" }, "startTime": "1665777878101", "totalBytesProcessed": "200790347", "totalSlotMs": "2819" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
