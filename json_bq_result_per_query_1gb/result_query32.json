{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anonc2101e37_ff58_4134_839c_5835d69bf45d" }, "priority": "INTERACTIVE", "query": "select sum(cs_ext_discount_amt) as excess_discount_amount\nfrom \n catalog_sales \n ,item \n ,date_dim\nwhere\ni_manufact_id = 977\nand i_item_sk = cs_item_sk \nand d_date between '2000-01-27' and \n (cast('2000-01-27' + 90 as date))\nand d_date_sk = cs_sold_date_sk \nand cs_ext_discount_amt \n > ( \n select \n 1.3 benchmark.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp avg(cs_ext_discount_amt) \n from \n catalog_sales \n ,date_dim\n where \n cs_item_sk = i_item_sk \n and d_date between '2000-01-27' and\n (cast('2000-01-27' + 90 as date))\n and d_date_sk = cs_sold_date_sk \n ) \nlimit 100;", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "N9zf98L9WwOnKPv9XmncRA==", "id": "test-project-364309:europe-west1.query32_1665768318", "jobReference": { "jobId": "query32_1665768318", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query32_1665768318?location=europe-west1", "statistics": { "creationTime": "1665768318983", "endTime": "1665768319595", "finalExecutionDurationMs": "448", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "47414112", "performanceInsights": { "avgPreviousExecutionMs": "446" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.08695652173913043, "computeRatioMax": 0.08695652173913043, "endMs": "1665768319160", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.043478260869565216, "readRatioMax": 0.043478260869565216, "recordsRead": "73049", "recordsWritten": "91", "shuffleOutputBytes": "819", "shuffleOutputBytesSpilled": "0", "slotMs": "52", "startMs": "1665768319120", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:d_date_sk, $11:d_date", "FROM date_dim", "WHERE between($11, 10983, 11073)" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007246376811594203, "waitRatioMax": 0.007246376811594203, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.10144927536231885, "writeRatioMax": 0.10144927536231885 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.08695652173913043, "computeRatioMax": 0.08695652173913043, "endMs": "1665768319190", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.028985507246376812, "readRatioMax": 0.028985507246376812, "recordsRead": "73049", "recordsWritten": "91", "shuffleOutputBytes": "819", "shuffleOutputBytesSpilled": "0", "slotMs": "44", "startMs": "1665768319152", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_date", "FROM date_dim", "WHERE between($31, 10983, 11073)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007246376811594203, "waitRatioMax": 0.007246376811594203, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.09420289855072464, "writeRatioMax": 0.09420289855072464 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.07246376811594203, "computeRatioMax": 0.07246376811594203, "endMs": "1665768319224", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "4", "readMsMax": "4", "readRatioAvg": 0.028985507246376812, "readRatioMax": 0.028985507246376812, "recordsRead": "18000", "recordsWritten": "4", "shuffleOutputBytes": "36", "shuffleOutputBytesSpilled": "0", "slotMs": "45", "startMs": "1665768319185", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_manufact_id", "FROM item", "WHERE equal($41, 977)" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "18", "waitMsMax": "18", "waitRatioAvg": 0.13043478260869565, "waitRatioMax": 0.13043478260869565, "writeMsAvg": "27", "writeMsMax": "27", "writeRatioAvg": 0.1956521739130435, "writeRatioMax": 0.1956521739130435 }, { "completedParallelInputs": "5", "computeMsAvg": "94", "computeMsMax": "123", "computeRatioAvg": 0.6811594202898551, "computeRatioMax": 0.8913043478260869, "endMs": "1665768319329", "id": "5", "inputStages": [ "0" ], "name": "S05: Join", "parallelInputs": "5", "readMsAvg": "16", "readMsMax": "24", "readRatioAvg": 0.11594202898550725, "readRatioMax": 0.17391304347826086, "recordsRead": "1442003", "recordsWritten": "41948", "shuffleOutputBytes": "1088856", "shuffleOutputBytesSpilled": "0", "slotMs": "679", "startMs": "1665768319201", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:cs_sold_date_sk, $2:cs_item_sk, $3:cs_ext_discount_amt", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "JOIN", "substeps": [ "$120 := $2, $121 := $3", "INNER HASH JOIN EACH WITH ALL ON $1 = $10" ] }, { "kind": "WRITE", "substeps": [ "$120, $121", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007246376811594203, "waitRatioMax": 0.007246376811594203, "writeMsAvg": "16", "writeMsMax": "30", "writeRatioAvg": 0.11594202898550725, "writeRatioMax": 0.21739130434782608 }, { "completedParallelInputs": "100", "computeMsAvg": "9", "computeMsMax": "19", "computeRatioAvg": 0.06521739130434782, "computeRatioMax": 0.13768115942028986, "endMs": "1665768319396", "id": "6", "inputStages": [ "5" ], "name": "S06: Coalesce", "parallelInputs": "100", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "41948", "recordsWritten": "41948", "shuffleOutputBytes": "1088856", "shuffleOutputBytesSpilled": "0", "slotMs": "5031", "startMs": "1665768319332", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "FROM __stage05_output" ] } ], "waitMsAvg": "2", "waitMsMax": "4", "waitRatioAvg": 0.014492753623188406, "waitRatioMax": 0.028985507246376812, "writeMsAvg": "12", "writeMsMax": "30", "writeRatioAvg": 0.08695652173913043, "writeRatioMax": 0.21739130434782608 }, { "completedParallelInputs": "5", "computeMsAvg": "108", "computeMsMax": "138", "computeRatioAvg": 0.782608695652174, "computeRatioMax": 1, "endMs": "1665768319474", "id": "7", "inputStages": [ "2", "3", "6" ], "name": "S07: Join+", "parallelInputs": "5", "readMsAvg": "14", "readMsMax": "15", "readRatioAvg": 0.10144927536231885, "readRatioMax": 0.10869565217391304, "recordsRead": "1651763", "recordsWritten": "12", "shuffleOutputBytes": "756", "shuffleOutputBytesSpilled": "0", "slotMs": "910", "startMs": "1665768319339", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:cs_sold_date_sk, $21:cs_item_sk, $22:cs_ext_discount_amt", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$120, $121", "FROM __stage06_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $131", "$80 := SHARD_AVG($132)", "$81 := ANY_VALUE($130)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $110, $131 := $90, $132 := $121", "LEFT OUTER HASH JOIN EACH WITH ALL ON $111 = $120" ] }, { "kind": "COMPUTE", "substeps": [ "$90 := UNIQUE_ROW_ID()" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102", "INNER HASH JOIN EACH WITH ALL ON $100 = $30" ] }, { "kind": "JOIN", "substeps": [ "$100 := $20, $101 := $22, $102 := $40", "INNER HASH JOIN EACH WITH ALL ON $21 = $40" ] }, { "kind": "WRITE", "substeps": [ "$80, $81, $140", "TO __stage07_output", "BY HASH($140)" ] } ], "waitMsAvg": "1", "waitMsMax": "4", "waitRatioAvg": 0.007246376811594203, "waitRatioMax": 0.028985507246376812, "writeMsAvg": "5", "writeMsMax": "6", "writeRatioAvg": 0.036231884057971016, "writeRatioMax": 0.043478260869565216 }, { "completedParallelInputs": "1", "computeMsAvg": "5", "computeMsMax": "5", "computeRatioAvg": 0.036231884057971016, "computeRatioMax": 0.036231884057971016, "endMs": "1665768319489", "id": "8", "inputStages": [ "7" ], "name": "S08: Aggregate+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "12", "recordsWritten": "1", "shuffleOutputBytes": "17", "shuffleOutputBytesSpilled": "0", "slotMs": "11", "startMs": "1665768319479", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80, $81, $140", "FROM __stage07_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$60 := SUM($71)" ] }, { "kind": "FILTER", "substeps": [ "greater($71, multiply(NUMERIC<...>, $70))" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$70 := ROOT_AVG($80)", "$71 := ANY_VALUE($81)" ] }, { "kind": "WRITE", "substeps": [ "$60", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007246376811594203, "waitRatioMax": 0.007246376811594203, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.007246376811594203, "writeRatioMax": 0.007246376811594203 }, { "completedParallelInputs": "1", "computeMsAvg": "7", "computeMsMax": "7", "computeRatioAvg": 0.050724637681159424, "computeRatioMax": 0.050724637681159424, "endMs": "1665768319529", "id": "9", "inputStages": [ "8" ], "name": "S09: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1", "recordsWritten": "1", "shuffleOutputBytes": "17", "shuffleOutputBytesSpilled": "0", "slotMs": "41", "startMs": "1665768319495", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60", "FROM __stage08_output" ] }, { "kind": "LIMIT", "substeps": [ "100" ] }, { "kind": "AGGREGATE", "substeps": [ "$50 := SUM($60)" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage09_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.007246376811594203, "waitRatioMax": 0.007246376811594203, "writeMsAvg": "25", "writeMsMax": "25", "writeRatioAvg": 0.18115942028985507, "writeRatioMax": 0.18115942028985507 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "115", "elapsedMs": "530", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "6817" } ], "totalBytesBilled": "48234496", "totalBytesProcessed": "47414112", "totalPartitionsProcessed": "0", "totalSlotMs": "6817", "transferredBytes": "0" }, "startTime": "1665768319023", "totalBytesProcessed": "47414112", "totalSlotMs": "6817" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon6f5810f4_6100_4397_8afd_c0eaccf6fa88" }, "priority": "INTERACTIVE", "query": "select sum(cs_ext_discount_amt) as excess_discount_amount\nfrom \n catalog_sales \n ,item \n ,date_dim\nwhere\ni_manufact_id = 977\nand i_item_sk = cs_item_sk \nand d_date between '2000-01-27' and \n (cast('2000-01-27' + 90 as date))\nand d_date_sk = cs_sold_date_sk \nand cs_ext_discount_amt \n > ( \n select \n 1.3 benchmark.sh benchmark_938pm.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp avg(cs_ext_discount_amt) \n from \n catalog_sales \n ,date_dim\n where \n cs_item_sk = i_item_sk \n and d_date between '2000-01-27' and\n (cast('2000-01-27' + 90 as date))\n and d_date_sk = cs_sold_date_sk \n ) \nlimit 100;", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "5uTFj/TufVlj3c2pXKsgzg==", "id": "test-project-364309:europe-west1.query32_1665777276", "jobReference": { "jobId": "query32_1665777276", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query32_1665777276?location=europe-west1", "statistics": { "creationTime": "1665777277183", "endTime": "1665777277812", "finalExecutionDurationMs": "456", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "47414112", "performanceInsights": { "avgPreviousExecutionMs": "446" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "16", "computeMsMax": "16", "computeRatioAvg": 0.09815950920245399, "computeRatioMax": 0.09815950920245399, "endMs": "1665777277356", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.049079754601226995, "readRatioMax": 0.049079754601226995, "recordsRead": "73049", "recordsWritten": "91", "shuffleOutputBytes": "819", "shuffleOutputBytesSpilled": "0", "slotMs": "43", "startMs": "1665777277315", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:d_date_sk, $11:d_date", "FROM date_dim", "WHERE between($11, 10983, 11073)" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.006134969325153374, "waitRatioMax": 0.006134969325153374, "writeMsAvg": "10", "writeMsMax": "10", "writeRatioAvg": 0.06134969325153374, "writeRatioMax": 0.06134969325153374 }, { "completedParallelInputs": "1", "computeMsAvg": "18", "computeMsMax": "18", "computeRatioAvg": 0.11042944785276074, "computeRatioMax": 0.11042944785276074, "endMs": "1665777277377", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.06134969325153374, "readRatioMax": 0.06134969325153374, "recordsRead": "73049", "recordsWritten": "91", "shuffleOutputBytes": "819", "shuffleOutputBytesSpilled": "0", "slotMs": "40", "startMs": "1665777277344", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_date", "FROM date_dim", "WHERE between($31, 10983, 11073)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.006134969325153374, "waitRatioMax": 0.006134969325153374, "writeMsAvg": "10", "writeMsMax": "10", "writeRatioAvg": 0.06134969325153374, "writeRatioMax": 0.06134969325153374 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.06748466257668712, "computeRatioMax": 0.06748466257668712, "endMs": "1665777277394", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.03680981595092025, "readRatioMax": 0.03680981595092025, "recordsRead": "18000", "recordsWritten": "4", "shuffleOutputBytes": "36", "shuffleOutputBytesSpilled": "0", "slotMs": "32", "startMs": "1665777277360", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_manufact_id", "FROM item", "WHERE equal($41, 977)" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.006134969325153374, "waitRatioMax": 0.006134969325153374, "writeMsAvg": "9", "writeMsMax": "9", "writeRatioAvg": 0.05521472392638037, "writeRatioMax": 0.05521472392638037 }, { "completedParallelInputs": "5", "computeMsAvg": "94", "computeMsMax": "163", "computeRatioAvg": 0.5766871165644172, "computeRatioMax": 1, "endMs": "1665777277516", "id": "5", "inputStages": [ "0" ], "name": "S05: Join", "parallelInputs": "5", "readMsAvg": "13", "readMsMax": "20", "readRatioAvg": 0.07975460122699386, "readRatioMax": 0.12269938650306748, "recordsRead": "1442003", "recordsWritten": "41948", "shuffleOutputBytes": "1088856", "shuffleOutputBytesSpilled": "0", "slotMs": "480", "startMs": "1665777277390", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:cs_sold_date_sk, $2:cs_item_sk, $3:cs_ext_discount_amt", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "JOIN", "substeps": [ "$120 := $2, $121 := $3", "INNER HASH JOIN EACH WITH ALL ON $1 = $10" ] }, { "kind": "WRITE", "substeps": [ "$120, $121", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "2", "waitRatioAvg": 0.006134969325153374, "waitRatioMax": 0.012269938650306749, "writeMsAvg": "9", "writeMsMax": "15", "writeRatioAvg": 0.05521472392638037, "writeRatioMax": 0.09202453987730061 }, { "completedParallelInputs": "100", "computeMsAvg": "8", "computeMsMax": "14", "computeRatioAvg": 0.049079754601226995, "computeRatioMax": 0.08588957055214724, "endMs": "1665777277566", "id": "6", "inputStages": [ "5" ], "name": "S06: Coalesce", "parallelInputs": "100", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "41948", "recordsWritten": "41948", "shuffleOutputBytes": "1088856", "shuffleOutputBytesSpilled": "0", "slotMs": "3253", "startMs": "1665777277519", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "FROM __stage05_output" ] } ], "waitMsAvg": "2", "waitMsMax": "3", "waitRatioAvg": 0.012269938650306749, "waitRatioMax": 0.018404907975460124, "writeMsAvg": "15", "writeMsMax": "19", "writeRatioAvg": 0.09202453987730061, "writeRatioMax": 0.1165644171779141 }, { "completedParallelInputs": "5", "computeMsAvg": "97", "computeMsMax": "126", "computeRatioAvg": 0.5950920245398773, "computeRatioMax": 0.7730061349693251, "endMs": "1665777277679", "id": "7", "inputStages": [ "3", "2", "6" ], "name": "S07: Join+", "parallelInputs": "5", "readMsAvg": "18", "readMsMax": "28", "readRatioAvg": 0.11042944785276074, "readRatioMax": 0.17177914110429449, "recordsRead": "1651763", "recordsWritten": "12", "shuffleOutputBytes": "756", "shuffleOutputBytesSpilled": "0", "slotMs": "541", "startMs": "1665777277523", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:cs_sold_date_sk, $21:cs_item_sk, $22:cs_ext_discount_amt", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$120, $121", "FROM __stage06_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $131", "$80 := SHARD_AVG($132)", "$81 := ANY_VALUE($130)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $110, $131 := $90, $132 := $121", "LEFT OUTER HASH JOIN EACH WITH ALL ON $111 = $120" ] }, { "kind": "COMPUTE", "substeps": [ "$90 := UNIQUE_ROW_ID()" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102", "INNER HASH JOIN EACH WITH ALL ON $100 = $30" ] }, { "kind": "JOIN", "substeps": [ "$100 := $20, $101 := $22, $102 := $40", "INNER HASH JOIN EACH WITH ALL ON $21 = $40" ] }, { "kind": "WRITE", "substeps": [ "$80, $81, $140", "TO __stage07_output", "BY HASH($140)" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.012269938650306749, "waitRatioMax": 0.012269938650306749, "writeMsAvg": "5", "writeMsMax": "6", "writeRatioAvg": 0.03067484662576687, "writeRatioMax": 0.03680981595092025 }, { "completedParallelInputs": "1", "computeMsAvg": "6", "computeMsMax": "6", "computeRatioAvg": 0.03680981595092025, "computeRatioMax": 0.03680981595092025, "endMs": "1665777277700", "id": "8", "inputStages": [ "7" ], "name": "S08: Aggregate+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "12", "recordsWritten": "1", "shuffleOutputBytes": "17", "shuffleOutputBytesSpilled": "0", "slotMs": "8", "startMs": "1665777277691", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80, $81, $140", "FROM __stage07_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$60 := SUM($71)" ] }, { "kind": "FILTER", "substeps": [ "greater($71, multiply(NUMERIC<...>, $70))" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$70 := ROOT_AVG($80)", "$71 := ANY_VALUE($81)" ] }, { "kind": "WRITE", "substeps": [ "$60", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.006134969325153374, "waitRatioMax": 0.006134969325153374, "writeMsAvg": "0", "writeMsMax": "0", "writeRatioAvg": 0, "writeRatioMax": 0 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.06748466257668712, "computeRatioMax": 0.06748466257668712, "endMs": "1665777277739", "id": "9", "inputStages": [ "8" ], "name": "S09: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1", "recordsWritten": "1", "shuffleOutputBytes": "17", "shuffleOutputBytesSpilled": "0", "slotMs": "32", "startMs": "1665777277704", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60", "FROM __stage08_output" ] }, { "kind": "LIMIT", "substeps": [ "100" ] }, { "kind": "AGGREGATE", "substeps": [ "$50 := SUM($60)" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage09_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.006134969325153374, "waitRatioMax": 0.006134969325153374, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.09202453987730061, "writeRatioMax": 0.09202453987730061 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "115", "elapsedMs": "540", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "4412" } ], "totalBytesBilled": "48234496", "totalBytesProcessed": "47414112", "totalPartitionsProcessed": "0", "totalSlotMs": "4412", "transferredBytes": "0" }, "startTime": "1665777277224", "totalBytesProcessed": "47414112", "totalSlotMs": "4412" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anonc7b51cbf_85c3_4017_bea0_ddbae40d98ce" }, "priority": "INTERACTIVE", "query": "select sum(cs_ext_discount_amt) as excess_discount_amount\nfrom \n catalog_sales \n ,item \n ,date_dim\nwhere\ni_manufact_id = 977\nand i_item_sk = cs_item_sk \nand d_date between '2000-01-27' and \n (cast('2000-01-27' + 90 as date))\nand d_date_sk = cs_sold_date_sk \nand cs_ext_discount_amt \n > ( \n select \n 1.3 benchmark.sh benchmark_938pm.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp avg(cs_ext_discount_amt) \n from \n catalog_sales \n ,date_dim\n where \n cs_item_sk = i_item_sk \n and d_date between '2000-01-27' and\n (cast('2000-01-27' + 90 as date))\n and d_date_sk = cs_sold_date_sk \n ) \nlimit 100;", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "GSm2pMqqZSwMmKZikSPTTQ==", "id": "test-project-364309:europe-west1.query32_1665777278", "jobReference": { "jobId": "query32_1665777278", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query32_1665777278?location=europe-west1", "statistics": { "creationTime": "1665777279321", "endTime": "1665777279915", "finalExecutionDurationMs": "383", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "47414112", "performanceInsights": { "avgPreviousExecutionMs": "447" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.07258064516129033, "computeRatioMax": 0.07258064516129033, "endMs": "1665777279494", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.04838709677419355, "readRatioMax": 0.04838709677419355, "recordsRead": "73049", "recordsWritten": "91", "shuffleOutputBytes": "819", "shuffleOutputBytesSpilled": "0", "slotMs": "23", "startMs": "1665777279467", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:d_date_sk, $11:d_date", "FROM date_dim", "WHERE between($11, 10983, 11073)" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.008064516129032258, "waitRatioMax": 0.008064516129032258, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.10483870967741936, "writeRatioMax": 0.10483870967741936 }, { "completedParallelInputs": "1", "computeMsAvg": "10", "computeMsMax": "10", "computeRatioAvg": 0.08064516129032258, "computeRatioMax": 0.08064516129032258, "endMs": "1665777279519", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "5", "readMsMax": "5", "readRatioAvg": 0.04032258064516129, "readRatioMax": 0.04032258064516129, "recordsRead": "73049", "recordsWritten": "91", "shuffleOutputBytes": "819", "shuffleOutputBytesSpilled": "0", "slotMs": "22", "startMs": "1665777279492", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_date", "FROM date_dim", "WHERE between($31, 10983, 11073)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.008064516129032258, "waitRatioMax": 0.008064516129032258, "writeMsAvg": "14", "writeMsMax": "14", "writeRatioAvg": 0.11290322580645161, "writeRatioMax": 0.11290322580645161 }, { "completedParallelInputs": "1", "computeMsAvg": "13", "computeMsMax": "13", "computeRatioAvg": 0.10483870967741936, "computeRatioMax": 0.10483870967741936, "endMs": "1665777279542", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "7", "readMsMax": "7", "readRatioAvg": 0.056451612903225805, "readRatioMax": 0.056451612903225805, "recordsRead": "18000", "recordsWritten": "4", "shuffleOutputBytes": "36", "shuffleOutputBytesSpilled": "0", "slotMs": "38", "startMs": "1665777279504", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_manufact_id", "FROM item", "WHERE equal($41, 977)" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.008064516129032258, "waitRatioMax": 0.008064516129032258, "writeMsAvg": "10", "writeMsMax": "10", "writeRatioAvg": 0.08064516129032258, "writeRatioMax": 0.08064516129032258 }, { "completedParallelInputs": "5", "computeMsAvg": "78", "computeMsMax": "96", "computeRatioAvg": 0.6290322580645161, "computeRatioMax": 0.7741935483870968, "endMs": "1665777279626", "id": "5", "inputStages": [ "0" ], "name": "S05: Join", "parallelInputs": "5", "readMsAvg": "15", "readMsMax": "22", "readRatioAvg": 0.12096774193548387, "readRatioMax": 0.1774193548387097, "recordsRead": "1442003", "recordsWritten": "41948", "shuffleOutputBytes": "1088856", "shuffleOutputBytesSpilled": "0", "slotMs": "409", "startMs": "1665777279533", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:cs_sold_date_sk, $2:cs_item_sk, $3:cs_ext_discount_amt", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "JOIN", "substeps": [ "$120 := $2, $121 := $3", "INNER HASH JOIN EACH WITH ALL ON $1 = $10" ] }, { "kind": "WRITE", "substeps": [ "$120, $121", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.008064516129032258, "waitRatioMax": 0.008064516129032258, "writeMsAvg": "8", "writeMsMax": "13", "writeRatioAvg": 0.06451612903225806, "writeRatioMax": 0.10483870967741936 }, { "completedParallelInputs": "100", "computeMsAvg": "8", "computeMsMax": "17", "computeRatioAvg": 0.06451612903225806, "computeRatioMax": 0.13709677419354838, "endMs": "1665777279677", "id": "6", "inputStages": [ "5" ], "name": "S06: Coalesce", "parallelInputs": "100", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "41948", "recordsWritten": "41948", "shuffleOutputBytes": "1088856", "shuffleOutputBytesSpilled": "0", "slotMs": "3143", "startMs": "1665777279629", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "FROM __stage05_output" ] } ], "waitMsAvg": "2", "waitMsMax": "4", "waitRatioAvg": 0.016129032258064516, "waitRatioMax": 0.03225806451612903, "writeMsAvg": "15", "writeMsMax": "19", "writeRatioAvg": 0.12096774193548387, "writeRatioMax": 0.1532258064516129 }, { "completedParallelInputs": "5", "computeMsAvg": "100", "computeMsMax": "124", "computeRatioAvg": 0.8064516129032258, "computeRatioMax": 1, "endMs": "1665777279765", "id": "7", "inputStages": [ "2", "6", "3" ], "name": "S07: Join+", "parallelInputs": "5", "readMsAvg": "15", "readMsMax": "18", "readRatioAvg": 0.12096774193548387, "readRatioMax": 0.14516129032258066, "recordsRead": "1651763", "recordsWritten": "12", "shuffleOutputBytes": "756", "shuffleOutputBytesSpilled": "0", "slotMs": "563", "startMs": "1665777279635", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:cs_sold_date_sk, $21:cs_item_sk, $22:cs_ext_discount_amt", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$120, $121", "FROM __stage06_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $131", "$80 := SHARD_AVG($132)", "$81 := ANY_VALUE($130)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $110, $131 := $90, $132 := $121", "LEFT OUTER HASH JOIN EACH WITH ALL ON $111 = $120" ] }, { "kind": "COMPUTE", "substeps": [ "$90 := UNIQUE_ROW_ID()" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102", "INNER HASH JOIN EACH WITH ALL ON $100 = $30" ] }, { "kind": "JOIN", "substeps": [ "$100 := $20, $101 := $22, $102 := $40", "INNER HASH JOIN EACH WITH ALL ON $21 = $40" ] }, { "kind": "WRITE", "substeps": [ "$80, $81, $140", "TO __stage07_output", "BY HASH($140)" ] } ], "waitMsAvg": "1", "waitMsMax": "3", "waitRatioAvg": 0.008064516129032258, "waitRatioMax": 0.024193548387096774, "writeMsAvg": "4", "writeMsMax": "5", "writeRatioAvg": 0.03225806451612903, "writeRatioMax": 0.04032258064516129 }, { "completedParallelInputs": "1", "computeMsAvg": "4", "computeMsMax": "4", "computeRatioAvg": 0.03225806451612903, "computeRatioMax": 0.03225806451612903, "endMs": "1665777279777", "id": "8", "inputStages": [ "7" ], "name": "S08: Aggregate+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "12", "recordsWritten": "1", "shuffleOutputBytes": "17", "shuffleOutputBytesSpilled": "0", "slotMs": "6", "startMs": "1665777279770", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80, $81, $140", "FROM __stage07_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$60 := SUM($71)" ] }, { "kind": "FILTER", "substeps": [ "greater($71, multiply(NUMERIC<...>, $70))" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$70 := ROOT_AVG($80)", "$71 := ANY_VALUE($81)" ] }, { "kind": "WRITE", "substeps": [ "$60", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.008064516129032258, "waitRatioMax": 0.008064516129032258, "writeMsAvg": "0", "writeMsMax": "0", "writeRatioAvg": 0, "writeRatioMax": 0 }, { "completedParallelInputs": "1", "computeMsAvg": "6", "computeMsMax": "6", "computeRatioAvg": 0.04838709677419355, "computeRatioMax": 0.04838709677419355, "endMs": "1665777279814", "id": "9", "inputStages": [ "8" ], "name": "S09: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1", "recordsWritten": "1", "shuffleOutputBytes": "17", "shuffleOutputBytesSpilled": "0", "slotMs": "27", "startMs": "1665777279782", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60", "FROM __stage08_output" ] }, { "kind": "LIMIT", "substeps": [ "100" ] }, { "kind": "AGGREGATE", "substeps": [ "$50 := SUM($60)" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage09_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.008064516129032258, "waitRatioMax": 0.008064516129032258, "writeMsAvg": "13", "writeMsMax": "13", "writeRatioAvg": 0.10483870967741936, "writeRatioMax": 0.10483870967741936 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "115", "elapsedMs": "474", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "4306" } ], "totalBytesBilled": "48234496", "totalBytesProcessed": "47414112", "totalPartitionsProcessed": "0", "totalSlotMs": "4306", "transferredBytes": "0" }, "startTime": "1665777279377", "totalBytesProcessed": "47414112", "totalSlotMs": "4306" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anonc966d4df_955e_4323_9491_6e1f67ca6361" }, "priority": "INTERACTIVE", "query": "select sum(cs_ext_discount_amt) as excess_discount_amount\nfrom \n catalog_sales \n ,item \n ,date_dim\nwhere\ni_manufact_id = 977\nand i_item_sk = cs_item_sk \nand d_date between '2000-01-27' and \n (cast('2000-01-27' + 90 as date))\nand d_date_sk = cs_sold_date_sk \nand cs_ext_discount_amt \n > ( \n select \n 1.3 benchmark.sh benchmark_938pm.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp avg(cs_ext_discount_amt) \n from \n catalog_sales \n ,date_dim\n where \n cs_item_sk = i_item_sk \n and d_date between '2000-01-27' and\n (cast('2000-01-27' + 90 as date))\n and d_date_sk = cs_sold_date_sk \n ) \nlimit 100;", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "THaoJGTh5YdP1p0n5JbTng==", "id": "test-project-364309:europe-west1.query32_1665777280", "jobReference": { "jobId": "query32_1665777280", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query32_1665777280?location=europe-west1", "statistics": { "creationTime": "1665777281537", "endTime": "1665777282154", "finalExecutionDurationMs": "406", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "47414112", "performanceInsights": { "avgPreviousExecutionMs": "439" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "21", "computeMsMax": "21", "computeRatioAvg": 0.1810344827586207, "computeRatioMax": 0.1810344827586207, "endMs": "1665777281740", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.06896551724137931, "readRatioMax": 0.06896551724137931, "recordsRead": "73049", "recordsWritten": "91", "shuffleOutputBytes": "819", "shuffleOutputBytesSpilled": "0", "slotMs": "51", "startMs": "1665777281693", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:d_date_sk, $11:d_date", "FROM date_dim", "WHERE between($11, 10983, 11073)" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.008620689655172414, "waitRatioMax": 0.008620689655172414, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.12931034482758622, "writeRatioMax": 0.12931034482758622 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.10344827586206896, "computeRatioMax": 0.10344827586206896, "endMs": "1665777281769", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.06896551724137931, "readRatioMax": 0.06896551724137931, "recordsRead": "73049", "recordsWritten": "91", "shuffleOutputBytes": "819", "shuffleOutputBytesSpilled": "0", "slotMs": "42", "startMs": "1665777281728", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_date", "FROM date_dim", "WHERE between($31, 10983, 11073)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.008620689655172414, "waitRatioMax": 0.008620689655172414, "writeMsAvg": "9", "writeMsMax": "9", "writeRatioAvg": 0.07758620689655173, "writeRatioMax": 0.07758620689655173 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.09482758620689655, "computeRatioMax": 0.09482758620689655, "endMs": "1665777281793", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.05172413793103448, "readRatioMax": 0.05172413793103448, "recordsRead": "18000", "recordsWritten": "4", "shuffleOutputBytes": "36", "shuffleOutputBytesSpilled": "0", "slotMs": "39", "startMs": "1665777281751", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_manufact_id", "FROM item", "WHERE equal($41, 977)" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "6", "waitMsMax": "6", "waitRatioAvg": 0.05172413793103448, "waitRatioMax": 0.05172413793103448, "writeMsAvg": "15", "writeMsMax": "15", "writeRatioAvg": 0.12931034482758622, "writeRatioMax": 0.12931034482758622 }, { "completedParallelInputs": "5", "computeMsAvg": "75", "computeMsMax": "100", "computeRatioAvg": 0.646551724137931, "computeRatioMax": 0.8620689655172413, "endMs": "1665777281854", "id": "5", "inputStages": [ "0" ], "name": "S05: Join", "parallelInputs": "5", "readMsAvg": "12", "readMsMax": "16", "readRatioAvg": 0.10344827586206896, "readRatioMax": 0.13793103448275862, "recordsRead": "1442003", "recordsWritten": "41948", "shuffleOutputBytes": "1088856", "shuffleOutputBytesSpilled": "0", "slotMs": "402", "startMs": "1665777281776", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:cs_sold_date_sk, $2:cs_item_sk, $3:cs_ext_discount_amt", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "JOIN", "substeps": [ "$120 := $2, $121 := $3", "INNER HASH JOIN EACH WITH ALL ON $1 = $10" ] }, { "kind": "WRITE", "substeps": [ "$120, $121", "TO __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.008620689655172414, "waitRatioMax": 0.008620689655172414, "writeMsAvg": "7", "writeMsMax": "9", "writeRatioAvg": 0.0603448275862069, "writeRatioMax": 0.07758620689655173 }, { "completedParallelInputs": "100", "computeMsAvg": "8", "computeMsMax": "14", "computeRatioAvg": 0.06896551724137931, "computeRatioMax": 0.1206896551724138, "endMs": "1665777281911", "id": "6", "inputStages": [ "5" ], "name": "S06: Coalesce", "parallelInputs": "100", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "41948", "recordsWritten": "41948", "shuffleOutputBytes": "1088856", "shuffleOutputBytesSpilled": "0", "slotMs": "3171", "startMs": "1665777281861", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "FROM __stage05_output" ] } ], "waitMsAvg": "1", "waitMsMax": "3", "waitRatioAvg": 0.008620689655172414, "waitRatioMax": 0.02586206896551724, "writeMsAvg": "15", "writeMsMax": "28", "writeRatioAvg": 0.12931034482758622, "writeRatioMax": 0.2413793103448276 }, { "completedParallelInputs": "5", "computeMsAvg": "99", "computeMsMax": "116", "computeRatioAvg": 0.853448275862069, "computeRatioMax": 1, "endMs": "1665777282001", "id": "7", "inputStages": [ "3", "6", "2" ], "name": "S07: Join+", "parallelInputs": "5", "readMsAvg": "14", "readMsMax": "16", "readRatioAvg": 0.1206896551724138, "readRatioMax": 0.13793103448275862, "recordsRead": "1651763", "recordsWritten": "12", "shuffleOutputBytes": "756", "shuffleOutputBytesSpilled": "0", "slotMs": "529", "startMs": "1665777281867", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:cs_sold_date_sk, $21:cs_item_sk, $22:cs_ext_discount_amt", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$120, $121", "FROM __stage06_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $131", "$80 := SHARD_AVG($132)", "$81 := ANY_VALUE($130)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $110, $131 := $90, $132 := $121", "LEFT OUTER HASH JOIN EACH WITH ALL ON $111 = $120" ] }, { "kind": "COMPUTE", "substeps": [ "$90 := UNIQUE_ROW_ID()" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102", "INNER HASH JOIN EACH WITH ALL ON $100 = $30" ] }, { "kind": "JOIN", "substeps": [ "$100 := $20, $101 := $22, $102 := $40", "INNER HASH JOIN EACH WITH ALL ON $21 = $40" ] }, { "kind": "WRITE", "substeps": [ "$80, $81, $140", "TO __stage07_output", "BY HASH($140)" ] } ], "waitMsAvg": "1", "waitMsMax": "3", "waitRatioAvg": 0.008620689655172414, "waitRatioMax": 0.02586206896551724, "writeMsAvg": "4", "writeMsMax": "5", "writeRatioAvg": 0.034482758620689655, "writeRatioMax": 0.04310344827586207 }, { "completedParallelInputs": "1", "computeMsAvg": "5", "computeMsMax": "5", "computeRatioAvg": 0.04310344827586207, "computeRatioMax": 0.04310344827586207, "endMs": "1665777282020", "id": "8", "inputStages": [ "7" ], "name": "S08: Aggregate+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "12", "recordsWritten": "1", "shuffleOutputBytes": "17", "shuffleOutputBytesSpilled": "0", "slotMs": "10", "startMs": "1665777282008", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80, $81, $140", "FROM __stage07_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$60 := SUM($71)" ] }, { "kind": "FILTER", "substeps": [ "greater($71, multiply(NUMERIC<...>, $70))" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$70 := ROOT_AVG($80)", "$71 := ANY_VALUE($81)" ] }, { "kind": "WRITE", "substeps": [ "$60", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.008620689655172414, "waitRatioMax": 0.008620689655172414, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.008620689655172414, "writeRatioMax": 0.008620689655172414 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.09482758620689655, "computeRatioMax": 0.09482758620689655, "endMs": "1665777282061", "id": "9", "inputStages": [ "8" ], "name": "S09: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1", "recordsWritten": "1", "shuffleOutputBytes": "17", "shuffleOutputBytesSpilled": "0", "slotMs": "37", "startMs": "1665777282022", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60", "FROM __stage08_output" ] }, { "kind": "LIMIT", "substeps": [ "100" ] }, { "kind": "AGGREGATE", "substeps": [ "$50 := SUM($60)" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage09_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.008620689655172414, "waitRatioMax": 0.008620689655172414, "writeMsAvg": "30", "writeMsMax": "30", "writeRatioAvg": 0.25862068965517243, "writeRatioMax": 0.25862068965517243 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "115", "elapsedMs": "497", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "4284" } ], "totalBytesBilled": "48234496", "totalBytesProcessed": "47414112", "totalPartitionsProcessed": "0", "totalSlotMs": "4284", "transferredBytes": "0" }, "startTime": "1665777281597", "totalBytesProcessed": "47414112", "totalSlotMs": "4284" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon0ec65d5a_7f35_4357_8b90_b65606601caa" }, "priority": "INTERACTIVE", "query": "select sum(cs_ext_discount_amt) as excess_discount_amount\nfrom \n catalog_sales \n ,item \n ,date_dim\nwhere\ni_manufact_id = 977\nand i_item_sk = cs_item_sk \nand d_date between '2000-01-27' and \n (cast('2000-01-27' + 90 as date))\nand d_date_sk = cs_sold_date_sk \nand cs_ext_discount_amt \n > ( \n select \n 1.3 benchmark.sh benchmark_938pm.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp avg(cs_ext_discount_amt) \n from \n catalog_sales \n ,date_dim\n where \n cs_item_sk = i_item_sk \n and d_date between '2000-01-27' and\n (cast('2000-01-27' + 90 as date))\n and d_date_sk = cs_sold_date_sk \n ) \nlimit 100;", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "ZNfsJUX5/TRLPpEX/SoinQ==", "id": "test-project-364309:europe-west1.query32_1665777283", "jobReference": { "jobId": "query32_1665777283", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query32_1665777283?location=europe-west1", "statistics": { "creationTime": "1665777283763", "endTime": "1665777284422", "finalExecutionDurationMs": "452", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "47414112", "performanceInsights": { "avgPreviousExecutionMs": "436" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.14285714285714285, "computeRatioMax": 0.14285714285714285, "endMs": "1665777283964", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "11", "readMsMax": "11", "readRatioAvg": 0.11224489795918367, "readRatioMax": 0.11224489795918367, "recordsRead": "73049", "recordsWritten": "91", "shuffleOutputBytes": "819", "shuffleOutputBytesSpilled": "0", "slotMs": "36", "startMs": "1665777283924", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:d_date_sk, $11:d_date", "FROM date_dim", "WHERE between($11, 10983, 11073)" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "3", "waitMsMax": "3", "waitRatioAvg": 0.030612244897959183, "waitRatioMax": 0.030612244897959183, "writeMsAvg": "8", "writeMsMax": "8", "writeRatioAvg": 0.08163265306122448, "writeRatioMax": 0.08163265306122448 }, { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.14285714285714285, "computeRatioMax": 0.14285714285714285, "endMs": "1665777283993", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "10", "readMsMax": "10", "readRatioAvg": 0.10204081632653061, "readRatioMax": 0.10204081632653061, "recordsRead": "73049", "recordsWritten": "91", "shuffleOutputBytes": "819", "shuffleOutputBytesSpilled": "0", "slotMs": "51", "startMs": "1665777283956", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_date", "FROM date_dim", "WHERE between($31, 10983, 11073)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.01020408163265306, "waitRatioMax": 0.01020408163265306, "writeMsAvg": "6", "writeMsMax": "6", "writeRatioAvg": 0.061224489795918366, "writeRatioMax": 0.061224489795918366 }, { "completedParallelInputs": "1", "computeMsAvg": "12", "computeMsMax": "12", "computeRatioAvg": 0.12244897959183673, "computeRatioMax": 0.12244897959183673, "endMs": "1665777284042", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.061224489795918366, "readRatioMax": 0.061224489795918366, "recordsRead": "18000", "recordsWritten": "4", "shuffleOutputBytes": "36", "shuffleOutputBytesSpilled": "0", "slotMs": "74", "startMs": "1665777283989", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_manufact_id", "FROM item", "WHERE equal($41, 977)" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "19", "waitMsMax": "19", "waitRatioAvg": 0.19387755102040816, "waitRatioMax": 0.19387755102040816, "writeMsAvg": "26", "writeMsMax": "26", "writeRatioAvg": 0.2653061224489796, "writeRatioMax": 0.2653061224489796 }, { "completedParallelInputs": "5", "computeMsAvg": "80", "computeMsMax": "97", "computeRatioAvg": 0.8163265306122449, "computeRatioMax": 0.9897959183673469, "endMs": "1665777284104", "id": "5", "inputStages": [ "0" ], "name": "S05: Join", "parallelInputs": "5", "readMsAvg": "17", "readMsMax": "23", "readRatioAvg": 0.17346938775510204, "readRatioMax": 0.23469387755102042, "recordsRead": "1442003", "recordsWritten": "41948", "shuffleOutputBytes": "1088856", "shuffleOutputBytesSpilled": "0", "slotMs": "432", "startMs": "1665777284024", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:cs_sold_date_sk, $2:cs_item_sk, $3:cs_ext_discount_amt", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "JOIN", "substeps": [ "$120 := $2, $121 := $3", "INNER HASH JOIN EACH WITH ALL ON $1 = $10" ] }, { "kind": "WRITE", "substeps": [ "$120, $121", "TO __stage05_output" ] } ], "waitMsAvg": "5", "waitMsMax": "5", "waitRatioAvg": 0.05102040816326531, "waitRatioMax": 0.05102040816326531, "writeMsAvg": "7", "writeMsMax": "9", "writeRatioAvg": 0.07142857142857142, "writeRatioMax": 0.09183673469387756 }, { "completedParallelInputs": "100", "computeMsAvg": "8", "computeMsMax": "15", "computeRatioAvg": 0.08163265306122448, "computeRatioMax": 0.15306122448979592, "endMs": "1665777284178", "id": "6", "inputStages": [ "5" ], "name": "S06: Coalesce", "parallelInputs": "100", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "41948", "recordsWritten": "41948", "shuffleOutputBytes": "1088856", "shuffleOutputBytesSpilled": "0", "slotMs": "3181", "startMs": "1665777284115", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "FROM __stage05_output" ] } ], "waitMsAvg": "2", "waitMsMax": "3", "waitRatioAvg": 0.02040816326530612, "waitRatioMax": 0.030612244897959183, "writeMsAvg": "20", "writeMsMax": "31", "writeRatioAvg": 0.20408163265306123, "writeRatioMax": 0.3163265306122449 }, { "completedParallelInputs": "5", "computeMsAvg": "85", "computeMsMax": "98", "computeRatioAvg": 0.8673469387755102, "computeRatioMax": 1, "endMs": "1665777284274", "id": "7", "inputStages": [ "2", "6", "3" ], "name": "S07: Join+", "parallelInputs": "5", "readMsAvg": "29", "readMsMax": "94", "readRatioAvg": 0.29591836734693877, "readRatioMax": 0.9591836734693877, "recordsRead": "1651763", "recordsWritten": "12", "shuffleOutputBytes": "756", "shuffleOutputBytesSpilled": "0", "slotMs": "530", "startMs": "1665777284124", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:cs_sold_date_sk, $21:cs_item_sk, $22:cs_ext_discount_amt", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$120, $121", "FROM __stage06_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $131", "$80 := SHARD_AVG($132)", "$81 := ANY_VALUE($130)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $110, $131 := $90, $132 := $121", "LEFT OUTER HASH JOIN EACH WITH ALL ON $111 = $120" ] }, { "kind": "COMPUTE", "substeps": [ "$90 := UNIQUE_ROW_ID()" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102", "INNER HASH JOIN EACH WITH ALL ON $100 = $30" ] }, { "kind": "JOIN", "substeps": [ "$100 := $20, $101 := $22, $102 := $40", "INNER HASH JOIN EACH WITH ALL ON $21 = $40" ] }, { "kind": "WRITE", "substeps": [ "$80, $81, $140", "TO __stage07_output", "BY HASH($140)" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.01020408163265306, "waitRatioMax": 0.01020408163265306, "writeMsAvg": "3", "writeMsMax": "5", "writeRatioAvg": 0.030612244897959183, "writeRatioMax": 0.05102040816326531 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.09183673469387756, "computeRatioMax": 0.09183673469387756, "endMs": "1665777284302", "id": "8", "inputStages": [ "7" ], "name": "S08: Aggregate+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "12", "recordsWritten": "1", "shuffleOutputBytes": "17", "shuffleOutputBytesSpilled": "0", "slotMs": "10", "startMs": "1665777284290", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80, $81, $140", "FROM __stage07_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$60 := SUM($71)" ] }, { "kind": "FILTER", "substeps": [ "greater($71, multiply(NUMERIC<...>, $70))" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$70 := ROOT_AVG($80)", "$71 := ANY_VALUE($81)" ] }, { "kind": "WRITE", "substeps": [ "$60", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.01020408163265306, "waitRatioMax": 0.01020408163265306, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.01020408163265306, "writeRatioMax": 0.01020408163265306 }, { "completedParallelInputs": "1", "computeMsAvg": "6", "computeMsMax": "6", "computeRatioAvg": 0.061224489795918366, "computeRatioMax": 0.061224489795918366, "endMs": "1665777284342", "id": "9", "inputStages": [ "8" ], "name": "S09: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1", "recordsWritten": "1", "shuffleOutputBytes": "17", "shuffleOutputBytesSpilled": "0", "slotMs": "23", "startMs": "1665777284305", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60", "FROM __stage08_output" ] }, { "kind": "LIMIT", "substeps": [ "100" ] }, { "kind": "AGGREGATE", "substeps": [ "$50 := SUM($60)" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage09_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.01020408163265306, "waitRatioMax": 0.01020408163265306, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.16326530612244897, "writeRatioMax": 0.16326530612244897 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "115", "elapsedMs": "538", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "4312" } ], "totalBytesBilled": "48234496", "totalBytesProcessed": "47414112", "totalPartitionsProcessed": "0", "totalSlotMs": "4312", "transferredBytes": "0" }, "startTime": "1665777283832", "totalBytesProcessed": "47414112", "totalSlotMs": "4312" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
{ "configuration": { "jobType": "QUERY", "query": { "defaultDataset": { "datasetId": "call_center", "projectId": "test-project-364309" }, "destinationTable": { "datasetId": "_a0aa936c5cea243efb3c6dc011c66cfad39bfcb7", "projectId": "test-project-364309", "tableId": "anon0b3b24ab_7d5d_4e7d_a8b8_0148876c1960" }, "priority": "INTERACTIVE", "query": "select sum(cs_ext_discount_amt) as excess_discount_amount\nfrom \n catalog_sales \n ,item \n ,date_dim\nwhere\ni_manufact_id = 977\nand i_item_sk = cs_item_sk \nand d_date between '2000-01-27' and \n (cast('2000-01-27' + 90 as date))\nand d_date_sk = cs_sold_date_sk \nand cs_ext_discount_amt \n > ( \n select \n 1.3 benchmark.sh benchmark_938pm.sh benchmark_alaa.sh json_bq_result_per_query queries query query_alaa query_not_for_benchmarking query_results query_results_alaa results tmp validation_set_tmp avg(cs_ext_discount_amt) \n from \n catalog_sales \n ,date_dim\n where \n cs_item_sk = i_item_sk \n and d_date between '2000-01-27' and\n (cast('2000-01-27' + 90 as date))\n and d_date_sk = cs_sold_date_sk \n ) \nlimit 100;", "useLegacySql": false, "useQueryCache": false, "writeDisposition": "WRITE_TRUNCATE" } }, "etag": "5c5wymHjX9d82c25KyKrOQ==", "id": "test-project-364309:europe-west1.query32_1665777285", "jobReference": { "jobId": "query32_1665777285", "location": "europe-west1", "projectId": "test-project-364309" }, "kind": "bigquery#job", "principal_subject": "user:jesuispotatos@gmail.com", "selfLink": "https://bigquery.googleapis.com/bigquery/v2/projects/test-project-364309/jobs/query32_1665777285?location=europe-west1", "statistics": { "creationTime": "1665777285958", "endTime": "1665777286599", "finalExecutionDurationMs": "418", "query": { "billingTier": 1, "cacheHit": false, "estimatedBytesProcessed": "47414112", "performanceInsights": { "avgPreviousExecutionMs": "437" }, "queryPlan": [ { "completedParallelInputs": "1", "computeMsAvg": "14", "computeMsMax": "14", "computeRatioAvg": 0.11290322580645161, "computeRatioMax": 0.11290322580645161, "endMs": "1665777286167", "id": "0", "name": "S00: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.06451612903225806, "readRatioMax": 0.06451612903225806, "recordsRead": "73049", "recordsWritten": "91", "shuffleOutputBytes": "819", "shuffleOutputBytesSpilled": "0", "slotMs": "40", "startMs": "1665777286127", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$10:d_date_sk, $11:d_date", "FROM date_dim", "WHERE between($11, 10983, 11073)" ] }, { "kind": "WRITE", "substeps": [ "$10", "TO __stage00_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.008064516129032258, "waitRatioMax": 0.008064516129032258, "writeMsAvg": "10", "writeMsMax": "10", "writeRatioAvg": 0.08064516129032258, "writeRatioMax": 0.08064516129032258 }, { "completedParallelInputs": "1", "computeMsAvg": "11", "computeMsMax": "11", "computeRatioAvg": 0.08870967741935484, "computeRatioMax": 0.08870967741935484, "endMs": "1665777286195", "id": "2", "name": "S02: Input", "parallelInputs": "1", "readMsAvg": "6", "readMsMax": "6", "readRatioAvg": 0.04838709677419355, "readRatioMax": 0.04838709677419355, "recordsRead": "73049", "recordsWritten": "91", "shuffleOutputBytes": "819", "shuffleOutputBytesSpilled": "0", "slotMs": "27", "startMs": "1665777286161", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$30:d_date_sk, $31:d_date", "FROM date_dim", "WHERE between($31, 10983, 11073)" ] }, { "kind": "WRITE", "substeps": [ "$30", "TO __stage02_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.008064516129032258, "waitRatioMax": 0.008064516129032258, "writeMsAvg": "20", "writeMsMax": "20", "writeRatioAvg": 0.16129032258064516, "writeRatioMax": 0.16129032258064516 }, { "completedParallelInputs": "1", "computeMsAvg": "15", "computeMsMax": "15", "computeRatioAvg": 0.12096774193548387, "computeRatioMax": 0.12096774193548387, "endMs": "1665777286244", "id": "3", "name": "S03: Input", "parallelInputs": "1", "readMsAvg": "8", "readMsMax": "8", "readRatioAvg": 0.06451612903225806, "readRatioMax": 0.06451612903225806, "recordsRead": "18000", "recordsWritten": "4", "shuffleOutputBytes": "36", "shuffleOutputBytesSpilled": "0", "slotMs": "41", "startMs": "1665777286196", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$40:i_item_sk, $41:i_manufact_id", "FROM item", "WHERE equal($41, 977)" ] }, { "kind": "WRITE", "substeps": [ "$40", "TO __stage03_output" ] } ], "waitMsAvg": "19", "waitMsMax": "19", "waitRatioAvg": 0.1532258064516129, "waitRatioMax": 0.1532258064516129, "writeMsAvg": "16", "writeMsMax": "16", "writeRatioAvg": 0.12903225806451613, "writeRatioMax": 0.12903225806451613 }, { "completedParallelInputs": "5", "computeMsAvg": "92", "computeMsMax": "107", "computeRatioAvg": 0.7419354838709677, "computeRatioMax": 0.8629032258064516, "endMs": "1665777286304", "id": "5", "inputStages": [ "0" ], "name": "S05: Join", "parallelInputs": "5", "readMsAvg": "16", "readMsMax": "20", "readRatioAvg": 0.12903225806451613, "readRatioMax": 0.16129032258064516, "recordsRead": "1442003", "recordsWritten": "41948", "shuffleOutputBytes": "1088856", "shuffleOutputBytesSpilled": "0", "slotMs": "489", "startMs": "1665777286220", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$1:cs_sold_date_sk, $2:cs_item_sk, $3:cs_ext_discount_amt", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$10", "FROM __stage00_output" ] }, { "kind": "JOIN", "substeps": [ "$120 := $2, $121 := $3", "INNER HASH JOIN EACH WITH ALL ON $1 = $10" ] }, { "kind": "WRITE", "substeps": [ "$120, $121", "TO __stage05_output" ] } ], "waitMsAvg": "2", "waitMsMax": "2", "waitRatioAvg": 0.016129032258064516, "waitRatioMax": 0.016129032258064516, "writeMsAvg": "8", "writeMsMax": "10", "writeRatioAvg": 0.06451612903225806, "writeRatioMax": 0.08064516129032258 }, { "completedParallelInputs": "100", "computeMsAvg": "8", "computeMsMax": "17", "computeRatioAvg": 0.06451612903225806, "computeRatioMax": 0.13709677419354838, "endMs": "1665777286375", "id": "6", "inputStages": [ "5" ], "name": "S06: Coalesce", "parallelInputs": "100", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "41948", "recordsWritten": "41948", "shuffleOutputBytes": "1088856", "shuffleOutputBytesSpilled": "0", "slotMs": "3246", "startMs": "1665777286318", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "FROM __stage05_output" ] } ], "waitMsAvg": "3", "waitMsMax": "5", "waitRatioAvg": 0.024193548387096774, "waitRatioMax": 0.04032258064516129, "writeMsAvg": "14", "writeMsMax": "21", "writeRatioAvg": 0.11290322580645161, "writeRatioMax": 0.1693548387096774 }, { "completedParallelInputs": "5", "computeMsAvg": "103", "computeMsMax": "124", "computeRatioAvg": 0.8306451612903226, "computeRatioMax": 1, "endMs": "1665777286434", "id": "7", "inputStages": [ "6", "3", "2" ], "name": "S07: Join+", "parallelInputs": "5", "readMsAvg": "13", "readMsMax": "16", "readRatioAvg": 0.10483870967741936, "readRatioMax": 0.12903225806451613, "recordsRead": "1651763", "recordsWritten": "12", "shuffleOutputBytes": "756", "shuffleOutputBytesSpilled": "0", "slotMs": "558", "startMs": "1665777286325", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$20:cs_sold_date_sk, $21:cs_item_sk, $22:cs_ext_discount_amt", "FROM catalog_sales" ] }, { "kind": "READ", "substeps": [ "$40", "FROM __stage03_output" ] }, { "kind": "READ", "substeps": [ "$30", "FROM __stage02_output" ] }, { "kind": "READ", "substeps": [ "$120, $121", "FROM __stage06_output" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $140 := $131", "$80 := SHARD_AVG($132)", "$81 := ANY_VALUE($130)" ] }, { "kind": "JOIN", "substeps": [ "$130 := $110, $131 := $90, $132 := $121", "LEFT OUTER HASH JOIN EACH WITH ALL ON $111 = $120" ] }, { "kind": "COMPUTE", "substeps": [ "$90 := UNIQUE_ROW_ID()" ] }, { "kind": "JOIN", "substeps": [ "$110 := $101, $111 := $102", "INNER HASH JOIN EACH WITH ALL ON $100 = $30" ] }, { "kind": "JOIN", "substeps": [ "$100 := $20, $101 := $22, $102 := $40", "INNER HASH JOIN EACH WITH ALL ON $21 = $40" ] }, { "kind": "WRITE", "substeps": [ "$80, $81, $140", "TO __stage07_output", "BY HASH($140)" ] } ], "waitMsAvg": "2", "waitMsMax": "3", "waitRatioAvg": 0.016129032258064516, "waitRatioMax": 0.024193548387096774, "writeMsAvg": "4", "writeMsMax": "5", "writeRatioAvg": 0.03225806451612903, "writeRatioMax": 0.04032258064516129 }, { "completedParallelInputs": "1", "computeMsAvg": "6", "computeMsMax": "6", "computeRatioAvg": 0.04838709677419355, "computeRatioMax": 0.04838709677419355, "endMs": "1665777286456", "id": "8", "inputStages": [ "7" ], "name": "S08: Aggregate+", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "12", "recordsWritten": "1", "shuffleOutputBytes": "17", "shuffleOutputBytesSpilled": "0", "slotMs": "9", "startMs": "1665777286446", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$80, $81, $140", "FROM __stage07_output" ] }, { "kind": "AGGREGATE", "substeps": [ "$60 := SUM($71)" ] }, { "kind": "FILTER", "substeps": [ "greater($71, multiply(NUMERIC<...>, $70))" ] }, { "kind": "AGGREGATE", "substeps": [ "GROUP BY $150 := $140", "$70 := ROOT_AVG($80)", "$71 := ANY_VALUE($81)" ] }, { "kind": "WRITE", "substeps": [ "$60", "TO __stage08_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.008064516129032258, "waitRatioMax": 0.008064516129032258, "writeMsAvg": "1", "writeMsMax": "1", "writeRatioAvg": 0.008064516129032258, "writeRatioMax": 0.008064516129032258 }, { "completedParallelInputs": "1", "computeMsAvg": "9", "computeMsMax": "9", "computeRatioAvg": 0.07258064516129033, "computeRatioMax": 0.07258064516129033, "endMs": "1665777286503", "id": "9", "inputStages": [ "8" ], "name": "S09: Output", "parallelInputs": "1", "readMsAvg": "0", "readMsMax": "0", "readRatioAvg": 0, "readRatioMax": 0, "recordsRead": "1", "recordsWritten": "1", "shuffleOutputBytes": "17", "shuffleOutputBytesSpilled": "0", "slotMs": "34", "startMs": "1665777286467", "status": "COMPLETE", "steps": [ { "kind": "READ", "substeps": [ "$60", "FROM __stage08_output" ] }, { "kind": "LIMIT", "substeps": [ "100" ] }, { "kind": "AGGREGATE", "substeps": [ "$50 := SUM($60)" ] }, { "kind": "WRITE", "substeps": [ "$50", "TO __stage09_output" ] } ], "waitMsAvg": "1", "waitMsMax": "1", "waitRatioAvg": 0.008064516129032258, "waitRatioMax": 0.008064516129032258, "writeMsAvg": "27", "writeMsMax": "27", "writeRatioAvg": 0.21774193548387097, "writeRatioMax": 0.21774193548387097 } ], "referencedTables": [ { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "item" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "date_dim" }, { "datasetId": "call_center", "projectId": "test-project-364309", "tableId": "catalog_sales" } ], "statementType": "SELECT", "timeline": [ { "completedUnits": "115", "elapsedMs": "521", "estimatedRunnableUnits": "0", "pendingUnits": "0", "totalSlotMs": "4449" } ], "totalBytesBilled": "48234496", "totalBytesProcessed": "47414112", "totalPartitionsProcessed": "0", "totalSlotMs": "4449", "transferredBytes": "0" }, "startTime": "1665777286018", "totalBytesProcessed": "47414112", "totalSlotMs": "4449" }, "status": { "state": "DONE" }, "user_email": "jesuispotatos@gmail.com" }
